/*! jQuery v2.2.3 | (c) jQuery Foundation | jquery.org/license */
!function(n,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=n.document?t(n,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(n)}("undefined"!=typeof window?window:this,function(n,t){function ii(n){var t=!!n&&"length"in n&&n.length,r=i.type(n);return"function"===r||i.isWindow(n)?!1:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in n}function ri(n,t,r){if(i.isFunction(t))return i.grep(n,function(n,i){return!!t.call(n,i,n)!==r});if(t.nodeType)return i.grep(n,function(n){return n===t!==r});if("string"==typeof t){if(bf.test(t))return i.filter(t,n,r);t=i.filter(t,n)}return i.grep(n,function(n){return lt.call(t,n)>-1!==r})}function hr(n,t){while((n=n[t])&&1!==n.nodeType);return n}function kf(n){var t={};return i.each(n.match(h)||[],function(n,i){t[i]=!0}),t}function yt(){u.removeEventListener("DOMContentLoaded",yt);n.removeEventListener("load",yt);i.ready()}function et(){this.expando=i.expando+et.uid++}function lr(n,t,r){var u;if(void 0===r&&1===n.nodeType)if(u="data-"+t.replace(cr,"-$&").toLowerCase(),r=n.getAttribute(u),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:df.test(r)?i.parseJSON(r):r}catch(f){}e.set(n,t,r)}else r=void 0;return r}function vr(n,t,r,u){var h,e=1,l=20,c=u?function(){return u.cur()}:function(){return i.css(n,t,"")},s=c(),o=r&&r[3]||(i.cssNumber[t]?"":"px"),f=(i.cssNumber[t]||"px"!==o&&+s)&&ot.exec(i.css(n,t));if(f&&f[3]!==o){o=o||f[3];r=r||[];f=+s||1;do e=e||".5",f/=e,i.style(n,t,f+o);while(e!==(e=c()/s)&&1!==e&&--l)}return r&&(f=+f||+s||0,h=r[1]?f+(r[1]+1)*r[2]:+r[2],u&&(u.unit=o,u.start=f,u.end=h)),h}function o(n,t){var r="undefined"!=typeof n.getElementsByTagName?n.getElementsByTagName(t||"*"):"undefined"!=typeof n.querySelectorAll?n.querySelectorAll(t||"*"):[];return void 0===t||t&&i.nodeName(n,t)?i.merge([n],r):r}function ui(n,t){for(var i=0,u=n.length;u>i;i++)r.set(n[i],"globalEval",!t||r.get(t[i],"globalEval"))}function kr(n,t,r,u,f){for(var e,s,p,a,w,v,h=t.createDocumentFragment(),y=[],l=0,b=n.length;b>l;l++)if(e=n[l],e||0===e)if("object"===i.type(e))i.merge(y,e.nodeType?[e]:e);else if(br.test(e)){for(s=s||h.appendChild(t.createElement("div")),p=(pr.exec(e)||["",""])[1].toLowerCase(),a=c[p]||c._default,s.innerHTML=a[1]+i.htmlPrefilter(e)+a[2],v=a[0];v--;)s=s.lastChild;i.merge(y,s.childNodes);s=h.firstChild;s.textContent=""}else y.push(t.createTextNode(e));for(h.textContent="",l=0;e=y[l++];)if(u&&i.inArray(e,u)>-1)f&&f.push(e);else if(w=i.contains(e.ownerDocument,e),s=o(h.appendChild(e),"script"),w&&ui(s),r)for(v=0;e=s[v++];)wr.test(e.type||"")&&r.push(e);return h}function pt(){return!0}function nt(){return!1}function gr(){try{return u.activeElement}catch(n){}}function fi(n,t,r,u,f,e){var o,s;if("object"==typeof t){"string"!=typeof r&&(u=u||r,r=void 0);for(s in t)fi(n,s,r,u,t[s],e);return n}if(null==u&&null==f?(f=r,u=r=void 0):null==f&&("string"==typeof r?(f=u,u=void 0):(f=u,u=r,r=void 0)),f===!1)f=nt;else if(!f)return n;return 1===e&&(o=f,f=function(n){return i().off(n),o.apply(this,arguments)},f.guid=o.guid||(o.guid=i.guid++)),n.each(function(){i.event.add(this,t,f,u,r)})}function nu(n,t){return i.nodeName(n,"table")&&i.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function ee(n){return n.type=(null!==n.getAttribute("type"))+"/"+n.type,n}function oe(n){var t=ue.exec(n.type);return t?n.type=t[1]:n.removeAttribute("type"),n}function tu(n,t){var u,c,f,s,h,l,a,o;if(1===t.nodeType){if(r.hasData(n)&&(s=r.access(n),h=r.set(t,s),o=s.events)){delete h.handle;h.events={};for(f in o)for(u=0,c=o[f].length;c>u;u++)i.event.add(t,f,o[f][u])}e.hasData(n)&&(l=e.access(n),a=i.extend({},l),e.set(t,a))}}function se(n,t){var i=t.nodeName.toLowerCase();"input"===i&&yr.test(n.type)?t.checked=n.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=n.defaultValue)}function b(n,t,u,e){t=gi.apply([],t);var l,p,c,a,s,w,h=0,v=n.length,d=v-1,y=t[0],k=i.isFunction(y);if(k||v>1&&"string"==typeof y&&!f.checkClone&&re.test(y))return n.each(function(i){var r=n.eq(i);k&&(t[0]=y.call(this,i,r.html()));b(r,t,u,e)});if(v&&(l=kr(t,n[0].ownerDocument,!1,n,e),p=l.firstChild,1===l.childNodes.length&&(l=p),p||e)){for(c=i.map(o(l,"script"),ee),a=c.length;v>h;h++)s=l,h!==d&&(s=i.clone(s,!0,!0),a&&i.merge(c,o(s,"script"))),u.call(n[h],s,h);if(a)for(w=c[c.length-1].ownerDocument,i.map(c,oe),h=0;a>h;h++)s=c[h],wr.test(s.type||"")&&!r.access(s,"globalEval")&&i.contains(w,s)&&(s.src?i._evalUrl&&i._evalUrl(s.src):i.globalEval(s.textContent.replace(fe,"")))}return n}function iu(n,t,r){for(var u,e=t?i.filter(t,n):n,f=0;null!=(u=e[f]);f++)r||1!==u.nodeType||i.cleanData(o(u)),u.parentNode&&(r&&i.contains(u.ownerDocument,u)&&ui(o(u,"script")),u.parentNode.removeChild(u));return n}function ru(n,t){var r=i(t.createElement(n)).appendTo(t.body),u=i.css(r[0],"display");return r.detach(),u}function oi(n){var r=u,t=ei[n];return t||(t=ru(n,r),"none"!==t&&t||(wt=(wt||i("<iframe frameborder='0' width='0' height='0'/>")).appendTo(r.documentElement),r=wt[0].contentDocument,r.write(),r.close(),t=ru(n,r),wt.detach()),ei[n]=t),t}function tt(n,t,r){var o,s,h,u,e=n.style;return r=r||bt(n),u=r?r.getPropertyValue(t)||r[t]:void 0,""!==u&&void 0!==u||i.contains(n.ownerDocument,n)||(u=i.style(n,t)),r&&!f.pixelMarginRight()&&si.test(u)&&uu.test(t)&&(o=e.width,s=e.minWidth,h=e.maxWidth,e.minWidth=e.maxWidth=e.width=u,u=r.width,e.width=o,e.minWidth=s,e.maxWidth=h),void 0!==u?u+"":u}function ci(n,t){return{get:function(){return n()?void delete this.get:(this.get=t).apply(this,arguments)}}}function su(n){if(n in ou)return n;for(var i=n[0].toUpperCase()+n.slice(1),t=eu.length;t--;)if(n=eu[t]+i,n in ou)return n}function hu(n,t,i){var r=ot.exec(t);return r?Math.max(0,r[2]-(i||0))+(r[3]||"px"):t}function cu(n,t,r,u,f){for(var e=r===(u?"border":"content")?4:"width"===t?1:0,o=0;4>e;e+=2)"margin"===r&&(o+=i.css(n,r+w[e],!0,f)),u?("content"===r&&(o-=i.css(n,"padding"+w[e],!0,f)),"margin"!==r&&(o-=i.css(n,"border"+w[e]+"Width",!0,f))):(o+=i.css(n,"padding"+w[e],!0,f),"padding"!==r&&(o+=i.css(n,"border"+w[e]+"Width",!0,f)));return o}function lu(t,r,e){var h=!0,o="width"===r?t.offsetWidth:t.offsetHeight,s=bt(t),c="border-box"===i.css(t,"boxSizing",!1,s);if(u.msFullscreenElement&&n.top!==n&&t.getClientRects().length&&(o=Math.round(100*t.getBoundingClientRect()[r])),0>=o||null==o){if(o=tt(t,r,s),(0>o||null==o)&&(o=t.style[r]),si.test(o))return o;h=c&&(f.boxSizingReliable()||o===t.style[r]);o=parseFloat(o)||0}return o+cu(t,r,e||(c?"border":"content"),h,s)+"px"}function au(n,t){for(var e,u,s,o=[],f=0,h=n.length;h>f;f++)u=n[f],u.style&&(o[f]=r.get(u,"olddisplay"),e=u.style.display,t?(o[f]||"none"!==e||(u.style.display=""),""===u.style.display&&st(u)&&(o[f]=r.access(u,"olddisplay",oi(u.nodeName)))):(s=st(u),"none"===e&&s||r.set(u,"olddisplay",s?e:i.css(u,"display"))));for(f=0;h>f;f++)u=n[f],u.style&&(t&&"none"!==u.style.display&&""!==u.style.display||(u.style.display=t?o[f]||"":"none"));return n}function s(n,t,i,r,u){return new s.prototype.init(n,t,i,r,u)}function pu(){return n.setTimeout(function(){it=void 0}),it=i.now()}function dt(n,t){var r,u=0,i={height:n};for(t=t?1:0;4>u;u+=2-t)r=w[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function wu(n,t,i){for(var u,f=(l.tweeners[t]||[]).concat(l.tweeners["*"]),r=0,e=f.length;e>r;r++)if(u=f[r].call(i,t,n))return u}function le(n,t,u){var f,a,p,v,o,w,h,b,l=this,y={},s=n.style,c=n.nodeType&&st(n),e=r.get(n,"fxshow");u.queue||(o=i._queueHooks(n,"fx"),null==o.unqueued&&(o.unqueued=0,w=o.empty.fire,o.empty.fire=function(){o.unqueued||w()}),o.unqueued++,l.always(function(){l.always(function(){o.unqueued--;i.queue(n,"fx").length||o.empty.fire()})}));1===n.nodeType&&("height"in t||"width"in t)&&(u.overflow=[s.overflow,s.overflowX,s.overflowY],h=i.css(n,"display"),b="none"===h?r.get(n,"olddisplay")||oi(n.nodeName):h,"inline"===b&&"none"===i.css(n,"float")&&(s.display="inline-block"));u.overflow&&(s.overflow="hidden",l.always(function(){s.overflow=u.overflow[0];s.overflowX=u.overflow[1];s.overflowY=u.overflow[2]}));for(f in t)if(a=t[f],vu.exec(a)){if(delete t[f],p=p||"toggle"===a,a===(c?"hide":"show")){if("show"!==a||!e||void 0===e[f])continue;c=!0}y[f]=e&&e[f]||i.style(n,f)}else h=void 0;if(i.isEmptyObject(y))"inline"===("none"===h?oi(n.nodeName):h)&&(s.display=h);else{e?"hidden"in e&&(c=e.hidden):e=r.access(n,"fxshow",{});p&&(e.hidden=!c);c?i(n).show():l.done(function(){i(n).hide()});l.done(function(){var t;r.remove(n,"fxshow");for(t in y)i.style(n,t,y[t])});for(f in y)v=wu(c?e[f]:0,f,l),f in e||(e[f]=v.start,c&&(v.end=v.start,v.start="width"===f||"height"===f?1:0))}}function ae(n,t){var r,f,e,u,o;for(r in n)if(f=i.camelCase(r),e=t[f],u=n[r],i.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u);delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function l(n,t,r){var e,o,s=0,a=l.prefilters.length,f=i.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var s=it||pu(),t=Math.max(0,u.startTime+u.duration-s),h=t/u.duration||0,i=1-h,r=0,e=u.tweens.length;e>r;r++)u.tweens[r].run(i);return f.notifyWith(n,[u,i,t]),1>i&&e?t:(f.resolveWith(n,[u]),!1)},u=f.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{},easing:i.easing._default},r),originalProperties:t,originalOptions:r,startTime:it||pu(),duration:r.duration,tweens:[],createTween:function(t,r){var f=i.Tween(n,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(f),f},stop:function(t){var i=0,r=t?u.tweens.length:0;if(o)return this;for(o=!0;r>i;i++)u.tweens[i].run(1);return t?(f.notifyWith(n,[u,1,0]),f.resolveWith(n,[u,t])):f.rejectWith(n,[u,t]),this}}),h=u.props;for(ae(h,u.opts.specialEasing);a>s;s++)if(e=l.prefilters[s].call(u,n,h,u.opts))return i.isFunction(e.stop)&&(i._queueHooks(u.elem,u.opts.queue).stop=i.proxy(e.stop,e)),e;return i.map(h,wu,u),i.isFunction(u.opts.start)&&u.opts.start.call(n,u),i.fx.timer(i.extend(c,{elem:n,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function k(n){return n.getAttribute&&n.getAttribute("class")||""}function ff(n){return function(t,r){"string"!=typeof t&&(r=t,t="*");var u,f=0,e=t.toLowerCase().match(h)||[];if(i.isFunction(r))while(u=e[f++])"+"===u[0]?(u=u.slice(1)||"*",(n[u]=n[u]||[]).unshift(r)):(n[u]=n[u]||[]).push(r)}}function ef(n,t,r,u){function e(s){var h;return f[s]=!0,i.each(n[s]||[],function(n,i){var s=i(t,r,u);return"string"!=typeof s||o||f[s]?o?!(h=s):void 0:(t.dataTypes.unshift(s),e(s),!1)}),h}var f={},o=n===yi;return e(t.dataTypes[0])||!f["*"]&&e("*")}function wi(n,t){var r,u,f=i.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((f[r]?n:u||(u={}))[r]=t[r]);return u&&i.extend(!0,n,u),n}function be(n,t,i){for(var e,u,f,o,s=n.contents,r=n.dataTypes;"*"===r[0];)r.shift(),void 0===e&&(e=n.mimeType||t.getResponseHeader("Content-Type"));if(e)for(u in s)if(s[u]&&s[u].test(e)){r.unshift(u);break}if(r[0]in i)f=r[0];else{for(u in i){if(!r[0]||n.converters[u+" "+r[0]]){f=u;break}o||(o=u)}f=f||o}if(f)return(f!==r[0]&&r.unshift(f),i[f])}function ke(n,t,i,r){var h,u,f,s,e,o={},c=n.dataTypes.slice();if(c[1])for(f in n.converters)o[f.toLowerCase()]=n.converters[f];for(u=c.shift();u;)if(n.responseFields[u]&&(i[n.responseFields[u]]=t),!e&&r&&n.dataFilter&&(t=n.dataFilter(t,n.dataType)),e=u,u=c.shift())if("*"===u)u=e;else if("*"!==e&&e!==u){if(f=o[e+" "+u]||o["* "+u],!f)for(h in o)if(s=h.split(" "),s[1]===u&&(f=o[e+" "+s[0]]||o["* "+s[0]])){f===!0?f=o[h]:o[h]!==!0&&(u=s[0],c.unshift(s[1]));break}if(f!==!0)if(f&&n.throws)t=f(t);else try{t=f(t)}catch(l){return{state:"parsererror",error:f?l:"No conversion from "+e+" to "+u}}}return{state:"success",data:t}}function bi(n,t,r,u){var f;if(i.isArray(t))i.each(t,function(t,i){r||ge.test(n)?u(n,i):bi(n+"["+("object"==typeof i&&null!=i?t:"")+"]",i,r,u)});else if(r||"object"!==i.type(t))u(n,t);else for(f in t)bi(n+"["+f+"]",t[f],r,u)}function hf(n){return i.isWindow(n)?n:9===n.nodeType&&n.defaultView}var y=[],u=n.document,v=y.slice,gi=y.concat,ti=y.push,lt=y.indexOf,at={},af=at.toString,ft=at.hasOwnProperty,f={},nr="2.2.3",i=function(n,t){return new i.fn.init(n,t)},vf=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,yf=/^-ms-/,pf=/-([\da-z])/gi,wf=function(n,t){return t.toUpperCase()},p,ur,fr,er,or,sr,h,vt,a,g,br,wt,ei,it,kt,vu,yu,bu,rt,ku,du,gt,gu,nf,li,sf,ut,ki,ni,di,cf,lf;i.fn=i.prototype={jquery:nr,constructor:i,selector:"",length:0,toArray:function(){return v.call(this)},get:function(n){return null!=n?0>n?this[n+this.length]:this[n]:v.call(this)},pushStack:function(n){var t=i.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(n){return i.each(this,n)},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(0>n?i:0);return this.pushStack(t>=0&&i>t?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:ti,sort:y.sort,splice:y.splice};i.extend=i.fn.extend=function(){var e,f,r,t,o,s,n=arguments[0]||{},u=1,c=arguments.length,h=!1;for("boolean"==typeof n&&(h=n,n=arguments[u]||{},u++),"object"==typeof n||i.isFunction(n)||(n={}),u===c&&(n=this,u--);c>u;u++)if(null!=(e=arguments[u]))for(f in e)r=n[f],t=e[f],n!==t&&(h&&t&&(i.isPlainObject(t)||(o=i.isArray(t)))?(o?(o=!1,s=r&&i.isArray(r)?r:[]):s=r&&i.isPlainObject(r)?r:{},n[f]=i.extend(h,s,t)):void 0!==t&&(n[f]=t));return n};i.extend({expando:"jQuery"+(nr+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n);},noop:function(){},isFunction:function(n){return"function"===i.type(n)},isArray:Array.isArray,isWindow:function(n){return null!=n&&n===n.window},isNumeric:function(n){var t=n&&n.toString();return!i.isArray(n)&&t-parseFloat(t)+1>=0},isPlainObject:function(n){var t;if("object"!==i.type(n)||n.nodeType||i.isWindow(n)||n.constructor&&!ft.call(n,"constructor")&&!ft.call(n.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in n);return void 0===t||ft.call(n,t)},isEmptyObject:function(n){for(var t in n)return!1;return!0},type:function(n){return null==n?n+"":"object"==typeof n||"function"==typeof n?at[af.call(n)]||"object":typeof n},globalEval:function(n){var t,r=eval;n=i.trim(n);n&&(1===n.indexOf("use strict")?(t=u.createElement("script"),t.text=n,u.head.appendChild(t).parentNode.removeChild(t)):r(n))},camelCase:function(n){return n.replace(yf,"ms-").replace(pf,wf)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,t){var r,i=0;if(ii(n)){for(r=n.length;r>i;i++)if(t.call(n[i],i,n[i])===!1)break}else for(i in n)if(t.call(n[i],i,n[i])===!1)break;return n},trim:function(n){return null==n?"":(n+"").replace(vf,"")},makeArray:function(n,t){var r=t||[];return null!=n&&(ii(Object(n))?i.merge(r,"string"==typeof n?[n]:n):ti.call(r,n)),r},inArray:function(n,t,i){return null==t?-1:lt.call(t,n,i)},merge:function(n,t){for(var u=+t.length,i=0,r=n.length;u>i;i++)n[r++]=t[i];return n.length=r,n},grep:function(n,t,i){for(var u,f=[],r=0,e=n.length,o=!i;e>r;r++)u=!t(n[r],r),u!==o&&f.push(n[r]);return f},map:function(n,t,i){var e,u,r=0,f=[];if(ii(n))for(e=n.length;e>r;r++)u=t(n[r],r,i),null!=u&&f.push(u);else for(r in n)u=t(n[r],r,i),null!=u&&f.push(u);return gi.apply([],f)},guid:1,proxy:function(n,t){var u,f,r;return"string"==typeof t&&(u=n[t],t=n,n=u),i.isFunction(n)?(f=v.call(arguments,2),r=function(){return n.apply(t||this,f.concat(v.call(arguments)))},r.guid=n.guid=n.guid||i.guid++,r):void 0},now:Date.now,support:f});"function"==typeof Symbol&&(i.fn[Symbol.iterator]=y[Symbol.iterator]);i.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(n,t){at["[object "+t+"]"]=t.toLowerCase()});p=function(n){function u(n,t,r,u){var l,w,a,s,nt,d,y,g,p=t&&t.ownerDocument,v=t?t.nodeType:9;if(r=r||[],"string"!=typeof n||!n||1!==v&&9!==v&&11!==v)return r;if(!u&&((t?t.ownerDocument||t:c)!==i&&b(t),t=t||i,h)){if(11!==v&&(d=sr.exec(n)))if(l=d[1]){if(9===v){if(!(a=t.getElementById(l)))return r;if(a.id===l)return r.push(a),r}else if(p&&(a=p.getElementById(l))&&et(t,a)&&a.id===l)return r.push(a),r}else{if(d[2])return k.apply(r,t.getElementsByTagName(n)),r;if((l=d[3])&&f.getElementsByClassName&&t.getElementsByClassName)return k.apply(r,t.getElementsByClassName(l)),r}if(f.qsa&&!lt[n+" "]&&(!o||!o.test(n))){if(1!==v)p=t,g=n;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(hr,"\\$&"):t.setAttribute("id",s=e),y=ft(n),w=y.length,nt=yi.test(s)?"#"+s:"[id='"+s+"']";w--;)y[w]=nt+" "+yt(y[w]);g=y.join(",");p=gt.test(n)&&ii(t.parentNode)||t}if(g)try{return k.apply(r,p.querySelectorAll(g)),r}catch(tt){}finally{s===e&&t.removeAttribute("id")}}}return si(n.replace(at,"$1"),t,r,u)}function ni(){function n(r,u){return i.push(r+" ")>t.cacheLength&&delete n[i.shift()],n[r+" "]=u}var i=[];return n}function l(n){return n[e]=!0,n}function a(n){var t=i.createElement("div");try{return!!n(t)}catch(r){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function ti(n,i){for(var r=n.split("|"),u=r.length;u--;)t.attrHandle[r[u]]=i}function wi(n,t){var i=t&&n,r=i&&1===n.nodeType&&1===t.nodeType&&(~t.sourceIndex||li)-(~n.sourceIndex||li);if(r)return r;if(i)while(i=i.nextSibling)if(i===t)return-1;return n?1:-1}function cr(n){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===n}}function lr(n){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===n}}function it(n){return l(function(t){return t=+t,l(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ii(n){return n&&"undefined"!=typeof n.getElementsByTagName&&n}function bi(){}function yt(n){for(var t=0,r=n.length,i="";r>t;t++)i+=n[t].value;return i}function ri(n,t,i){var r=t.dir,u=i&&"parentNode"===r,f=ki++;return t.first?function(t,i,f){while(t=t[r])if(1===t.nodeType||u)return n(t,i,f)}:function(t,i,o){var s,h,c,l=[v,f];if(o){while(t=t[r])if((1===t.nodeType||u)&&n(t,i,o))return!0}else while(t=t[r])if(1===t.nodeType||u){if(c=t[e]||(t[e]={}),h=c[t.uniqueID]||(c[t.uniqueID]={}),(s=h[r])&&s[0]===v&&s[1]===f)return l[2]=s[2];if(h[r]=l,l[2]=n(t,i,o))return!0}}}function ui(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function ar(n,t,i){for(var r=0,f=t.length;f>r;r++)u(n,t[r],i);return i}function pt(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=null!=t;s>f;f++)(e=n[f])&&(i&&!i(e,r,u)||(o.push(e),h&&t.push(f)));return o}function fi(n,t,i,r,u,f){return r&&!r[e]&&(r=fi(r)),u&&!u[e]&&(u=fi(u,f)),l(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,b=f||ar(t||"*",o.nodeType?[o]:o,[]),v=!n||!f&&t?b:pt(b,p,n,o,s),h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=pt(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?nt(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=pt(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):k.apply(e,h)})}function ei(n){for(var o,u,r,s=n.length,h=t.relative[n[0].type],c=h||t.relative[" "],i=h?1:0,l=ri(function(n){return n===o},c,!0),a=ri(function(n){return nt(o,n)>-1},c,!0),f=[function(n,t,i){var r=!h&&(i||t!==ht)||((o=t).nodeType?l(n,t,i):a(n,t,i));return o=null,r}];s>i;i++)if(u=t.relative[n[i].type])f=[ri(ui(f),u)];else{if(u=t.filter[n[i].type].apply(null,n[i].matches),u[e]){for(r=++i;s>r;r++)if(t.relative[n[r].type])break;return fi(i>1&&ui(f),i>1&&yt(n.slice(0,i-1).concat({value:" "===n[i-2].type?"*":""})).replace(at,"$1"),u,r>i&&ei(n.slice(i,r)),s>r&&ei(n=n.slice(r)),s>r&&yt(n))}f.push(u)}return ui(f)}function vr(n,r){var f=r.length>0,e=n.length>0,o=function(o,s,c,l,a){var y,nt,d,g=0,p="0",tt=o&&[],w=[],it=ht,rt=o||e&&t.find.TAG("*",a),ut=v+=null==it?1:Math.random()||.1,ft=rt.length;for(a&&(ht=s===i||s||a);p!==ft&&null!=(y=rt[p]);p++){if(e&&y){for(nt=0,s||y.ownerDocument===i||(b(y),c=!h);d=n[nt++];)if(d(y,s||i,c)){l.push(y);break}a&&(v=ut)}f&&((y=!d&&y)&&g--,o&&tt.push(y))}if(g+=p,f&&p!==g){for(nt=0;d=r[nt++];)d(tt,w,s,c);if(o){if(g>0)while(p--)tt[p]||w[p]||(w[p]=gi.call(l));w=pt(w)}k.apply(l,w);a&&!o&&w.length>0&&g+r.length>1&&u.uniqueSort(l)}return a&&(v=ut,ht=it),tt};return f?l(o):o}var rt,f,t,st,oi,ft,wt,si,ht,w,ut,b,i,s,h,o,d,ct,et,e="sizzle"+1*new Date,c=n.document,v=0,ki=0,hi=ni(),ci=ni(),lt=ni(),bt=function(n,t){return n===t&&(ut=!0),0},li=-2147483648,di={}.hasOwnProperty,g=[],gi=g.pop,nr=g.push,k=g.push,ai=g.slice,nt=function(n,t){for(var i=0,r=n.length;r>i;i++)if(n[i]===t)return i;return-1},kt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",r="[\\x20\\t\\r\\n\\f]",tt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",vi="\\["+r+"*("+tt+")(?:"+r+"*([*^$|!~]?=)"+r+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+tt+"))|)"+r+"*\\]",dt=":("+tt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+vi+")*)|.*)\\)|)",tr=new RegExp(r+"+","g"),at=new RegExp("^"+r+"+|((?:^|[^\\\\])(?:\\\\.)*)"+r+"+$","g"),ir=new RegExp("^"+r+"*,"+r+"*"),rr=new RegExp("^"+r+"*([>+~]|"+r+")"+r+"*"),ur=new RegExp("="+r+"*([^\\]'\"]*?)"+r+"*\\]","g"),fr=new RegExp(dt),yi=new RegExp("^"+tt+"$"),vt={ID:new RegExp("^#("+tt+")"),CLASS:new RegExp("^\\.("+tt+")"),TAG:new RegExp("^("+tt+"|[*])"),ATTR:new RegExp("^"+vi),PSEUDO:new RegExp("^"+dt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+r+"*(even|odd|(([+-]|)(\\d*)n|)"+r+"*(?:([+-]|)"+r+"*(\\d+)|))"+r+"*\\)|)","i"),bool:new RegExp("^(?:"+kt+")$","i"),needsContext:new RegExp("^"+r+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+r+"*((?:-\\d)?\\d*)"+r+"*\\)|)(?=[^-]|$)","i")},er=/^(?:input|select|textarea|button)$/i,or=/^h\d$/i,ot=/^[^{]+\{\s*\[native \w/,sr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,hr=/'|\\/g,y=new RegExp("\\\\([\\da-f]{1,6}"+r+"?|("+r+")|.)","ig"),p=function(n,t,i){var r="0x"+t-65536;return r!==r||i?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},pi=function(){b()};try{k.apply(g=ai.call(c.childNodes),c.childNodes);g[c.childNodes.length].nodeType}catch(yr){k={apply:g.length?function(n,t){nr.apply(n,ai.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}f=u.support={};oi=u.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?"HTML"!==t.nodeName:!1};b=u.setDocument=function(n){var v,u,l=n?n.ownerDocument||n:c;return l!==i&&9===l.nodeType&&l.documentElement?(i=l,s=i.documentElement,h=!oi(i),(u=i.defaultView)&&u.top!==u&&(u.addEventListener?u.addEventListener("unload",pi,!1):u.attachEvent&&u.attachEvent("onunload",pi)),f.attributes=a(function(n){return n.className="i",!n.getAttribute("className")}),f.getElementsByTagName=a(function(n){return n.appendChild(i.createComment("")),!n.getElementsByTagName("*").length}),f.getElementsByClassName=ot.test(i.getElementsByClassName),f.getById=a(function(n){return s.appendChild(n).id=e,!i.getElementsByName||!i.getElementsByName(e).length}),f.getById?(t.find.ID=function(n,t){if("undefined"!=typeof t.getElementById&&h){var i=t.getElementById(n);return i?[i]:[]}},t.filter.ID=function(n){var t=n.replace(y,p);return function(n){return n.getAttribute("id")===t}}):(delete t.find.ID,t.filter.ID=function(n){var t=n.replace(y,p);return function(n){var i="undefined"!=typeof n.getAttributeNode&&n.getAttributeNode("id");return i&&i.value===t}}),t.find.TAG=f.getElementsByTagName?function(n,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(n):f.qsa?t.querySelectorAll(n):void 0}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if("*"===n){while(i=u[f++])1===i.nodeType&&r.push(i);return r}return u},t.find.CLASS=f.getElementsByClassName&&function(n,t){if("undefined"!=typeof t.getElementsByClassName&&h)return t.getElementsByClassName(n)},d=[],o=[],(f.qsa=ot.test(i.querySelectorAll))&&(a(function(n){s.appendChild(n).innerHTML="<a id='"+e+"'><\/a><select id='"+e+"-\r\\' msallowcapture=''><option selected=''><\/option><\/select>";n.querySelectorAll("[msallowcapture^='']").length&&o.push("[*^$]="+r+"*(?:''|\"\")");n.querySelectorAll("[selected]").length||o.push("\\["+r+"*(?:value|"+kt+")");n.querySelectorAll("[id~="+e+"-]").length||o.push("~=");n.querySelectorAll(":checked").length||o.push(":checked");n.querySelectorAll("a#"+e+"+*").length||o.push(".#.+[+~]")}),a(function(n){var t=i.createElement("input");t.setAttribute("type","hidden");n.appendChild(t).setAttribute("name","D");n.querySelectorAll("[name=d]").length&&o.push("name"+r+"*[*^$|!~]?=");n.querySelectorAll(":enabled").length||o.push(":enabled",":disabled");n.querySelectorAll("*,:x");o.push(",.*:")})),(f.matchesSelector=ot.test(ct=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&a(function(n){f.disconnectedMatch=ct.call(n,"div");ct.call(n,"[s!='']:x");d.push("!=",dt)}),o=o.length&&new RegExp(o.join("|")),d=d.length&&new RegExp(d.join("|")),v=ot.test(s.compareDocumentPosition),et=v||ot.test(s.contains)?function(n,t){var r=9===n.nodeType?n.documentElement:n,i=t&&t.parentNode;return n===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):n.compareDocumentPosition&&16&n.compareDocumentPosition(i)))}:function(n,t){if(t)while(t=t.parentNode)if(t===n)return!0;return!1},bt=v?function(n,t){if(n===t)return ut=!0,0;var r=!n.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(n.ownerDocument||n)===(t.ownerDocument||t)?n.compareDocumentPosition(t):1,1&r||!f.sortDetached&&t.compareDocumentPosition(n)===r?n===i||n.ownerDocument===c&&et(c,n)?-1:t===i||t.ownerDocument===c&&et(c,t)?1:w?nt(w,n)-nt(w,t):0:4&r?-1:1)}:function(n,t){if(n===t)return ut=!0,0;var r,u=0,o=n.parentNode,s=t.parentNode,f=[n],e=[t];if(!o||!s)return n===i?-1:t===i?1:o?-1:s?1:w?nt(w,n)-nt(w,t):0;if(o===s)return wi(n,t);for(r=n;r=r.parentNode;)f.unshift(r);for(r=t;r=r.parentNode;)e.unshift(r);while(f[u]===e[u])u++;return u?wi(f[u],e[u]):f[u]===c?-1:e[u]===c?1:0},i):i};u.matches=function(n,t){return u(n,null,null,t)};u.matchesSelector=function(n,t){if((n.ownerDocument||n)!==i&&b(n),t=t.replace(ur,"='$1']"),f.matchesSelector&&h&&!lt[t+" "]&&(!d||!d.test(t))&&(!o||!o.test(t)))try{var r=ct.call(n,t);if(r||f.disconnectedMatch||n.document&&11!==n.document.nodeType)return r}catch(e){}return u(t,i,null,[n]).length>0};u.contains=function(n,t){return(n.ownerDocument||n)!==i&&b(n),et(n,t)};u.attr=function(n,r){(n.ownerDocument||n)!==i&&b(n);var e=t.attrHandle[r.toLowerCase()],u=e&&di.call(t.attrHandle,r.toLowerCase())?e(n,r,!h):void 0;return void 0!==u?u:f.attributes||!h?n.getAttribute(r):(u=n.getAttributeNode(r))&&u.specified?u.value:null};u.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};u.uniqueSort=function(n){var r,u=[],t=0,i=0;if(ut=!f.detectDuplicates,w=!f.sortStable&&n.slice(0),n.sort(bt),ut){while(r=n[i++])r===n[i]&&(t=u.push(i));while(t--)n.splice(u[t],1)}return w=null,n};st=u.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(1===t||9===t||11===t){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=st(n)}else if(3===t||4===t)return n.nodeValue}else while(r=n[u++])i+=st(r);return i};t=u.selectors={cacheLength:50,createPseudo:l,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(y,p),n[3]=(n[3]||n[4]||n[5]||"").replace(y,p),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||u.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&u.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return vt.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&fr.test(t)&&(i=ft(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(y,p).toLowerCase();return"*"===n?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=hi[n+" "];return t||(t=new RegExp("(^|"+r+")"+n+"("+r+"|$)"))&&hi(n,function(n){return t.test("string"==typeof n.className&&n.className||"undefined"!=typeof n.getAttribute&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(r){var f=u.attr(r,n);return null==f?"!="===t:t?(f+="","="===t?f===i:"!="===t?f!==i:"^="===t?i&&0===f.indexOf(i):"*="===t?i&&f.indexOf(i)>-1:"$="===t?i&&f.slice(-i.length)===i:"~="===t?(" "+f.replace(tr," ")+" ").indexOf(i)>-1:"|="===t?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s="nth"!==n.slice(0,3),o="last"!==n.slice(-4),f="of-type"===t;return 1===r&&0===u?function(n){return!!n.parentNode}:function(t,i,h){var p,w,y,c,a,b,k=s!==o?"nextSibling":"previousSibling",d=t.parentNode,nt=f&&t.nodeName.toLowerCase(),g=!h&&!f,l=!1;if(d){if(s){while(k){for(c=t;c=c[k];)if(f?c.nodeName.toLowerCase()===nt:1===c.nodeType)return!1;b=k="only"===n&&!b&&"nextSibling"}return!0}if(b=[o?d.firstChild:d.lastChild],o&&g){for(c=d,y=c[e]||(c[e]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),p=w[n]||[],a=p[0]===v&&p[1],l=a&&p[2],c=a&&d.childNodes[a];c=++a&&c&&c[k]||(l=a=0)||b.pop();)if(1===c.nodeType&&++l&&c===t){w[n]=[v,a,l];break}}else if(g&&(c=t,y=c[e]||(c[e]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),p=w[n]||[],a=p[0]===v&&p[1],l=a),l===!1)while(c=++a&&c&&c[k]||(l=a=0)||b.pop())if((f?c.nodeName.toLowerCase()===nt:1===c.nodeType)&&++l&&(g&&(y=c[e]||(c[e]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),w[n]=[v,l]),c===t))break;return l-=u,l===r||l%r==0&&l/r>=0}}},PSEUDO:function(n,i){var f,r=t.pseudos[n]||t.setFilters[n.toLowerCase()]||u.error("unsupported pseudo: "+n);return r[e]?r(i):r.length>1?(f=[n,n,"",i],t.setFilters.hasOwnProperty(n.toLowerCase())?l(function(n,t){for(var u,f=r(n,i),e=f.length;e--;)u=nt(n,f[e]),n[u]=!(t[u]=f[e])}):function(n){return r(n,0,f)}):r}},pseudos:{not:l(function(n){var t=[],r=[],i=wt(n.replace(at,"$1"));return i[e]?l(function(n,t,r,u){for(var e,o=i(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(t[f]=e))}):function(n,u,f){return t[0]=n,i(t,null,f,r),t[0]=null,!r.pop()}}),has:l(function(n){return function(t){return u(n,t).length>0}}),contains:l(function(n){return n=n.replace(y,p),function(t){return(t.textContent||t.innerText||st(t)).indexOf(n)>-1}}),lang:l(function(n){return yi.test(n||"")||u.error("unsupported lang: "+n),n=n.replace(y,p).toLowerCase(),function(t){var i;do if(i=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===n||0===i.indexOf(n+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===s},focus:function(n){return n===i.activeElement&&(!i.hasFocus||i.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&!!n.checked||"option"===t&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!t.pseudos.empty(n)},header:function(n){return or.test(n.nodeName)},input:function(n){return er.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&"button"===n.type||"button"===t},text:function(n){var t;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(t=n.getAttribute("type"))||"text"===t.toLowerCase())},first:it(function(){return[0]}),last:it(function(n,t){return[t-1]}),eq:it(function(n,t,i){return[0>i?i+t:i]}),even:it(function(n,t){for(var i=0;t>i;i+=2)n.push(i);return n}),odd:it(function(n,t){for(var i=1;t>i;i+=2)n.push(i);return n}),lt:it(function(n,t,i){for(var r=0>i?i+t:i;--r>=0;)n.push(r);return n}),gt:it(function(n,t,i){for(var r=0>i?i+t:i;++r<t;)n.push(r);return n})}};t.pseudos.nth=t.pseudos.eq;for(rt in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[rt]=cr(rt);for(rt in{submit:!0,reset:!0})t.pseudos[rt]=lr(rt);return bi.prototype=t.filters=t.pseudos,t.setFilters=new bi,ft=u.tokenize=function(n,i){var e,f,s,o,r,h,c,l=ci[n+" "];if(l)return i?0:l.slice(0);for(r=n,h=[],c=t.preFilter;r;){(!e||(f=ir.exec(r)))&&(f&&(r=r.slice(f[0].length)||r),h.push(s=[]));e=!1;(f=rr.exec(r))&&(e=f.shift(),s.push({value:e,type:f[0].replace(at," ")}),r=r.slice(e.length));for(o in t.filter)(f=vt[o].exec(r))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),r=r.slice(e.length));if(!e)break}return i?r.length:r?u.error(n):ci(n,h).slice(0)},wt=u.compile=function(n,t){var r,u=[],f=[],i=lt[n+" "];if(!i){for(t||(t=ft(n)),r=t.length;r--;)i=ei(t[r]),i[e]?u.push(i):f.push(i);i=lt(n,vr(f,u));i.selector=n}return i},si=u.select=function(n,i,r,u){var s,e,o,a,v,l="function"==typeof n&&n,c=!u&&ft(n=l.selector||n);if(r=r||[],1===c.length){if(e=c[0]=c[0].slice(0),e.length>2&&"ID"===(o=e[0]).type&&f.getById&&9===i.nodeType&&h&&t.relative[e[1].type]){if(i=(t.find.ID(o.matches[0].replace(y,p),i)||[])[0],!i)return r;l&&(i=i.parentNode);n=n.slice(e.shift().value.length)}for(s=vt.needsContext.test(n)?0:e.length;s--;){if(o=e[s],t.relative[a=o.type])break;if((v=t.find[a])&&(u=v(o.matches[0].replace(y,p),gt.test(e[0].type)&&ii(i.parentNode)||i))){if(e.splice(s,1),n=u.length&&yt(e),!n)return k.apply(r,u),r;break}}}return(l||wt(n,c))(u,i,!h,r,!i||gt.test(n)&&ii(i.parentNode)||i),r},f.sortStable=e.split("").sort(bt).join("")===e,f.detectDuplicates=!!ut,b(),f.sortDetached=a(function(n){return 1&n.compareDocumentPosition(i.createElement("div"))}),a(function(n){return n.innerHTML="<a href='#'><\/a>","#"===n.firstChild.getAttribute("href")})||ti("type|href|height|width",function(n,t,i){if(!i)return n.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&a(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),""===n.firstChild.getAttribute("value")})||ti("value",function(n,t,i){if(!i&&"input"===n.nodeName.toLowerCase())return n.defaultValue}),a(function(n){return null==n.getAttribute("disabled")})||ti(kt,function(n,t,i){var r;if(!i)return n[t]===!0?t.toLowerCase():(r=n.getAttributeNode(t))&&r.specified?r.value:null}),u}(n);i.find=p;i.expr=p.selectors;i.expr[":"]=i.expr.pseudos;i.uniqueSort=i.unique=p.uniqueSort;i.text=p.getText;i.isXMLDoc=p.isXML;i.contains=p.contains;var d=function(n,t,r){for(var u=[],f=void 0!==r;(n=n[t])&&9!==n.nodeType;)if(1===n.nodeType){if(f&&i(n).is(r))break;u.push(n)}return u},tr=function(n,t){for(var i=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&i.push(n);return i},ir=i.expr.match.needsContext,rr=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,bf=/^.[^:#\[\.,]*$/;i.filter=function(n,t,r){var u=t[0];return r&&(n=":not("+n+")"),1===t.length&&1===u.nodeType?i.find.matchesSelector(u,n)?[u]:[]:i.find.matches(n,i.grep(t,function(n){return 1===n.nodeType}))};i.fn.extend({find:function(n){var t,u=this.length,r=[],f=this;if("string"!=typeof n)return this.pushStack(i(n).filter(function(){for(t=0;u>t;t++)if(i.contains(f[t],this))return!0}));for(t=0;u>t;t++)i.find(n,f[t],r);return r=this.pushStack(u>1?i.unique(r):r),r.selector=this.selector?this.selector+" "+n:n,r},filter:function(n){return this.pushStack(ri(this,n||[],!1))},not:function(n){return this.pushStack(ri(this,n||[],!0))},is:function(n){return!!ri(this,"string"==typeof n&&ir.test(n)?i(n):n||[],!1).length}});fr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;er=i.fn.init=function(n,t,r){var f,e;if(!n)return this;if(r=r||ur,"string"==typeof n){if(f="<"===n[0]&&">"===n[n.length-1]&&n.length>=3?[null,n,null]:fr.exec(n),!f||!f[1]&&t)return!t||t.jquery?(t||r).find(n):this.constructor(t).find(n);if(f[1]){if(t=t instanceof i?t[0]:t,i.merge(this,i.parseHTML(f[1],t&&t.nodeType?t.ownerDocument||t:u,!0)),rr.test(f[1])&&i.isPlainObject(t))for(f in t)i.isFunction(this[f])?this[f](t[f]):this.attr(f,t[f]);return this}return e=u.getElementById(f[2]),e&&e.parentNode&&(this.length=1,this[0]=e),this.context=u,this.selector=n,this}return n.nodeType?(this.context=this[0]=n,this.length=1,this):i.isFunction(n)?void 0!==r.ready?r.ready(n):n(i):(void 0!==n.selector&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))};er.prototype=i.fn;ur=i(u);or=/^(?:parents|prev(?:Until|All))/;sr={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({has:function(n){var t=i(n,this),r=t.length;return this.filter(function(){for(var n=0;r>n;n++)if(i.contains(this,t[n]))return!0})},closest:function(n,t){for(var r,f=0,o=this.length,u=[],e=ir.test(n)||"string"!=typeof n?i(n,t||this.context):0;o>f;f++)for(r=this[f];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(e?e.index(r)>-1:1===r.nodeType&&i.find.matchesSelector(r,n))){u.push(r);break}return this.pushStack(u.length>1?i.uniqueSort(u):u)},index:function(n){return n?"string"==typeof n?lt.call(i(n),this[0]):lt.call(this,n.jquery?n[0]:n):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(i.uniqueSort(i.merge(this.get(),i(n,t))))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}});i.each({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return d(n,"parentNode")},parentsUntil:function(n,t,i){return d(n,"parentNode",i)},next:function(n){return hr(n,"nextSibling")},prev:function(n){return hr(n,"previousSibling")},nextAll:function(n){return d(n,"nextSibling")},prevAll:function(n){return d(n,"previousSibling")},nextUntil:function(n,t,i){return d(n,"nextSibling",i)},prevUntil:function(n,t,i){return d(n,"previousSibling",i)},siblings:function(n){return tr((n.parentNode||{}).firstChild,n)},children:function(n){return tr(n.firstChild)},contents:function(n){return n.contentDocument||i.merge([],n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return"Until"!==n.slice(-5)&&(u=r),u&&"string"==typeof u&&(f=i.filter(u,f)),this.length>1&&(sr[n]||i.uniqueSort(f),or.test(n)&&f.reverse()),this.pushStack(f)}});h=/\S+/g;i.Callbacks=function(n){n="string"==typeof n?kf(n):i.extend({},n);var o,r,h,f,t=[],e=[],u=-1,c=function(){for(f=n.once,h=o=!0;e.length;u=-1)for(r=e.shift();++u<t.length;)t[u].apply(r[0],r[1])===!1&&n.stopOnFalse&&(u=t.length,r=!1);n.memory||(r=!1);o=!1;f&&(t=r?[]:"")},s={add:function(){return t&&(r&&!o&&(u=t.length-1,e.push(r)),function f(r){i.each(r,function(r,u){i.isFunction(u)?n.unique&&s.has(u)||t.push(u):u&&u.length&&"string"!==i.type(u)&&f(u)})}(arguments),r&&!o&&c()),this},remove:function(){return i.each(arguments,function(n,r){for(var f;(f=i.inArray(r,t,f))>-1;)t.splice(f,1),u>=f&&u--}),this},has:function(n){return n?i.inArray(n,t)>-1:t.length>0},empty:function(){return t&&(t=[]),this},disable:function(){return f=e=[],t=r="",this},disabled:function(){return!t},lock:function(){return f=e=[],r||(t=r=""),this},locked:function(){return!!f},fireWith:function(n,t){return f||(t=t||[],t=[n,t.slice?t.slice():t],e.push(t),o||c()),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!h}};return s};i.extend({Deferred:function(n){var u=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],f="pending",r={state:function(){return f},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return i.Deferred(function(f){i.each(u,function(u,e){var o=i.isFunction(n[u])&&n[u];t[e[1]](function(){var n=o&&o.apply(this,arguments);n&&i.isFunction(n.promise)?n.promise().progress(f.notify).done(f.resolve).fail(f.reject):f[e[0]+"With"](this===r?f.promise():this,o?[n]:arguments)})});n=null}).promise()},promise:function(n){return null!=n?i.extend(n,r):r}},t={};return r.pipe=r.then,i.each(u,function(n,i){var e=i[2],o=i[3];r[i[1]]=e.add;o&&e.add(function(){f=o},u[1^n][2].disable,u[2][2].lock);t[i[0]]=function(){return t[i[0]+"With"](this===t?r:this,arguments),this};t[i[0]+"With"]=e.fireWith}),r.promise(t),n&&n.call(t,t),t},when:function(n){var t=0,u=v.call(arguments),r=u.length,e=1!==r||n&&i.isFunction(n.promise)?r:0,f=1===e?n:i.Deferred(),h=function(n,t,i){return function(r){t[n]=this;i[n]=arguments.length>1?v.call(arguments):r;i===o?f.notifyWith(t,i):--e||f.resolveWith(t,i)}},o,c,s;if(r>1)for(o=new Array(r),c=new Array(r),s=new Array(r);r>t;t++)u[t]&&i.isFunction(u[t].promise)?u[t].promise().progress(h(t,c,o)).done(h(t,s,u)).fail(f.reject):--e;return e||f.resolveWith(s,u),f.promise()}});i.fn.ready=function(n){return i.ready.promise().done(n),this};i.extend({isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){(n===!0?--i.readyWait:i.isReady)||(i.isReady=!0,n!==!0&&--i.readyWait>0||(vt.resolveWith(u,[i]),i.fn.triggerHandler&&(i(u).triggerHandler("ready"),i(u).off("ready"))))}});i.ready.promise=function(t){return vt||(vt=i.Deferred(),"complete"===u.readyState||"loading"!==u.readyState&&!u.documentElement.doScroll?n.setTimeout(i.ready):(u.addEventListener("DOMContentLoaded",yt),n.addEventListener("load",yt))),vt.promise(t)};i.ready.promise();a=function(n,t,r,u,f,e,o){var s=0,c=n.length,h=null==r;if("object"===i.type(r)){f=!0;for(s in r)a(n,t,s,r[s],!0,e,o)}else if(void 0!==u&&(f=!0,i.isFunction(u)||(o=!0),h&&(o?(t.call(n,u),t=null):(h=t,t=function(n,t,r){return h.call(i(n),r)})),t))for(;c>s;s++)t(n[s],r,o?u:u.call(n[s],s,t(n[s],r)));return f?n:h?t.call(n):c?t(n[0],r):e};g=function(n){return 1===n.nodeType||9===n.nodeType||!+n.nodeType};et.uid=1;et.prototype={register:function(n,t){var i=t||{};return n.nodeType?n[this.expando]=i:Object.defineProperty(n,this.expando,{value:i,writable:!0,configurable:!0}),n[this.expando]},cache:function(n){if(!g(n))return{};var t=n[this.expando];return t||(t={},g(n)&&(n.nodeType?n[this.expando]=t:Object.defineProperty(n,this.expando,{value:t,configurable:!0}))),t},set:function(n,t,i){var r,u=this.cache(n);if("string"==typeof t)u[t]=i;else for(r in t)u[r]=t[r];return u},get:function(n,t){return void 0===t?this.cache(n):n[this.expando]&&n[this.expando][t]},access:function(n,t,r){var u;return void 0===t||t&&"string"==typeof t&&void 0===r?(u=this.get(n,t),void 0!==u?u:this.get(n,i.camelCase(t))):(this.set(n,t,r),void 0!==r?r:t)},remove:function(n,t){var f,r,e,u=n[this.expando];if(void 0!==u){if(void 0===t)this.register(n);else for(i.isArray(t)?r=t.concat(t.map(i.camelCase)):(e=i.camelCase(t),(t in u)?r=[t,e]:(r=e,r=(r in u)?[r]:r.match(h)||[])),f=r.length;f--;)delete u[r[f]];(void 0===t||i.isEmptyObject(u))&&(n.nodeType?n[this.expando]=void 0:delete n[this.expando])}},hasData:function(n){var t=n[this.expando];return void 0!==t&&!i.isEmptyObject(t)}};var r=new et,e=new et,df=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,cr=/[A-Z]/g;i.extend({hasData:function(n){return e.hasData(n)||r.hasData(n)},data:function(n,t,i){return e.access(n,t,i)},removeData:function(n,t){e.remove(n,t)},_data:function(n,t,i){return r.access(n,t,i)},_removeData:function(n,t){r.remove(n,t)}});i.fn.extend({data:function(n,t){var o,f,s,u=this[0],h=u&&u.attributes;if(void 0===n){if(this.length&&(s=e.get(u),1===u.nodeType&&!r.get(u,"hasDataAttrs"))){for(o=h.length;o--;)h[o]&&(f=h[o].name,0===f.indexOf("data-")&&(f=i.camelCase(f.slice(5)),lr(u,f,s[f])));r.set(u,"hasDataAttrs",!0)}return s}return"object"==typeof n?this.each(function(){e.set(this,n)}):a(this,function(t){var r,f;if(u&&void 0===t){if((r=e.get(u,n)||e.get(u,n.replace(cr,"-$&").toLowerCase()),void 0!==r)||(f=i.camelCase(n),r=e.get(u,f),void 0!==r)||(r=lr(u,f,void 0),void 0!==r))return r}else f=i.camelCase(n),this.each(function(){var i=e.get(this,f);e.set(this,f,t);n.indexOf("-")>-1&&void 0!==i&&e.set(this,n,t)})},null,t,arguments.length>1,null,!0)},removeData:function(n){return this.each(function(){e.remove(this,n)})}});i.extend({queue:function(n,t,u){var f;if(n)return(t=(t||"fx")+"queue",f=r.get(n,t),u&&(!f||i.isArray(u)?f=r.access(n,t,i.makeArray(u)):f.push(u)),f||[])},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),e=r.length,u=r.shift(),f=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};"inprogress"===u&&(u=r.shift(),e--);u&&("fx"===t&&r.unshift("inprogress"),delete f.stop,u.call(n,o,f));!e&&f&&f.empty.fire()},_queueHooks:function(n,t){var u=t+"queueHooks";return r.get(n,u)||r.access(n,u,{empty:i.Callbacks("once memory").add(function(){r.remove(n,[t+"queue",u])})})}});i.fn.extend({queue:function(n,t){var r=2;return"string"!=typeof n&&(t=n,n="fx",r--),arguments.length<r?i.queue(this[0],n):void 0===t?this:this.each(function(){var r=i.queue(this,n,t);i._queueHooks(this,n);"fx"===n&&"inprogress"!==r[0]&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,t){var u,e=1,o=i.Deferred(),f=this,s=this.length,h=function(){--e||o.resolveWith(f,[f])};for("string"!=typeof n&&(t=n,n=void 0),n=n||"fx";s--;)u=r.get(f[s],n+"queueHooks"),u&&u.empty&&(e++,u.empty.add(h));return h(),o.promise(t)}});var ar=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ot=new RegExp("^(?:([+-])=|)("+ar+")([a-z%]*)$","i"),w=["Top","Right","Bottom","Left"],st=function(n,t){return n=t||n,"none"===i.css(n,"display")||!i.contains(n.ownerDocument,n)};var yr=/^(?:checkbox|radio)$/i,pr=/<([\w:-]+)/,wr=/^$|\/(?:java|ecma)script/i,c={option:[1,"<select multiple='multiple'>","<\/select>"],thead:[1,"<table>","<\/table>"],col:[2,"<table><colgroup>","<\/colgroup><\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:[0,"",""]};c.optgroup=c.option;c.tbody=c.tfoot=c.colgroup=c.caption=c.thead;c.th=c.td;br=/<|&#?\w+;/;!function(){var i=u.createDocumentFragment(),n=i.appendChild(u.createElement("div")),t=u.createElement("input");t.setAttribute("type","radio");t.setAttribute("checked","checked");t.setAttribute("name","t");n.appendChild(t);f.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked;n.innerHTML="<textarea>x<\/textarea>";f.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue}();var gf=/^key/,ne=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,dr=/^([^.]*)(?:\.(.+)|)/;i.event={global:{},add:function(n,t,u,f,e){var v,y,w,p,b,c,s,l,o,k,d,a=r.get(n);if(a)for(u.handler&&(v=u,u=v.handler,e=v.selector),u.guid||(u.guid=i.guid++),(p=a.events)||(p=a.events={}),(y=a.handle)||(y=a.handle=function(t){if("undefined"!=typeof i&&i.event.triggered!==t.type)return i.event.dispatch.apply(n,arguments)}),t=(t||"").match(h)||[""],b=t.length;b--;)w=dr.exec(t[b])||[],o=d=w[1],k=(w[2]||"").split(".").sort(),o&&(s=i.event.special[o]||{},o=(e?s.delegateType:s.bindType)||o,s=i.event.special[o]||{},c=i.extend({type:o,origType:d,data:f,handler:u,guid:u.guid,selector:e,needsContext:e&&i.expr.match.needsContext.test(e),namespace:k.join(".")},v),(l=p[o])||(l=p[o]=[],l.delegateCount=0,s.setup&&s.setup.call(n,f,k,y)!==!1||n.addEventListener&&n.addEventListener(o,y)),s.add&&(s.add.call(n,c),c.handler.guid||(c.handler.guid=u.guid)),e?l.splice(l.delegateCount++,0,c):l.push(c),i.event.global[o]=!0)},remove:function(n,t,u,f,e){var y,k,c,v,p,s,l,a,o,b,d,w=r.hasData(n)&&r.get(n);if(w&&(v=w.events)){for(t=(t||"").match(h)||[""],p=t.length;p--;)if(c=dr.exec(t[p])||[],o=d=c[1],b=(c[2]||"").split(".").sort(),o){for(l=i.event.special[o]||{},o=(f?l.delegateType:l.bindType)||o,a=v[o]||[],c=c[2]&&new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"),k=y=a.length;y--;)s=a[y],!e&&d!==s.origType||u&&u.guid!==s.guid||c&&!c.test(s.namespace)||f&&f!==s.selector&&("**"!==f||!s.selector)||(a.splice(y,1),s.selector&&a.delegateCount--,l.remove&&l.remove.call(n,s));k&&!a.length&&(l.teardown&&l.teardown.call(n,b,w.handle)!==!1||i.removeEvent(n,o,w.handle),delete v[o])}else for(o in v)i.event.remove(n,o+t[p],u,f,!0);i.isEmptyObject(v)&&r.remove(n,"handle events")}},dispatch:function(n){n=i.event.fix(n);var o,s,e,u,t,h=[],c=v.call(arguments),l=(r.get(this,"events")||{})[n.type]||[],f=i.event.special[n.type]||{};if(c[0]=n,n.delegateTarget=this,!f.preDispatch||f.preDispatch.call(this,n)!==!1){for(h=i.event.handlers.call(this,n,l),o=0;(u=h[o++])&&!n.isPropagationStopped();)for(n.currentTarget=u.elem,s=0;(t=u.handlers[s++])&&!n.isImmediatePropagationStopped();)n.rnamespace&&!n.rnamespace.test(t.namespace)||(n.handleObj=t,n.data=t.data,e=((i.event.special[t.origType]||{}).handle||t.handler).apply(u.elem,c),void 0!==e&&(n.result=e)===!1&&(n.preventDefault(),n.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,n),n.result}},handlers:function(n,t){var e,u,f,o,h=[],s=t.delegateCount,r=n.target;if(s&&r.nodeType&&("click"!==n.type||isNaN(n.button)||n.button<1))for(;r!==this;r=r.parentNode||this)if(1===r.nodeType&&(r.disabled!==!0||"click"!==n.type)){for(u=[],e=0;s>e;e++)o=t[e],f=o.selector+" ",void 0===u[f]&&(u[f]=o.needsContext?i(f,this).index(r)>-1:i.find(f,this,null,[r]).length),u[f]&&u.push(o);u.length&&h.push({elem:r,handlers:u})}return s<t.length&&h.push({elem:this,handlers:t.slice(s)}),h},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return null==n.which&&(n.which=null!=t.charCode?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,t){var e,i,r,f=t.button;return null==n.pageX&&null!=t.clientX&&(e=n.target.ownerDocument||u,i=e.documentElement,r=e.body,n.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),n.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),n.which||void 0===f||(n.which=1&f?1:2&f?3:4&f?2:0),n}},fix:function(n){if(n[i.expando])return n;var f,e,o,r=n.type,s=n,t=this.fixHooks[r];for(t||(this.fixHooks[r]=t=ne.test(r)?this.mouseHooks:gf.test(r)?this.keyHooks:{}),o=t.props?this.props.concat(t.props):this.props,n=new i.Event(s),f=o.length;f--;)e=o[f],n[e]=s[e];return n.target||(n.target=u),3===n.target.nodeType&&(n.target=n.target.parentNode),t.filter?t.filter(n,s):n},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==gr()&&this.focus)return(this.focus(),!1)},delegateType:"focusin"},blur:{trigger:function(){if(this===gr()&&this.blur)return(this.blur(),!1)},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&i.nodeName(this,"input"))return(this.click(),!1)},_default:function(n){return i.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){void 0!==n.result&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}}};i.removeEvent=function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i)};i.Event=function(n,t){return this instanceof i.Event?(n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||void 0===n.defaultPrevented&&n.returnValue===!1?pt:nt):this.type=n,t&&i.extend(this,t),this.timeStamp=n&&n.timeStamp||i.now(),void(this[i.expando]=!0)):new i.Event(n,t)};i.Event.prototype={constructor:i.Event,isDefaultPrevented:nt,isPropagationStopped:nt,isImmediatePropagationStopped:nt,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=pt;n&&n.preventDefault()},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=pt;n&&n.stopPropagation()},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=pt;n&&n.stopImmediatePropagation();this.stopPropagation()}};i.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var u,f=this,r=n.relatedTarget,e=n.handleObj;return r&&(r===f||i.contains(f,r))||(n.type=e.origType,u=e.handler.apply(this,arguments),n.type=t),u}}});i.fn.extend({on:function(n,t,i,r){return fi(this,n,t,i,r)},one:function(n,t,i,r){return fi(this,n,t,i,r,1)},off:function(n,t,r){var u,f;if(n&&n.preventDefault&&n.handleObj)return u=n.handleObj,i(n.delegateTarget).off(u.namespace?u.origType+"."+u.namespace:u.origType,u.selector,u.handler),this;if("object"==typeof n){for(f in n)this.off(f,t,n[f]);return this}return t!==!1&&"function"!=typeof t||(r=t,t=void 0),r===!1&&(r=nt),this.each(function(){i.event.remove(this,n,r,t)})}});var te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ie=/<script|<style|<link/i,re=/checked\s*(?:[^=]|=\s*.checked.)/i,ue=/^true\/(.*)/,fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;i.extend({htmlPrefilter:function(n){return n.replace(te,"<$1><\/$2>")},clone:function(n,t,r){var u,c,s,e,h=n.cloneNode(!0),l=i.contains(n.ownerDocument,n);if(!(f.noCloneChecked||1!==n.nodeType&&11!==n.nodeType||i.isXMLDoc(n)))for(e=o(h),s=o(n),u=0,c=s.length;c>u;u++)se(s[u],e[u]);if(t)if(r)for(s=s||o(n),e=e||o(h),u=0,c=s.length;c>u;u++)tu(s[u],e[u]);else tu(n,h);return e=o(h,"script"),e.length>0&&ui(e,!l&&o(n,"script")),h},cleanData:function(n){for(var u,t,f,s=i.event.special,o=0;void 0!==(t=n[o]);o++)if(g(t)){if(u=t[r.expando]){if(u.events)for(f in u.events)s[f]?i.event.remove(t,f):i.removeEvent(t,f,u.handle);t[r.expando]=void 0}t[e.expando]&&(t[e.expando]=void 0)}}});i.fn.extend({domManip:b,detach:function(n){return iu(this,n,!0)},remove:function(n){return iu(this,n)},text:function(n){return a(this,function(n){return void 0===n?i.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=n)})},null,n,arguments.length)},append:function(){return b(this,arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=nu(this,n);t.appendChild(n)}})},prepend:function(){return b(this,arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=nu(this,n);t.insertBefore(n,t.firstChild)}})},before:function(){return b(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return b(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},empty:function(){for(var n,t=0;null!=(n=this[t]);t++)1===n.nodeType&&(i.cleanData(o(n,!1)),n.textContent="");return this},clone:function(n,t){return n=null==n?!1:n,t=null==t?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return a(this,function(n){var t=this[0]||{},r=0,u=this.length;if(void 0===n&&1===t.nodeType)return t.innerHTML;if("string"==typeof n&&!ie.test(n)&&!c[(pr.exec(n)||["",""])[1].toLowerCase()]){n=i.htmlPrefilter(n);try{for(;u>r;r++)t=this[r]||{},1===t.nodeType&&(i.cleanData(o(t,!1)),t.innerHTML=n);t=0}catch(f){}}t&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var n=[];return b(this,arguments,function(t){var r=this.parentNode;i.inArray(this,n)<0&&(i.cleanData(o(this)),r&&r.replaceChild(t,this))},n)}});i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(n){for(var u,f=[],e=i(n),o=e.length-1,r=0;o>=r;r++)u=r===o?this:this.clone(!0),i(e[r])[t](u),ti.apply(f,u.get());return this.pushStack(f)}});ei={HTML:"block",BODY:"block"};var uu=/^margin/,si=new RegExp("^("+ar+")(?!px)[a-z%]+$","i"),bt=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=n),i.getComputedStyle(t)},hi=function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];f=i.apply(n,r||[]);for(u in t)n.style[u]=e[u];return f},ht=u.documentElement;!function(){var s,e,h,c,r=u.createElement("div"),t=u.createElement("div");if(t.style){t.style.backgroundClip="content-box";t.cloneNode(!0).style.backgroundClip="";f.clearCloneStyle="content-box"===t.style.backgroundClip;r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute";r.appendChild(t);function o(){t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";t.innerHTML="";ht.appendChild(r);var i=n.getComputedStyle(t);s="1%"!==i.top;c="2px"===i.marginLeft;e="4px"===i.width;t.style.marginRight="50%";h="4px"===i.marginRight;ht.removeChild(r)}i.extend(f,{pixelPosition:function(){return o(),s},boxSizingReliable:function(){return null==e&&o(),e},pixelMarginRight:function(){return null==e&&o(),h},reliableMarginLeft:function(){return null==e&&o(),c},reliableMarginRight:function(){var f,i=t.appendChild(u.createElement("div"));return i.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",ht.appendChild(r),f=!parseFloat(n.getComputedStyle(i).marginRight),ht.removeChild(r),t.removeChild(i),f}})}}();var he=/^(none|table(?!-c[ea]).+)/,ce={position:"absolute",visibility:"hidden",display:"block"},fu={letterSpacing:"0",fontWeight:"400"},eu=["Webkit","O","Moz","ms"],ou=u.createElement("div").style;i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=tt(n,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(n,t,r,u){if(n&&3!==n.nodeType&&8!==n.nodeType&&n.style){var e,h,o,s=i.camelCase(t),c=n.style;return t=i.cssProps[s]||(i.cssProps[s]=su(s)||s),o=i.cssHooks[t]||i.cssHooks[s],void 0===r?o&&"get"in o&&void 0!==(e=o.get(n,!1,u))?e:c[t]:(h=typeof r,"string"===h&&(e=ot.exec(r))&&e[1]&&(r=vr(n,t,e),h="number"),null!=r&&r===r&&("number"===h&&(r+=e&&e[3]||(i.cssNumber[s]?"":"px")),f.clearCloneStyle||""!==r||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(r=o.set(n,r,u))||(c[t]=r)),void 0)}},css:function(n,t,r,u){var f,s,o,e=i.camelCase(t);return t=i.cssProps[e]||(i.cssProps[e]=su(e)||e),o=i.cssHooks[t]||i.cssHooks[e],o&&"get"in o&&(f=o.get(n,!0,r)),void 0===f&&(f=tt(n,t,u)),"normal"===f&&t in fu&&(f=fu[t]),""===r||r?(s=parseFloat(f),r===!0||isFinite(s)?s||0:f):f}});i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,u){if(r)return he.test(i.css(n,"display"))&&0===n.offsetWidth?hi(n,ce,function(){return lu(n,t,u)}):lu(n,t,u)},set:function(n,r,u){var f,e=u&&bt(n),o=u&&cu(n,t,u,"border-box"===i.css(n,"boxSizing",!1,e),e);return o&&(f=ot.exec(r))&&"px"!==(f[3]||"px")&&(n.style[t]=r,r=i.css(n,t)),hu(n,r,o)}}});i.cssHooks.marginLeft=ci(f.reliableMarginLeft,function(n,t){if(t)return(parseFloat(tt(n,"marginLeft"))||n.getBoundingClientRect().left-hi(n,{marginLeft:0},function(){return n.getBoundingClientRect().left}))+"px"});i.cssHooks.marginRight=ci(f.reliableMarginRight,function(n,t){if(t)return hi(n,{display:"inline-block"},tt,[n,"marginRight"])});i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u="string"==typeof i?i.split(" "):[i];4>r;r++)f[n+w[r]+t]=u[r]||u[r-2]||u[0];return f}};uu.test(n)||(i.cssHooks[n+t].set=hu)});i.fn.extend({css:function(n,t){return a(this,function(n,t,r){var f,e,o={},u=0;if(i.isArray(t)){for(f=bt(n),e=t.length;e>u;u++)o[t[u]]=i.css(n,t[u],!1,f);return o}return void 0!==r?i.style(n,t,r):i.css(n,t)},n,t,arguments.length>1)},show:function(){return au(this,!0)},hide:function(){return au(this)},toggle:function(n){return"boolean"==typeof n?n?this.show():this.hide():this.each(function(){st(this)?i(this).show():i(this).hide()})}});i.Tween=s;s.prototype={constructor:s,init:function(n,t,r,u,f,e){this.elem=n;this.prop=r;this.easing=f||i.easing._default;this.options=t;this.start=this.now=this.cur();this.end=u;this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=s.propHooks[this.prop];return n&&n.get?n.get(this):s.propHooks._default.get(this)},run:function(n){var t,r=s.propHooks[this.prop];return this.pos=this.options.duration?t=i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):t=n,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):s.propHooks._default.set(this),this}};s.prototype.init.prototype=s.prototype;s.propHooks={_default:{get:function(n){var t;return 1!==n.elem.nodeType||null!=n.elem[n.prop]&&null==n.elem.style[n.prop]?n.elem[n.prop]:(t=i.css(n.elem,n.prop,""),t&&"auto"!==t?t:0)},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):1!==n.elem.nodeType||null==n.elem.style[i.cssProps[n.prop]]&&!i.cssHooks[n.prop]?n.elem[n.prop]=n.now:i.style(n.elem,n.prop,n.now+n.unit)}}};s.propHooks.scrollTop=s.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2},_default:"swing"};i.fx=s.prototype.init;i.fx.step={};vu=/^(?:toggle|show|hide)$/;yu=/queueHooks$/;i.Animation=i.extend(l,{tweeners:{"*":[function(n,t){var i=this.createTween(n,t);return vr(i.elem,n,ot.exec(t),i),i}]},tweener:function(n,t){i.isFunction(n)?(t=n,n=["*"]):n=n.match(h);for(var r,u=0,f=n.length;f>u;u++)r=n[u],l.tweeners[r]=l.tweeners[r]||[],l.tweeners[r].unshift(t)},prefilters:[le],prefilter:function(n,t){t?l.prefilters.unshift(n):l.prefilters.push(n)}});i.speed=function(n,t,r){var u=n&&"object"==typeof n?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:"number"==typeof u.duration?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,null!=u.queue&&u.queue!==!0||(u.queue="fx"),u.old=u.complete,u.complete=function(){i.isFunction(u.old)&&u.old.call(this);u.queue&&i.dequeue(this,u.queue)},u};i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(st).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,u,f){var s=i.isEmptyObject(n),o=i.speed(t,u,f),e=function(){var t=l(this,i.extend({},n),o);(s||r.get(this,"finish"))&&t.stop(!0)};return e.finish=e,s||o.queue===!1?this.each(e):this.queue(o.queue,e)},stop:function(n,t,u){var f=function(n){var t=n.stop;delete n.stop;t(u)};return"string"!=typeof n&&(u=t,t=n,n=void 0),t&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var s=!0,t=null!=n&&n+"queueHooks",o=i.timers,e=r.get(this);if(t)e[t]&&e[t].stop&&f(e[t]);else for(t in e)e[t]&&e[t].stop&&yu.test(t)&&f(e[t]);for(t=o.length;t--;)o[t].elem!==this||null!=n&&o[t].queue!==n||(o[t].anim.stop(u),s=!1,o.splice(t,1));!s&&u||i.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var t,e=r.get(this),u=e[n+"queue"],o=e[n+"queueHooks"],f=i.timers,s=u?u.length:0;for(e.finish=!0,i.queue(this,n,[]),o&&o.stop&&o.stop.call(this,!0),t=f.length;t--;)f[t].elem===this&&f[t].queue===n&&(f[t].anim.stop(!0),f.splice(t,1));for(t=0;s>t;t++)u[t]&&u[t].finish&&u[t].finish.call(this);delete e.finish})}});i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(n,i,u){return null==n||"boolean"==typeof n?r.apply(this,arguments):this.animate(dt(t,!0),n,i,u)}});i.each({slideDown:dt("show"),slideUp:dt("hide"),slideToggle:dt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});i.timers=[];i.fx.tick=function(){var r,n=0,t=i.timers;for(it=i.now();n<t.length;n++)r=t[n],r()||t[n]!==r||t.splice(n--,1);t.length||i.fx.stop();it=void 0};i.fx.timer=function(n){i.timers.push(n);n()?i.fx.start():i.timers.pop()};i.fx.interval=13;i.fx.start=function(){kt||(kt=n.setInterval(i.fx.tick,i.fx.interval))};i.fx.stop=function(){n.clearInterval(kt);kt=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fn.delay=function(t,r){return t=i.fx?i.fx.speeds[t]||t:t,r=r||"fx",this.queue(r,function(i,r){var u=n.setTimeout(i,t);r.stop=function(){n.clearTimeout(u)}})},function(){var n=u.createElement("input"),t=u.createElement("select"),i=t.appendChild(u.createElement("option"));n.type="checkbox";f.checkOn=""!==n.value;f.optSelected=i.selected;t.disabled=!0;f.optDisabled=!i.disabled;n=u.createElement("input");n.value="t";n.type="radio";f.radioValue="t"===n.value}();rt=i.expr.attrHandle;i.fn.extend({attr:function(n,t){return a(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})}});i.extend({attr:function(n,t,r){var u,f,e=n.nodeType;if(3!==e&&8!==e&&2!==e)return"undefined"==typeof n.getAttribute?i.prop(n,t,r):(1===e&&i.isXMLDoc(n)||(t=t.toLowerCase(),f=i.attrHooks[t]||(i.expr.match.bool.test(t)?bu:void 0)),void 0!==r?null===r?void i.removeAttr(n,t):f&&"set"in f&&void 0!==(u=f.set(n,r,t))?u:(n.setAttribute(t,r+""),r):f&&"get"in f&&null!==(u=f.get(n,t))?u:(u=i.find.attr(n,t),null==u?void 0:u))},attrHooks:{type:{set:function(n,t){if(!f.radioValue&&"radio"===t&&i.nodeName(n,"input")){var r=n.value;return n.setAttribute("type",t),r&&(n.value=r),t}}}},removeAttr:function(n,t){var r,u,e=0,f=t&&t.match(h);if(f&&1===n.nodeType)while(r=f[e++])u=i.propFix[r]||r,i.expr.match.bool.test(r)&&(n[u]=!1),n.removeAttribute(r)}});bu={set:function(n,t,r){return t===!1?i.removeAttr(n,r):n.setAttribute(r,r),r}};i.each(i.expr.match.bool.source.match(/\w+/g),function(n,t){var r=rt[t]||i.find.attr;rt[t]=function(n,t,i){var u,f;return i||(f=rt[t],rt[t]=u,u=null!=r(n,t,i)?t.toLowerCase():null,rt[t]=f),u}});ku=/^(?:input|select|textarea|button)$/i;du=/^(?:a|area)$/i;i.fn.extend({prop:function(n,t){return a(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return this.each(function(){delete this[i.propFix[n]||n]})}});i.extend({prop:function(n,t,r){var f,u,e=n.nodeType;if(3!==e&&8!==e&&2!==e)return 1===e&&i.isXMLDoc(n)||(t=i.propFix[t]||t,u=i.propHooks[t]),void 0!==r?u&&"set"in u&&void 0!==(f=u.set(n,r,t))?f:n[t]=r:u&&"get"in u&&null!==(f=u.get(n,t))?f:n[t]},propHooks:{tabIndex:{get:function(n){var t=i.find.attr(n,"tabindex");return t?parseInt(t,10):ku.test(n.nodeName)||du.test(n.nodeName)&&n.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});f.optSelected||(i.propHooks.selected={get:function(n){var t=n.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(n){var t=n.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}});i.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){i.propFix[this.toLowerCase()]=this});gt=/[\t\r\n\f]/g;i.fn.extend({addClass:function(n){var o,t,r,u,f,s,e,c=0;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,k(this)))});if("string"==typeof n&&n)for(o=n.match(h)||[];t=this[c++];)if(u=k(t),r=1===t.nodeType&&(" "+u+" ").replace(gt," ")){for(s=0;f=o[s++];)r.indexOf(" "+f+" ")<0&&(r+=f+" ");e=i.trim(r);u!==e&&t.setAttribute("class",e)}return this},removeClass:function(n){var o,r,t,u,f,s,e,c=0;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,k(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof n&&n)for(o=n.match(h)||[];r=this[c++];)if(u=k(r),t=1===r.nodeType&&(" "+u+" ").replace(gt," ")){for(s=0;f=o[s++];)while(t.indexOf(" "+f+" ")>-1)t=t.replace(" "+f+" "," ");e=i.trim(t);u!==e&&r.setAttribute("class",e)}return this},toggleClass:function(n,t){var u=typeof n;return"boolean"==typeof t&&"string"===u?t?this.addClass(n):this.removeClass(n):i.isFunction(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,k(this),t),t)}):this.each(function(){var t,e,f,o;if("string"===u)for(e=0,f=i(this),o=n.match(h)||[];t=o[e++];)f.hasClass(t)?f.removeClass(t):f.addClass(t);else void 0!==n&&"boolean"!==u||(t=k(this),t&&r.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||n===!1?"":r.get(this,"__className__")||""))})},hasClass:function(n){for(var t,r=0,i=" "+n+" ";t=this[r++];)if(1===t.nodeType&&(" "+k(t)+" ").replace(gt," ").indexOf(i)>-1)return!0;return!1}});gu=/\r/g;nf=/[\x20\t\r\n\f]+/g;i.fn.extend({val:function(n){var t,r,f,u=this[0];return arguments.length?(f=i.isFunction(n),this.each(function(r){var u;1===this.nodeType&&(u=f?n.call(this,r,i(this).val()):n,null==u?u="":"number"==typeof u?u+="":i.isArray(u)&&(u=i.map(u,function(n){return null==n?"":n+""})),t=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,u,"value")||(this.value=u))})):u?(t=i.valHooks[u.type]||i.valHooks[u.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(u,"value"))?r:(r=u.value,"string"==typeof r?r.replace(gu,""):null==r?"":r)):void 0}});i.extend({valHooks:{option:{get:function(n){var t=i.find.attr(n,"value");return null!=t?t:i.trim(i.text(n)).replace(nf," ")}},select:{get:function(n){for(var o,t,s=n.options,r=n.selectedIndex,u="select-one"===n.type||0>r,h=u?null:[],c=u?r+1:s.length,e=0>r?c:u?r:0;c>e;e++)if(t=s[e],(t.selected||e===r)&&(f.optDisabled?!t.disabled:null===t.getAttribute("disabled"))&&(!t.parentNode.disabled||!i.nodeName(t.parentNode,"optgroup"))){if(o=i(t).val(),u)return o;h.push(o)}return h},set:function(n,t){for(var u,r,f=n.options,e=i.makeArray(t),o=f.length;o--;)r=f[o],(r.selected=i.inArray(i.valHooks.option.get(r),e)>-1)&&(u=!0);return u||(n.selectedIndex=-1),e}}}});i.each(["radio","checkbox"],function(){i.valHooks[this]={set:function(n,t){if(i.isArray(t))return n.checked=i.inArray(i(n).val(),t)>-1}};f.checkOn||(i.valHooks[this].get=function(n){return null===n.getAttribute("value")?"on":n.value})});li=/^(?:focusinfocus|focusoutblur)$/;i.extend(i.event,{trigger:function(t,f,e,o){var w,s,c,b,a,v,l,p=[e||u],h=ft.call(t,"type")?t.type:t,y=ft.call(t,"namespace")?t.namespace.split("."):[];if(s=c=e=e||u,3!==e.nodeType&&8!==e.nodeType&&!li.test(h+i.event.triggered)&&(h.indexOf(".")>-1&&(y=h.split("."),h=y.shift(),y.sort()),a=h.indexOf(":")<0&&"on"+h,t=t[i.expando]?t:new i.Event(h,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=e),f=null==f?[t]:i.makeArray(f,[t]),l=i.event.special[h]||{},o||!l.trigger||l.trigger.apply(e,f)!==!1)){if(!o&&!l.noBubble&&!i.isWindow(e)){for(b=l.delegateType||h,li.test(b+h)||(s=s.parentNode);s;s=s.parentNode)p.push(s),c=s;c===(e.ownerDocument||u)&&p.push(c.defaultView||c.parentWindow||n)}for(w=0;(s=p[w++])&&!t.isPropagationStopped();)t.type=w>1?b:l.bindType||h,v=(r.get(s,"events")||{})[t.type]&&r.get(s,"handle"),v&&v.apply(s,f),v=a&&s[a],v&&v.apply&&g(s)&&(t.result=v.apply(s,f),t.result===!1&&t.preventDefault());return t.type=h,o||t.isDefaultPrevented()||l._default&&l._default.apply(p.pop(),f)!==!1||!g(e)||a&&i.isFunction(e[h])&&!i.isWindow(e)&&(c=e[a],c&&(e[a]=null),i.event.triggered=h,e[h](),i.event.triggered=void 0,c&&(e[a]=c)),t.result}},simulate:function(n,t,r){var u=i.extend(new i.Event,r,{type:n,isSimulated:!0});i.event.trigger(u,null,t);u.isDefaultPrevented()&&r.preventDefault()}});i.fn.extend({trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){var r=this[0];if(r)return i.event.trigger(n,t,r,!0)}});i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}});i.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)}});f.focusin="onfocusin"in n;f.focusin||i.each({focus:"focusin",blur:"focusout"},function(n,t){var u=function(n){i.event.simulate(t,n.target,i.event.fix(n))};i.event.special[t]={setup:function(){var i=this.ownerDocument||this,f=r.access(i,t);f||i.addEventListener(n,u,!0);r.access(i,t,(f||0)+1)},teardown:function(){var i=this.ownerDocument||this,f=r.access(i,t)-1;f?r.access(i,t,f):(i.removeEventListener(n,u,!0),r.remove(i,t))}}});var ct=n.location,ai=i.now(),vi=/\?/;i.parseJSON=function(n){return JSON.parse(n+"")};i.parseXML=function(t){var r;if(!t||"string"!=typeof t)return null;try{r=(new n.DOMParser).parseFromString(t,"text/xml")}catch(u){r=void 0}return r&&!r.getElementsByTagName("parsererror").length||i.error("Invalid XML: "+t),r};var ve=/#.*$/,tf=/([?&])_=[^&]*/,ye=/^(.*?):[ \t]*([^\r\n]*)$/gm,pe=/^(?:GET|HEAD)$/,we=/^\/\//,rf={},yi={},uf="*/".concat("*"),pi=u.createElement("a");pi.href=ct.href;i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ct.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":uf,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?wi(wi(n,i.ajaxSettings),t):wi(i.ajaxSettings,n)},ajaxPrefilter:ff(rf),ajaxTransport:ff(yi),ajax:function(t,r){function b(t,r,u,h){var a,rt,it,p,b,l=r;2!==s&&(s=2,d&&n.clearTimeout(d),v=void 0,k=h||"",e.readyState=t>0?4:0,a=t>=200&&300>t||304===t,u&&(p=be(f,e,u)),p=ke(f,p,e,a),a?(f.ifModified&&(b=e.getResponseHeader("Last-Modified"),b&&(i.lastModified[o]=b),b=e.getResponseHeader("etag"),b&&(i.etag[o]=b)),204===t||"HEAD"===f.type?l="nocontent":304===t?l="notmodified":(l=p.state,rt=p.data,it=p.error,a=!it)):(it=l,!t&&l||(l="error",0>t&&(t=0))),e.status=t,e.statusText=(r||l)+"",a?nt.resolveWith(c,[rt,l,e]):nt.rejectWith(c,[e,l,it]),e.statusCode(w),w=void 0,y&&g.trigger(a?"ajaxSuccess":"ajaxError",[e,f,a?rt:it]),tt.fireWith(c,[e,l]),y&&(g.trigger("ajaxComplete",[e,f]),--i.active||i.event.trigger("ajaxStop")))}"object"==typeof t&&(r=t,t=void 0);r=r||{};var v,o,k,p,d,l,y,a,f=i.ajaxSetup({},r),c=f.context||f,g=f.context&&(c.nodeType||c.jquery)?i(c):i.event,nt=i.Deferred(),tt=i.Callbacks("once memory"),w=f.statusCode||{},it={},rt={},s=0,ut="canceled",e={readyState:0,getResponseHeader:function(n){var t;if(2===s){if(!p)for(p={};t=ye.exec(k);)p[t[1].toLowerCase()]=t[2];t=p[n.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===s?k:null},setRequestHeader:function(n,t){var i=n.toLowerCase();return s||(n=rt[i]=rt[i]||n,it[n]=t),this},overrideMimeType:function(n){return s||(f.mimeType=n),this},statusCode:function(n){var t;if(n)if(2>s)for(t in n)w[t]=[w[t],n[t]];else e.always(n[e.status]);return this},abort:function(n){var t=n||ut;return v&&v.abort(t),b(0,t),this}};if(nt.promise(e).complete=tt.add,e.success=e.done,e.error=e.fail,f.url=((t||f.url||ct.href)+"").replace(ve,"").replace(we,ct.protocol+"//"),f.type=r.method||r.type||f.method||f.type,f.dataTypes=i.trim(f.dataType||"*").toLowerCase().match(h)||[""],null==f.crossDomain){l=u.createElement("a");try{l.href=f.url;l.href=l.href;f.crossDomain=pi.protocol+"//"+pi.host!=l.protocol+"//"+l.host}catch(ft){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=i.param(f.data,f.traditional)),ef(rf,f,r,e),2===s)return e;y=i.event&&f.global;y&&0==i.active++&&i.event.trigger("ajaxStart");f.type=f.type.toUpperCase();f.hasContent=!pe.test(f.type);o=f.url;f.hasContent||(f.data&&(o=f.url+=(vi.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=tf.test(o)?o.replace(tf,"$1_="+ai++):o+(vi.test(o)?"&":"?")+"_="+ai++));f.ifModified&&(i.lastModified[o]&&e.setRequestHeader("If-Modified-Since",i.lastModified[o]),i.etag[o]&&e.setRequestHeader("If-None-Match",i.etag[o]));(f.data&&f.hasContent&&f.contentType!==!1||r.contentType)&&e.setRequestHeader("Content-Type",f.contentType);e.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+uf+"; q=0.01":""):f.accepts["*"]);for(a in f.headers)e.setRequestHeader(a,f.headers[a]);if(f.beforeSend&&(f.beforeSend.call(c,e,f)===!1||2===s))return e.abort();ut="abort";for(a in{success:1,error:1,complete:1})e[a](f[a]);if(v=ef(yi,f,r,e)){if(e.readyState=1,y&&g.trigger("ajaxSend",[e,f]),2===s)return e;f.async&&f.timeout>0&&(d=n.setTimeout(function(){e.abort("timeout")},f.timeout));try{s=1;v.send(it,b)}catch(ft){if(!(2>s))throw ft;b(-1,ft)}}else b(-1,"No Transport");return e},getJSON:function(n,t,r){return i.get(n,t,r,"json")},getScript:function(n,t){return i.get(n,void 0,t,"script")}});i.each(["get","post"],function(n,t){i[t]=function(n,r,u,f){return i.isFunction(r)&&(f=f||u,u=r,r=void 0),i.ajax(i.extend({url:n,type:t,dataType:f,data:r,success:u},i.isPlainObject(n)&&n))}});i._evalUrl=function(n){return i.ajax({url:n,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})};i.fn.extend({wrapAll:function(n){var t;return i.isFunction(n)?this.each(function(t){i(this).wrapAll(n.call(this,t))}):(this[0]&&(t=i(n,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var n=this;n.firstElementChild;)n=n.firstElementChild;return n}).append(this)),this)},wrapInner:function(n){return i.isFunction(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()}});i.expr.filters.hidden=function(n){return!i.expr.filters.visible(n)};i.expr.filters.visible=function(n){return n.offsetWidth>0||n.offsetHeight>0||n.getClientRects().length>0};var de=/%20/g,ge=/\[\]$/,of=/\r?\n/g,no=/^(?:submit|button|image|reset|file)$/i,to=/^(?:input|select|textarea|keygen)/i;return i.param=function(n,t){var r,u=[],f=function(n,t){t=i.isFunction(t)?t():null==t?"":t;u[u.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(void 0===t&&(t=i.ajaxSettings&&i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){f(this.name,this.value)});else for(r in n)bi(r,n[r],t,f);return u.join("&").replace(de,"+")},i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=i.prop(this,"elements");return n?i.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!i(this).is(":disabled")&&to.test(this.nodeName)&&!no.test(n)&&(this.checked||!yr.test(n))}).map(function(n,t){var r=i(this).val();return null==r?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(of,"\r\n")}}):{name:t.name,value:r.replace(of,"\r\n")}}).get()}}),i.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}},sf={0:200,1223:204},ut=i.ajaxSettings.xhr(),f.cors=!!ut&&"withCredentials"in ut,f.ajax=ut=!!ut,i.ajaxTransport(function(t){var i,r;if(f.cors||ut&&!t.crossDomain)return{send:function(u,f){var o,e=t.xhr();if(e.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)e[o]=t.xhrFields[o];t.mimeType&&e.overrideMimeType&&e.overrideMimeType(t.mimeType);t.crossDomain||u["X-Requested-With"]||(u["X-Requested-With"]="XMLHttpRequest");for(o in u)e.setRequestHeader(o,u[o]);i=function(n){return function(){i&&(i=r=e.onload=e.onerror=e.onabort=e.onreadystatechange=null,"abort"===n?e.abort():"error"===n?"number"!=typeof e.status?f(0,"error"):f(e.status,e.statusText):f(sf[e.status]||e.status,e.statusText,"text"!==(e.responseType||"text")||"string"!=typeof e.responseText?{binary:e.response}:{text:e.responseText},e.getAllResponseHeaders()))}};e.onload=i();r=e.onerror=i("error");void 0!==e.onabort?e.onabort=r:e.onreadystatechange=function(){4===e.readyState&&n.setTimeout(function(){i&&r()})};i=i("abort");try{e.send(t.hasContent&&t.data||null)}catch(s){if(i)throw s;}},abort:function(){i&&i()}}}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){void 0===n.cache&&(n.cache=!1);n.crossDomain&&(n.type="GET")}),i.ajaxTransport("script",function(n){if(n.crossDomain){var r,t;return{send:function(f,e){r=i("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",t=function(n){r.remove();t=null;n&&e("error"===n.type?404:200,n.type)});u.head.appendChild(r[0])},abort:function(){t&&t()}}}}),ki=[],ni=/(=)\?(?=&|$)|\?\?/,i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=ki.pop()||i.expando+"_"+ai++;return this[n]=!0,n}}),i.ajaxPrefilter("json jsonp",function(t,r,u){var f,e,o,s=t.jsonp!==!1&&(ni.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return(f=t.jsonpCallback=i.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(ni,"$1"+f):t.jsonp!==!1&&(t.url+=(vi.test(t.url)?"&":"?")+t.jsonp+"="+f),t.converters["script json"]=function(){return o||i.error(f+" was not called"),o[0]},t.dataTypes[0]="json",e=n[f],n[f]=function(){o=arguments},u.always(function(){void 0===e?i(n).removeProp(f):n[f]=e;t[f]&&(t.jsonpCallback=r.jsonpCallback,ki.push(f));o&&i.isFunction(e)&&e(o[0]);o=e=void 0}),"script")}),i.parseHTML=function(n,t,r){if(!n||"string"!=typeof n)return null;"boolean"==typeof t&&(r=t,t=!1);t=t||u;var f=rr.exec(n),e=!r&&[];return f?[t.createElement(f[1])]:(f=kr([n],t,e),e&&e.length&&i(e).remove(),i.merge([],f.childNodes))},di=i.fn.load,i.fn.load=function(n,t,r){if("string"!=typeof n&&di)return di.apply(this,arguments);var u,o,s,f=this,e=n.indexOf(" ");return e>-1&&(u=i.trim(n.slice(e)),n=n.slice(0,e)),i.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(o="POST"),f.length>0&&i.ajax({url:n,type:o||"GET",dataType:"html",data:t}).done(function(n){s=arguments;f.html(u?i("<div>").append(i.parseHTML(n)).find(u):n)}).always(r&&function(n,t){f.each(function(){r.apply(this,s||[n.responseText,t,n])})}),this},i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){i.fn[t]=function(n){return this.on(t,n)}}),i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length},i.offset={setOffset:function(n,t,r){var e,o,s,h,u,c,v,l=i.css(n,"position"),a=i(n),f={};"static"===l&&(n.style.position="relative");u=a.offset();s=i.css(n,"top");c=i.css(n,"left");v=("absolute"===l||"fixed"===l)&&(s+c).indexOf("auto")>-1;v?(e=a.position(),h=e.top,o=e.left):(h=parseFloat(s)||0,o=parseFloat(c)||0);i.isFunction(t)&&(t=t.call(n,r,i.extend({},u)));null!=t.top&&(f.top=t.top-u.top+h);null!=t.left&&(f.left=t.left-u.left+o);"using"in t?t.using.call(n,f):a.css(f)}},i.fn.extend({offset:function(n){if(arguments.length)return void 0===n?this:this.each(function(t){i.offset.setOffset(this,n,t)});var t,f,r=this[0],u={top:0,left:0},e=r&&r.ownerDocument;if(e)return t=e.documentElement,i.contains(t,r)?(u=r.getBoundingClientRect(),f=hf(e),{top:u.top+f.pageYOffset-t.clientTop,left:u.left+f.pageXOffset-t.clientLeft}):u},position:function(){if(this[0]){var n,r,u=this[0],t={top:0,left:0};return"fixed"===i.css(u,"position")?r=u.getBoundingClientRect():(n=this.offsetParent(),r=this.offset(),i.nodeName(n[0],"html")||(t=n.offset()),t.top+=i.css(n[0],"borderTopWidth",!0),t.left+=i.css(n[0],"borderLeftWidth",!0)),{top:r.top-t.top-i.css(u,"marginTop",!0),left:r.left-t.left-i.css(u,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent;n&&"static"===i.css(n,"position");)n=n.offsetParent;return n||ht})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,t){var r="pageYOffset"===t;i.fn[n]=function(i){return a(this,function(n,i,u){var f=hf(n);return void 0===u?f?f[t]:n[i]:void(f?f.scrollTo(r?f.pageXOffset:u,r?u:f.pageYOffset):n[i]=u)},n,i,arguments.length)}}),i.each(["top","left"],function(n,t){i.cssHooks[t]=ci(f.pixelPosition,function(n,r){if(r)return(r=tt(n,t),si.test(r)?i(n).position()[t]+"px":r)})}),i.each({Height:"height",Width:"width"},function(n,t){i.each({padding:"inner"+n,content:t,"":"outer"+n},function(r,u){i.fn[u]=function(u,f){var e=arguments.length&&(r||"boolean"!=typeof u),o=r||(u===!0||f===!0?"margin":"border");return a(this,function(t,r,u){var f;return i.isWindow(t)?t.document.documentElement["client"+n]:9===t.nodeType?(f=t.documentElement,Math.max(t.body["scroll"+n],f["scroll"+n],t.body["offset"+n],f["offset"+n],f["client"+n])):void 0===u?i.css(t,r,o):i.style(t,r,u,o)},t,e?u:void 0,e,null)}})}),i.fn.extend({bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return 1===arguments.length?this.off(n,"**"):this.off(t,n||"**",i)},size:function(){return this.length}}),i.fn.andSelf=i.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return i}),cf=n.jQuery,lf=n.$,i.noConflict=function(t){return n.$===i&&(n.$=lf),t&&n.jQuery===i&&(n.jQuery=cf),i},t||(n.jQuery=n.$=i),i});
/*!
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(n){"use strict";function t(){var i=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(void 0!==i.style[t])return{end:n[t]};return!1}n.fn.emulateTransitionEnd=function(t){var i=!1,u=this,r;n(this).one("bsTransitionEnd",function(){i=!0});return r=function(){i||n(u).trigger(n.support.transition.end)},setTimeout(r,t),this};n(function(){n.support.transition=t();n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery);+function(n){"use strict";function u(i){return this.each(function(){var r=n(this),u=r.data("bs.alert");u||r.data("bs.alert",u=new t(this));"string"==typeof i&&u[i].call(r)})}var i='[data-dismiss="alert"]',t=function(t){n(t).on("click",i,this.close)},r;t.VERSION="3.2.0";t.prototype.close=function(t){function f(){i.detach().trigger("closed.bs.alert").remove()}var u=n(this),r=u.attr("data-target"),i;r||(r=u.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));i=n(r);t&&t.preventDefault();i.length||(i=u.hasClass("alert")?u:u.parent());i.trigger(t=n.Event("close.bs.alert"));t.isDefaultPrevented()||(i.removeClass("in"),n.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",f).emulateTransitionEnd(150):f())};r=n.fn.alert;n.fn.alert=u;n.fn.alert.Constructor=t;n.fn.alert.noConflict=function(){return n.fn.alert=r,this};n(document).on("click.bs.alert.data-api",i,t.prototype.close)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.button"),f="object"==typeof i&&i;r||u.data("bs.button",r=new t(this,f));"toggle"==i?r.toggle():i&&r.setState(i)})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.isLoading=!1},r;t.VERSION="3.2.0";t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(t){var r="disabled",i=this.$element,f=i.is("input")?"val":"html",u=i.data();t+="Text";null==u.resetText&&i.data("resetText",i[f]());i[f](null==u[t]?this.options[t]:u[t]);setTimeout(n.proxy(function(){"loadingText"==t?(this.isLoading=!0,i.addClass(r).attr(r,r)):this.isLoading&&(this.isLoading=!1,i.removeClass(r).removeAttr(r))},this),0)};t.prototype.toggle=function(){var t=!0,i=this.$element.closest('[data-toggle="buttons"]'),n;i.length&&(n=this.$element.find("input"),"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:i.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change"));t&&this.$element.toggleClass("active")};r=n.fn.button;n.fn.button=i;n.fn.button.Constructor=t;n.fn.button.noConflict=function(){return n.fn.button=r,this};n(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=n(t.target);r.hasClass("btn")||(r=r.closest(".btn"));i.call(r,"toggle");t.preventDefault()})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.carousel"),f=n.extend({},t.DEFAULTS,u.data(),"object"==typeof i&&i),e="string"==typeof i?i:f.slide;r||u.data("bs.carousel",r=new t(this,f));"number"==typeof i?r.to(i):e?r[e]():f.interval&&r.pause().cycle()})}var t=function(t,i){this.$element=n(t).on("keydown.bs.carousel",n.proxy(this.keydown,this));this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.paused=this.sliding=this.interval=this.$active=this.$items=null;"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",n.proxy(this.pause,this)).on("mouseleave.bs.carousel",n.proxy(this.cycle,this))},r;t.VERSION="3.2.0";t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0};t.prototype.keydown=function(n){switch(n.which){case 37:this.prev();break;case 39:this.next();break;default:return}n.preventDefault()};t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this};t.prototype.getItemIndex=function(n){return this.$items=n.parent().children(".item"),this.$items.index(n||this.$active)};t.prototype.to=function(t){var r=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1)&&!(0>t))return this.sliding?this.$element.one("slid.bs.carousel",function(){r.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",n(this.$items[t]))};t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&n.support.transition&&(this.$element.trigger(n.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};t.prototype.next=function(){if(!this.sliding)return this.slide("next")};t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};t.prototype.slide=function(t,i){var u=this.$element.find(".item.active"),r=i||u[t](),c=this.interval,f="next"==t?"left":"right",a="next"==t?"first":"last",l=this,e,o,s,h;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[a]()}return r.hasClass("active")?this.sliding=!1:(e=r[0],o=n.Event("slide.bs.carousel",{relatedTarget:e,direction:f}),(this.$element.trigger(o),!o.isDefaultPrevented())?((this.sliding=!0,c&&this.pause(),this.$indicators.length)&&(this.$indicators.find(".active").removeClass("active"),s=n(this.$indicators.children()[this.getItemIndex(r)]),s&&s.addClass("active")),h=n.Event("slid.bs.carousel",{relatedTarget:e,direction:f}),n.support.transition&&this.$element.hasClass("slide")?(r.addClass(t),r[0].offsetWidth,u.addClass(f),r.addClass(f),u.one("bsTransitionEnd",function(){r.removeClass([t,f].join(" ")).addClass("active");u.removeClass(["active",f].join(" "));l.sliding=!1;setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(1e3*u.css("transition-duration").slice(0,-1))):(u.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(h)),c&&this.cycle(),this):void 0)};r=n.fn.carousel;n.fn.carousel=i;n.fn.carousel.Constructor=t;n.fn.carousel.noConflict=function(){return n.fn.carousel=r,this};n(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var o,r=n(this),u=n(r.attr("data-target")||(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")),e,f;u.hasClass("carousel")&&(e=n.extend({},u.data(),r.data()),f=r.attr("data-slide-to"),f&&(e.interval=!1),i.call(u,e),f&&u.data("bs.carousel").to(f),t.preventDefault())});n(window).on("load",function(){n('[data-ride="carousel"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.collapse"),f=n.extend({},t.DEFAULTS,u.data(),"object"==typeof i&&i);!r&&f.toggle&&"show"==i&&(i=!i);r||u.data("bs.collapse",r=new t(this,f));"string"==typeof i&&r[i]()})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.transitioning=null;this.options.parent&&(this.$parent=n(this.options.parent));this.options.toggle&&this.toggle()},r;t.VERSION="3.2.0";t.DEFAULTS={toggle:!0};t.prototype.dimension=function(){var n=this.$element.hasClass("width");return n?"width":"height"};t.prototype.show=function(){var f,t,u,r,e,o;if(!this.transitioning&&!this.$element.hasClass("in")&&(f=n.Event("show.bs.collapse"),this.$element.trigger(f),!f.isDefaultPrevented())){if(t=this.$parent&&this.$parent.find("> .panel > .in"),t&&t.length){if(u=t.data("bs.collapse"),u&&u.transitioning)return;i.call(t,"hide");u||t.data("bs.collapse",null)}if(r=this.dimension(),this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1,e=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")},!n.support.transition)return e.call(this);o=n.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",n.proxy(e,this)).emulateTransitionEnd(350)[r](this.$element[0][o])}};t.prototype.hide=function(){var i,t,r;if(!this.transitioning&&this.$element.hasClass("in")&&(i=n.Event("hide.bs.collapse"),this.$element.trigger(i),!i.isDefaultPrevented()))return t=this.dimension(),this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1,r=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")},n.support.transition?void this.$element[t](0).one("bsTransitionEnd",n.proxy(r,this)).emulateTransitionEnd(350):r.call(this)};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};r=n.fn.collapse;n.fn.collapse=i;n.fn.collapse.Constructor=t;n.fn.collapse.noConflict=function(){return n.fn.collapse=r,this};n(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var o,r=n(this),h=r.attr("data-target")||t.preventDefault()||(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""),u=n(h),f=u.data("bs.collapse"),c=f?"toggle":r.data(),e=r.attr("data-parent"),s=e&&n(e);f&&f.transitioning||(s&&s.find('[data-toggle="collapse"][data-parent="'+e+'"]').not(r).addClass("collapsed"),r[u.hasClass("in")?"addClass":"removeClass"]("collapsed"));i.call(u,c)})}(jQuery);+function(n){"use strict";function r(t){t&&3===t.which||(n(o).remove(),n(i).each(function(){var i=u(n(this)),r={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=n.Event("hide.bs.dropdown",r)),t.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",r))}))}function u(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length?r:t.parent()}function e(i){return this.each(function(){var r=n(this),u=r.data("bs.dropdown");u||r.data("bs.dropdown",u=new t(this));"string"==typeof i&&u[i].call(r)})}var o=".dropdown-backdrop",i='[data-toggle="dropdown"]',t=function(t){n(t).on("click.bs.dropdown",this.toggle)},f;t.VERSION="3.2.0";t.prototype.toggle=function(t){var f=n(this),i,o,e;if(!f.is(".disabled, :disabled")){if(i=u(f),o=i.hasClass("open"),r(),!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&n('<div class="dropdown-backdrop"/>').insertAfter(n(this)).on("click",r),e={relatedTarget:this},i.trigger(t=n.Event("show.bs.dropdown",e)),t.isDefaultPrevented())return;f.trigger("focus");i.toggleClass("open").trigger("shown.bs.dropdown",e)}return!1}};t.prototype.keydown=function(t){var e,o,s,h,f,r;if(/(38|40|27)/.test(t.keyCode)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=u(e),s=o.hasClass("open"),!s||s&&27==t.keyCode)return 27==t.which&&o.find(i).trigger("focus"),e.trigger("click");h=" li:not(.divider):visible a";f=o.find('[role="menu"]'+h+', [role="listbox"]'+h);f.length&&(r=f.index(f.filter(":focus")),38==t.keyCode&&r>0&&r--,40==t.keyCode&&r<f.length-1&&r++,~r||(r=0),f.eq(r).trigger("focus"))}};f=n.fn.dropdown;n.fn.dropdown=e;n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",i,t.prototype.toggle).on("keydown.bs.dropdown.data-api",i+', [role="menu"], [role="listbox"]',t.prototype.keydown)}(jQuery);+function(n){"use strict";function i(i,r){return this.each(function(){var f=n(this),u=f.data("bs.modal"),e=n.extend({},t.DEFAULTS,f.data(),"object"==typeof i&&i);u||f.data("bs.modal",u=new t(this,e));"string"==typeof i?u[i](r):e.show&&u.show(r)})}var t=function(t,i){this.options=i;this.$body=n(document.body);this.$element=n(t);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,n.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))},r;t.VERSION="3.2.0";t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};t.prototype.toggle=function(n){return this.isShown?this.hide():this.show(n)};t.prototype.show=function(t){var i=this,r=n.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r);this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',n.proxy(this.hide,this)),this.backdrop(function(){var u=n.support.transition&&i.$element.hasClass("fade"),r;i.$element.parent().length||i.$element.appendTo(i.$body);i.$element.show().scrollTop(0);u&&i.$element[0].offsetWidth;i.$element.addClass("in").attr("aria-hidden",!1);i.enforceFocus();r=n.Event("shown.bs.modal",{relatedTarget:t});u?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(r)}))};t.prototype.hide=function(t){t&&t.preventDefault();t=n.Event("hide.bs.modal");this.$element.trigger(t);this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),n(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),n.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",n.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())};t.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(n){this.$element[0]===n.target||this.$element.has(n.target).length||this.$element.trigger("focus")},this))};t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",n.proxy(function(n){27==n.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")};t.prototype.hideModal=function(){var n=this;this.$element.hide();this.backdrop(function(){n.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(t){var f=this,u=this.$element.hasClass("fade")?"fade":"",i,r;if(this.isShown&&this.options.backdrop){if(i=n.support.transition&&u,this.$backdrop=n('<div class="modal-backdrop '+u+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",n.proxy(function(n){n.target===n.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),r=function(){f.removeBackdrop();t&&t()},n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(150):r()):t&&t()};t.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())};t.prototype.setScrollbar=function(){var n=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",n+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right","")};t.prototype.measureScrollbar=function(){var n=document.createElement("div"),t;return n.className="modal-scrollbar-measure",this.$body.append(n),t=n.offsetWidth-n.clientWidth,this.$body[0].removeChild(n),t};r=n.fn.modal;n.fn.modal=i;n.fn.modal.Constructor=t;n.fn.modal.noConflict=function(){return n.fn.modal=r,this};n(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=n(this),f=r.attr("href"),u=n(r.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),e=u.data("bs.modal")?"toggle":n.extend({remote:!/#/.test(f)&&f},u.data(),r.data());r.is("a")&&t.preventDefault();u.one("show.bs.modal",function(n){n.isDefaultPrevented()||u.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})});i.call(u,e,this)})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tooltip"),f="object"==typeof i&&i;(r||"destroy"!=i)&&(r||u.data("bs.tooltip",r=new t(this,f)),"string"==typeof i&&r[i]())})}var t=function(n,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",n,t)},i;t.VERSION="3.2.0";t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,i,r){var f,e,u,o,s;for(this.enabled=!0,this.type=t,this.$element=n(i),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&n(this.options.viewport.selector||this.options.viewport),f=this.options.trigger.split(" "),e=f.length;e--;)if(u=f[e],"click"==u)this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this));else"manual"!=u&&(o="hover"==u?"mouseenter":"focusin",s="hover"==u?"mouseleave":"focusout",this.$element.on(o+"."+this.type,this.options.selector,n.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,n.proxy(this.leave,this)));this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){return t=n.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t};t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&n.each(this._options,function(n,r){i[n]!=r&&(t[n]=r)}),t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()};t.prototype.show=function(){var h=n.Event("show.bs."+this.type),c,y,s;if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),c=n.contains(document.documentElement,this.$element[0]),h.isDefaultPrevented()||!c)return;var f=this,i=this.tip(),l=this.getUID(this.type);this.setContent();i.attr("id",l);this.$element.attr("aria-describedby",l);this.options.animation&&i.addClass("fade");var t="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,v=a.test(t);v&&(t=t.replace(a,"")||"top");i.detach().css({top:0,left:0,display:"block"}).addClass(t).data("bs."+this.type,this);this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var r=this.getPosition(),e=i[0].offsetWidth,o=i[0].offsetHeight;if(v){var p=t,w=this.$element.parent(),u=this.getPosition(w);t="bottom"==t&&r.top+r.height+o-u.scroll>u.height?"top":"top"==t&&r.top-u.scroll-o<0?"bottom":"right"==t&&r.right+e>u.width?"left":"left"==t&&r.left-e<u.left?"right":t;i.removeClass(p).addClass(t)}y=this.getCalculatedOffset(t,r,e,o);this.applyPlacement(y,t);s=function(){f.$element.trigger("shown.bs."+f.type);f.hoverState=null};n.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",s).emulateTransitionEnd(150):s()}};t.prototype.applyPlacement=function(t,i){var r=this.tip(),c=r[0].offsetWidth,e=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10),h,f,u;isNaN(o)&&(o=0);isNaN(s)&&(s=0);t.top=t.top+o;t.left=t.left+s;n.offset.setOffset(r[0],n.extend({using:function(n){r.css({top:Math.round(n.top),left:Math.round(n.left)})}},t),0);r.addClass("in");h=r[0].offsetWidth;f=r[0].offsetHeight;"top"==i&&f!=e&&(t.top=t.top+e-f);u=this.getViewportAdjustedDelta(i,t,h,f);u.left?t.left+=u.left:t.top+=u.top;var l=u.left?2*u.left-c+h:2*u.top-e+f,a=u.left?"left":"top",v=u.left?"offsetWidth":"offsetHeight";r.offset(t);this.replaceArrow(l,r[0][v],a)};t.prototype.replaceArrow=function(n,t,i){this.arrow().css(i,n?50*(1-n/t)+"%":"")};t.prototype.setContent=function(){var n=this.tip(),t=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](t);n.removeClass("fade in top bottom left right")};t.prototype.hide=function(){function r(){"in"!=t.hoverState&&i.detach();t.$element.trigger("hidden.bs."+t.type)}var t=this,i=this.tip(),u=n.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(u),u.isDefaultPrevented()?void 0:(i.removeClass("in"),n.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",r).emulateTransitionEnd(150):r(),this.hoverState=null,this)};t.prototype.fixTitle=function(){var n=this.$element;(n.attr("title")||"string"!=typeof n.attr("data-original-title"))&&n.attr("data-original-title",n.attr("title")||"").attr("title","")};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var r=t[0],i="BODY"==r.tagName;return n.extend({},"function"==typeof r.getBoundingClientRect?r.getBoundingClientRect():null,{scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop(),width:i?n(window).width():t.outerWidth(),height:i?n(window).height():t.outerHeight()},i?{top:0,left:0}:t.offset())};t.prototype.getCalculatedOffset=function(n,t,i,r){return"bottom"==n?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==n?{top:t.top-r,left:t.left+t.width/2-i/2}:"left"==n?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(n,t,i,r){var f={top:0,left:0},e,u,o,s,h,c;return this.$viewport?(e=this.options.viewport&&this.options.viewport.padding||0,u=this.getPosition(this.$viewport),/right|left/.test(n)?(o=t.top-e-u.scroll,s=t.top+e-u.scroll+r,o<u.top?f.top=u.top-o:s>u.top+u.height&&(f.top=u.top+u.height-s)):(h=t.left-e,c=t.left+e+i,h<u.left?f.left=u.left-h:c>u.width&&(f.left=u.left+u.width-c)),f):f};t.prototype.getTitle=function(){var t=this.$element,n=this.options;return t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)};t.prototype.getUID=function(n){do n+=~~(1e6*Math.random());while(document.getElementById(n));return n};t.prototype.tip=function(){return this.$tip=this.$tip||n(this.options.template)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)};t.prototype.enable=function(){this.enabled=!0};t.prototype.disable=function(){this.enabled=!1};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var i=this;t&&(i=n(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)));i.tip().hasClass("in")?i.leave(i):i.enter(i)};t.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off("."+this.type).removeData("bs."+this.type)};i=n.fn.tooltip;n.fn.tooltip=r;n.fn.tooltip.Constructor=t;n.fn.tooltip.noConflict=function(){return n.fn.tooltip=i,this}}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.popover"),f="object"==typeof i&&i;(r||"destroy"!=i)&&(r||u.data("bs.popover",r=new t(this,f)),"string"==typeof i&&r[i]())})}var t=function(n,t){this.init("popover",n,t)},i;if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.2.0";t.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var n=this.tip(),i=this.getTitle(),t=this.getContent();n.find(".popover-title")[this.options.html?"html":"text"](i);n.find(".popover-content").empty()[this.options.html?"string"==typeof t?"html":"append":"text"](t);n.removeClass("fade top bottom left right in");n.find(".popover-title").html()||n.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var t=this.$element,n=this.options;return t.attr("data-content")||("function"==typeof n.content?n.content.call(t[0]):n.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};t.prototype.tip=function(){return this.$tip||(this.$tip=n(this.options.template)),this.$tip};i=n.fn.popover;n.fn.popover=r;n.fn.popover.Constructor=t;n.fn.popover.noConflict=function(){return n.fn.popover=i,this}}(jQuery);+function(n){"use strict";function t(i,r){var u=n.proxy(this.process,this);this.$body=n("body");this.$scrollElement=n(n(i).is("body")?window:i);this.options=n.extend({},t.DEFAULTS,r);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",u);this.refresh();this.process()}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.scrollspy"),f="object"==typeof i&&i;r||u.data("bs.scrollspy",r=new t(this,f));"string"==typeof i&&r[i]()})}t.VERSION="3.2.0";t.DEFAULTS={offset:10};t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};t.prototype.refresh=function(){var i="offset",r=0,t;n.isWindow(this.$scrollElement[0])||(i="position",r=this.$scrollElement.scrollTop());this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();t=this;this.$body.find(this.selector).map(function(){var f=n(this),u=f.data("target")||f.attr("href"),t=/^#./.test(u)&&n(u);return t&&t.length&&t.is(":visible")&&[[t[i]().top+r,u]]||null}).sort(function(n,t){return n[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})};t.prototype.process=function(){var n,r=this.$scrollElement.scrollTop()+this.options.offset,f=this.getScrollHeight(),e=this.options.offset+f-this.$scrollElement.height(),t=this.offsets,i=this.targets,u=this.activeTarget;if(this.scrollHeight!=f&&this.refresh(),r>=e)return u!=(n=i[i.length-1])&&this.activate(n);if(u&&r<=t[0])return u!=(n=i[0])&&this.activate(n);for(n=t.length;n--;)u!=i[n]&&r>=t[n]&&(!t[n+1]||r<=t[n+1])&&this.activate(i[n])};t.prototype.activate=function(t){this.activeTarget=t;n(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=n(r).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active"));i.trigger("activate.bs.scrollspy")};var r=n.fn.scrollspy;n.fn.scrollspy=i;n.fn.scrollspy.Constructor=t;n.fn.scrollspy.noConflict=function(){return n.fn.scrollspy=r,this};n(window).on("load.bs.scrollspy.data-api",function(){n('[data-spy="scroll"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.tab");r||u.data("bs.tab",r=new t(this));"string"==typeof i&&r[i]()})}var t=function(t){this.element=n(t)},r;t.VERSION="3.2.0";t.prototype.show=function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),i=t.data("target"),r,u,f;(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),t.parent("li").hasClass("active"))||(r=e.find(".active:last a")[0],u=n.Event("show.bs.tab",{relatedTarget:r}),(t.trigger(u),u.isDefaultPrevented())||(f=n(i),this.activate(t.closest("li"),e),this.activate(f,f.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:r})})))};t.prototype.activate=function(t,i,r){function f(){u.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");t.addClass("active");e?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade");t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active");r&&r()}var u=i.find("> .active"),e=r&&n.support.transition&&u.hasClass("fade");e?u.one("bsTransitionEnd",f).emulateTransitionEnd(150):f();u.removeClass("in")};r=n.fn.tab;n.fn.tab=i;n.fn.tab.Constructor=t;n.fn.tab.noConflict=function(){return n.fn.tab=r,this};n(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault();i.call(n(this),"show")})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.affix"),f="object"==typeof i&&i;r||u.data("bs.affix",r=new t(this,f));"string"==typeof i&&r[i]()})}var t=function(i,r){this.options=n.extend({},t.DEFAULTS,r);this.$target=n(this.options.target).on("scroll.bs.affix.data-api",n.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",n.proxy(this.checkPositionWithEventLoop,this));this.$element=n(i);this.affixed=this.unpin=this.pinnedOffset=null;this.checkPosition()},r;t.VERSION="3.2.0";t.RESET="affix affix-top affix-bottom";t.DEFAULTS={offset:0,target:window};t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var n=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-n};t.prototype.checkPositionWithEventLoop=function(){setTimeout(n.proxy(this.checkPosition,this),1)};t.prototype.checkPosition=function(){var i,e,o;if(this.$element.is(":visible")){var s=n(document).height(),h=this.$target.scrollTop(),c=this.$element.offset(),r=this.options.offset,f=r.top,u=r.bottom;"object"!=typeof r&&(u=f=r);"function"==typeof f&&(f=r.top(this.$element));"function"==typeof u&&(u=r.bottom(this.$element));i=null!=this.unpin&&h+this.unpin<=c.top?!1:null!=u&&c.top+this.$element.height()>=s-u?"bottom":null!=f&&f>=h?"top":!1;this.affixed!==i&&(null!=this.unpin&&this.$element.css("top",""),e="affix"+(i?"-"+i:""),o=n.Event(e+".bs.affix"),this.$element.trigger(o),o.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(e).trigger(n.Event(e.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:s-this.$element.height()-u})))}};r=n.fn.affix;n.fn.affix=i;n.fn.affix.Constructor=t;n.fn.affix.noConflict=function(){return n.fn.affix=r,this};n(window).on("load",function(){n('[data-spy="affix"]').each(function(){var r=n(this),t=r.data();t.offset=t.offset||{};t.offsetBottom&&(t.offset.bottom=t.offsetBottom);t.offsetTop&&(t.offset.top=t.offsetTop);i.call(r,t)})})}(jQuery);
/*! jQuery Validation Plugin - v1.13.1 - 10/14/2014
 * http://jqueryvalidation.org/
 * Copyright (c) 2014 Jörn Zaefferer; Licensed MIT */
!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){n.extend(n.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=n.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new n.validator(t,this[0]),n.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target);n(t.target).hasClass("cancel")&&(i.cancelSubmit=!0);void 0!==n(t.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(t){function r(){var u,r;return i.settings.submitHandler?(i.submitButton&&(u=n("<input type='hidden'/>").attr("name",i.submitButton.name).val(n(i.submitButton).val()).appendTo(i.currentForm)),r=i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&u.remove(),void 0!==r?r:!1):!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})),i)},valid:function(){var t,i;return n(this[0]).is("form")?t=this.validate().form():(t=!0,i=n(this[0].form).validate(),this.each(function(){t=i.element(this)&&t})),t},removeAttrs:function(t){var i={},r=this;return n.each(t.split(/\s/),function(n,t){i[t]=r.attr(t);r.removeAttr(t)}),i},rules:function(t,i){var e,s,f,u,o,h,r=this[0];if(t)switch(e=n.data(r.form,"validator").settings,s=e.rules,f=n.validator.staticRules(r),t){case"add":n.extend(f,n.validator.normalizeRule(i));delete f.messages;s[r.name]=f;i.messages&&(e.messages[r.name]=n.extend(e.messages[r.name],i.messages));break;case"remove":return i?(h={},n.each(i.split(/\s/),function(t,i){h[i]=f[i];delete f[i];"required"===i&&n(r).removeAttr("aria-required")}),h):(delete s[r.name],f)}return u=n.validator.normalizeRules(n.extend({},n.validator.classRules(r),n.validator.attributeRules(r),n.validator.dataRules(r),n.validator.staticRules(r)),r),u.required&&(o=u.required,delete u.required,u=n.extend({required:o},u),n(r).attr("aria-required","true")),u.remote&&(o=u.remote,delete u.remote,u=n.extend(u,{remote:o})),u}});n.extend(n.expr[":"],{blank:function(t){return!n.trim(""+n(t).val())},filled:function(t){return!!n.trim(""+n(t).val())},unchecked:function(t){return!n(t).prop("checked")}});n.validator=function(t,i){this.settings=n.extend(!0,{},n.validator.defaults,t);this.currentForm=i;this.init()};n.validator.format=function(t,i){return 1===arguments.length?function(){var i=n.makeArray(arguments);return i.unshift(t),n.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=n.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),n.each(i,function(n,i){t=t.replace(new RegExp("\\{"+n+"\\}","g"),function(){return i})}),t)};n.extend(n.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:n([]),errorLabelContainer:n([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(n){this.lastActive=n;this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,n,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(n)))},onfocusout:function(n){!this.checkable(n)&&(n.name in this.submitted||!this.optional(n))&&this.element(n)},onkeyup:function(n,t){(9!==t.which||""!==this.elementValue(n))&&(n.name in this.submitted||n===this.lastElement)&&this.element(n)},onclick:function(n){n.name in this.submitted?this.element(n):n.parentNode.name in this.submitted&&this.element(n.parentNode)},highlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(r):n(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(r):n(t).removeClass(i).addClass(r)}},setDefaults:function(t){n.extend(n.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:n.validator.format("Please enter no more than {0} characters."),minlength:n.validator.format("Please enter at least {0} characters."),rangelength:n.validator.format("Please enter a value between {0} and {1} characters long."),range:n.validator.format("Please enter a value between {0} and {1}."),max:n.validator.format("Please enter a value less than or equal to {0}."),min:n.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function i(t){var r=n.data(this[0].form,"validator"),u="on"+t.type.replace(/^validate/,""),i=r.settings;i[u]&&!this.is(i.ignore)&&i[u].call(r,this[0],t)}this.labelContainer=n(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||n(this.currentForm);this.containers=n(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var t,r=this.groups={};n.each(this.settings.groups,function(t,i){"string"==typeof i&&(i=i.split(/\s/));n.each(i,function(n,i){r[i]=t})});t=this.settings.rules;n.each(t,function(i,r){t[i]=n.validator.normalizeRule(r)});n(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",i).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",i);this.settings.invalidHandler&&n(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);n(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),n.extend(this.submitted,this.errorMap),this.invalid=n.extend({},this.errorMap),this.valid()||n(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var n=0,t=this.currentElements=this.elements();t[n];n++)this.check(t[n]);return this.valid()},element:function(t){var u=this.clean(t),i=this.validationTargetFor(u),r=!0;return this.lastElement=i,void 0===i?delete this.invalid[u.name]:(this.prepareElement(i),this.currentElements=n(i),r=this.check(i)!==!1,r?delete this.invalid[i.name]:this.invalid[i.name]=!0),n(t).attr("aria-invalid",!r),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),r},showErrors:function(t){if(t){n.extend(this.errorMap,t);this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=n.grep(this.successList,function(n){return!(n.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){n.fn.resetForm&&n(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(n){var i,t=0;for(i in n)t++;return t},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(n){n.not(this.containers).text("");this.addWrapper(n).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{n(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===n.grep(this.errorList,function(n){return n.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return n(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(n(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(t){return n(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return n(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=n([]);this.toHide=n([]);this.currentElements=n([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(n){this.reset();this.toHide=this.errorsFor(n)},elementValue:function(t){var i,u=n(t),r=t.type;return"radio"===r||"checkbox"===r?n("input[name='"+t.name+"']:checked").val():"number"===r&&"undefined"!=typeof t.validity?t.validity.badInput?!1:u.val():(i=u.val(),"string"==typeof i?i.replace(/\r/g,""):i)},check:function(t){t=this.validationTargetFor(this.clean(t));var i,r,u,f=n(t).rules(),s=n.map(f,function(n,t){return t}).length,e=!1,h=this.elementValue(t);for(r in f){u={method:r,parameters:f[r]};try{if(i=n.validator.methods[r].call(this,h,t,u.parameters),"dependency-mismatch"===i&&1===s){e=!0;continue}if(e=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,u),!1}catch(o){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+u.method+"' method.",o),o;}}if(!e)return this.objectLength(f)&&this.successList.push(t),!0},customDataMessage:function(t,i){return n(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||n(t).data("msg")},customMessage:function(n,t){var i=this.settings.messages[n];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var n=0;n<arguments.length;n++)if(void 0!==arguments[n])return arguments[n];return void 0},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,n.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"<\/strong>")},formatAndAdd:function(t,i){var r=this.defaultMessage(t,i.method),u=/\$?\{(\d+)\}/g;"function"==typeof r?r=r.call(this,i.parameters,t):u.test(r)&&(r=n.validator.format(r.replace(u,"{$1}"),i.parameters));this.errorList.push({message:r,element:t,method:i.method});this.errorMap[t.name]=r;this.submitted[t.name]=r},addWrapper:function(n){return this.settings.wrapper&&(n=n.add(n.parent(this.settings.wrapper))),n},defaultShowErrors:function(){for(var i,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,i=this.validElements();i[n];n++)this.settings.unhighlight.call(this,i[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return n(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var u,o,e,r=this.errorsFor(t),s=this.idOrName(t),f=n(t).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(i)):(r=n("<"+this.settings.errorElement+">").attr("id",s+"-error").addClass(this.settings.errorClass).html(i||""),u=r,this.settings.wrapper&&(u=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(u):this.settings.errorPlacement?this.settings.errorPlacement(u,n(t)):u.insertAfter(t),r.is("label")?r.attr("for",s):0===r.parents("label[for='"+s+"']").length&&(e=r.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),f?f.match(new RegExp("\\b"+e+"\\b"))||(f+=" "+e):f=e,n(t).attr("aria-describedby",f),o=this.groups[t.name],o&&n.each(this.groups,function(t,i){i===o&&n("[name='"+t+"']",this.currentForm).attr("aria-describedby",r.attr("id"))})));!i&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,t));this.toShow=this.toShow.add(r)},errorsFor:function(t){var r=this.idOrName(t),u=n(t).attr("aria-describedby"),i="label[for='"+r+"'], label[for='"+r+"'] *";return u&&(i=i+", #"+u.replace(/\s+/g,", #")),this.errors().filter(i)},idOrName:function(n){return this.groups[n.name]||(this.checkable(n)?n.name:n.id||n.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),n(t).not(this.settings.ignore)[0]},checkable:function(n){return/radio|checkbox/i.test(n.type)},findByName:function(t){return n(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return n("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(n,t){return this.dependTypes[typeof n]?this.dependTypes[typeof n](n,t):!0},dependTypes:{boolean:function(n){return n},string:function(t,i){return!!n(t,i.form).length},"function":function(n,t){return n(t)}},optional:function(t){var i=this.elementValue(t);return!n.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(n){this.pending[n.name]||(this.pendingRequest++,this.pending[n.name]=!0)},stopRequest:function(t,i){this.pendingRequest--;this.pendingRequest<0&&(this.pendingRequest=0);delete this.pending[t.name];i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(n(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(n(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return n.data(t,"previousValue")||n.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:n.extend(this.classRuleSettings,t)},classRules:function(t){var i={},r=n(t).attr("class");return r&&n.each(r.split(" "),function(){this in n.validator.classRuleSettings&&n.extend(i,n.validator.classRuleSettings[this])}),i},attributeRules:function(t){var r,i,u={},e=n(t),f=t.getAttribute("type");for(r in n.validator.methods)"required"===r?(i=t.getAttribute(r),""===i&&(i=!0),i=!!i):i=e.attr(r),/min|max/.test(r)&&(null===f||/number|range|text/.test(f))&&(i=Number(i)),i||0===i?u[r]=i:f===r&&"range"!==f&&(u[r]=!0);return u.maxlength&&/-1|2147483647|524288/.test(u.maxlength)&&delete u.maxlength,u},dataRules:function(t){var i,r,u={},f=n(t);for(i in n.validator.methods)r=f.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),void 0!==r&&(u[i]=r);return u},staticRules:function(t){var i={},r=n.data(t.form,"validator");return r.settings.rules&&(i=n.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return n.each(t,function(r,u){if(u===!1)return void delete t[r];if(u.param||u.depends){var f=!0;switch(typeof u.depends){case"string":f=!!n(u.depends,i.form).length;break;case"function":f=u.depends.call(i,i)}f?t[r]=void 0!==u.param?u.param:!0:delete t[r]}}),n.each(t,function(r,u){t[r]=n.isFunction(u)?u(i):u}),n.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),n.each(["rangelength","range"],function(){var i;t[this]&&(n.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),n.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};n.each(t.split(/\s/),function(){i[this]=!0});t=i}return t},addMethod:function(t,i,r){n.validator.methods[t]=i;n.validator.messages[t]=void 0!==r?r:n.validator.messages[t];i.length<3&&n.validator.addClassRules(t,n.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var u=n(i).val();return u&&u.length>0}return this.checkable(i)?this.getLength(t,i)>0:n.trim(t).length>0},email:function(n,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(n)},url:function(n,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(n)},date:function(n,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(n).toString())},dateISO:function(n,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(n)},number:function(n,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(n)},digits:function(n,t){return this.optional(t)||/^\d+$/.test(n)},creditcard:function(n,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(n))return!1;var i,f,e=0,r=0,u=!1;if(n=n.replace(/\D/g,""),n.length<13||n.length>19)return!1;for(i=n.length-1;i>=0;i--)f=n.charAt(i),r=parseInt(f,10),u&&(r*=2)>9&&(r-=9),e+=r,u=!u;return e%10==0},minlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||u>=r},maxlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||r>=u},rangelength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||u>=r[0]&&u<=r[1]},min:function(n,t,i){return this.optional(t)||n>=i},max:function(n,t,i){return this.optional(t)||i>=n},range:function(n,t,i){return this.optional(t)||n>=i[0]&&n<=i[1]},equalTo:function(t,i,r){var u=n(r);return this.settings.onfocusout&&u.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){n(i).valid()}),t===u.val()},remote:function(t,i,r){if(this.optional(i))return"dependency-mismatch";var u,e,f=this.previousValue(i);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),f.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=f.message,r="string"==typeof r&&{url:r}||r,f.old===t?f.valid:(f.old=t,u=this,this.startRequest(i),e={},e[i.name]=t,n.ajax(n.extend(!0,{url:r,mode:"abort",port:"validate"+i.name,dataType:"json",data:e,context:u.currentForm,success:function(r){var o,e,h,s=r===!0||"true"===r;u.settings.messages[i.name].remote=f.originalMessage;s?(h=u.formSubmitted,u.prepareElement(i),u.formSubmitted=h,u.successList.push(i),delete u.invalid[i.name],u.showErrors()):(o={},e=r||u.defaultMessage(i,"remote"),o[i.name]=f.message=n.isFunction(e)?e(t):e,u.invalid[i.name]=!0,u.showErrors(o));f.valid=s;u.stopRequest(i,s)}},r)),"pending")}}});n.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead.";};var i,t={};n.ajaxPrefilter?n.ajaxPrefilter(function(n,i,r){var u=n.port;"abort"===n.mode&&(t[u]&&t[u].abort(),t[u]=r)}):(i=n.ajax,n.ajax=function(r){var f=("mode"in r?r:n.ajaxSettings).mode,u=("port"in r?r:n.ajaxSettings).port;return"abort"===f?(t[u]&&t[u].abort(),t[u]=i.apply(this,arguments),t[u]):i.apply(this,arguments)});n.extend(n.fn,{validateDelegate:function(t,i,r){return this.bind(i,function(i){var u=n(i.target);if(u.is(t))return r.apply(u,arguments)})}})}),function(n){function i(n,t,i){n.rules[t]=i;n.message&&(n.messages[t]=n.message)}function h(n){return n.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function f(n){return n.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function e(n){return n.substr(0,n.lastIndexOf(".")+1)}function o(n,t){return n.indexOf("*.")===0&&(n=n.replace("*.",t)),n}function c(t,i){var r=n(this).find("[data-valmsg-for='"+f(i[0].name)+"']"),u=r.attr("data-valmsg-replace"),e=u?n.parseJSON(u)!==!1:null;r.removeClass("field-validation-valid").addClass("field-validation-error");t.data("unobtrusiveContainer",r);e?(r.empty(),t.removeClass("input-validation-error").appendTo(r)):t.hide()}function l(t,i){var u=n(this).find("[data-valmsg-summary=true]"),r=u.find("ul");r&&r.length&&i.errorList.length&&(r.empty(),u.addClass("validation-summary-errors").removeClass("validation-summary-valid"),n.each(i.errorList,function(){n("<li />").html(this.message).appendTo(r)}))}function a(t){var i=t.data("unobtrusiveContainer"),r=i.attr("data-valmsg-replace"),u=r?n.parseJSON(r):null;i&&(i.addClass("field-validation-valid").removeClass("field-validation-error"),t.removeData("unobtrusiveContainer"),u&&i.empty())}function v(){var t=n(this);t.data("validator").resetForm();t.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors");t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}function s(t){var i=n(t),r=i.data(u),f=n.proxy(v,t);return r||(r={options:{errorClass:"input-validation-error",errorElement:"span",errorPlacement:n.proxy(c,t),invalidHandler:n.proxy(l,t),messages:{},rules:{},success:n.proxy(a,t)},attachValidation:function(){i.unbind("reset."+u,f).bind("reset."+u,f).validate(this.options)},validate:function(){return i.validate(),i.valid()}},i.data(u,r)),r}var r=n.validator,t,u="unobtrusiveValidation";r.unobtrusive={adapters:[],parseElement:function(t,i){var u=n(t),f=u.parents("form")[0],r,e,o;f&&(r=s(f),r.options.rules[t.name]=e={},r.options.messages[t.name]=o={},n.each(this.adapters,function(){var i="data-val-"+this.name,r=u.attr(i),s={};r!==undefined&&(i+="-",n.each(this.params,function(){s[this]=u.attr(i+this)}),this.adapt({element:t,form:f,message:r,params:s,rules:e,messages:o}))}),n.extend(e,{__dummy__:!0}),i||r.attachValidation())},parse:function(t){var i=n(t).parents("form").andSelf().add(n(t).find("form")).filter("form");n(t).find(":input[data-val=true]").each(function(){r.unobtrusive.parseElement(this,!0)});i.each(function(){var n=s(this);n&&n.attachValidation()})}};t=r.unobtrusive.adapters;t.add=function(n,t,i){return i||(i=t,t=[]),this.push({name:n,params:t,adapt:i}),this};t.addBool=function(n,t){return this.add(n,function(r){i(r,t||n,!0)})};t.addMinMax=function(n,t,r,u,f,e){return this.add(n,[f||"min",e||"max"],function(n){var f=n.params.min,e=n.params.max;f&&e?i(n,u,[f,e]):f?i(n,t,f):e&&i(n,r,e)})};t.addSingleVal=function(n,t,r){return this.add(n,[t||"val"],function(u){i(u,r||n,u.params[t])})};r.addMethod("__dummy__",function(){return!0});r.addMethod("regex",function(n,t,i){var r;return this.optional(t)?!0:(r=new RegExp(i).exec(n),r&&r.index===0&&r[0].length===n.length)});r.addMethod("nonalphamin",function(n,t,i){var r;return i&&(r=n.match(/\W/g),r=r&&r.length>=i),r});t.addSingleVal("accept","exts").addSingleVal("regex","pattern");t.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");t.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range");t.add("equalto",["other"],function(t){var r=e(t.element.name),u=t.params.other,s=o(u,r),h=n(t.form).find(":input[name='"+f(s)+"']")[0];i(t,"equalTo",h)});t.add("required",function(n){(n.element.tagName.toUpperCase()!=="INPUT"||n.element.type.toUpperCase()!=="CHECKBOX")&&i(n,"required",!0)});t.add("remote",["url","type","additionalfields"],function(t){var r={url:t.params.url,type:t.params.type||"GET",data:{}},u=e(t.element.name);n.each(h(t.params.additionalfields||t.element.name),function(i,e){var s=o(e,u);r.data[s]=function(){return n(t.form).find(":input[name='"+f(s)+"']").val()}});i(t,"remote",r)});t.add("password",["min","nonalphamin","regex"],function(n){n.params.min&&i(n,"minlength",n.params.min);n.params.nonalphamin&&i(n,"nonalphamin",n.params.nonalphamin);n.params.regex&&i(n,"regex",n.params.regex)});n(function(){r.unobtrusive.parse(document)})}(jQuery);jQuery.validator.setDefaults({highlight:function(n,t,i){n.type==="radio"?this.findByName(n.name).addClass(t).removeClass(i):($(n).addClass(t).removeClass(i),$(n).closest(".form-group").addClass("has-error"))},unhighlight:function(n,t,i){n.type==="radio"?this.findByName(n.name).removeClass(t).addClass(i):($(n).removeClass(t).addClass(i),$(n).closest(".form-group").removeClass("has-error"))}});$(function(){$("span.field-validation-valid, span.field-validation-error").addClass("help-block");$("div.form-group").has("span.field-validation-error").addClass("has-error");$("div.validation-summary-errors").has("li:visible").addClass("alert alert-block alert-danger")});!function(n){var t=function(){"use strict";var f="s",n={DAY:864e5,HOUR:36e5,MINUTE:6e4,SECOND:1e3,BASELINE_YEAR:2014,MAX_SCORE:864e6,AMBIGUITIES:{"America/Denver":["America/Mazatlan"],"Europe/London":["Africa/Casablanca"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":["Asia/Amman","Asia/Jerusalem","Europe/Helsinki","Asia/Damascus","Africa/Cairo","Asia/Gaza","Europe/Minsk"],"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk","Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]}},i=function(n){var t=-n.getTimezoneOffset();return null!==t?t:0},e=function(){var t=i(new Date(n.BASELINE_YEAR,0,2)),r=i(new Date(n.BASELINE_YEAR,5,2)),u=t-r;return 0>u?t+",1":u>0?r+",1,"+f:t+",0"},o=function(){var t,n;if("undefined"!=typeof Intl&&"undefined"!=typeof Intl.DateTimeFormat&&(t=Intl.DateTimeFormat(),"undefined"!=typeof t&&"undefined"!=typeof t.resolvedOptions))return n=t.resolvedOptions().timeZone,n&&(n.indexOf("/")>-1||"UTC"===n)?n:void 0},s=function(n){for(var f,t,s=new Date(n,0,1,0,0,1,0).getTime(),h=new Date(n,12,31,23,59,59).getTime(),i=s,u=new Date(i).getTimezoneOffset(),e=null,o=null;h-864e5>i;)f=new Date(i),t=f.getTimezoneOffset(),t!==u&&(u>t&&(e=f),t>u&&(o=f),u=t),i+=864e5;return e&&o?{s:r(e).getTime(),e:r(o).getTime()}:!1},r=function u(t,i,r){var o,h;"undefined"==typeof i&&(i=n.DAY,r=n.HOUR);for(var s=new Date(t.getTime()-i).getTime(),c=t.getTime()+i,l=new Date(s).getTimezoneOffset(),e=s,f=null;c-r>e;){if(o=new Date(e),h=o.getTimezoneOffset(),h!==l){f=o;break}e+=r}return i===n.DAY?u(f,n.HOUR,n.MINUTE):i===n.HOUR?u(f,n.MINUTE,n.SECOND):f},h=function(n,t,i,r){if("N/A"!==i)return i;if("Asia/Beirut"===t){if("Africa/Cairo"===r.name&&13983768e5===n[6].s&&14116788e5===n[6].e||"Asia/Jerusalem"===r.name&&13959648e5===n[6].s&&14118588e5===n[6].e)return 0}else if("America/Santiago"===t){if("America/Asuncion"===r.name&&14124816e5===n[6].s&&1397358e6===n[6].e||"America/Campo_Grande"===r.name&&14136912e5===n[6].s&&13925196e5===n[6].e)return 0}else if("America/Montevideo"===t){if("America/Sao_Paulo"===r.name&&14136876e5===n[6].s&&1392516e6===n[6].e)return 0}else if("Pacific/Auckland"===t&&"Pacific/Fiji"===r.name&&14142456e5===n[6].s&&13961016e5===n[6].e)return 0;return i},c=function(i,r){for(var a,c,f,e,v=function(t){for(var f=0,u=0;u<i.length;u++)if(t.rules[u]&&i[u]){if(!(i[u].s>=t.rules[u].s&&i[u].e<=t.rules[u].e)){f="N/A";break}if(f=0,f+=Math.abs(i[u].s-t.rules[u].s),f+=Math.abs(t.rules[u].e-i[u].e),f>n.MAX_SCORE){f="N/A";break}}return h(i,r,f,t)},o={},s=t.olson.dst_rules.zones,y=s.length,l=n.AMBIGUITIES[r],u=0;y>u;u++)a=s[u],c=v(s[u]),"N/A"!==c&&(o[a.name]=c);for(f in o)if(o.hasOwnProperty(f))for(e=0;e<l.length;e++)if(l[e]===f)return f;return r},l=function(n){var r=function(){for(var r,i=[],n=0;n<t.olson.dst_rules.years.length;n++)r=s(t.olson.dst_rules.years[n]),i.push(r);return i},u=function(n){for(var t=0;t<n.length;t++)if(n[t]!==!1)return!0;return!1},i=r(),f=u(i);return f?c(i,n):n},a=function(){var i=o();return i||(i=t.olson.timezones[e()],"undefined"!=typeof n.AMBIGUITIES[i]&&(i=l(i))),{name:function(){return i}}};return{determine:a}}();t.olson=t.olson||{};t.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"};t.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572e5,s:12090744e5},{e:1250802e6,s:1240524e6},{e:12858804e5,s:12840696e5},!1,!1,!1,{e:14116788e5,s:1406844e6}]},{name:"Africa/Casablanca",rules:[{e:12202236e5,s:12122784e5},{e:12508092e5,s:12438144e5},{e:1281222e6,s:12727584e5},{e:13120668e5,s:13017888e5},{e:13489704e5,s:1345428e6},{e:13828392e5,s:13761e8},{e:14142888e5,s:14069448e5}]},{name:"America/Asuncion",rules:[{e:12050316e5,s:12243888e5},{e:12364812e5,s:12558384e5},{e:12709548e5,s:12860784e5},{e:13024044e5,s:1317528e6},{e:1333854e6,s:13495824e5},{e:1364094e6,s:1381032e6},{e:13955436e5,s:14124816e5}]},{name:"America/Campo_Grande",rules:[{e:12032172e5,s:12243888e5},{e:12346668e5,s:12558384e5},{e:12667212e5,s:1287288e6},{e:12981708e5,s:13187376e5},{e:13302252e5,s:1350792e6},{e:136107e7,s:13822416e5},{e:13925196e5,s:14136912e5}]},{name:"America/Goose_Bay",rules:[{e:122559486e4,s:120503526e4},{e:125704446e4,s:123648486e4},{e:128909886e4,s:126853926e4},{e:13205556e5,s:129998886e4},{e:13520052e5,s:13314456e5},{e:13834548e5,s:13628952e5},{e:14149044e5,s:13943448e5}]},{name:"America/Havana",rules:[{e:12249972e5,s:12056436e5},{e:12564468e5,s:12364884e5},{e:12885012e5,s:12685428e5},{e:13211604e5,s:13005972e5},{e:13520052e5,s:13332564e5},{e:13834548e5,s:13628916e5},{e:14149044e5,s:13943412e5}]},{name:"America/Mazatlan",rules:[{e:1225008e6,s:12074724e5},{e:12564576e5,s:1238922e6},{e:1288512e6,s:12703716e5},{e:13199616e5,s:13018212e5},{e:13514112e5,s:13332708e5},{e:13828608e5,s:13653252e5},{e:14143104e5,s:13967748e5}]},{name:"America/Mexico_City",rules:[{e:12250044e5,s:12074688e5},{e:1256454e6,s:12389184e5},{e:12885084e5,s:1270368e6},{e:1319958e6,s:13018176e5},{e:13514076e5,s:13332672e5},{e:13828572e5,s:13653216e5},{e:14143068e5,s:13967712e5}]},{name:"America/Miquelon",rules:[{e:12255984e5,s:12050388e5},{e:1257048e6,s:12364884e5},{e:12891024e5,s:12685428e5},{e:1320552e6,s:12999924e5},{e:13520016e5,s:1331442e6},{e:13834512e5,s:13628916e5},{e:14149008e5,s:13943412e5}]},{name:"America/Santa_Isabel",rules:[{e:12250116e5,s:1207476e6},{e:12564612e5,s:12389256e5},{e:12885156e5,s:12703752e5},{e:13199652e5,s:13018248e5},{e:13514148e5,s:13332744e5},{e:13828644e5,s:13653288e5},{e:1414314e6,s:13967784e5}]},{name:"America/Santiago",rules:[{e:1206846e6,s:1223784e6},{e:1237086e6,s:12552336e5},{e:127035e7,s:12866832e5},{e:13048236e5,s:13138992e5},{e:13356684e5,s:13465584e5},{e:1367118e6,s:13786128e5},{e:13985676e5,s:14100624e5}]},{name:"America/Sao_Paulo",rules:[{e:12032136e5,s:12243852e5},{e:12346632e5,s:12558348e5},{e:12667176e5,s:12872844e5},{e:12981672e5,s:1318734e6},{e:13302216e5,s:13507884e5},{e:13610664e5,s:1382238e6},{e:1392516e6,s:14136876e5}]},{name:"Asia/Amman",rules:[{e:1225404e6,s:12066552e5},{e:12568536e5,s:12381048e5},{e:12883032e5,s:12695544e5},{e:13197528e5,s:13016088e5},!1,!1,{e:14147064e5,s:13959576e5}]},{name:"Asia/Damascus",rules:[{e:12254868e5,s:120726e7},{e:125685e7,s:12381048e5},{e:12882996e5,s:12701592e5},{e:13197492e5,s:13016088e5},{e:13511988e5,s:13330584e5},{e:13826484e5,s:1364508e6},{e:14147028e5,s:13959576e5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572e5,s:12066552e5},{e:12520152e5,s:12381048e5},{e:1281474e6,s:126964086e4},{e:1312146e6,s:130160886e4},{e:13481784e5,s:13330584e5},{e:13802292e5,s:1364508e6},{e:1414098e6,s:13959576e5}]},{name:"Asia/Irkutsk",rules:[{e:12249576e5,s:12068136e5},{e:12564072e5,s:12382632e5},{e:12884616e5,s:12697128e5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612e5,s:12066624e5},{e:1254006e6,s:1238112e6},{e:1284246e6,s:12695616e5},{e:131751e7,s:1301616e6},{e:13483548e5,s:13330656e5},{e:13828284e5,s:13645152e5},{e:1414278e6,s:13959648e5}]},{name:"Asia/Kamchatka",rules:[{e:12249432e5,s:12067992e5},{e:12563928e5,s:12382488e5},{e:12884508e5,s:12696984e5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612e5,s:12068172e5},{e:12564108e5,s:12382668e5},{e:12884652e5,s:12697164e5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648e5,s:12068208e5},{e:12564144e5,s:12382704e5},{e:12884688e5,s:126972e7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504e5,s:12068064e5},{e:12564e8,s:1238256e6},{e:12884544e5,s:12697056e5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954e6,s:120681e7},{e:12564036e5,s:12382596e5},{e:1288458e6,s:12697092e5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684e5,s:12068244e5},{e:1256418e6,s:1238274e6},{e:12884724e5,s:12697236e5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972e6,s:1206828e6},{e:12564216e5,s:12382776e5},{e:1288476e6,s:12697272e5},{e:13199256e5,s:13011768e5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076e5,s:12231342e5},{e:12388572e5,s:12545838e5},{e:12703068e5,s:12860334e5},{e:13017564e5,s:1317483e6},{e:1333206e6,s:13495374e5},{e:13652604e5,s:1380987e6},{e:139671e7,s:14124366e5}]},{name:"Australia/Perth",rules:[{e:12068136e5,s:12249576e5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Europe/Minsk",rules:[{e:12249792e5,s:12068352e5},{e:12564288e5,s:12382848e5},{e:12884832e5,s:12697344e5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756e5,s:12068316e5},{e:12564252e5,s:12382812e5},{e:12884796e5,s:12697308e5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528e5,s:13168728e5},{e:13332024e5,s:13489272e5},{e:13652568e5,s:13803768e5},{e:13967064e5,s:14118264e5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984e5,s:12878424e5},{e:13271544e5,s:1319292e6},{e:1358604e6,s:13507416e5},{e:139005e7,s:1382796e6},{e:14215032e5,s:14148504e5}]},{name:"Europe/London",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]}]};"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t:"undefined"!=typeof define&&null!==define&&null!=define.amd?define([],function(){return t}):"undefined"==typeof n?window.jstz=t:n.jstz=t}();
//! moment.js
//! version : 2.13.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.moment=t()}(this,function(){"use strict";function t(){return ae.apply(null,arguments)}function vo(n){ae=n}function pt(n){return n instanceof Array||"[object Array]"===Object.prototype.toString.call(n)}function ai(n){return n instanceof Date||"[object Date]"===Object.prototype.toString.call(n)}function bu(n,t){for(var r=[],i=0;i<n.length;++i)r.push(t(n[i],i));return r}function w(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function wt(n,t){for(var i in t)w(t,i)&&(n[i]=t[i]);return w(t,"toString")&&(n.toString=t.toString),w(t,"valueOf")&&(n.valueOf=t.valueOf),n}function it(n,t,i,r){return pf(n,t,i,r,!0).utc()}function yo(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function f(n){return null==n._pf&&(n._pf=yo()),n._pf}function sr(n){if(null==n._isValid){var t=f(n),i=ve.call(t.parsedDateParts,function(n){return null!=n});n._isValid=!isNaN(n._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);n._strict&&(n._isValid=n._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return n._isValid}function vi(n){var t=it(NaN);return null!=n?wt(f(t),n):f(t).userInvalidated=!0,t}function p(n){return void 0===n}function hr(n,t){var u,i,r;if(p(t._isAMomentObject)||(n._isAMomentObject=t._isAMomentObject),p(t._i)||(n._i=t._i),p(t._f)||(n._f=t._f),p(t._l)||(n._l=t._l),p(t._strict)||(n._strict=t._strict),p(t._tzm)||(n._tzm=t._tzm),p(t._isUTC)||(n._isUTC=t._isUTC),p(t._offset)||(n._offset=t._offset),p(t._pf)||(n._pf=f(t)),p(t._locale)||(n._locale=t._locale),fu.length>0)for(u in fu)i=fu[u],r=t[i],p(r)||(n[i]=r);return n}function ei(n){hr(this,n);this._d=new Date(null!=n._d?n._d.getTime():NaN);eu===!1&&(eu=!0,t.updateOffset(this),eu=!1)}function st(n){return n instanceof ei||null!=n&&null!=n._isAMomentObject}function b(n){return 0>n?Math.ceil(n):Math.floor(n)}function e(n){var t=+n,i=0;return 0!==t&&isFinite(t)&&(i=b(t)),i}function ku(n,t,i){for(var f=Math.min(n.length,t.length),o=Math.abs(n.length-t.length),u=0,r=0;f>r;r++)(i&&n[r]!==t[r]||!i&&e(n[r])!==e(t[r]))&&u++;return u+o}function du(n){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+n)}function d(n,i){var r=!0;return wt(function(){return null!=t.deprecationHandler&&t.deprecationHandler(null,n),r&&(du(n+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),r=!1),i.apply(this,arguments)},i)}function cr(n,i){null!=t.deprecationHandler&&t.deprecationHandler(n,i);ye[n]||(du(i),ye[n]=!0)}function ht(n){return n instanceof Function||"[object Function]"===Object.prototype.toString.call(n)}function gu(n){return"[object Object]"===Object.prototype.toString.call(n)}function po(n){var t;for(var i in n)t=n[i],ht(t)?this[i]=t:this["_"+i]=t;this._config=n;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function lr(n,t){var i,r=wt({},n);for(i in t)w(t,i)&&(gu(n[i])&&gu(t[i])?(r[i]={},wt(r[i],n[i]),wt(r[i],t[i])):null!=t[i]?r[i]=t[i]:delete r[i]);return r}function ar(n){null!=n&&this.set(n)}function nf(n){return n?n.toLowerCase().replace("_","-"):n}function wo(n){for(var i,t,f,r,u=0;u<n.length;){for(r=nf(n[u]).split("-"),i=r.length,t=nf(n[u+1]),t=t?t.split("-"):null;i>0;){if(f=tf(r.slice(0,i).join("-")))return f;if(t&&t.length>=i&&ku(r,t,!0)>=i-1)break;i--}u++}return null}function tf(n){var t=null;if(!l[n]&&"undefined"!=typeof module&&module&&module.exports)try{t=nr._abbr;require("./locale/"+n);ti(t)}catch(i){}return l[n]}function ti(n,t){var i;return n&&(i=p(t)?ct(n):rf(n,t),i&&(nr=i)),nr._abbr}function rf(n,t){return null!==t?(t.abbr=n,null!=l[n]?(cr("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),t=lr(l[n]._config,t)):null!=t.parentLocale&&(null!=l[t.parentLocale]?t=lr(l[t.parentLocale]._config,t):cr("parentLocaleUndefined","specified parentLocale is not defined yet")),l[n]=new ar(t),ti(n),l[n]):(delete l[n],null)}function bo(n,t){if(null!=t){var i;null!=l[n]&&(t=lr(l[n]._config,t));i=new ar(t);i.parentLocale=l[n];l[n]=i;ti(n)}else null!=l[n]&&(null!=l[n].parentLocale?l[n]=l[n].parentLocale:null!=l[n]&&delete l[n]);return l[n]}function ct(n){var t;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return nr;if(!pt(n)){if(t=tf(n))return t;n=[n]}return wo(n)}function ko(){return pe(l)}function y(n,t){var i=n.toLowerCase();ci[i]=ci[i+"s"]=ci[t]=n}function g(n){if("string"==typeof n)return ci[n]||ci[n.toLowerCase()]}function uf(n){var i,t,r={};for(t in n)w(n,t)&&(i=g(t),i&&(r[i]=n[t]));return r}function ii(n,i){return function(r){return null!=r?(ff(this,n,r),t.updateOffset(this,i),this):yi(this,n)}}function yi(n,t){return n.isValid()?n._d["get"+(n._isUTC?"UTC":"")+t]():NaN}function ff(n,t,i){n.isValid()&&n._d["set"+(n._isUTC?"UTC":"")+t](i)}function ef(n,t){var i;if("object"==typeof n)for(i in n)this.set(i,n[i]);else if(n=g(n),ht(this[n]))return this[n](t);return this}function ut(n,t,i){var r=""+Math.abs(n),u=t-r.length,f=n>=0;return(f?i?"+":"":"-")+Math.pow(10,Math.max(0,u)).toString().substr(1)+r}function r(n,t,i,r){var u=r;"string"==typeof r&&(u=function(){return this[r]()});n&&(ui[n]=u);t&&(ui[t[0]]=function(){return ut(u.apply(this,arguments),t[1],t[2])});i&&(ui[i]=function(){return this.localeData().ordinal(u.apply(this,arguments),n)})}function go(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function ns(n){for(var t=n.match(we),i=0,r=t.length;r>i;i++)t[i]=ui[t[i]]?ui[t[i]]:go(t[i]);return function(i){for(var f="",u=0;r>u;u++)f+=t[u]instanceof Function?t[u].call(i,n):t[u];return f}}function vr(n,t){return n.isValid()?(t=of(t,n.localeData()),ou[t]=ou[t]||ns(t),ou[t](n)):n.localeData().invalidDate()}function of(n,t){function r(n){return t.longDateFormat(n)||n}var i=5;for(tr.lastIndex=0;i>=0&&tr.test(n);)n=n.replace(tr,r),tr.lastIndex=0,i-=1;return n}function i(n,t,i){cu[n]=ht(t)?t:function(n){return n&&i?i:t}}function ts(n,t){return w(cu,n)?cu[n](t._strict,t._locale):new RegExp(is(n))}function is(n){return bt(n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(n,t,i,r,u){return t||i||r||u}))}function bt(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(n,t){var i,r=t;for("string"==typeof n&&(n=[n]),"number"==typeof t&&(r=function(n,i){i[t]=e(n)}),i=0;i<n.length;i++)lu[n[i]]=r}function oi(n,t){s(n,function(n,i,r,u){r._w=r._w||{};t(n,r._w,r,u)})}function rs(n,t,i){null!=t&&w(lu,n)&&lu[n](t,i._a,i,n)}function yr(n,t){return new Date(Date.UTC(n,t+1,0)).getUTCDate()}function us(n,t){return pt(this._months)?this._months[n.month()]:this._months[no.test(t)?"format":"standalone"][n.month()]}function fs(n,t){return pt(this._monthsShort)?this._monthsShort[n.month()]:this._monthsShort[no.test(t)?"format":"standalone"][n.month()]}function es(n,t,i){var u,r,e,f=n.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],u=0;12>u;++u)e=it([2e3,u]),this._shortMonthsParse[u]=this.monthsShort(e,"").toLocaleLowerCase(),this._longMonthsParse[u]=this.months(e,"").toLocaleLowerCase();return i?"MMM"===t?(r=a.call(this._shortMonthsParse,f),-1!==r?r:null):(r=a.call(this._longMonthsParse,f),-1!==r?r:null):"MMM"===t?(r=a.call(this._shortMonthsParse,f),-1!==r?r:(r=a.call(this._longMonthsParse,f),-1!==r?r:null)):(r=a.call(this._longMonthsParse,f),-1!==r?r:(r=a.call(this._shortMonthsParse,f),-1!==r?r:null))}function os(n,t,i){var r,u,f;if(this._monthsParseExact)return es.call(this,n,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++)if((u=it([2e3,r]),i&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(u,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(u,"").replace(".","")+"$","i")),i||this._monthsParse[r]||(f="^"+this.months(u,"")+"|^"+this.monthsShort(u,""),this._monthsParse[r]=new RegExp(f.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[r].test(n))||i&&"MMM"===t&&this._shortMonthsParse[r].test(n)||!i&&this._monthsParse[r].test(n))return r}function sf(n,t){var i;if(!n.isValid())return n;if("string"==typeof t)if(/^\d+$/.test(t))t=e(t);else if(t=n.localeData().monthsParse(t),"number"!=typeof t)return n;return i=Math.min(n.date(),yr(n.year(),t)),n._d["set"+(n._isUTC?"UTC":"")+"Month"](t,i),n}function hf(n){return null!=n?(sf(this,n),t.updateOffset(this,!0),this):yi(this,"Month")}function ss(){return yr(this.year(),this.month())}function hs(n){return this._monthsParseExact?(w(this,"_monthsRegex")||cf.call(this),n?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex}function cs(n){return this._monthsParseExact?(w(this,"_monthsRegex")||cf.call(this),n?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex}function cf(){function f(n,t){return t.length-n.length}for(var i,r=[],u=[],t=[],n=0;12>n;n++)i=it([2e3,n]),r.push(this.monthsShort(i,"")),u.push(this.months(i,"")),t.push(this.months(i,"")),t.push(this.monthsShort(i,""));for(r.sort(f),u.sort(f),t.sort(f),n=0;12>n;n++)r[n]=bt(r[n]),u[n]=bt(u[n]),t[n]=bt(t[n]);this._monthsRegex=new RegExp("^("+t.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+u.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function pr(n){var i,t=n._a;return t&&-2===f(n).overflow&&(i=t[ft]<0||t[ft]>11?ft:t[rt]<1||t[rt]>yr(t[nt],t[ft])?rt:t[v]<0||t[v]>24||24===t[v]&&(0!==t[tt]||0!==t[et]||0!==t[ni])?v:t[tt]<0||t[tt]>59?tt:t[et]<0||t[et]>59?et:t[ni]<0||t[ni]>999?ni:-1,f(n)._overflowDayOfYear&&(nt>i||i>rt)&&(i=rt),f(n)._overflowWeeks&&-1===i&&(i=yv),f(n)._overflowWeekday&&-1===i&&(i=pv),f(n).overflow=i),n}function lf(n){var t,r,o,e,u,s,h=n._i,i=gv.exec(h)||ny.exec(h);if(i){for(f(n).iso=!0,t=0,r=or.length;r>t;t++)if(or[t][1].exec(i[1])){e=or[t][0];o=or[t][2]!==!1;break}if(null==e)return void(n._isValid=!1);if(i[3]){for(t=0,r=au.length;r>t;t++)if(au[t][1].exec(i[3])){u=(i[2]||" ")+au[t][0];break}if(null==u)return void(n._isValid=!1)}if(!o&&null!=u)return void(n._isValid=!1);if(i[4]){if(!ty.exec(i[4]))return void(n._isValid=!1);s="Z"}n._f=e+(u||"")+(s||"");br(n)}else n._isValid=!1}function ls(n){var i=iy.exec(n._i);return null!==i?void(n._d=new Date(+i[1])):(lf(n),void(n._isValid===!1&&(delete n._isValid,t.createFromInputFallback(n))))}function as(n,t,i,r,u,f,e){var o=new Date(n,t,i,r,u,f,e);return 100>n&&n>=0&&isFinite(o.getFullYear())&&o.setFullYear(n),o}function pi(n){var t=new Date(Date.UTC.apply(null,arguments));return 100>n&&n>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(n),t}function si(n){return af(n)?366:365}function af(n){return n%4==0&&n%100!=0||n%400==0}function vs(){return af(this.year())}function wi(n,t,i){var r=7+t-i,u=(7+pi(n,0,r).getUTCDay()-t)%7;return-u+r-1}function vf(n,t,i,r,u){var f,o,s=(7+i-r)%7,h=wi(n,r,u),e=1+7*(t-1)+s+h;return 0>=e?(f=n-1,o=si(f)+e):e>si(n)?(f=n+1,o=e-si(n)):(f=n,o=e),{year:f,dayOfYear:o}}function hi(n,t,i){var f,r,e=wi(n.year(),t,i),u=Math.floor((n.dayOfYear()-e-1)/7)+1;return 1>u?(r=n.year()-1,f=u+kt(r,t,i)):u>kt(n.year(),t,i)?(f=u-kt(n.year(),t,i),r=n.year()+1):(r=n.year(),f=u),{week:f,year:r}}function kt(n,t,i){var r=wi(n,t,i),u=wi(n+1,t,i);return(si(n)-r+u)/7}function ri(n,t,i){return null!=n?n:null!=t?t:i}function ys(n){var i=new Date(t.now());return n._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function wr(n){var t,i,r,u,e=[];if(!n._d){for(r=ys(n),n._w&&null==n._a[rt]&&null==n._a[ft]&&ps(n),n._dayOfYear&&(u=ri(n._a[nt],r[nt]),n._dayOfYear>si(u)&&(f(n)._overflowDayOfYear=!0),i=pi(u,0,n._dayOfYear),n._a[ft]=i.getUTCMonth(),n._a[rt]=i.getUTCDate()),t=0;3>t&&null==n._a[t];++t)n._a[t]=e[t]=r[t];for(;7>t;t++)n._a[t]=e[t]=null==n._a[t]?2===t?1:0:n._a[t];24===n._a[v]&&0===n._a[tt]&&0===n._a[et]&&0===n._a[ni]&&(n._nextDay=!0,n._a[v]=0);n._d=(n._useUTC?pi:as).apply(null,e);null!=n._tzm&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm);n._nextDay&&(n._a[v]=24)}}function ps(n){var t,o,u,i,r,e,c,s;t=n._w;null!=t.GG||null!=t.W||null!=t.E?(r=1,e=4,o=ri(t.GG,n._a[nt],hi(h(),1,4).year),u=ri(t.W,1),i=ri(t.E,1),(1>i||i>7)&&(s=!0)):(r=n._locale._week.dow,e=n._locale._week.doy,o=ri(t.gg,n._a[nt],hi(h(),r,e).year),u=ri(t.w,1),null!=t.d?(i=t.d,(0>i||i>6)&&(s=!0)):null!=t.e?(i=t.e+r,(t.e<0||t.e>6)&&(s=!0)):i=r);1>u||u>kt(o,r,e)?f(n)._overflowWeeks=!0:null!=s?f(n)._overflowWeekday=!0:(c=vf(o,u,i,r,e),n._a[nt]=c.year,n._dayOfYear=c.dayOfYear)}function br(n){if(n._f===t.ISO_8601)return void lf(n);n._a=[];f(n).empty=!0;for(var i,u,s,r=""+n._i,c=r.length,h=0,o=of(n._f,n._locale).match(we)||[],e=0;e<o.length;e++)u=o[e],i=(r.match(ts(u,n))||[])[0],i&&(s=r.substr(0,r.indexOf(i)),s.length>0&&f(n).unusedInput.push(s),r=r.slice(r.indexOf(i)+i.length),h+=i.length),ui[u]?(i?f(n).empty=!1:f(n).unusedTokens.push(u),rs(u,i,n)):n._strict&&!i&&f(n).unusedTokens.push(u);f(n).charsLeftOver=c-h;r.length>0&&f(n).unusedInput.push(r);f(n).bigHour===!0&&n._a[v]<=12&&n._a[v]>0&&(f(n).bigHour=void 0);f(n).parsedDateParts=n._a.slice(0);f(n).meridiem=n._meridiem;n._a[v]=ws(n._locale,n._a[v],n._meridiem);wr(n);pr(n)}function ws(n,t,i){var r;return null==i?t:null!=n.meridiemHour?n.meridiemHour(t,i):null!=n.isPM?(r=n.isPM(i),r&&12>t&&(t+=12),r||12!==t||(t=0),t):t}function bs(n){var t,e,u,r,i;if(0===n._f.length)return f(n).invalidFormat=!0,void(n._d=new Date(NaN));for(r=0;r<n._f.length;r++)i=0,t=hr({},n),null!=n._useUTC&&(t._useUTC=n._useUTC),t._f=n._f[r],br(t),sr(t)&&(i+=f(t).charsLeftOver,i+=10*f(t).unusedTokens.length,f(t).score=i,(null==u||u>i)&&(u=i,e=t));wt(n,e||t)}function ks(n){if(!n._d){var t=uf(n._i);n._a=bu([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(n){return n&&parseInt(n,10)});wr(n)}}function ds(n){var t=new ei(pr(yf(n)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function yf(n){var t=n._i,i=n._f;return n._locale=n._locale||ct(n._l),null===t||void 0===i&&""===t?vi({nullInput:!0}):("string"==typeof t&&(n._i=t=n._locale.preparse(t)),st(t)?new ei(pr(t)):(pt(i)?bs(n):i?br(n):ai(t)?n._d=t:gs(n),sr(n)||(n._d=null),n))}function gs(n){var i=n._i;void 0===i?n._d=new Date(t.now()):ai(i)?n._d=new Date(i.valueOf()):"string"==typeof i?ls(n):pt(i)?(n._a=bu(i.slice(0),function(n){return parseInt(n,10)}),wr(n)):"object"==typeof i?ks(n):"number"==typeof i?n._d=new Date(i):t.createFromInputFallback(n)}function pf(n,t,i,r,u){var f={};return"boolean"==typeof i&&(r=i,i=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=u,f._l=i,f._i=n,f._f=t,f._strict=r,ds(f)}function h(n,t,i,r){return pf(n,t,i,r,!1)}function wf(n,t){var r,i;if(1===t.length&&pt(t[0])&&(t=t[0]),!t.length)return h();for(r=t[0],i=1;i<t.length;++i)(!t[i].isValid()||t[i][n](r))&&(r=t[i]);return r}function nh(){var n=[].slice.call(arguments,0);return wf("isBefore",n)}function th(){var n=[].slice.call(arguments,0);return wf("isAfter",n)}function bi(n){var t=uf(n),i=t.year||0,r=t.quarter||0,u=t.month||0,f=t.week||0,e=t.day||0,o=t.hour||0,s=t.minute||0,h=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*h+6e4*s+36e5*o;this._days=+e+7*f;this._months=+u+3*r+12*i;this._data={};this._locale=ct();this._bubble()}function kr(n){return n instanceof bi}function bf(n,t){r(n,0,0,function(){var n=this.utcOffset(),i="+";return 0>n&&(n=-n,i="-"),i+ut(~~(n/60),2)+t+ut(~~n%60,2)})}function dr(n,t){var r=(t||"").match(n)||[],f=r[r.length-1]||[],i=(f+"").match(to)||["-",0,0],u=+(60*i[1])+e(i[2]);return"+"===i[0]?u:-u}function gr(n,i){var r,u;return i._isUTC?(r=i.clone(),u=(st(n)||ai(n)?n.valueOf():h(n).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+u),t.updateOffset(r,!1),r):h(n).local()}function nu(n){return 15*-Math.round(n._d.getTimezoneOffset()/15)}function ih(n,i){var r,u=this._offset||0;return this.isValid()?null!=n?("string"==typeof n?n=dr(er,n):Math.abs(n)<16&&(n=60*n),!this._isUTC&&i&&(r=nu(this)),this._offset=n,this._isUTC=!0,null!=r&&this.add(r,"m"),u!==n&&(!i||this._changeInProgress?te(this,lt(n-u,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?u:nu(this):null!=n?this:NaN}function rh(n,t){return null!=n?("string"!=typeof n&&(n=-n),this.utcOffset(n,t),this):-this.utcOffset()}function uh(n){return this.utcOffset(0,n)}function fh(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(nu(this),"m")),this}function eh(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(dr(vv,this._i)),this}function oh(n){return this.isValid()?(n=n?h(n).utcOffset():0,(this.utcOffset()-n)%60==0):!1}function sh(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function hh(){var n,t;return p(this._isDSTShifted)?(n={},(hr(n,this),n=yf(n),n._a)?(t=n._isUTC?it(n._a):h(n._a),this._isDSTShifted=this.isValid()&&ku(n._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted):this._isDSTShifted}function ch(){return this.isValid()?!this._isUTC:!1}function lh(){return this.isValid()?this._isUTC:!1}function kf(){return this.isValid()?this._isUTC&&0===this._offset:!1}function lt(n,t){var u,f,o,i=n,r=null;return kr(n)?i={ms:n._milliseconds,d:n._days,M:n._months}:"number"==typeof n?(i={},t?i[t]=n:i.milliseconds=n):(r=io.exec(n))?(u="-"===r[1]?-1:1,i={y:0,d:e(r[rt])*u,h:e(r[v])*u,m:e(r[tt])*u,s:e(r[et])*u,ms:e(r[ni])*u}):(r=ro.exec(n))?(u="-"===r[1]?-1:1,i={y:dt(r[2],u),M:dt(r[3],u),w:dt(r[4],u),d:dt(r[5],u),h:dt(r[6],u),m:dt(r[7],u),s:dt(r[8],u)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(o=ah(h(i.from),h(i.to)),i={},i.ms=o.milliseconds,i.M=o.months),f=new bi(i),kr(n)&&w(n,"_locale")&&(f._locale=n._locale),f}function dt(n,t){var i=n&&parseFloat(n.replace(",","."));return(isNaN(i)?0:i)*t}function df(n,t){var i={milliseconds:0,months:0};return i.months=t.month()-n.month()+12*(t.year()-n.year()),n.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+n.clone().add(i.months,"M"),i}function ah(n,t){var i;return n.isValid()&&t.isValid()?(t=gr(t,n),n.isBefore(t)?i=df(n,t):(i=df(t,n),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function gf(n){return 0>n?-1*Math.round(-1*n):Math.round(n)}function ne(n,t){return function(i,r){var u,f;return null===r||isNaN(+r)||(cr(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),f=i,i=r,r=f),i="string"==typeof i?+i:i,u=lt(i,r),te(this,u,n),this}}function te(n,i,r,u){var o=i._milliseconds,f=gf(i._days),e=gf(i._months);n.isValid()&&(u=null==u?!0:u,o&&n._d.setTime(n._d.valueOf()+o*r),f&&ff(n,"Date",yi(n,"Date")+f*r),e&&sf(n,yi(n,"Month")+e*r),u&&t.updateOffset(n,f||e))}function vh(n,t){var u=n||h(),f=gr(u,this).startOf("day"),i=this.diff(f,"days",!0),r=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse",e=t&&(ht(t[r])?t[r]():t[r]);return this.format(e||this.localeData().calendar(r,this,h(u)))}function yh(){return new ei(this)}function ph(n,t){var i=st(n)?n:h(n);return this.isValid()&&i.isValid()?(t=g(p(t)?"millisecond":t),"millisecond"===t?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf()):!1}function wh(n,t){var i=st(n)?n:h(n);return this.isValid()&&i.isValid()?(t=g(p(t)?"millisecond":t),"millisecond"===t?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf()):!1}function bh(n,t,i,r){return r=r||"()",("("===r[0]?this.isAfter(n,i):!this.isBefore(n,i))&&(")"===r[1]?this.isBefore(t,i):!this.isAfter(t,i))}function kh(n,t){var i,r=st(n)?n:h(n);return this.isValid()&&r.isValid()?(t=g(t||"millisecond"),"millisecond"===t?this.valueOf()===r.valueOf():(i=r.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf())):!1}function dh(n,t){return this.isSame(n,t)||this.isAfter(n,t)}function gh(n,t){return this.isSame(n,t)||this.isBefore(n,t)}function nc(n,t,i){var f,e,r,u;return this.isValid()?(f=gr(n,this),f.isValid()?(e=6e4*(f.utcOffset()-this.utcOffset()),t=g(t),"year"===t||"month"===t||"quarter"===t?(u=tc(this,f),"quarter"===t?u/=3:"year"===t&&(u/=12)):(r=this-f,u="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-e)/864e5:"week"===t?(r-e)/6048e5:r),i?u:b(u)):NaN):NaN}function tc(n,t){var r,f,u=12*(t.year()-n.year())+(t.month()-n.month()),i=n.clone().add(u,"months");return 0>t-i?(r=n.clone().add(u-1,"months"),f=(t-i)/(i-r)):(r=n.clone().add(u+1,"months"),f=(t-i)/(r-i)),-(u+f)||0}function ic(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function rc(){var n=this.clone().utc();return 0<n.year()&&n.year()<=9999?ht(Date.prototype.toISOString)?this.toDate().toISOString():vr(n,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):vr(n,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function uc(n){n||(n=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=vr(this,n);return this.localeData().postformat(i)}function fc(n,t){return this.isValid()&&(st(n)&&n.isValid()||h(n).isValid())?lt({to:this,from:n}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ec(n){return this.from(h(),n)}function oc(n,t){return this.isValid()&&(st(n)&&n.isValid()||h(n).isValid())?lt({from:this,to:n}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function sc(n){return this.to(h(),n)}function ie(n){var t;return void 0===n?this._locale._abbr:(t=ct(n),null!=t&&(this._locale=t),this)}function re(){return this._locale}function hc(n){switch(n=g(n)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===n&&this.weekday(0),"isoWeek"===n&&this.isoWeekday(1),"quarter"===n&&this.month(3*Math.floor(this.month()/3)),this}function cc(n){return n=g(n),void 0===n||"millisecond"===n?this:("date"===n&&(n="day"),this.startOf(n).add(1,"isoWeek"===n?"week":n).subtract(1,"ms"))}function lc(){return this._d.valueOf()-6e4*(this._offset||0)}function ac(){return Math.floor(this.valueOf()/1e3)}function vc(){return this._offset?new Date(this.valueOf()):this._d}function yc(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function pc(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function wc(){return this.isValid()?this.toISOString():null}function bc(){return sr(this)}function kc(){return wt({},f(this))}function dc(){return f(this).overflow}function gc(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function ki(n,t){r(0,[n,n.length],0,t)}function nl(n){return ue.call(this,n,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function tl(n){return ue.call(this,n,this.isoWeek(),this.isoWeekday(),1,4)}function il(){return kt(this.year(),1,4)}function rl(){var n=this.localeData()._week;return kt(this.year(),n.dow,n.doy)}function ue(n,t,i,r,u){var f;return null==n?hi(this,r,u).year:(f=kt(n,r,u),t>f&&(t=f),ul.call(this,n,t,i,r,u))}function ul(n,t,i,r,u){var e=vf(n,t,i,r,u),f=pi(e.year,0,e.dayOfYear);return this.year(f.getUTCFullYear()),this.month(f.getUTCMonth()),this.date(f.getUTCDate()),this}function fl(n){return null==n?Math.ceil((this.month()+1)/3):this.month(3*(n-1)+this.month()%3)}function el(n){return hi(n,this._week.dow,this._week.doy).week}function ol(){return this._week.dow}function sl(){return this._week.doy}function hl(n){var t=this.localeData().week(this);return null==n?t:this.add(7*(n-t),"d")}function cl(n){var t=hi(this,1,4).week;return null==n?t:this.add(7*(n-t),"d")}function ll(n,t){return"string"!=typeof n?n:isNaN(n)?(n=t.weekdaysParse(n),"number"==typeof n?n:null):parseInt(n,10)}function al(n,t){return pt(this._weekdays)?this._weekdays[n.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][n.day()]}function vl(n){return this._weekdaysShort[n.day()]}function yl(n){return this._weekdaysMin[n.day()]}function pl(n,t,i){var f,r,e,u=n.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],f=0;7>f;++f)e=it([2e3,1]).day(f),this._minWeekdaysParse[f]=this.weekdaysMin(e,"").toLocaleLowerCase(),this._shortWeekdaysParse[f]=this.weekdaysShort(e,"").toLocaleLowerCase(),this._weekdaysParse[f]=this.weekdays(e,"").toLocaleLowerCase();return i?"dddd"===t?(r=a.call(this._weekdaysParse,u),-1!==r?r:null):"ddd"===t?(r=a.call(this._shortWeekdaysParse,u),-1!==r?r:null):(r=a.call(this._minWeekdaysParse,u),-1!==r?r:null):"dddd"===t?(r=a.call(this._weekdaysParse,u),-1!==r?r:(r=a.call(this._shortWeekdaysParse,u),-1!==r?r:(r=a.call(this._minWeekdaysParse,u),-1!==r?r:null))):"ddd"===t?(r=a.call(this._shortWeekdaysParse,u),-1!==r?r:(r=a.call(this._weekdaysParse,u),-1!==r?r:(r=a.call(this._minWeekdaysParse,u),-1!==r?r:null))):(r=a.call(this._minWeekdaysParse,u),-1!==r?r:(r=a.call(this._weekdaysParse,u),-1!==r?r:(r=a.call(this._shortWeekdaysParse,u),-1!==r?r:null)))}function wl(n,t,i){var r,u,f;if(this._weekdaysParseExact)return pl.call(this,n,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;7>r;r++)if((u=it([2e3,1]).day(r),i&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(u,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(u,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(u,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(f="^"+this.weekdays(u,"")+"|^"+this.weekdaysShort(u,"")+"|^"+this.weekdaysMin(u,""),this._weekdaysParse[r]=new RegExp(f.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[r].test(n))||i&&"ddd"===t&&this._shortWeekdaysParse[r].test(n)||i&&"dd"===t&&this._minWeekdaysParse[r].test(n)||!i&&this._weekdaysParse[r].test(n))return r}function bl(n){if(!this.isValid())return null!=n?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=n?(n=ll(n,this.localeData()),this.add(n-t,"d")):t}function kl(n){if(!this.isValid())return null!=n?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==n?t:this.add(n-t,"d")}function dl(n){return this.isValid()?null==n?this.day()||7:this.day(this.day()%7?n:n-7):null!=n?this:NaN}function gl(n){return this._weekdaysParseExact?(w(this,"_weekdaysRegex")||tu.call(this),n?this._weekdaysStrictRegex:this._weekdaysRegex):this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex}function na(n){return this._weekdaysParseExact?(w(this,"_weekdaysRegex")||tu.call(this),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}function ta(n){return this._weekdaysParseExact?(w(this,"_weekdaysRegex")||tu.call(this),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}function tu(){function u(n,t){return t.length-n.length}for(var f,e,o,s,h=[],i=[],r=[],t=[],n=0;7>n;n++)f=it([2e3,1]).day(n),e=this.weekdaysMin(f,""),o=this.weekdaysShort(f,""),s=this.weekdays(f,""),h.push(e),i.push(o),r.push(s),t.push(e),t.push(o),t.push(s);for(h.sort(u),i.sort(u),r.sort(u),t.sort(u),n=0;7>n;n++)i[n]=bt(i[n]),r[n]=bt(r[n]),t[n]=bt(t[n]);this._weekdaysRegex=new RegExp("^("+t.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+h.join("|")+")","i")}function ia(n){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==n?t:this.add(n-t,"d")}function iu(){return this.hours()%12||12}function ra(){return this.hours()||24}function fe(n,t){r(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function ee(n,t){return t._meridiemParse}function ua(n){return"p"===(n+"").toLowerCase().charAt(0)}function fa(n,t,i){return n>11?i?"pm":"PM":i?"am":"AM"}function ea(n,t){t[ni]=e(1e3*("0."+n))}function oa(){return this._isUTC?"UTC":""}function sa(){return this._isUTC?"Coordinated Universal Time":""}function ha(n){return h(1e3*n)}function ca(){return h.apply(null,arguments).parseZone()}function la(n,t,i){var r=this._calendar[n];return ht(r)?r.call(t,i):r}function aa(n){var t=this._longDateFormat[n],i=this._longDateFormat[n.toUpperCase()];return t||!i?t:(this._longDateFormat[n]=i.replace(/MMMM|MM|DD|dddd/g,function(n){return n.slice(1)}),this._longDateFormat[n])}function va(){return this._invalidDate}function ya(n){return this._ordinal.replace("%d",n)}function oe(n){return n}function pa(n,t,i,r){var u=this._relativeTime[i];return ht(u)?u(n,t,i,r):u.replace(/%d/i,n)}function wa(n,t){var i=this._relativeTime[n>0?"future":"past"];return ht(i)?i(t):i.replace(/%s/i,t)}function di(n,t,i,r){var u=ct(),f=it().set(r,t);return u[i](f,n)}function se(n,t,i){if("number"==typeof n&&(t=n,n=void 0),n=n||"",null!=t)return di(n,t,i,"month");for(var u=[],r=0;12>r;r++)u[r]=di(n,r,i,"month");return u}function ru(n,t,i,r){var o,f,u,e;if("boolean"==typeof n?("number"==typeof t&&(i=t,t=void 0),t=t||""):(t=n,i=t,n=!1,"number"==typeof t&&(i=t,t=void 0),t=t||""),o=ct(),f=n?o._week.dow:0,null!=i)return di(t,(i+f)%7,r,"day");for(e=[],u=0;7>u;u++)e[u]=di(t,(u+f)%7,r,"day");return e}function ba(n,t){return se(n,t,"months")}function ka(n,t){return se(n,t,"monthsShort")}function da(n,t,i){return ru(n,t,i,"weekdays")}function ga(n,t,i){return ru(n,t,i,"weekdaysShort")}function nv(n,t,i){return ru(n,t,i,"weekdaysMin")}function tv(){var n=this._data;return this._milliseconds=ot(this._milliseconds),this._days=ot(this._days),this._months=ot(this._months),n.milliseconds=ot(n.milliseconds),n.seconds=ot(n.seconds),n.minutes=ot(n.minutes),n.hours=ot(n.hours),n.months=ot(n.months),n.years=ot(n.years),this}function he(n,t,i,r){var u=lt(t,i);return n._milliseconds+=r*u._milliseconds,n._days+=r*u._days,n._months+=r*u._months,n._bubble()}function iv(n,t){return he(this,n,t,1)}function rv(n,t){return he(this,n,t,-1)}function ce(n){return 0>n?Math.floor(n):Math.ceil(n)}function uv(){var u,f,e,s,o,r=this._milliseconds,n=this._days,t=this._months,i=this._data;return r>=0&&n>=0&&t>=0||0>=r&&0>=n&&0>=t||(r+=864e5*ce(uu(t)+n),n=0,t=0),i.milliseconds=r%1e3,u=b(r/1e3),i.seconds=u%60,f=b(u/60),i.minutes=f%60,e=b(f/60),i.hours=e%24,n+=b(e/24),o=b(le(n)),t+=o,n-=ce(uu(o)),s=b(t/12),t%=12,i.days=n,i.months=t,i.years=s,this}function le(n){return 4800*n/146097}function uu(n){return 146097*n/4800}function fv(n){var t,r,i=this._milliseconds;if(n=g(n),"month"===n||"year"===n)return t=this._days+i/864e5,r=this._months+le(t),"month"===n?r:r/12;switch(t=this._days+Math.round(uu(this._months)),n){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+n);}}function ev(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*e(this._months/12)}function at(n){return function(){return this.as(n)}}function ov(n){return n=g(n),this[n+"s"]()}function gt(n){return function(){return this._data[n]}}function sv(){return b(this.days()/7)}function hv(n,t,i,r,u){return u.relativeTime(t||1,!!i,n,r)}function cv(n,t,i){var r=lt(n).abs(),h=fi(r.as("s")),f=fi(r.as("m")),e=fi(r.as("h")),o=fi(r.as("d")),s=fi(r.as("M")),c=fi(r.as("y")),u=h<yt.s&&["s",h]||1>=f&&["m"]||f<yt.m&&["mm",f]||1>=e&&["h"]||e<yt.h&&["hh",e]||1>=o&&["d"]||o<yt.d&&["dd",o]||1>=s&&["M"]||s<yt.M&&["MM",s]||1>=c&&["y"]||["yy",c];return u[2]=t,u[3]=+n>0,u[4]=i,hv.apply(null,u)}function lv(n,t){return void 0===yt[n]?!1:void 0===t?yt[n]:(yt[n]=t,!0)}function av(n){var t=this.localeData(),i=cv(this,!n,t);return n&&(i=t.pastFuture(+this,i)),t.postformat(i)}function gi(){var n,e,o,t=wu(this._milliseconds)/1e3,a=wu(this._days),i=wu(this._months);n=b(t/60);e=b(n/60);t%=60;n%=60;o=b(i/12);i%=12;var s=o,h=i,c=a,r=e,u=n,f=t,l=this.asSeconds();return l?(0>l?"-":"")+"P"+(s?s+"Y":"")+(h?h+"M":"")+(c?c+"D":"")+(r||u||f?"T":"")+(r?r+"H":"")+(u?u+"M":"")+(f?f+"S":""):"P0D"}var ae,ve,pe,vu,to,io,ro,uo,fo,yu,eo,pu,oo,so,ho,co,vt,lo,n;ve=Array.prototype.some?Array.prototype.some:function(n){for(var i=Object(this),r=i.length>>>0,t=0;r>t;t++)if(t in i&&n.call(this,i[t],t,i))return!0;return!1};var fu=t.momentProperties=[],eu=!1,ye={};t.suppressDeprecationWarnings=!1;t.deprecationHandler=null;pe=Object.keys?Object.keys:function(n){var t,i=[];for(t in n)w(n,t)&&i.push(t);return i};var nr,a,l={},ci={},we=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,tr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ou={},ui={},be=/\d/,k=/\d\d/,ke=/\d{3}/,su=/\d{4}/,ir=/[+-]?\d{6}/,c=/\d\d?/,de=/\d\d\d\d?/,ge=/\d\d\d\d\d\d?/,rr=/\d{1,3}/,hu=/\d{1,4}/,ur=/[+-]?\d{1,6}/,fr=/[+-]?\d+/,vv=/Z|[+-]\d\d:?\d\d/gi,er=/Z|[+-]\d\d(?::?\d\d)?/gi,li=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,cu={},lu={},nt=0,ft=1,rt=2,v=3,tt=4,et=5,ni=6,yv=7,pv=8;a=Array.prototype.indexOf?Array.prototype.indexOf:function(n){for(var t=0;t<this.length;++t)if(this[t]===n)return t;return-1};r("M",["MM",2],"Mo",function(){return this.month()+1});r("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)});r("MMMM",0,0,function(n){return this.localeData().months(this,n)});y("month","M");i("M",c);i("MM",c,k);i("MMM",function(n,t){return t.monthsShortRegex(n)});i("MMMM",function(n,t){return t.monthsRegex(n)});s(["M","MM"],function(n,t){t[ft]=e(n)-1});s(["MMM","MMMM"],function(n,t,i,r){var u=i._locale.monthsParse(n,r,i._strict);null!=u?t[ft]=u:f(i).invalidMonth=n});var no=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,wv="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),bv="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),kv=li,dv=li,gv=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ny=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ty=/Z|[+-]\d\d(?::?\d\d)?/,or=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],au=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],iy=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=d("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))});r("Y",0,0,function(){var n=this.year();return 9999>=n?""+n:"+"+n});r(0,["YY",2],0,function(){return this.year()%100});r(0,["YYYY",4],0,"year");r(0,["YYYYY",5],0,"year");r(0,["YYYYYY",6,!0],0,"year");y("year","y");i("Y",fr);i("YY",c,k);i("YYYY",hu,su);i("YYYYY",ur,ir);i("YYYYYY",ur,ir);s(["YYYYY","YYYYYY"],nt);s("YYYY",function(n,i){i[nt]=2===n.length?t.parseTwoDigitYear(n):e(n)});s("YY",function(n,i){i[nt]=t.parseTwoDigitYear(n)});s("Y",function(n,t){t[nt]=parseInt(n,10)});t.parseTwoDigitYear=function(n){return e(n)+(e(n)>68?1900:2e3)};vu=ii("FullYear",!0);t.ISO_8601=function(){};var ry=d("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var n=h.apply(null,arguments);return this.isValid()&&n.isValid()?this>n?this:n:vi()}),uy=d("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var n=h.apply(null,arguments);return this.isValid()&&n.isValid()?n>this?this:n:vi()}),fy=function(){return Date.now?Date.now():+new Date};bf("Z",":");bf("ZZ","");i("Z",er);i("ZZ",er);s(["Z","ZZ"],function(n,t,i){i._useUTC=!0;i._tzm=dr(er,n)});to=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};io=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/;ro=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;lt.fn=bi.prototype;uo=ne(1,"add");fo=ne(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";yu=d("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return void 0===n?this.localeData():this.locale(n)});r(0,["gg",2],0,function(){return this.weekYear()%100});r(0,["GG",2],0,function(){return this.isoWeekYear()%100});ki("gggg","weekYear");ki("ggggg","weekYear");ki("GGGG","isoWeekYear");ki("GGGGG","isoWeekYear");y("weekYear","gg");y("isoWeekYear","GG");i("G",fr);i("g",fr);i("GG",c,k);i("gg",c,k);i("GGGG",hu,su);i("gggg",hu,su);i("GGGGG",ur,ir);i("ggggg",ur,ir);oi(["gggg","ggggg","GGGG","GGGGG"],function(n,t,i,r){t[r.substr(0,2)]=e(n)});oi(["gg","GG"],function(n,i,r,u){i[u]=t.parseTwoDigitYear(n)});r("Q",0,"Qo","quarter");y("quarter","Q");i("Q",be);s("Q",function(n,t){t[ft]=3*(e(n)-1)});r("w",["ww",2],"wo","week");r("W",["WW",2],"Wo","isoWeek");y("week","w");y("isoWeek","W");i("w",c);i("ww",c,k);i("W",c);i("WW",c,k);oi(["w","ww","W","WW"],function(n,t,i,r){t[r.substr(0,1)]=e(n)});eo={dow:0,doy:6};r("D",["DD",2],"Do","date");y("date","D");i("D",c);i("DD",c,k);i("Do",function(n,t){return n?t._ordinalParse:t._ordinalParseLenient});s(["D","DD"],rt);s("Do",function(n,t){t[rt]=e(n.match(c)[0],10)});pu=ii("Date",!0);r("d",0,"do","day");r("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)});r("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)});r("dddd",0,0,function(n){return this.localeData().weekdays(this,n)});r("e",0,0,"weekday");r("E",0,0,"isoWeekday");y("day","d");y("weekday","e");y("isoWeekday","E");i("d",c);i("e",c);i("E",c);i("dd",function(n,t){return t.weekdaysMinRegex(n)});i("ddd",function(n,t){return t.weekdaysShortRegex(n)});i("dddd",function(n,t){return t.weekdaysRegex(n)});oi(["dd","ddd","dddd"],function(n,t,i,r){var u=i._locale.weekdaysParse(n,r,i._strict);null!=u?t.d=u:f(i).invalidWeekday=n});oi(["d","e","E"],function(n,t,i,r){t[r]=e(n)});var ey="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),oy="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),sy="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),hy=li,cy=li,ly=li;for(r("DDD",["DDDD",3],"DDDo","dayOfYear"),y("dayOfYear","DDD"),i("DDD",rr),i("DDDD",ke),s(["DDD","DDDD"],function(n,t,i){i._dayOfYear=e(n)}),r("H",["HH",2],0,"hour"),r("h",["hh",2],0,iu),r("k",["kk",2],0,ra),r("hmm",0,0,function(){return""+iu.apply(this)+ut(this.minutes(),2)}),r("hmmss",0,0,function(){return""+iu.apply(this)+ut(this.minutes(),2)+ut(this.seconds(),2)}),r("Hmm",0,0,function(){return""+this.hours()+ut(this.minutes(),2)}),r("Hmmss",0,0,function(){return""+this.hours()+ut(this.minutes(),2)+ut(this.seconds(),2)}),fe("a",!0),fe("A",!1),y("hour","h"),i("a",ee),i("A",ee),i("H",c),i("h",c),i("HH",c,k),i("hh",c,k),i("hmm",de),i("hmmss",ge),i("Hmm",de),i("Hmmss",ge),s(["H","HH"],v),s(["a","A"],function(n,t,i){i._isPm=i._locale.isPM(n);i._meridiem=n}),s(["h","hh"],function(n,t,i){t[v]=e(n);f(i).bigHour=!0}),s("hmm",function(n,t,i){var r=n.length-2;t[v]=e(n.substr(0,r));t[tt]=e(n.substr(r));f(i).bigHour=!0}),s("hmmss",function(n,t,i){var r=n.length-4,u=n.length-2;t[v]=e(n.substr(0,r));t[tt]=e(n.substr(r,2));t[et]=e(n.substr(u));f(i).bigHour=!0}),s("Hmm",function(n,t){var i=n.length-2;t[v]=e(n.substr(0,i));t[tt]=e(n.substr(i))}),s("Hmmss",function(n,t){var i=n.length-4,r=n.length-2;t[v]=e(n.substr(0,i));t[tt]=e(n.substr(i,2));t[et]=e(n.substr(r))}),oo=/[ap]\.?m?\.?/i,so=ii("Hours",!0),r("m",["mm",2],0,"minute"),y("minute","m"),i("m",c),i("mm",c,k),s(["m","mm"],tt),ho=ii("Minutes",!1),r("s",["ss",2],0,"second"),y("second","s"),i("s",c),i("ss",c,k),s(["s","ss"],et),co=ii("Seconds",!1),r("S",0,0,function(){return~~(this.millisecond()/100)}),r(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),r(0,["SSS",3],0,"millisecond"),r(0,["SSSS",4],0,function(){return 10*this.millisecond()}),r(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),r(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),r(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),r(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),r(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),y("millisecond","ms"),i("S",rr,be),i("SS",rr,k),i("SSS",rr,ke),vt="SSSS";vt.length<=9;vt+="S")i(vt,/\d+/);for(vt="S";vt.length<=9;vt+="S")s(vt,ea);lo=ii("Milliseconds",!1);r("z",0,0,"zoneAbbr");r("zz",0,0,"zoneName");n=ei.prototype;n.add=uo;n.calendar=vh;n.clone=yh;n.diff=nc;n.endOf=cc;n.format=uc;n.from=fc;n.fromNow=ec;n.to=oc;n.toNow=sc;n.get=ef;n.invalidAt=dc;n.isAfter=ph;n.isBefore=wh;n.isBetween=bh;n.isSame=kh;n.isSameOrAfter=dh;n.isSameOrBefore=gh;n.isValid=bc;n.lang=yu;n.locale=ie;n.localeData=re;n.max=uy;n.min=ry;n.parsingFlags=kc;n.set=ef;n.startOf=hc;n.subtract=fo;n.toArray=yc;n.toObject=pc;n.toDate=vc;n.toISOString=rc;n.toJSON=wc;n.toString=ic;n.unix=ac;n.valueOf=lc;n.creationData=gc;n.year=vu;n.isLeapYear=vs;n.weekYear=nl;n.isoWeekYear=tl;n.quarter=n.quarters=fl;n.month=hf;n.daysInMonth=ss;n.week=n.weeks=hl;n.isoWeek=n.isoWeeks=cl;n.weeksInYear=rl;n.isoWeeksInYear=il;n.date=pu;n.day=n.days=bl;n.weekday=kl;n.isoWeekday=dl;n.dayOfYear=ia;n.hour=n.hours=so;n.minute=n.minutes=ho;n.second=n.seconds=co;n.millisecond=n.milliseconds=lo;n.utcOffset=ih;n.utc=uh;n.local=fh;n.parseZone=eh;n.hasAlignedHourOffset=oh;n.isDST=sh;n.isDSTShifted=hh;n.isLocal=ch;n.isUtcOffset=lh;n.isUtc=kf;n.isUTC=kf;n.zoneAbbr=oa;n.zoneName=sa;n.dates=d("dates accessor is deprecated. Use date instead.",pu);n.months=d("months accessor is deprecated. Use month instead",hf);n.years=d("years accessor is deprecated. Use year instead",vu);n.zone=d("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",rh);var ao=n,u=ar.prototype;u._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};u.calendar=la;u._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};u.longDateFormat=aa;u._invalidDate="Invalid date";u.invalidDate=va;u._ordinal="%d";u.ordinal=ya;u._ordinalParse=/\d{1,2}/;u.preparse=oe;u.postformat=oe;u._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};u.relativeTime=pa;u.pastFuture=wa;u.set=po;u.months=us;u._months=wv;u.monthsShort=fs;u._monthsShort=bv;u.monthsParse=os;u._monthsRegex=dv;u.monthsRegex=cs;u._monthsShortRegex=kv;u.monthsShortRegex=hs;u.week=el;u._week=eo;u.firstDayOfYear=sl;u.firstDayOfWeek=ol;u.weekdays=al;u._weekdays=ey;u.weekdaysMin=yl;u._weekdaysMin=sy;u.weekdaysShort=vl;u._weekdaysShort=oy;u.weekdaysParse=wl;u._weekdaysRegex=hy;u.weekdaysRegex=gl;u._weekdaysShortRegex=cy;u.weekdaysShortRegex=na;u._weekdaysMinRegex=ly;u.weekdaysMinRegex=ta;u.isPM=ua;u._meridiemParse=oo;u.meridiem=fa;ti("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var t=n%10,i=1===e(n%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return n+i}});t.lang=d("moment.lang is deprecated. Use moment.locale instead.",ti);t.langData=d("moment.langData is deprecated. Use moment.localeData instead.",ct);var ot=Math.abs,ay=at("ms"),vy=at("s"),yy=at("m"),py=at("h"),wy=at("d"),by=at("w"),ky=at("M"),dy=at("y"),gy=gt("milliseconds"),np=gt("seconds"),tp=gt("minutes"),ip=gt("hours"),rp=gt("days"),up=gt("months"),fp=gt("years"),fi=Math.round,yt={s:45,m:45,h:22,d:26,M:11},wu=Math.abs,o=bi.prototype;return o.abs=tv,o.add=iv,o.subtract=rv,o.as=fv,o.asMilliseconds=ay,o.asSeconds=vy,o.asMinutes=yy,o.asHours=py,o.asDays=wy,o.asWeeks=by,o.asMonths=ky,o.asYears=dy,o.valueOf=ev,o._bubble=uv,o.get=ov,o.milliseconds=gy,o.seconds=np,o.minutes=tp,o.hours=ip,o.days=rp,o.weeks=sv,o.months=up,o.years=fp,o.humanize=av,o.toISOString=gi,o.toString=gi,o.toJSON=gi,o.locale=ie,o.localeData=re,o.toIsoString=d("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",gi),o.lang=yu,r("X",0,0,"unix"),r("x",0,0,"valueOf"),i("x",fr),i("X",/[+-]?\d+(\.\d{1,3})?/),s("X",function(n,t,i){i._d=new Date(1e3*parseFloat(n,10))}),s("x",function(n,t,i){i._d=new Date(e(n))}),t.version="2.13.0",vo(h),t.fn=ao,t.min=nh,t.max=th,t.now=fy,t.utc=it,t.unix=ha,t.months=ba,t.isDate=ai,t.locale=ti,t.invalid=vi,t.duration=lt,t.isMoment=st,t.weekdays=da,t.parseZone=ca,t.localeData=ct,t.isDuration=kr,t.monthsShort=ka,t.weekdaysMin=nv,t.defineLocale=rf,t.updateLocale=bo,t.locales=ko,t.weekdaysShort=ga,t.normalizeUnits=g,t.relativeTimeThreshold=lv,t.prototype=ao,t});{String.prototype.format||(String.prototype.format=function(){var n=arguments;return this.replace(/{(\d+)}/g,function(t,i){return typeof n[i]!="undefined"?n[i]:t})});function surrogateCtor(){}function extend(n,t,i){surrogateCtor.prototype=n.prototype;t.prototype=new surrogateCtor;t.prototype.constructor=t;t.base=n.prototype;for(var r in i)t.prototype[r]=i[r];return t}(function(){var n,i,r;n=$("meta[name='bizweb-admin-context']").attr("content");null!=n?window.Bizweb||(window.Bizweb=JSON.parse(n)):window.Bizweb||(window.Bizweb={});Bizweb.DEFAULT_OPTION_NAME="Title";Bizweb.DEFAULT_OPTION_VALUE="Default Title";Bizweb.DEFAULT_OPTION_NAMES=["Kích thước","Màu sắc","Chất liệu","Kiểu dáng","Title"];Bizweb.LOADING="<i class='fa fa-lg fa-spinner fa-pulse'><\/i>";Bizweb.config={theme_extension:"bwt",aviary_api_key:"27f70770623f4ba7b0e9ab52ddfa3e3b"};Bizweb.funcRoutes={};Bizweb.routes={root:"/admin",dashboard:"/admin",themes:"/admin/themes",orders:"/admin/orders",products:"/admin/products",update_product_image:"/admin/products/{0}/images/{1}",setting:{checkout:"/admin/settings/checkout",shipping:"/admin/settings/shipping",notifications:"/admin/settings/notifications"},ghn:"/admin/ghn",shipchung:"/admin/shipchung",ghtk:"/admin/ghtk",vtp:"/admin/vtp",domain:{media:"//bizweb.dktcdn.net/",thumb:"//bizweb.dktcdn.net/thumb/"},apps:"/admin/apps",collections:"/admin/collections",channels:"/admin/channels",charges:"/admin/charges",customers:"/admin/customers",comments:"/admin/comments",blogs:"/admin/blogs",notifications:"/admin/notifications",users:"/admin/settings/account",plans:"/admin/settings/plans",bulk:"/admin/bulk",activityFeed:"/admin/activity/feed"};i=[].slice;r=function(){var o,t,s,r,u,h,f,n,e;for(s=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],_.isObject(_.last(t))&&(f=t.pop()),n=s,r=u=0,h=t.length;h>u;r=++u)o=t[r],n=n.replace(":"+(r+1),o);if(-1!==n.indexOf(":"))throw"Path '"+n+"' is expecting more arguments";return e=f?"?"+$.param(f):"",{html:""+n+e,json:n+".json"+e}};for(key in Bizweb.routes)t=Bizweb.routes[key],Bizweb.funcRoutes[key]=r.bind(null,t);_urlMappings={collection:"/admin/collections/SingleDropdown",product:"/admin/products/SingleDropdown",page:"/admin/pages/SingleDropdown",blog:"/admin/blogs/SingleDropdown",customer:"/admin/customers/singledropdown"};_urlSuggestMappings={collection:"/admin/collections/SingleSuggest",product:"/admin/products/SingleSuggest",page:"/admin/pages/SingleSuggest",blog:"/admin/blogs/SingleSuggest",customer:"/admin/customers/singlesuggest"};_urlMultipleMappings={collection:"/admin/collections/Dropdown?type=custom&",product:"/admin/products/Dropdown?"};_urlMultipleSuggestMappings={collection:"/admin/collections/Suggest?type=custom&",product:"/admin/products/Suggest?"}}).call(this),function(){function df(n,t){return n.set(t[0],t[1]),n}function gf(n,t){return n.add(t),n}function u(n,t,i){var r=i.length;switch(r){case 0:return n.call(t);case 1:return n.call(t,i[0]);case 2:return n.call(t,i[0],i[1]);case 3:return n.call(t,i[0],i[1],i[2])}return n.apply(t,i)}function ne(n,t,i,r){for(var f,u=-1,e=n.length;++u<e;)f=n[u],t(r,f,i(f),n);return r}function te(n,t){for(var i=-1,u=n.length,f=-1,e=t.length,r=Array(u+e);++i<u;)r[i]=n[i];for(;++f<e;)r[i++]=t[f];return r}function f(n,t){for(var i=-1,r=n.length;++i<r&&t(n[i],i,n)!==!1;);return n}function ie(n,t){for(var i=n.length;i--&&t(n[i],i,n)!==!1;);return n}function iu(n,t){for(var i=-1,r=n.length;++i<r;)if(!t(n[i],i,n))return!1;return!0}function nt(n,t){for(var r,i=-1,f=n.length,e=0,u=[];++i<f;)r=n[i],t(r,i,n)&&(u[e++]=r);return u}function gi(n,t){return!!n.length&&rt(n,t,0)>-1}function nr(n,t,i){for(var r=-1,u=n.length;++r<u;)if(i(t,n[r]))return!0;return!1}function r(n,t){for(var i=-1,r=n.length,u=Array(r);++i<r;)u[i]=t(n[i],i,n);return u}function tt(n,t){for(var i=-1,r=t.length,u=n.length;++i<r;)n[u+i]=t[i];return n}function it(n,t,i,r){var u=-1,f=n.length;for(r&&f&&(i=n[++u]);++u<f;)i=t(i,n[u],u,n);return i}function re(n,t,i,r){var u=n.length;for(r&&u&&(i=n[--u]);u--;)i=t(i,n[u],u,n);return i}function tr(n,t){for(var i=-1,r=n.length;++i<r;)if(t(n[i],i,n))return!0;return!1}function ri(t,i,r){for(var e,u,o,h,f=-1,s=t.length;++f<s;)e=t[f],u=i(e),null!=u&&(o===n?u===u:r(u,o))&&(o=u,h=e);return h}function ui(n,t,i,r){var u;return i(n,function(n,i,f){if(t(n,i,f))return(u=r?i:n,!1)}),u}function fi(n,t,i){for(var u=n.length,r=i?u:-1;i?r--:++r<u;)if(t(n[r],r,n))return r;return-1}function rt(n,t,i){if(t!==t)return hu(n,i);for(var r=i-1,u=n.length;++r<u;)if(n[r]===t)return r;return-1}function ue(n,t,i,r){for(var u=i-1,f=n.length;++u<f;)if(r(n[u],t))return u;return-1}function ru(n,t,i,r,u){return u(n,function(n,u,f){i=r?(r=!1,n):t(i,n,u,f)}),i}function fe(n,t){var i=n.length;for(n.sort(t);i--;)n[i]=n[i].value;return n}function uu(t,i){for(var r,u,f=-1,e=t.length;++f<e;)u=i(t[f]),u!==n&&(r=r===n?u:r+u);return r}function ir(n,t){for(var i=-1,r=Array(n);++i<n;)r[i]=t(i);return r}function fu(n,t){return r(t,function(t){return[t,n[t]]})}function rr(n){return function(t){return n(t)}}function ur(n,t){return r(t,function(t){return n[t]})}function eu(n,t){for(var i=-1,r=n.length;++i<r&&rt(t,n[i],0)>-1;);return i}function ou(n,t){for(var i=n.length;i--&&rt(t,n[i],0)>-1;);return i}function ei(n){return n&&n.Object===Object?n:null}function su(t,i){if(t!==i){var f=null===t,e=t===n,r=t===t,o=null===i,s=i===n,u=i===i;if(t>i&&!o||!r||f&&!s&&u||e&&u)return 1;if(i>t&&!f||!u||o&&!e&&r||s&&r)return-1}return 0}function ee(n,t,i){for(var u,e,r=-1,f=n.criteria,o=t.criteria,s=f.length,h=i.length;++r<s;)if(u=su(f[r],o[r]),u)return r>=h?u:(e=i[r],u*("desc"==e?-1:1));return n.index-t.index}function oe(n,t){for(var i=n.length,r=0;i--;)n[i]===t&&r++;return r}function se(n){return ds[n]}function he(n){return gs[n]}function ce(n){return"\\"+th[n]}function hu(n,t,i){for(var u,f=n.length,r=t+(i?0:-1);i?r--:++r<f;)if(u=n[r],u!==u)return r;return-1}function st(n){var t=!1;if(null!=n&&"function"!=typeof n.toString)try{t=!!(n+"")}catch(i){}return t}function y(n,t){return n="number"==typeof n||rs.test(n)?+n:-1,t=null==t?b:t,n>-1&&n%1==0&&t>n}function cu(n){for(var t,i=[];!(t=n.next()).done;)i.push(t.value);return i}function fr(n){var i=-1,t=Array(n.size);return n.forEach(function(n,r){t[++i]=[r,n]}),t}function p(n,t){for(var r,i=-1,f=n.length,e=0,u=[];++i<f;)r=n[i],(r===t||r===si)&&(n[i]=si,u[e++]=i);return u}function oi(n){var i=-1,t=Array(n.size);return n.forEach(function(n){t[++i]=n}),t}function ht(n){if(!n||!di.test(n))return n.length;for(var t=gr.lastIndex=0;gr.test(n);)t++;return t}function s(n){return n.match(gr)}function le(n){return nh[n]}function lu(ot){function ni(n){if(tu(n)&&!ei(n)&&!(n instanceof bi)){if(n instanceof sf)return n;if(gr.call(n,"__wrapped__"))return yp(n)}return new sf(n)}function yc(){}function sf(t,i){this.__wrapped__=t;this.__actions__=[];this.__chain__=!!i;this.__index__=0;this.__values__=n}function bi(n){this.__wrapped__=n;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=h;this.__views__=[]}function ik(){var n=new bi(this.__wrapped__);return n.__actions__=rf(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=rf(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=rf(this.__views__),n}function rk(){if(this.__filtered__){var n=new bi(this);n.__dir__=-1;n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function uk(){var n=this.__wrapped__.value(),e=this.__dir__,o=ei(n),k=0>e,r=o?n.length:0,s=ug(0,r,this.__views__),h=s.start,c=s.end,t=c-h,l=k?c:h-1,a=this.__iteratees__,d=a.length,v=0,y=of(t,this.__takeCount__),u,f,i;if(!o||ct>r||r==t&&y==t)return by(n,this.__actions__);u=[];n:for(;t--&&y>v;){for(l+=e,f=-1,i=n[l];++f<d;){var p=a[f],g=p.iteratee,w=p.type,b=g(i);if(w==be)i=b;else if(!b){if(w==yu)continue n;break n}}u[v++]=i}return u}function gl(){}function fk(n,t){return dv(n,t)&&delete n[t]}function ek(t,i){if(sc){var r=t[i];return r===lt?n:r}return gr.call(t,i)?t[i]:n}function dv(t,i){return sc?t[i]!==n:gr.call(t,i)}function ok(t,i,r){t[i]=sc&&r===n?lt:r}function as(n){var i=-1,r=n?n.length:0,t;for(this.clear();++i<r;)t=n[i],this.set(t[0],t[1])}function sk(){this.__data__={hash:new gl,map:rs?new rs:[],string:new gl}}function hk(n){var t=this.__data__;return ph(n)?fk("string"==typeof n?t.string:t.hash,n):rs?t.map["delete"](n):gv(t.map,n)}function ck(n){var t=this.__data__;return ph(n)?ek("string"==typeof n?t.string:t.hash,n):rs?t.map.get(n):ny(t.map,n)}function lk(n){var t=this.__data__;return ph(n)?dv("string"==typeof n?t.string:t.hash,n):rs?t.map.has(n):ty(t.map,n)}function ak(n,t){var i=this.__data__;return ph(n)?ok("string"==typeof n?i.string:i.hash,n,t):rs?i.map.set(n,t):iy(i.map,n,t),this}function pc(n){var t=-1,i=n?n.length:0;for(this.__data__=new as;++t<i;)this.push(n[t])}function wc(n,t){var r=n.__data__,i,u;return ph(t)?(i=r.__data__,u="string"==typeof t?i.string:i.hash,u[t]===lt):r.has(t)}function vk(n){var i=this.__data__,t,r;ph(n)?(t=i.__data__,r="string"==typeof n?t.string:t.hash,r[n]=lt):i.set(n,lt)}function lf(n){var i=-1,r=n?n.length:0,t;for(this.clear();++i<r;)t=n[i],this.set(t[0],t[1])}function yk(){this.__data__={array:[],map:null}}function pk(n){var t=this.__data__,i=t.array;return i?gv(i,n):t.map["delete"](n)}function wk(n){var t=this.__data__,i=t.array;return i?ny(i,n):t.map.get(n)}function bk(n){var t=this.__data__,i=t.array;return i?ty(i,n):t.map.has(n)}function kk(n,t){var i=this.__data__,r=i.array,u;return r&&(r.length<ct-1?iy(r,n,t):(i.array=null,i.map=new as(r))),u=i.map,u&&u.set(n,t),this}function gv(n,t){var i=bc(n,t),r;return 0>i?!1:(r=n.length-1,i==r?n.pop():pl.call(n,i,1),!0)}function ny(t,i){var r=bc(t,i);return 0>r?n:t[r][1]}function ty(n,t){return bc(n,t)>-1}function bc(n,t){for(var i=n.length;i--;)if(cs(n[i][0],t))return i;return-1}function iy(n,t,i){var r=bc(n,t);0>r?n.push([t,i]):n[r][1]=i}function na(t,i,r,u){return t===n||cs(t,bh[r])&&!gr.call(u,r)?i:t}function ta(t,i,r){(r===n||cs(t[i],r))&&("number"!=typeof i||r!==n||i in t)||(t[i]=r)}function hh(t,i,r){var u=t[i];gr.call(t,i)&&cs(u,r)&&(r!==n||i in t)||(t[i]=r)}function dk(n,t,i,r){return ls(n,function(n,u,f){t(r,n,i(n),f)}),r}function ry(n,t){return n&&nc(t,tf(t),n)}function ia(t,i){for(var r=-1,e=null==t,u=i.length,f=Array(u);++r<u;)f[r]=e?n:ec(t,i[r]);return f}function ra(n){return nu(n)?n:[]}function es(n){return"function"==typeof n?n:pf}function gs(n){return ei(n)?n:vp(n)}function ch(t,i,r){return t===t&&(r!==n&&(t=r>=t?t:r),i!==n&&(t=t>=i?t:i)),t}function af(i,r,u,e,o,s,h){var c,a,l,y,p;if(e&&(c=s?e(i,o,s,h):e(i)),c!==n)return c;if(!dr(i))return i;if(a=ei(i),a){if(c=fg(i),!r)return rf(i,c)}else{if(l=yf(i),y=l==yi||l==pu,pb(i))return yd(i,r);if(l==v||l==et||y&&!s){if(st(i))return s?i:{};if(c=eg(y?{}:i),!r)return c=ry(c,i),u?tp(i,c):c}else{if(!t[l])return s?i:{};c=og(i,l,r)}}return h||(h=new lf),p=h.get(i),p?p:(h.set(i,c),(a?f:vf)(i,function(n,t){hh(c,t,af(n,r,u,e,t,i,h))}),u&&!a?tp(i,c):c)}function gk(t){var i=tf(t),r=i.length;return function(u){var f;if(null==u)return!r;for(f=r;f--;){var e=i[f],s=t[e],o=u[e];if(o===n&&!(e in Object(u))||!s(o))return!1}return!0}}function lh(n){return dr(n)?oot(n):{}}function uy(t,i,r){if("function"!=typeof t)throw new cf(e);return yl(function(){t.apply(n,r)},i)}function nh(n,t,i,u){var l=-1,s=gi,h=!0,a=n.length,o=[],v=t.length,f,e,c;if(!a)return o;i&&(t=r(t,rr(i)));u?(s=nr,h=!1):t.length>=ct&&(s=wc,h=!1,t=new pc(t));n:for(;++l<a;)if(f=n[l],e=i?i(f):f,h&&e===e){for(c=v;c--;)if(t[c]===e)continue n;o.push(f)}else s(t,e,u)||o.push(f);return o}function nd(n,t){var i=!0;return ls(n,function(n,r,u){return i=!!t(n,r,u)}),i}function td(t,i,r,u){var f=t.length;for(r=ki(r),0>r&&(r=-r>f?0:f+r),u=u===n||u>f?f:ki(u),0>u&&(u+=f),u=r>u?0:yw(u);u>r;)t[r++]=i;return t}function fy(n,t){var i=[];return ls(n,function(n,r,u){t(n,r,u)&&i.push(n)}),i}function kr(n,t,i,r){var f,e,u;for(r||(r=[]),f=-1,e=n.length;++f<e;)u=n[f],t>0&&nu(u)&&(i||ei(u)||uh(u))?t>1?kr(u,t-1,i,r):tt(r,u):i||(r[r.length]=u);return r}function id(n,t){return null==n?n:vv(n,t,hf)}function vf(n,t){return n&&vv(n,t,tf)}function ua(n,t){return n&&cb(n,t,tf)}function kc(n,t){return nt(t,function(t){return kf(n[t])})}function dc(t,i){i=hs(i,t)?[i+""]:gs(i);for(var r=0,u=i.length;null!=t&&u>r;)t=t[i[r++]];return r&&r==u?t:n}function fa(n,t){return gr.call(n,t)||"object"==typeof n&&t in n&&null===vl(n)}function rd(n,t){return t in Object(n)}function ud(n,t,i){return n>=of(t,i)&&n<nf(t,i)}function ea(t,i,u){for(var e,y,s,c,o,p,w=u?nr:gi,b=t[0].length,l=t.length,f=l,a=Array(l),v=1/0,h=[];f--;)e=t[f],f&&i&&(e=r(e,rr(i))),v=of(e.length,v),a[f]=!u&&(i||b>=120&&e.length>=120)?new pc(f&&e):n;e=t[0];y=-1;s=a[0];n:for(;++y<b&&h.length<v;)if(c=e[y],o=i?i(c):c,!(s?wc(s,o):w(h,o,u))){for(f=l;--f;)if(p=a[f],!(p?wc(p,o):w(t[f],o,u)))continue n;s&&s.push(o);h.push(c)}return h}function fd(n,t,i,r){return vf(n,function(n,u,f){t(r,i(n),u,f)}),r}function dh(t,i,r){hs(i,t)||(i=gs(i),t=rc(t,i),i=uf(i));var f=null==t?t:t[i];return null==f?n:u(f,t,r)}function gh(n,t,i,r,u){return n===t?!0:null==n||null==t||!dr(n)&&!tu(t)?n!==n&&t!==t:ed(n,t,gh,i,r,u)}function ed(n,t,i,r,u,f){var c=ei(n),y=ei(t),e=ai,o=ai,s,h;c||(e=yf(n),e=e==et?v:e);y||(o=yf(t),o=o==et?v:o);var l=e==v&&!st(n),p=o==v&&!st(t),a=e==o;return a&&!l?(f||(f=new lf),c||fc(n)?hp(n,t,i,r,u,f):ig(n,t,e,i,r,u,f)):!(u&ft)&&(s=l&&gr.call(n,"__wrapped__"),h=p&&gr.call(t,"__wrapped__"),s||h)?(f||(f=new lf),i(s?n.value():n,h?t.value():t,r,u,f)):a?(f||(f=new lf),rg(n,t,i,r,u,f)):!1}function oa(t,i,r,u){var e=r.length,l=e,a=!u,f,h,c;if(null==t)return!l;for(t=Object(t);e--;)if(f=r[e],a&&f[2]?f[1]!==t[f[0]]:!(f[0]in t))return!1;for(;++e<l;){f=r[e];var o=f[0],s=t[o],v=f[1];if(a&&f[2]){if(s===n&&!(o in t))return!1}else if(h=new lf,c=u?u(s,v,o,t,i,h):n,!(c===n?gh(v,s,u,ci|ft,h):c))return!1}return!0}function ey(n){var t=typeof n;return"function"==t?n:null==n?pf:"object"==t?ei(n)?cy(n[0],n[1]):hy(n):tb(n)}function od(n){return cot(Object(n))}function oy(n){var t,i;n=null==n?n:Object(n);t=[];for(i in n)t.push(i);return t}function sy(n,t){var r=-1,i=ef(n)?Array(n.length):[];return ls(n,function(n,u,f){i[++r]=t(n,u,f)}),i}function hy(t){var i=wa(t),r,u;return 1==i.length&&i[0][2]?(r=i[0][0],u=i[0][1],function(t){return null==t?!1:t[r]===u&&(u!==n||r in Object(t))}):function(n){return n===t||oa(n,t,i)}}function cy(t,i){return function(r){var u=ec(r,t);return u===n&&u===i?bw(r,t):gh(i,u,n,ci|ft)}}function gc(t,i,r,u,e){if(t!==i){var o=ei(i)||fc(i)?n:hf(i);f(o||i,function(f,s){if(o&&(s=f,f=i[s]),dr(f))e||(e=new lf),sd(t,i,s,r,gc,u,e);else{var h=u?u(t[s],f,s+"",t,i,e):n;h===n&&(h=f);ta(t,s,h)}})}}function sd(t,i,r,u,f,e,o){var c=t[r],s=i[r],a=o.get(s),h,l;if(a)return void ta(t,r,a);h=e?e(c,s,r+"",t,i,o):n;l=h===n;l&&(h=s,ei(s)||fc(s)?ei(c)?h=c:nu(c)?h=rf(c):(l=!1,h=af(s,!e)):iv(s)||uh(s)?uh(c)?h=pw(c):!dr(c)||u&&kf(c)?(l=!1,h=af(s,!e)):h=c:l=!1);o.set(s,h);l&&f(h,s,u,e,o);o["delete"](s);ta(t,r,h)}function ly(n,t,i){var f=-1,u;return t=r(t.length?t:Array(1),ii()),u=sy(n,function(n){var i=r(t,function(t){return t(n)});return{criteria:i,index:++f,value:n}}),fe(u,function(n,t){return ee(n,t,i)})}function ay(n,t){return n=Object(n),it(t,function(t,i){return i in n&&(t[i]=n[i]),t},{})}function vy(n,t){var i={};return id(n,function(n,r){t(n,r)&&(i[r]=n)}),i}function sa(t){return function(i){return null==i?n:i[t]}}function hd(n){return function(t){return dc(t,n)}}function ha(n,t,i,u){var h=u?ue:rt,o=-1,c=t.length,f=n;for(i&&(f=r(n,rr(i)));++o<c;)for(var e=0,s=t[o],l=i?i(s):s;(e=h(f,l,e,u))>-1;)f!==n&&pl.call(f,e,1),pl.call(n,e,1);return n}function yy(n,t){for(var i,o,u,f,r=n?t.length:0,e=r-1;r--;)i=t[r],(e==r||i!=o)&&(o=i,y(i)?pl.call(n,i,1):hs(i,n)?delete n[i]:(u=gs(i),f=rc(n,u),null!=f&&delete f[uf(u)]));return n}function ca(n,t){return n+bl(ob()*(t-n+1))}function cd(n,t,i,r){for(var e=-1,u=nf(wl((t-n)/(i||1)),0),f=Array(u);u--;)f[r?u:++e]=n,n+=i;return f}function nl(t,i,r,u){var e,o,h;i=hs(i,t)?[i+""]:gs(i);for(var s=-1,c=i.length,l=c-1,f=t;null!=f&&++s<c;)e=i[s],dr(f)&&(o=r,s!=l&&(h=f[e],o=u?u(h,e,f):n,o===n&&(o=null==h?y(i[s+1])?[]:{}:h)),hh(f,e,o)),f=f[e];return t}function os(n,t,i){var u=-1,r=n.length,f;for(0>t&&(t=-t>r?0:r+t),i=i>r?r:i,0>i&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0,f=Array(r);++u<r;)f[u]=n[u+t];return f}function ld(n,t){var i;return ls(n,function(n,r,u){return i=t(n,r,u),!i}),!!i}function tl(n,t,i){var u=0,r=n?n.length:u,f,e;if("number"==typeof t&&t===t&&to>=r){for(;r>u;)f=u+r>>>1,e=n[f],(i?t>=e:t>e)&&null!==e?u=f+1:r=f;return r}return la(n,t,pf,i)}function la(t,i,r,u){var l;i=r(i);for(var o=0,e=t?t.length:0,a=i!==i,v=null===i,y=i===n;e>o;){var s=bl((o+e)/2),f=r(t[s]),c=f!==n,h=f===f;l=a?h||u:v?h&&c&&(u||null!=f):y?h&&(u||c):null==f?!1:u?i>=f:i>f;l?o=s+1:e=s}return of(e,no)}function ad(n){return py(n)}function py(n,t){for(var u=0,o=n.length,i=n[0],r=t?t(i):i,f=r,s=1,e=[i];++u<o;)i=n[u],r=t?t(i):i,cs(r,f)||(f=r,e[s++]=i);return e}function th(n,t,i){var l=-1,o=gi,a=n.length,s=!0,f=[],r=f,h,e,u,c;if(i)s=!1,o=nr;else if(a>=ct){if(h=t?null:wot(n),h)return oi(h);s=!1;o=wc;r=new pc}else r=t?[]:f;n:for(;++l<a;)if(e=n[l],u=t?t(e):e,s&&u===u){for(c=r.length;c--;)if(r[c]===u)continue n;t&&r.push(u);f.push(e)}else o(r,u,i)||(r!==f&&r.push(u),f.push(e));return f}function vd(n,t){t=hs(t,n)?[t+""]:gs(t);n=rc(n,t);var i=uf(t);return null!=n&&ww(n,i)?delete n[i]:!0}function wy(n,t,i,r){return nl(n,t,i(dc(n,t)),r)}function il(n,t,i,r){for(var f=n.length,u=r?f:-1;(r?u--:++u<f)&&t(n[u],u,n););return i?os(n,r?0:u,r?u+1:f):os(n,r?u+1:0,r?f:u)}function by(n,t){var i=n;return i instanceof bi&&(i=i.value()),it(t,function(n,t){return t.func.apply(t.thisArg,tt([n],t.args))},i)}function aa(n,t,i){for(var r,u=-1,f=n.length;++u<f;)r=r?tt(nh(r,n[u],t,i),nh(n[u],r,t,i)):n[u];return r&&r.length?th(r,t,i):[]}function ky(t,i,r){for(var u=-1,e=t.length,o=i.length,f={};++u<e;)r(f,t[u],o>u?i[u]:n);return f}function yd(n,t){if(t)return n.slice();var i=new n.constructor(n.length);return n.copy(i),i}function dy(n){var t=new n.constructor(n.byteLength);return new al(t).set(new al(n)),t}function pd(n){return it(fr(n),df,new n.constructor)}function wd(n){var t=new n.constructor(n.source,du.exec(n));return t.lastIndex=n.lastIndex,t}function bd(n){return it(oi(n),gf,new n.constructor)}function kd(n){return cc?Object(cc.call(n)):{}}function dd(n,t){var i=t?dy(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}function gy(n,t,i,r){for(var u=-1,o=n.length,s=i.length,f=-1,h=t.length,c=nf(o-s,0),e=Array(h+c),l=!r;++f<h;)e[f]=t[f];for(;++u<s;)(l||o>u)&&(e[i[u]]=n[u]);for(;c--;)e[f++]=n[u++];return e}function np(n,t,i,r){for(var o,u=-1,s=n.length,h=-1,c=i.length,e=-1,l=t.length,a=nf(s-c,0),f=Array(a+l),v=!r;++u<a;)f[u]=n[u];for(o=u;++e<l;)f[o+e]=t[e];for(;++h<c;)(v||s>u)&&(f[o+i[h]]=n[u++]);return f}function rf(n,t){var i=-1,r=n.length;for(t||(t=Array(r));++i<r;)t[i]=n[i];return t}function nc(n,t,i){return va(n,t,i)}function va(n,t,i,r){var f,e,u,o;for(i||(i={}),f=-1,e=t.length;++f<e;)u=t[f],o=r?r(i[u],n[u],u,i,n):n[u],hh(i,u,o);return i}function tp(n,t){return nc(n,kot(n),t)}function rl(n,t){return function(i,r){var u=ei(i)?ne:dk,f=t?t():{};return u(i,n,ii(r),f)}}function ah(t){return ti(function(i,r){var e=-1,u=r.length,f=u>1?r[u-1]:n,s=u>2?r[2]:n,o;for(f="function"==typeof f?(u--,f):n,s&&wf(r[0],r[1],s)&&(f=3>u?n:f,u=1),i=Object(i);++e<u;)o=r[e],o&&t(i,o,e,f);return i})}function ip(n,t){return function(i,r){if(null==i)return i;if(!ef(i))return n(i,r);for(var f=i.length,u=t?f:-1,e=Object(i);(t?u--:++u<f)&&r(e[u],u,e)!==!1;);return i}}function rp(n){return function(t,i,r){for(var u,s=-1,f=Object(t),e=r(t),o=e.length;o--;)if(u=e[n?o:++s],i(f[u],u,f)===!1)break;return t}}function gd(n,t,i){function r(){var t=this&&this!==c&&this instanceof r?f:n;return t.apply(u?i:this,arguments)}var u=t&o,f=tc(n);return r}function up(t){return function(i){i=br(i);var r=di.test(i)?s(i):n,u=r?r[0]:i.charAt(0),f=r?r.slice(1).join(""):i.slice(1);return u[t]()+f}}function vh(n){return function(t){return it(nb(dw(t)),n,"")}}function tc(n){return function(){var t=arguments,i,r;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}return i=lh(n.prototype),r=n.apply(i,t),dr(r)?r:i}}function ng(t,i,r){function f(){for(var a,v,o=arguments.length,s=Array(o),h=o,l=yh(f);h--;)s[h]=arguments[h];return(a=3>o&&s[0]!==l&&s[o-1]!==l?[]:p(s,l),o-=a.length,r>o)?sp(t,i,ul,f.placeholder,n,s,a,n,n,r-o):(v=this&&this!==c&&this instanceof f?e:t,u(v,this,s))}var e=tc(t);return f}function fp(t){return ti(function(i){var u,r,h,f;i=kr(i,1);var s=i.length,o=s,c=sf.prototype.thru;for(t&&i.reverse();o--;){if(u=i[o],"function"!=typeof u)throw new cf(e);c&&!r&&"wrapper"==el(u)&&(r=new sf([],!0))}for(o=r?o:s;++o<s;)u=i[o],h=el(u),f="wrapper"==h?yv(u):n,r=f&&ba(f[0])&&f[1]==(w|l|a|hi)&&!f[4].length&&1==f[9]?r[el(f[0])].apply(r,f[3]):1==u.length&&ba(u)?r[h]():r.thru(u);return function(){var f=arguments,n=f[0],t,u;if(r&&1==f.length&&ei(n)&&n.length>=ct)return r.plant(n).value();for(t=0,u=s?i[t].apply(this,f):n;++t<s;)u=i[t].call(this,u);return u}})}function ul(t,i,r,u,f,e,s,h,a,v){function y(){for(var it,ut,ft,rt,l,o=arguments.length,w=o,n=Array(o);w--;)n[w]=arguments[w];return(b&&(it=yh(y),ut=oe(n,it)),u&&(n=gy(n,u,f,b)),e&&(n=np(n,e,s,b)),o-=ut,b&&v>o)?(ft=p(n,it),sp(t,i,ul,y.placeholder,r,n,ft,h,a,v-o)):(rt=g?r:this,l=k?rt[t]:t,o=n.length,h?n=cg(n,h):nt&&o>1&&n.reverse(),d&&o>a&&(n.length=a),this&&this!==c&&this instanceof y&&(l=tt||tc(l)),l.apply(rt,n))}var d=i&w,g=i&o,k=i&ut,b=i&(l|at),nt=i&vu,tt=k?n:tc(t);return y}function ep(n,t){return function(i,r){return fd(i,n,t(r),{})}}function ya(n){return ti(function(t){return t=r(kr(t,1),ii()),ti(function(i){var r=this;return n(t,function(n){return u(n,r,i)})})})}function fl(t,i,r){var f,u,e;return(i=ki(i),f=ht(t),!i||f>=i)?"":(u=i-f,r=r===n?" ":r+"",e=gw(r,wl(u/ht(r))),di.test(r)?s(e).slice(0,u).join(""):e.slice(0,u))}function tg(n,t,i,r){function f(){for(var a=-1,h=arguments.length,t=-1,l=r.length,o=Array(l+h),v=this&&this!==c&&this instanceof f?s:n;++t<l;)o[t]=r[t];for(;h--;)o[t++]=arguments[++a];return u(v,e?i:this,o)}var e=t&o,s=tc(n);return f}function op(t){return function(i,r,u){return u&&"number"!=typeof u&&wf(i,r,u)&&(r=u=n),i=gu(i),i=i===i?i:0,r===n?(r=i,i=0):r=gu(r)||0,u=u===n?r>i?1:-1:gu(u)||0,cd(i,r,u,t)}}function sp(t,i,r,u,f,e,s,h,c,v){var y=i&l,b=h?rf(h):n,k=y?s:n,d=y?n:s,g=y?e:n,nt=y?n:e,w,p;return i|=y?a:vt,i&=~(y?vt:a),i&au||(i&=~(o|ut)),w=[t,i,f,g,k,nt,d,b,c,v],p=r.apply(n,w),ba(t)&&ab(p,w),p.placeholder=u,p}function pa(n){var t=wh[n];return function(n,i){if(n=gu(n),i=ki(i)){var r=(br(n)+"e").split("e"),u=t(r[0]+"e"+(+r[1]+i));return r=(br(u)+"e").split("e"),+(r[0]+"e"+(+r[1]-i))}return t(n)}}function ss(t,i,r,u,f,s,h,c){var w=i&ut,y,b,k,p,v,d,g;if(!w&&"function"!=typeof t)throw new cf(e);return y=u?u.length:0,(y||(i&=~(a|vt),u=f=n),h=h===n?h:nf(ki(h),0),c=c===n?c:ki(c),y-=f?f.length:0,i&vt)&&(b=u,k=f,u=f=n),p=w?n:yv(t),v=[t,i,r,u,f,b,k,s,h,c],d=(p&&hg(v,p),t=v[0],i=v[1],r=v[2],u=v[3],f=v[4],c=v[9]=null==v[9]?w?0:t.length:nf(v[9]-y,0),!c&&i&(l|at)&&(i&=~(l|at)),i&&i!=o)?i==l||i==at?ng(t,i,c):i!=a&&i!=(o|a)||f.length?ul.apply(n,v):tg(t,i,r,u):gd(t,i,r),g=p?lb:ab,g(d,v)}function hp(t,i,r,u,f,e){var s=-1,y=f&ft,w=f&ci,l=t.length,p=i.length,a,h,o,c,v;if(l!=p&&!(y&&p>l))return!1;if(a=e.get(t),a)return a==i;for(h=!0,e.set(t,i);++s<l;){if(o=t[s],c=i[s],u&&(v=y?u(c,o,s,i,t,e):u(o,c,s,t,i,e)),v!==n){if(v)continue;h=!1;break}if(w){if(!tr(i,function(n){return o===n||r(o,n,u,f,e)})){h=!1;break}}else if(o!==c&&!r(o,c,u,f,e)){h=!1;break}}return e["delete"](t),h}function ig(n,t,i,r,u,f,e){var o,h,s;switch(i){case gt:return n.byteLength==t.byteLength&&r(new al(n),new al(t))?!0:!1;case yt:case pt:return+n==+t;case vi:return n.name==t.name&&n.message==t.message;case wt:return n!=+n?t!=+t:n==+t;case bt:case kt:return n==t+"";case k:o=fr;case d:return(h=f&ft,o||(o=oi),n.size!=t.size&&!h)?!1:(s=e.get(n),s?s==t:hp(o(n),o(t),r,u,f|ci,e.set(n,t)));case pi:if(cc)return cc.call(n)==cc.call(t)}return!1}function rg(t,i,r,u,f,e){var y=f&ft,w=tf(t),b=w.length,g=tf(i),nt=g.length,s,o,k,h,p,c,l,d,a,v;if(b!=nt&&!y)return!1;for(s=b;s--;)if(o=w[s],!(y?o in i:fa(i,o)))return!1;if(k=e.get(t),k)return k==i;for(h=!0,e.set(t,i),p=y;++s<b;){if(o=w[s],c=t[o],l=i[o],u&&(d=y?u(l,c,o,i,t,e):u(c,l,o,t,i,e)),!(d===n?c===l||r(c,l,u,f,e):d)){h=!1;break}p||(p="constructor"==o)}return h&&!p&&(a=t.constructor,v=i.constructor,a!=v&&"constructor"in t&&"constructor"in i&&!("function"==typeof a&&a instanceof a&&"function"==typeof v&&v instanceof v)&&(h=!1)),e["delete"](t),h}function el(n){for(var i,r,t=n.name+"",u=hc[t],f=gr.call(hc,t)?u.length:0;f--;)if(i=u[f],r=i.func,null==r||r==n)return i.name;return t}function ii(){var n=ni.iteratee||ov;return n=n===ov?ey:n,arguments.length?n(arguments[0],arguments[1]):n}function wa(n){for(var t=kw(n),i=t.length;i--;)t[i][2]=sg(t[i][1]);return t}function ol(t,i){var r=t[i];return cw(r)?r:n}function yh(n){var t=gr.call(ni,"placeholder")?ni:n;return t.placeholder}function yf(n){return ff.call(n)}function ug(n,t,i){for(var f,r,u=-1,e=i.length;++u<e;){f=i[u];r=f.size;switch(f.type){case"drop":n+=r;break;case"dropRight":t-=r;break;case"take":t=of(t,n+r);break;case"takeRight":n=nf(n,t-r)}}return{start:n,end:t}}function cp(t,i,r){var u,f;return null==t?!1:(u=r(t,i),u||hs(i)||(i=gs(i),t=rc(t,i),null!=t&&(i=uf(i),u=r(t,i))),f=t?t.length:n,u||!!f&&uc(f)&&y(i,f)&&(ei(t)||fh(t)||uh(t)))}function fg(n){var i=n.length,t=n.constructor(i);return i&&"string"==typeof n[0]&&gr.call(n,"index")&&(t.index=n.index,t.input=n.input),t}function eg(n){return"function"!=typeof n.constructor||ic(n)?{}:lh(vl(n))}function og(n,t,i){var r=n.constructor;switch(t){case gt:return dy(n);case yt:case pt:return new r(+n);case er:case or:case sr:case hr:case cr:case lr:case ar:case vr:case yr:return dd(n,i);case k:return pd(n);case wt:case kt:return new r(n);case bt:return wd(n);case d:return bd(n);case pi:return kd(n)}}function lp(t){var i=t?t.length:n;return uc(i)&&(ei(t)||fh(t)||uh(t))?ir(i,String):null}function wf(n,t,i){if(!dr(i))return!1;var r=typeof t;return("number"==r?ef(i)&&y(t,i.length):"string"==r&&t in i)?cs(i[t],n):!1}function hs(n,t){return"number"==typeof n?!0:!ei(n)&&(lo.test(n)||!co.test(n)||null!=t&&n in Object(t))}function ph(n){var t=typeof n;return"number"==t||"boolean"==t||"string"==t&&"__proto__"!=n||null==n}function ba(n){var r=el(n),t=ni[r],i;return"function"!=typeof t||!(r in bi.prototype)?!1:n===t?!0:(i=yv(t),!!i&&n===i[0])}function ic(n){var t=n&&n.constructor,i="function"==typeof t&&t.prototype||bh;return n===i}function sg(n){return n===n&&!dr(n)}function hg(n,t){var f=n[1],u=t[1],e=f|u,s=(o|ut|w)>e,h=u==w&&f==l||u==w&&f==hi&&n[7].length<=t[8]||u==(w|hi)&&t[7].length<=t[8]&&f==l,i,r;return!s&&!h?n:(u&o&&(n[2]=t[2],e|=f&o?0:au),i=t[3],i&&(r=n[3],n[3]=r?gy(r,i,t[4]):rf(i),n[4]=r?p(n[3],si):rf(t[4])),i=t[5],i&&(r=n[5],n[5]=r?np(r,i,t[6]):rf(i),n[6]=r?p(n[5],si):rf(t[6])),i=t[7],i&&(n[7]=rf(i)),u&w&&(n[8]=null==n[8]?t[8]:of(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=e,n)}function ap(t,i,r,u,f,e){return dr(t)&&dr(i)&&gc(t,i,n,ap,e.set(i,t)),t}function rc(n,t){return 1==t.length?n:ec(n,os(t,0,-1))}function cg(t,i){for(var u,f=t.length,r=of(i.length,f),e=rf(t);r--;)u=i[r],t[r]=y(u,f)?e[u]:n;return t}function vp(n){var t=[];return br(n).replace(ao,function(n,i,r,u){t.push(r?u.replace(wo,"$1"):i||n)}),t}function yp(n){if(n instanceof bi)return n.clone();var t=new sf(n.__wrapped__,n.__chain__);return t.__actions__=rf(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function lg(n,t){var i;if(t=nf(ki(t),0),i=n?n.length:0,!i||1>t)return[];for(var r=0,f=0,u=Array(wl(i/t));i>r;)u[f++]=os(n,r,r+=t);return u}function ag(n){for(var t,i=-1,u=n?n.length:0,f=0,r=[];++i<u;)t=n[i],t&&(r[f++]=t);return r}function pp(t,i,r){var u=t?t.length:0;return u?(i=r||i===n?1:ki(i),os(t,0>i?0:i,u)):[]}function wp(t,i,r){var u=t?t.length:0;return u?(i=r||i===n?1:ki(i),i=u-i,os(t,0,0>i?0:i)):[]}function vg(n,t){return n&&n.length?il(n,ii(t,3),!0,!0):[]}function yg(n,t){return n&&n.length?il(n,ii(t,3),!0):[]}function pg(n,t,i,r){var u=n?n.length:0;return u?(i&&"number"!=typeof i&&wf(n,t,i)&&(i=0,r=u),td(n,t,i,r)):[]}function wg(n,t){return n&&n.length?fi(n,ii(t,3)):-1}function bg(n,t){return n&&n.length?fi(n,ii(t,3),!0):-1}function kg(n){var t=n?n.length:0;return t?kr(n,1):[]}function dg(n){var t=n?n.length:0;return t?kr(n,li):[]}function gg(t,i){var r=t?t.length:0;return r?(i=i===n?1:ki(i),kr(t,i)):[]}function nn(n){for(var t,i=-1,u=n?n.length:0,r={};++i<u;)t=n[i],r[t[0]]=t[1];return r}function bp(t){return t?t[0]:n}function tn(n,t,i){var r=n?n.length:0;return r?(i=ki(i),0>i&&(i=nf(r+i,0)),rt(n,t,i)):-1}function rn(n){return wp(n,1)}function un(n,t){return n?hot.call(n,t):""}function uf(t){var i=t?t.length:0;return i?t[i-1]:n}function fn(t,i,r){var f=t?t.length:0,u;if(!f)return-1;if(u=f,r!==n&&(u=ki(r),u=(0>u?nf(f+u,0):of(u,f-1))+1),i!==i)return hu(t,u,!0);for(;u--;)if(t[u]===i)return u;return-1}function kp(n,t){return n&&n.length&&t&&t.length?ha(n,t):n}function en(n,t,i){return n&&n.length&&t&&t.length?ha(n,t,ii(i)):n}function on(t,i,r){return t&&t.length&&i&&i.length?ha(t,i,n,r):t}function sn(n,t){var r=[],u;if(!n||!n.length)return r;var i=-1,f=[],e=n.length;for(t=ii(t,3);++i<e;)u=n[i],t(u,i,n)&&(r.push(u),f.push(i));return yy(n,f),r}function ka(n){return n?aot.call(n):n}function hn(t,i,r){var u=t?t.length:0;return u?(r&&"number"!=typeof r&&wf(t,i,r)?(i=0,r=u):(i=null==i?0:ki(i),r=r===n?u:ki(r)),os(t,i,r)):[]}function cn(n,t){return tl(n,t)}function ln(n,t,i){return la(n,t,ii(i))}function an(n,t){var r=n?n.length:0,i;return r&&(i=tl(n,t),r>i&&cs(n[i],t))?i:-1}function vn(n,t){return tl(n,t,!0)}function yn(n,t,i){return la(n,t,ii(i),!0)}function pn(n,t){var r=n?n.length:0,i;return r&&(i=tl(n,t,!0)-1,cs(n[i],t))?i:-1}function wn(n){return n&&n.length?ad(n):[]}function bn(n,t){return n&&n.length?py(n,ii(t)):[]}function kn(n){return pp(n,1)}function dn(t,i,r){return t&&t.length?(i=r||i===n?1:ki(i),os(t,0,0>i?0:i)):[]}function gn(t,i,r){var u=t?t.length:0;return u?(i=r||i===n?1:ki(i),i=u-i,os(t,0>i?0:i,u)):[]}function ntt(n,t){return n&&n.length?il(n,ii(t,3),!1,!0):[]}function ttt(n,t){return n&&n.length?il(n,ii(t,3)):[]}function itt(n){return n&&n.length?th(n):[]}function rtt(n,t){return n&&n.length?th(n,ii(t)):[]}function utt(t,i){return t&&t.length?th(t,n,i):[]}function da(n){if(!n||!n.length)return[];var t=0;return n=nt(n,function(n){if(nu(n))return(t=nf(n.length,t),!0)}),ir(t,function(t){return r(n,sa(t))})}function dp(t,i){if(!t||!t.length)return[];var f=da(t);return null==i?f:r(f,function(t){return u(i,n,t)})}function ftt(n,t){return ky(n||[],t||[],hh)}function ett(n,t){return ky(n||[],t||[],nl)}function gp(n){var t=ni(n);return t.__chain__=!0,t}function ott(n,t){return t(n),n}function sl(n,t){return t(n)}function stt(){return gp(this)}function htt(){return new sf(this.value(),this.__chain__)}function ctt(n){return this.map(n).flatten()}function ltt(){this.__values__===n&&(this.__values__=uv(this.value()));var t=this.__index__>=this.__values__.length,i=t?n:this.__values__[this.__index__++];return{done:t,value:i}}function att(){return this}function vtt(t){for(var u,i,f,r=this;r instanceof yc;)i=yp(r),i.__index__=0,i.__values__=n,u?f.__wrapped__=i:u=i,f=i,r=r.__wrapped__;return f.__wrapped__=t,u}function ytt(){var i=this.__wrapped__,t;return i instanceof bi?(t=i,this.__actions__.length&&(t=new bi(this)),t=t.reverse(),t.__actions__.push({func:sl,args:[ka],thisArg:n}),new sf(t,this.__chain__)):this.thru(ka)}function ptt(){return by(this.__wrapped__,this.__actions__)}function wtt(t,i,r){var u=ei(t)?iu:nd;return r&&wf(t,i,r)&&(i=n),u(t,ii(i,3))}function btt(n,t){var i=ei(n)?nt:fy;return i(n,ii(t,3))}function ktt(t,i){if(i=ii(i,3),ei(t)){var r=fi(t,i);return r>-1?t[r]:n}return ui(t,i,ls)}function dtt(t,i){if(i=ii(i,3),ei(t)){var r=fi(t,i,!0);return r>-1?t[r]:n}return ui(t,i,av)}function gtt(n,t){return kr(iw(n,t),1)}function nw(n,t){return"function"==typeof t&&ei(n)?f(n,t):ls(n,es(t))}function tw(n,t){return"function"==typeof t&&ei(n)?ie(n,t):av(n,es(t))}function nit(n,t,i,r){n=ef(n)?n:hl(n);i=i&&!r?ki(i):0;var u=n.length;return 0>i&&(i=nf(u+i,0)),fh(n)?u>=i&&n.indexOf(t,i)>-1:!!u&&rt(n,t,i)>-1}function iw(n,t){var i=ei(n)?r:sy;return i(n,ii(t,3))}function tit(t,i,r,u){return null==t?[]:(ei(i)||(i=null==i?[]:[i]),r=u?n:r,ei(r)||(r=null==r?[]:[r]),ly(t,i,r))}function iit(n,t,i){var r=ei(n)?it:ru,u=arguments.length<3;return r(n,ii(t,4),i,u,ls)}function rit(n,t,i){var r=ei(n)?re:ru,u=arguments.length<3;return r(n,ii(t,4),i,u,av)}function uit(n,t){var i=ei(n)?nt:fy;return t=ii(t,3),i(n,function(n,i,r){return!t(n,i,r)})}function fit(t){var i=ef(t)?t:hl(t),r=i.length;return r>0?i[ca(0,r-1)]:n}function rw(n,t){var r=-1,i=uv(n),f=i.length,o=f-1,u,e;for(t=ch(ki(t),0,f);++r<t;)u=ca(r,o),e=i[u],i[u]=i[r],i[r]=e;return i.length=t,i}function eit(n){return rw(n,h)}function oit(n){if(null==n)return 0;if(ef(n)){var t=n.length;return t&&fh(n)?ht(n):t}return tf(n).length}function sit(t,i,r){var u=ei(t)?tr:ld;return r&&wf(t,i,r)&&(i=n),u(t,ii(i,3))}function hit(n,t){if("function"!=typeof t)throw new cf(e);return n=ki(n),function(){if(--n<1)return t.apply(this,arguments)}}function uw(t,i,r){return i=r?n:i,i=t&&null==i?t.length:i,ss(t,w,n,n,n,n,i)}function fw(t,i){var r;if("function"!=typeof i)throw new cf(e);return t=ki(t),function(){return--t>0&&(r=i.apply(this,arguments)),1>=t&&(i=n),r}}function ew(t,i,r){i=r?n:i;var u=ss(t,l,n,n,n,n,n,i);return u.placeholder=ew.placeholder,u}function ow(t,i,r){i=r?n:i;var u=ss(t,at,n,n,n,n,n,i);return u.placeholder=ow.placeholder,u}function sw(t,i,r){function b(){u&&oc(u);f&&oc(f);c=0;o=f=s=u=a=n}function k(i,r){r&&oc(r);f=u=a=n;i&&(c=lc(),h=t.apply(s,o),u||f||(o=s=n))}function d(){var n=i-(lc()-l);0>=n||n>i?k(a,f):u=yl(d,n)}function g(){return(u&&a||f&&p)&&(h=t.apply(s,o)),b(),h}function nt(){k(p,u)}function w(){var w,e,r;return(o=arguments,l=lc(),s=this,a=p&&(u||!v),y===!1)?w=v&&!u:(c||f||v||(c=l),e=y-(l-c),r=(0>=e||e>y)&&(v||f),r?(f&&(f=oc(f)),c=l,h=t.apply(s,o)):f||(f=yl(nt,e))),r&&u?u=oc(u):u||i===y||(u=yl(d,i)),w&&(r=!0,h=t.apply(s,o)),!r||u||f||(o=s=n),h}var o,f,h,l,s,u,a,c=0,v=!1,y=!1,p=!0;if("function"!=typeof t)throw new cf(e);return i=gu(i)||0,dr(r)&&(v=!!r.leading,y="maxWait"in r&&nf(gu(r.maxWait)||0,i),p="trailing"in r?!!r.trailing:p),w.cancel=b,w.flush=g,w}function cit(n){return ss(n,vu)}function ga(n,t){if("function"!=typeof n||t&&"function"!=typeof t)throw new cf(e);var i=function(){var r=arguments,u=t?t.apply(this,r):r[0],f=i.cache,e;return f.has(u)?f.get(u):(e=n.apply(this,r),i.cache=f.set(u,e),e)};return i.cache=new ga.Cache,i}function lit(n){if("function"!=typeof n)throw new cf(e);return function(){return!n.apply(this,arguments)}}function ait(n){return fw(2,n)}function ti(t,i){if("function"!=typeof t)throw new cf(e);return i=nf(i===n?t.length-1:ki(i),0),function(){for(var e,r=arguments,n=-1,o=nf(r.length-i,0),f=Array(o);++n<o;)f[n]=r[i+n];switch(i){case 0:return t.call(this,f);case 1:return t.call(this,r[0],f);case 2:return t.call(this,r[0],r[1],f)}for(e=Array(i+1),n=-1;++n<i;)e[n]=r[n];return e[i]=f,u(t,this,e)}}function vit(t,i){if("function"!=typeof t)throw new cf(e);return i=i===n?0:nf(ki(i),0),ti(function(n){var r=n[i],f=n.slice(0,i);return r&&tt(f,r),u(t,this,f)})}function yit(n,t,i){var r=!0,u=!0;if("function"!=typeof n)throw new cf(e);return dr(i)&&(r="leading"in i?!!i.leading:r,u="trailing"in i?!!i.trailing:u),sw(n,t,{leading:r,maxWait:t,trailing:u})}function pit(n){return uw(n,1)}function wit(n,t){return t=null==t?pf:t,wv(t,n)}function bit(){if(!arguments.length)return[];var n=arguments[0];return ei(n)?n:[n]}function kit(n){return af(n,!1,!0)}function dit(n,t){return af(n,!1,!0,t)}function git(n){return af(n,!0,!0)}function nrt(n,t){return af(n,!0,!0,t)}function cs(n,t){return n===t||n!==n&&t!==t}function nv(n,t){return n>t}function trt(n,t){return n>=t}function uh(n){return nu(n)&&gr.call(n,"callee")&&(!lv.call(n,"callee")||ff.call(n)==et)}function irt(n){return tu(n)&&ff.call(n)==gt}function ef(n){return null!=n&&uc(bot(n))&&!kf(n)}function nu(n){return tu(n)&&ef(n)}function rrt(n){return n===!0||n===!1||tu(n)&&ff.call(n)==yt}function urt(n){return tu(n)&&ff.call(n)==pt}function frt(n){return!!n&&1===n.nodeType&&tu(n)&&!iv(n)}function ert(n){if(ef(n)&&(ei(n)||fh(n)||kf(n.splice)||uh(n)))return!n.length;for(var t in n)if(gr.call(n,t))return!1;return!0}function ort(n,t){return gh(n,t)}function srt(t,i,r){r="function"==typeof r?r:n;var u=r?r(t,i):n;return u===n?gh(t,i,r):!!u}function tv(n){return tu(n)?ff.call(n)==vi||"string"==typeof n.message&&"string"==typeof n.name:!1}function hrt(n){return"number"==typeof n&&sot(n)}function kf(n){var t=dr(n)?ff.call(n):"";return t==yi||t==pu}function hw(n){return"number"==typeof n&&n==ki(n)}function uc(n){return"number"==typeof n&&n>-1&&n%1==0&&b>=n}function dr(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function tu(n){return!!n&&"object"==typeof n}function crt(n){return tu(n)&&yf(n)==k}function lrt(n,t){return n===t||oa(n,t,wa(t))}function art(t,i,r){return r="function"==typeof r?r:n,oa(t,i,wa(i),r)}function vrt(n){return lw(n)&&n!=+n}function cw(n){return null==n?!1:kf(n)?rb.test(ds.call(n)):tu(n)&&(st(n)?rb:ts).test(n)}function yrt(n){return null===n}function prt(n){return null==n}function lw(n){return"number"==typeof n||tu(n)&&ff.call(n)==wt}function iv(n){var i,t;return!tu(n)||ff.call(n)!=v||st(n)?!1:(i=vl(n),null===i)?!0:(t=i.constructor,"function"==typeof t&&t instanceof t&&ds.call(t)==uot)}function aw(n){return dr(n)&&ff.call(n)==bt}function wrt(n){return hw(n)&&n>=-b&&b>=n}function brt(n){return tu(n)&&yf(n)==d}function fh(n){return"string"==typeof n||!ei(n)&&tu(n)&&ff.call(n)==kt}function vw(n){return"symbol"==typeof n||tu(n)&&ff.call(n)==pi}function fc(n){return tu(n)&&uc(n.length)&&!!i[ff.call(n)]}function krt(t){return t===n}function drt(n){return tu(n)&&yf(n)==dt}function grt(n){return tu(n)&&ff.call(n)==io}function rv(n,t){return t>n}function nut(n,t){return t>=n}function uv(n){if(!n)return[];if(ef(n))return fh(n)?s(n):rf(n);if(eh&&n[eh])return cu(n[eh]());var t=yf(n),i=t==k?fr:t==d?oi:hl;return i(n)}function ki(n){var i,t;return n?(n=gu(n),n===li||n===-li)?(i=0>n?-1:1,i*de):(t=n%1,n===n?t?n-t:n:0):0===n?n:0}function yw(n){return n?ch(ki(n),0,h):0}function gu(n){var t,i;return(dr(n)&&(t=kf(n.valueOf)?n.valueOf():n,n=dr(t)?t+"":t),"string"!=typeof n)?0===n?n:+n:(n=n.replace(wr,""),i=ns.test(n),i||is.test(n)?rh(n.slice(2),i?2:8):go.test(n)?ge:+n)}function pw(n){return nc(n,hf(n))}function tut(n){return ch(ki(n),-b,b)}function br(n){if("string"==typeof n)return n;if(null==n)return"";if(vw(n))return hb?hb.call(n):"";var t=n+"";return"0"==t&&1/n==-li?"-0":t}function iut(n,t){var i=lh(n);return t?ry(i,t):i}function rut(n,t){return ui(n,ii(t,3),vf,!0)}function uut(n,t){return ui(n,ii(t,3),ua,!0)}function fut(n,t){return null==n?n:vv(n,es(t),hf)}function eut(n,t){return null==n?n:cb(n,es(t),hf)}function out(n,t){return n&&vf(n,es(t))}function sut(n,t){return n&&ua(n,es(t))}function hut(n){return null==n?[]:kc(n,tf(n))}function cut(n){return null==n?[]:kc(n,hf(n))}function ec(t,i,r){var u=null==t?n:dc(t,i);return u===n?r:u}function ww(n,t){return cp(n,t,fa)}function bw(n,t){return cp(n,t,rd)}function tf(n){var r=ic(n),t;if(!r&&!ef(n))return od(n);var u=lp(n),f=!!u,i=u||[],e=i.length;for(t in n)!fa(n,t)||f&&("length"==t||y(t,e))||r&&"constructor"==t||i.push(t);return i}function hf(n){for(var t,r=-1,e=ic(n),u=oy(n),o=u.length,f=lp(n),s=!!f,i=f||[],h=i.length;++r<o;)t=u[r],s&&("length"==t||y(t,h))||"constructor"==t&&(e||!gr.call(n,t))||i.push(t);return i}function lut(n,t){var i={};return t=ii(t,3),vf(n,function(n,r,u){i[t(n,r,u)]=n}),i}function aut(n,t){var i={};return t=ii(t,3),vf(n,function(n,r,u){i[r]=t(n,r,u)}),i}function vut(n,t){return t=ii(t),vy(n,function(n,i){return!t(n,i)})}function yut(n,t){return null==n?{}:vy(n,ii(t))}function put(t,i,r){if(hs(i,t))u=null==t?n:t[i];else{i=gs(i);var u=ec(t,i);t=rc(t,i)}return u===n&&(u=r),kf(u)?u.call(t):u}function wut(n,t,i){return null==n?n:nl(n,t,i)}function but(t,i,r,u){return u="function"==typeof u?u:n,null==t?t:nl(t,i,r,u)}function kw(n){return fu(n,tf(n))}function kut(n){return fu(n,hf(n))}function dut(n,t,i){var r=ei(n)||fc(n),u;return(t=ii(t,4),null==i)&&(r||dr(n)?(u=n.constructor,i=r?ei(n)?new u:[]:kf(u)?lh(vl(n)):{}):i={}),(r?f:vf)(n,function(n,r,u){return t(i,n,r,u)}),i}function gut(n,t){return null==n?!0:vd(n,t)}function nft(n,t,i){return null==n?n:wy(n,t,es(i))}function tft(t,i,r,u){return u="function"==typeof u?u:n,null==t?t:wy(t,i,es(r),u)}function hl(n){return n?ur(n,tf(n)):[]}function ift(n){return null==n?[]:ur(n,hf(n))}function rft(t,i,r){return r===n&&(r=i,i=n),r!==n&&(r=gu(r),r=r===r?r:0),i!==n&&(i=gu(i),i=i===i?i:0),ch(gu(t),i,r)}function uft(t,i,r){return i=gu(i)||0,r===n?(r=i,i=0):r=gu(r)||0,t=gu(t),ud(t,i,r)}function fft(t,i,r){var f,u;return((r&&"boolean"!=typeof r&&wf(t,i,r)&&(i=r=n),r===n&&("boolean"==typeof i?(r=i,i=n):"boolean"==typeof t&&(r=t,t=n)),t===n&&i===n?(t=0,i=1):(t=gu(t)||0,i===n?(i=t,t=0):i=gu(i)||0),t>i)&&(f=t,t=i,i=f),r||t%1||i%1)?(u=ob(),of(t+u*(i-t+ih("1e-"+((u+"").length-1))),i)):ca(t,i)}function fv(n){return kb(br(n).toLowerCase())}function dw(n){return n=br(n),n&&n.replace(us,se).replace(vs,"")}function eft(t,i,r){t=br(t);i="string"==typeof i?i:i+"";var u=t.length;return r=r===n?u:ch(ki(r),0,u),r-=i.length,r>=0&&t.indexOf(i,r)==r}function oft(n){return n=br(n),n&&oo.test(n)?n.replace(bu,he):n}function sft(n){return n=br(n),n&&vo.test(n)?n.replace(pr,"\\$&"):n}function hft(n,t,i){var r;if(n=br(n),t=ki(t),r=ht(n),!t||r>=t)return n;var u=(t-r)/2,f=bl(u),e=wl(u);return fl("",f,i)+n+fl("",e,i)}function cft(n,t,i){return n=br(n),n+fl(n,t,i)}function lft(n,t,i){return n=br(n),fl(n,t,i)+n}function aft(n,t,i){return i||null==t?t=0:t&&(t=+t),n=br(n).replace(wr,""),lot(n,t||(ko.test(n)?16:10))}function gw(n,t){n=br(n);t=ki(t);var i="";if(!n||1>t||t>b)return i;do t%2&&(i+=n),t=bl(t/2),n+=n;while(t);return i}function vft(){var n=arguments,t=br(n[0]);return n.length<3?t:t.replace(n[1],n[2])}function yft(n,t,i){return br(n).split(t,i)}function pft(n,t,i){return n=br(n),i=ch(ki(i),0,n.length),n.lastIndexOf(t,i)==i}function wft(t,i,r){var s=ni.templateSettings,e,f;r&&wf(t,i,r)&&(i=n);t=br(t);i=ac({},i,s,na);var h,o,c=ac({},i.imports,s.imports,na),l=tf(c),y=ur(c,l),a=0,v=i.interpolate||wi,u="__p += '",p=cv((i.escape||wi).source+"|"+v.source+"|"+(v===ku?bo:wi).source+"|"+(i.evaluate||wi).source+"|$","g"),w="//# sourceURL="+("sourceURL"in i?i.sourceURL:"lodash.templateSources["+ ++ks+"]")+"\n";if(t.replace(p,function(n,i,r,f,e,s){return r||(r=f),u+=t.slice(a,s).replace(fs,ce),i&&(h=!0,u+="' +\n__e("+i+") +\n'"),e&&(o=!0,u+="';\n"+e+";\n__p += '"),r&&(u+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),a=s+n.length,n}),u+="';\n",e=i.variable,e||(u="with (obj) {\n"+u+"\n}\n"),u=(o?u.replace(ro,""):u).replace(uo,"$1").replace(fo,"$1;"),u="function("+(e||"obj")+") {\n"+(e?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(h?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}",f=db(function(){return Function(l,w+"return "+u).apply(n,y)}),f.source=u,tv(f))throw f;return f}function bft(n){return br(n).toLowerCase()}function kft(n){return br(n).toUpperCase()}function dft(t,i,r){if(t=br(t),!t)return t;if(r||i===n)return t.replace(wr,"");if(i+="",!i)return t;var u=s(t),f=s(i);return u.slice(eu(u,f),ou(u,f)+1).join("")}function gft(t,i,r){if(t=br(t),!t)return t;if(r||i===n)return t.replace(po,"");if(i+="",!i)return t;var u=s(t);return u.slice(0,ou(u,s(i))+1).join("")}function net(t,i,r){if(t=br(t),!t)return t;if(r||i===n)return t.replace(yo,"");if(i+="",!i)return t;var u=s(t);return u.slice(eu(u,s(i))).join("")}function tet(t,i){var h=ve,e=ye,r,c,o,u,f,v,y,l,a;if(dr(i)&&(r="separator"in i?i.separator:r,h="length"in i?ki(i.length):h,e="omission"in i?br(i.omission):e),t=br(t),c=t.length,di.test(t)&&(o=s(t),c=o.length),h>=c)return t;if(u=h-ht(e),1>u)return e;if(f=o?o.slice(0,u).join(""):t.slice(0,u),r===n)return f+e;if(o&&(u+=f.length-u),aw(r)){if(t.slice(u).search(r)){for(y=f,r.global||(r=cv(r.source,br(du.exec(r))+"g")),r.lastIndex=0;v=r.exec(y);)l=v.index;f=f.slice(0,l===n?u:l)}}else t.indexOf(r,u)!=u&&(a=f.lastIndexOf(r),a>-1&&(f=f.slice(0,a)));return f+e}function iet(n){return n=br(n),n&&eo.test(n)?n.replace(wu,le):n}function nb(t,i,r){return t=br(t),i=r?n:i,i===n&&(i=ws.test(t)?ps:ys),t.match(i)||[]}function ret(n){var t=n?n.length:0,i=ii();return n=t?r(n,function(n){if("function"!=typeof n[1])throw new cf(e);return[i(n[0]),n[1]]}):[],ti(function(i){for(var f,r=-1;++r<t;)if(f=n[r],u(f[0],this,i))return u(f[1],this,i)})}function uet(n){return gk(af(n,!0))}function ev(n){return function(){return n}}function pf(n){return n}function ov(n){return ey("function"==typeof n?n:af(n,!0))}function fet(n){return hy(af(n,!0))}function eet(n,t){return cy(n,af(t,!0))}function sv(n,t,i){var u=tf(t),r=kc(t,u),e,o;return null!=i||dr(t)&&(r.length||!u.length)||(i=t,t=n,n=this,r=kc(t,tf(t))),e=dr(i)&&"chain"in i?i.chain:!0,o=kf(n),f(r,function(i){var r=t[i];n[i]=r;o&&(n.prototype[i]=function(){var i=this.__chain__,t,u;return e||i?(t=n(this.__wrapped__),u=t.__actions__=rf(this.__actions__),u.push({func:r,args:arguments,thisArg:n}),t.__chain__=i,t):r.apply(n,tt([this.value()],arguments))})}),n}function oet(){return c._===this&&(c._=fot),this}function hv(){}function set(n){return n=ki(n),function(){return arguments[n]}}function tb(n){return hs(n)?sa(n):hd(n)}function het(t){return function(i){return null==t?n:dc(t,i)}}function cet(n,t){var i,r,u;if(n=ki(n),1>n||n>b)return[];for(i=h,r=of(n,h),t=es(t),n-=h,u=ir(r,t);++i<n;)t(i);return u}function aet(n){return ei(n)?r(n,String):vp(n)}function vet(n){var t=++rot;return br(n)+t}function yet(t,i){var r;return t===n&&i===n?0:(t!==n&&(r=t),i!==n&&(r=r===n?i:r+i),r)}function pet(t){return t&&t.length?ri(t,pf,nv):n}function wet(t,i){return t&&t.length?ri(t,ii(i),nv):n}function bet(n){return ib(n)/(n?n.length:0)}function ket(t){return t&&t.length?ri(t,pf,rv):n}function det(t,i){return t&&t.length?ri(t,ii(i),rv):n}function get(t,i){var r;return t===n&&i===n?0:(t!==n&&(r=t),i!==n&&(r=r===n?i:r-i),r)}function ib(n){return n&&n.length?uu(n,pf):0}function not(n,t){return n&&n.length?uu(n,ii(t)):0}var gb=function(n){return Object.prototype.toString.call(n).match(/^\[object\s(.*)\]$/)[1]},bv=function(n){if(n===undefined)return"undefined";if(n===null)return"null";var t=typeof n;return(t==="object"&&(t=gb(n).toLowerCase()),t==="number")?n.toString().indexOf(".")>0?"float":"integer":t},nk=function(n,t){var i;if(n===t)return!0;for(i in n)if(t.hasOwnProperty(i)){if(!vc(n[i],t[i]))return!1}else return!1;for(i in t)if(!n.hasOwnProperty(i))return!1;return!0},tk=function(n,t){if(n===t)return!0;if(n.length!==t.length)return!1;for(var i=0;i<n.length;i++)if(!vc(n[i],t[i]))return!1;return!0},sh={},vc,kv;sh.array=tk;sh.object=nk;sh.date=function(n,t){return n.getTime()===t.getTime()};sh.regexp=function(n,t){return n.toString()===t.toString()};vc=function(n,t){if(n!==t){var i=bv(n),r=bv(t);return i===r?sh.hasOwnProperty(i)?sh[i](n,t):n==t:!1}return!0};kv=function(n){return jQuery(n).each(function(){var t=jQuery(n),r,i;t.one("TransitionEnd webkitTransitionEnd transitionend oTransitionEnd",function(){t.removeClass("is-transitioning")});r=["transition-duration","-moz-transition-duration","-webkit-transition-duration","-o-transition-duration"];i=0;jQuery.each(r,function(n,r){i||(i=parseFloat(t.css(r)))});0!=i&&(t.addClass("is-transitioning"),t[0].offsetWidth)})};ot=ot?g.defaults({},ot,g.pick(c,bs)):c;var tot=ot.Date,iot=ot.Error,wh=ot.Math,cv=ot.RegExp,cf=ot.TypeError,cl=ot.Array.prototype,bh=ot.Object.prototype,ds=ot.Function.prototype.toString,gr=bh.hasOwnProperty,rot=0,uot=ds.call(Object),ff=bh.toString,fot=c._,rb=cv("^"+ds.call(gr).replace(pr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ub=bf?ot.Buffer:n,fb=ot.Reflect,ll=ot.Symbol,al=ot.Uint8Array,oc=ot.clearTimeout,eb=fb?fb.enumerate:n,vl=Object.getPrototypeOf,eot=Object.getOwnPropertySymbols,eh="symbol"==typeof(eh=ll&&ll.iterator)?eh:n,oot=Object.create,lv=bh.propertyIsEnumerable,yl=ot.setTimeout,pl=cl.splice,wl=wh.ceil,bl=wh.floor,sot=ot.isFinite,hot=cl.join,cot=Object.keys,nf=wh.max,of=wh.min,lot=ot.parseInt,ob=wh.random,aot=cl.reverse,rs=ol(ot,"Map"),oh=ol(ot,"Set"),kh=ol(ot,"WeakMap"),sc=ol(Object,"create"),kl=kh&&new kh,sb=!lv.call({valueOf:1},"valueOf"),hc={},vot=rs?ds.call(rs):"",yot=oh?ds.call(oh):"",pot=kh?ds.call(kh):"",dl=ll?ll.prototype:n,cc=dl?dl.valueOf:n,hb=dl?dl.toString:n;ni.templateSettings={escape:so,evaluate:ho,interpolate:ku,variable:"",imports:{_:ni}};var ls=ip(vf),av=ip(ua,!0),vv=rp(),cb=rp(!0);eb&&!lv.call({valueOf:1},"valueOf")&&(oy=function(n){return cu(eb(n))});var lb=kl?function(n,t){return kl.set(n,t),n}:pf,wot=oh&&2===new oh([1,2]).size?function(n){return new oh(n)}:hv,yv=kl?function(n){return kl.get(n)}:hv,bot=sa("length"),kot=eot||function(){return[]};(rs&&yf(new rs)!=k||oh&&yf(new oh)!=d||kh&&yf(new kh)!=dt)&&(yf=function(n){var t=ff.call(n),i=t==v?n.constructor:null,r="function"==typeof i?ds.call(i):"";if(r)switch(r){case vot:return k;case yot:return d;case pot:return dt}return t});var ab=function(){var n=0,t=0;return function(i,r){var u=lc(),f=we-(u-t);if(t=u,f>0){if(++n>=pe)return i}else n=0;return lb(i,r)}}(),dot=ti(function(n,t){return ei(n)||(n=null==n?[]:[Object(n)]),t=kr(t,1),te(n,t)}),got=ti(function(n,t){return nu(n)?nh(n,kr(t,1,!0)):[]}),nst=ti(function(t,i){var r=uf(i);return nu(r)&&(r=n),nu(t)?nh(t,kr(i,1,!0),ii(r)):[]}),tst=ti(function(t,i){var r=uf(i);return nu(r)&&(r=n),nu(t)?nh(t,kr(i,1,!0),n,r):[]}),ist=ti(function(n){var t=r(n,ra);return t.length&&t[0]===n[0]?ea(t):[]}),rst=ti(function(t){var u=uf(t),i=r(t,ra);return u===uf(i)?u=n:i.pop(),i.length&&i[0]===t[0]?ea(i,ii(u)):[]}),ust=ti(function(t){var u=uf(t),i=r(t,ra);return u===uf(i)?u=n:i.pop(),i.length&&i[0]===t[0]?ea(i,n,u):[]}),fst=ti(kp),est=ti(function(n,t){t=r(kr(t,1),String);var i=ia(n,t);return yy(n,t.sort(su)),i}),ost=ti(function(n){return th(kr(n,1,!0))}),sst=ti(function(t){var i=uf(t);return nu(i)&&(i=n),th(kr(t,1,!0),ii(i))}),hst=ti(function(t){var i=uf(t);return nu(i)&&(i=n),th(kr(t,1,!0),n,i)}),cst=ti(function(n,t){return nu(n)?nh(n,t):[]}),lst=ti(function(n){return aa(nt(n,nu))}),ast=ti(function(t){var i=uf(t);return nu(i)&&(i=n),aa(nt(t,nu),ii(i))}),vst=ti(function(t){var i=uf(t);return nu(i)&&(i=n),aa(nt(t,nu),n,i)}),yst=ti(da),pst=ti(function(t){var r=t.length,i=r>1?t[r-1]:n;return i="function"==typeof i?(t.pop(),i):n,dp(t,i)}),wst=ti(function(t){t=kr(t,1);var r=t.length,u=r?t[0]:0,i=this.__wrapped__,f=function(n){return ia(n,t)};return!(r>1||this.__actions__.length)&&i instanceof bi&&y(u)?(i=i.slice(u,+u+(r?1:0)),i.__actions__.push({func:sl,args:[f],thisArg:n}),new sf(i,this.__chain__).thru(function(t){return r&&!t.length&&t.push(n),t})):this.thru(f)}),bst=rl(function(n,t,i){gr.call(n,i)?++n[i]:n[i]=1}),kst=rl(function(n,t,i){gr.call(n,i)?n[i].push(t):n[i]=[t]}),dst=ti(function(t,i,r){var e=-1,o="function"==typeof i,s=hs(i),f=ef(t)?Array(t.length):[];return ls(t,function(t){var h=o?i:s&&null!=t?t[i]:n;f[++e]=h?u(h,t,r):dh(t,i,r)}),f}),gst=rl(function(n,t,i){n[i]=t}),nht=rl(function(n,t,i){n[i?0:1].push(t)},function(){return[[],[]]}),tht=ti(function(n,t){if(null==n)return[];var i=t.length;return i>1&&wf(n,t[0],t[1])?t=[]:i>2&&wf(t[0],t[1],t[2])&&(t.length=1),ly(n,kr(t,1),[])}),lc=tot.now,pv=ti(function(n,t,i){var r=o,u;return i.length&&(u=p(i,yh(pv)),r|=a),ss(n,r,t,i,u)}),vb=ti(function(n,t,i){var r=o|ut,u;return i.length&&(u=p(i,yh(vb)),r|=a),ss(t,r,n,i,u)}),iht=ti(function(n,t){return uy(n,1,t)}),rht=ti(function(n,t,i){return uy(n,gu(t)||0,i)}),uht=ti(function(n,t){t=r(kr(t,1),ii());var i=t.length;return ti(function(r){for(var f=-1,e=of(r.length,i);++f<e;)r[f]=t[f].call(this,r[f]);return u(n,this,r)})}),wv=ti(function(t,i){var r=p(i,yh(wv));return ss(t,a,n,i,r)}),yb=ti(function(t,i){var r=p(i,yh(yb));return ss(t,vt,n,i,r)}),fht=ti(function(t,i){return ss(t,hi,n,n,n,kr(i,1))}),ei=Array.isArray,pb=ub?function(n){return n instanceof ub}:ev(!1),eht=ah(function(n,t){if(sb||ic(t)||ef(t))return void nc(t,tf(t),n);for(var i in t)gr.call(t,i)&&hh(n,i,t[i])}),wb=ah(function(n,t){if(sb||ic(t)||ef(t))return void nc(t,hf(t),n);for(var i in t)hh(n,i,t[i])}),ac=ah(function(n,t,i,r){va(t,hf(t),n,r)}),oht=ah(function(n,t,i,r){va(t,tf(t),n,r)}),sht=ti(function(n,t){return ia(n,kr(t,1))}),hht=ti(function(t){return t.push(n,na),u(ac,n,t)}),cht=ti(function(t){return t.push(n,ap),u(bb,n,t)}),lht=ep(function(n,t,i){n[t]=i},ev(pf)),aht=ep(function(n,t,i){gr.call(n,t)?n[t].push(i):n[t]=[i]},ii),vht=ti(dh),yht=ah(function(n,t,i){gc(n,t,i)}),bb=ah(function(n,t,i,r){gc(n,t,i,r)}),pht=ti(function(n,t){return null==n?{}:(t=r(kr(t,1),String),ay(n,nh(hf(n),t)))}),wht=ti(function(n,t){return null==n?{}:ay(n,kr(t,1))}),bht=vh(function(n,t,i){return t=t.toLowerCase(),n+(i?fv(t):t)}),kht=vh(function(n,t,i){return n+(i?"-":"")+t.toLowerCase()}),dht=vh(function(n,t,i){return n+(i?" ":"")+t.toLowerCase()}),ght=up("toLowerCase"),kb=up("toUpperCase"),nct=vh(function(n,t,i){return n+(i?"_":"")+t.toLowerCase()}),tct=vh(function(n,t,i){return n+(i?" ":"")+fv(t)}),ict=vh(function(n,t,i){return n+(i?" ":"")+t.toUpperCase()}),db=ti(function(t,i){try{return u(t,n,i)}catch(r){return tv(r)?r:new iot(r)}}),rct=ti(function(n,t){return f(kr(t,1),function(t){n[t]=pv(n[t],n)}),n}),uct=fp(),fct=fp(!0),ect=ti(function(n,t){return function(i){return dh(i,n,t)}}),oct=ti(function(n,t){return function(i){return dh(n,i,t)}}),sct=ya(r),hct=ya(iu),cct=ya(tr),lct=op(),act=op(!0),vct=pa("ceil"),yct=pa("floor"),pct=pa("round");return ni.prototype=yc.prototype,ni.prototype.constructor=ni,sf.prototype=lh(yc.prototype),sf.prototype.constructor=sf,bi.prototype=lh(yc.prototype),bi.prototype.constructor=bi,gl.prototype=sc?sc(null):bh,as.prototype.clear=sk,as.prototype["delete"]=hk,as.prototype.get=ck,as.prototype.has=lk,as.prototype.set=ak,pc.prototype.push=vk,lf.prototype.clear=yk,lf.prototype["delete"]=pk,lf.prototype.get=wk,lf.prototype.has=bk,lf.prototype.set=kk,ga.Cache=as,ni.equal=vc,ni.prepareTransition=kv,ni.after=hit,ni.ary=uw,ni.assign=eht,ni.assignIn=wb,ni.assignInWith=ac,ni.assignWith=oht,ni.at=sht,ni.before=fw,ni.bind=pv,ni.bindAll=rct,ni.bindKey=vb,ni.castArray=bit,ni.chain=gp,ni.chunk=lg,ni.compact=ag,ni.concat=dot,ni.cond=ret,ni.conforms=uet,ni.constant=ev,ni.countBy=bst,ni.create=iut,ni.curry=ew,ni.curryRight=ow,ni.debounce=sw,ni.defaults=hht,ni.defaultsDeep=cht,ni.defer=iht,ni.delay=rht,ni.difference=got,ni.differenceBy=nst,ni.differenceWith=tst,ni.drop=pp,ni.dropRight=wp,ni.dropRightWhile=vg,ni.dropWhile=yg,ni.fill=pg,ni.filter=btt,ni.flatMap=gtt,ni.flatten=kg,ni.flattenDeep=dg,ni.flattenDepth=gg,ni.flip=cit,ni.flow=uct,ni.flowRight=fct,ni.fromPairs=nn,ni.functions=hut,ni.functionsIn=cut,ni.groupBy=kst,ni.initial=rn,ni.intersection=ist,ni.intersectionBy=rst,ni.intersectionWith=ust,ni.invert=lht,ni.invertBy=aht,ni.invokeMap=dst,ni.iteratee=ov,ni.keyBy=gst,ni.keys=tf,ni.keysIn=hf,ni.map=iw,ni.mapKeys=lut,ni.mapValues=aut,ni.matches=fet,ni.matchesProperty=eet,ni.memoize=ga,ni.merge=yht,ni.mergeWith=bb,ni.method=ect,ni.methodOf=oct,ni.mixin=sv,ni.negate=lit,ni.nthArg=set,ni.omit=pht,ni.omitBy=vut,ni.once=ait,ni.orderBy=tit,ni.over=sct,ni.overArgs=uht,ni.overEvery=hct,ni.overSome=cct,ni.partial=wv,ni.partialRight=yb,ni.partition=nht,ni.pick=wht,ni.pickBy=yut,ni.property=tb,ni.propertyOf=het,ni.pull=fst,ni.pullAll=kp,ni.pullAllBy=en,ni.pullAllWith=on,ni.pullAt=est,ni.range=lct,ni.rangeRight=act,ni.rearg=fht,ni.reject=uit,ni.remove=sn,ni.rest=ti,ni.reverse=ka,ni.sampleSize=rw,ni.set=wut,ni.setWith=but,ni.shuffle=eit,ni.slice=hn,ni.sortBy=tht,ni.sortedUniq=wn,ni.sortedUniqBy=bn,ni.split=yft,ni.spread=vit,ni.tail=kn,ni.take=dn,ni.takeRight=gn,ni.takeRightWhile=ntt,ni.takeWhile=ttt,ni.tap=ott,ni.throttle=yit,ni.thru=sl,ni.toArray=uv,ni.toPairs=kw,ni.toPairsIn=kut,ni.toPath=aet,ni.toPlainObject=pw,ni.transform=dut,ni.unary=pit,ni.union=ost,ni.unionBy=sst,ni.unionWith=hst,ni.uniq=itt,ni.uniqBy=rtt,ni.uniqWith=utt,ni.unset=gut,ni.unzip=da,ni.unzipWith=dp,ni.update=nft,ni.updateWith=tft,ni.values=hl,ni.valuesIn=ift,ni.without=cst,ni.words=nb,ni.wrap=wit,ni.xor=lst,ni.xorBy=ast,ni.xorWith=vst,ni.zip=yst,ni.zipObject=ftt,ni.zipObjectDeep=ett,ni.zipWith=pst,ni.extend=wb,ni.extendWith=ac,sv(ni,ni),ni.add=yet,ni.attempt=db,ni.camelCase=bht,ni.capitalize=fv,ni.ceil=vct,ni.clamp=rft,ni.clone=kit,ni.cloneDeep=git,ni.cloneDeepWith=nrt,ni.cloneWith=dit,ni.deburr=dw,ni.endsWith=eft,ni.eq=cs,ni.escape=oft,ni.escapeRegExp=sft,ni.every=wtt,ni.find=ktt,ni.findIndex=wg,ni.findKey=rut,ni.findLast=dtt,ni.findLastIndex=bg,ni.findLastKey=uut,ni.floor=yct,ni.forEach=nw,ni.forEachRight=tw,ni.forIn=fut,ni.forInRight=eut,ni.forOwn=out,ni.forOwnRight=sut,ni.get=ec,ni.gt=nv,ni.gte=trt,ni.has=ww,ni.hasIn=bw,ni.head=bp,ni.identity=pf,ni.includes=nit,ni.indexOf=tn,ni.inRange=uft,ni.invoke=vht,ni.isArguments=uh,ni.isArray=ei,ni.isArrayBuffer=irt,ni.isArrayLike=ef,ni.isArrayLikeObject=nu,ni.isBoolean=rrt,ni.isBuffer=pb,ni.isDate=urt,ni.isElement=frt,ni.isEmpty=ert,ni.isEqual=ort,ni.isEqualWith=srt,ni.isError=tv,ni.isFinite=hrt,ni.isFunction=kf,ni.isInteger=hw,ni.isLength=uc,ni.isMap=crt,ni.isMatch=lrt,ni.isMatchWith=art,ni.isNaN=vrt,ni.isNative=cw,ni.isNil=prt,ni.isNull=yrt,ni.isNumber=lw,ni.isObject=dr,ni.isObjectLike=tu,ni.isPlainObject=iv,ni.isRegExp=aw,ni.isSafeInteger=wrt,ni.isSet=brt,ni.isString=fh,ni.isSymbol=vw,ni.isTypedArray=fc,ni.isUndefined=krt,ni.isWeakMap=drt,ni.isWeakSet=grt,ni.join=un,ni.kebabCase=kht,ni.last=uf,ni.lastIndexOf=fn,ni.lowerCase=dht,ni.lowerFirst=ght,ni.lt=rv,ni.lte=nut,ni.max=pet,ni.maxBy=wet,ni.mean=bet,ni.min=ket,ni.minBy=det,ni.noConflict=oet,ni.noop=hv,ni.now=lc,ni.pad=hft,ni.padEnd=cft,ni.padStart=lft,ni.parseInt=aft,ni.random=fft,ni.reduce=iit,ni.reduceRight=rit,ni.repeat=gw,ni.replace=vft,ni.result=put,ni.round=pct,ni.runInContext=lu,ni.sample=fit,ni.size=oit,ni.snakeCase=nct,ni.some=sit,ni.sortedIndex=cn,ni.sortedIndexBy=ln,ni.sortedIndexOf=an,ni.sortedLastIndex=vn,ni.sortedLastIndexBy=yn,ni.sortedLastIndexOf=pn,ni.startCase=tct,ni.startsWith=pft,ni.subtract=get,ni.sum=ib,ni.sumBy=not,ni.template=wft,ni.times=cet,ni.toInteger=ki,ni.toLength=yw,ni.toLower=bft,ni.toNumber=gu,ni.toSafeInteger=tut,ni.toString=br,ni.toUpper=kft,ni.trim=dft,ni.trimEnd=gft,ni.trimStart=net,ni.truncate=tet,ni.unescape=iet,ni.uniqueId=vet,ni.upperCase=ict,ni.upperFirst=kb,ni.each=nw,ni.eachRight=tw,ni.first=bp,sv(ni,function(){var n={};return vf(ni,function(t,i){gr.call(ni.prototype,i)||(n[i]=t)}),n}(),{chain:!1}),ni.VERSION=ae,f(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){ni[n].placeholder=ni}),f(["drop","take"],function(t,i){bi.prototype[t]=function(r){var f=this.__filtered__,u;return f&&!i?new bi(this):(r=r===n?1:nf(ki(r),0),u=this.clone(),f?u.__takeCount__=of(r,u.__takeCount__):u.__views__.push({size:of(r,h),type:t+(u.__dir__<0?"Right":"")}),u)};bi.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),f(["filter","map","takeWhile"],function(n,t){var i=t+1,r=i==yu||i==ke;bi.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:ii(n,3),type:i}),t.__filtered__=t.__filtered__||r,t}}),f(["head","last"],function(n,t){var i="take"+(t?"Right":"");bi.prototype[n]=function(){return this[i](1).value()[0]}}),f(["initial","tail"],function(n,t){var i="drop"+(t?"":"Right");bi.prototype[n]=function(){return this.__filtered__?new bi(this):this[i](1)}}),bi.prototype.compact=function(){return this.filter(pf)},bi.prototype.find=function(n){return this.filter(n).head()},bi.prototype.findLast=function(n){return this.reverse().find(n)},bi.prototype.invokeMap=ti(function(n,t){return"function"==typeof n?new bi(this):this.map(function(i){return dh(i,n,t)})}),bi.prototype.reject=function(n){return n=ii(n,3),this.filter(function(t){return!n(t)})},bi.prototype.slice=function(t,i){t=ki(t);var r=this;return r.__filtered__&&(t>0||0>i)?new bi(r):(0>t?r=r.takeRight(-t):t&&(r=r.drop(t)),i!==n&&(i=ki(i),r=0>i?r.dropRight(-i):r.take(i-t)),r)},bi.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},bi.prototype.toArray=function(){return this.take(h)},vf(bi.prototype,function(t,i){var e=/^(?:filter|find|map|reject)|While$/.test(i),r=/^(?:head|last)$/.test(i),u=ni[r?"take"+("last"==i?"Right":""):i],f=r||/^find/.test(i);u&&(ni.prototype[i]=function(){var o=this.__wrapped__,s=r?[1]:arguments,h=o instanceof bi,a=s[0],c=h||ei(o),v=function(n){var t=u.apply(ni,tt([n],s));return r&&l?t[0]:t},i;c&&e&&"function"==typeof a&&1!=a.length&&(h=c=!1);var l=this.__chain__,w=!!this.__actions__.length,y=f&&!l,p=h&&!w;return!f&&c?(o=p?o:new bi(this),i=t.apply(o,s),i.__actions__.push({func:sl,args:[v],thisArg:n}),new sf(i,l)):y&&p?t.apply(this,s):(i=this.thru(v),y?r?i.value()[0]:i.value():i)})}),f(["pop","push","shift","sort","splice","unshift"],function(n){var t=cl[n],i=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);ni.prototype[n]=function(){var n=arguments;return r&&!this.__chain__?t.apply(this.value(),n):this[i](function(i){return t.apply(i,n)})}}),vf(bi.prototype,function(n,t){var i=ni[t],r,u;i&&(r=i.name+"",u=hc[r]||(hc[r]=[]),u.push({name:t,func:i}))}),hc[ul(n,ut).name]=[{name:"wrapper",func:n}],bi.prototype.clone=ik,bi.prototype.reverse=rk,bi.prototype.value=uk,ni.prototype.at=wst,ni.prototype.chain=stt,ni.prototype.commit=htt,ni.prototype.flatMap=ctt,ni.prototype.next=ltt,ni.prototype.plant=vtt,ni.prototype.reverse=ytt,ni.prototype.toJSON=ni.prototype.valueOf=ni.prototype.value=ptt,eh&&(ni.prototype[eh]=att),ni}var n,ae="4.6.1",ct=200,e="Expected a function",lt="__lodash_hash_undefined__",si="__lodash_placeholder__",o=1,ut=2,au=4,l=8,at=16,a=32,vt=64,w=128,hi=256,vu=512,ci=1,ft=2,ve=30,ye="...",pe=150,we=16,yu=1,be=2,ke=3,li=1/0,b=9007199254740991,de=17976931348623157e292,ge=NaN,h=4294967295,no=h-1,to=h>>>1,et="[object Arguments]",ai="[object Array]",yt="[object Boolean]",pt="[object Date]",vi="[object Error]",yi="[object Function]",pu="[object GeneratorFunction]",k="[object Map]",wt="[object Number]",v="[object Object]",bt="[object RegExp]",d="[object Set]",kt="[object String]",pi="[object Symbol]",dt="[object WeakMap]",io="[object WeakSet]",gt="[object ArrayBuffer]",er="[object Float32Array]",or="[object Float64Array]",sr="[object Int8Array]",hr="[object Int16Array]",cr="[object Int32Array]",lr="[object Uint8Array]",ar="[object Uint8ClampedArray]",vr="[object Uint16Array]",yr="[object Uint32Array]",ro=/\b__p \+= '';/g,uo=/\b(__p \+=) '' \+/g,fo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wu=/&(?:amp|lt|gt|quot|#39|#96);/g,bu=/[&<>"'`]/g,eo=RegExp(wu.source),oo=RegExp(bu.source),so=/<%-([\s\S]+?)%>/g,ho=/<%([\s\S]+?)%>/g,ku=/<%=([\s\S]+?)%>/g,co=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lo=/^\w*$/,ao=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,pr=/[\\^$.*+?()[\]{}|]/g,vo=RegExp(pr.source),wr=/^\s+|\s+$/g,yo=/^\s+/,po=/\s+$/,wo=/\\(\\)?/g,bo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,du=/\w*$/,ko=/^0x/i,go=/^[-+]0x[0-9a-f]+$/i,ns=/^0b[01]+$/i,ts=/^\[object .+?Constructor\]$/,is=/^0o[0-7]+$/i,rs=/^(?:0|[1-9]\d*)$/,us=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,wi=/($^)/,fs=/['\n\r\u2028\u2029\\]/g,bi="\\ud800-\\udfff",gu="\\u0300-\\u036f\\ufe20-\\ufe23",nf="\\u20d0-\\u20f0",tf="\\u2700-\\u27bf",rf="a-z\\xdf-\\xf6\\xf8-\\xff",uf="A-Z\\xc0-\\xd6\\xd8-\\xde",ff="\\ufe0e\\ufe0f",ef="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2018\\u2019\\u201c\\u201d \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",es="["+bi+"]",of="["+ef+"]",ki="["+gu+nf+"]",sf="\\d+",os="["+tf+"]",hf="["+rf+"]",cf="[^"+bi+ef+sf+tf+rf+uf+"]",br="\\ud83c[\\udffb-\\udfff]",ss="(?:"+ki+"|"+br+")",lf="[^"+bi+"]",kr="(?:\\ud83c[\\udde6-\\uddff]){2}",dr="[\\ud800-\\udbff][\\udc00-\\udfff]",ot="["+uf+"]",af="\\u200d",vf="(?:"+hf+"|"+cf+")",hs="(?:"+ot+"|"+cf+")",yf=ss+"?",pf="["+ff+"]?",cs="(?:"+af+"(?:"+[lf,kr,dr].join("|")+")"+pf+yf+")*",wf=pf+yf+cs,ls="(?:"+[os,kr,dr].join("|")+")"+wf,as="(?:"+[lf+ki+"?",ki,kr,dr,es].join("|")+")",vs=RegExp(ki,"g"),gr=RegExp(br+"(?="+br+")|"+as+wf,"g"),di=RegExp("["+af+bi+gu+nf+ff+"]"),ys=/[a-zA-Z0-9]+/g,ps=RegExp([ot+"?"+hf+"+(?="+[of,ot,"$"].join("|")+")",hs+"+(?="+[of,ot+vf,"$"].join("|")+")",ot+"?"+vf+"+",ot+"+",sf,ls].join("|"),"g"),ws=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bs=["Array","Buffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ks=-1,i={},t;i[er]=i[or]=i[sr]=i[hr]=i[cr]=i[lr]=i[ar]=i[vr]=i[yr]=!0;i[et]=i[ai]=i[gt]=i[yt]=i[pt]=i[vi]=i[yi]=i[k]=i[wt]=i[v]=i[bt]=i[d]=i[kt]=i[dt]=!1;t={};t[et]=t[ai]=t[gt]=t[yt]=t[pt]=t[er]=t[or]=t[sr]=t[hr]=t[cr]=t[k]=t[wt]=t[v]=t[bt]=t[d]=t[kt]=t[pi]=t[lr]=t[ar]=t[vr]=t[yr]=!0;t[vi]=t[yi]=t[dt]=!1;var ds={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},gs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},nh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},ni={"function":!0,object:!0},th={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ih=parseFloat,rh=parseInt,ti=ni[typeof exports]&&exports&&!exports.nodeType?exports:n,ii=ni[typeof module]&&module&&!module.nodeType?module:n,bf=ii&&ii.exports===ti?ti:n,uh=ei(ti&&ii&&"object"==typeof global&&global),kf=ei(ni[typeof self]&&self),nu=ei(ni[typeof window]&&window),tu=ei(ni[typeof this]&&this),c=uh||nu!==(tu&&tu.window)&&nu||kf||tu||Function("return this")(),g=lu();(nu||kf||{})._=g;"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return g}):ti&&ii?(bf&&((ii.exports=g)._=g),ti._=g):c._=g}.call(this),function(){(function(){var n=[].slice;(function(n,t){return typeof n.define=="function"&&n.define.amd?n.define([],t):typeof module=="object"&&module.exports?module.exports=t():n.Twine=t()})(this,function(){var t,f,b,k,et,o,ot,i,st,c,d,g,ht,s,ct,nt,l,a,tt,v,lt,at,vt,it,y,yt,rt,ut,pt,p,h,wt,r,e,w,bt,ft,kt,dt,u;for(t={},t.shouldDiscardEvent={},i={},h={},y=0,r=null,lt=/^[a-z]\w*(\.[a-z]\w*|\[\d+\])*$/i,p=!1,e=null,o=null,t.getAttribute=function(n,t){return n.getAttribute("data-"+t)||n.getAttribute(t)},t.reset=function(n,t){var f,u,s,h,o,c;t==null&&(t=document.documentElement);for(s in i)if(f=(c=i[s])!=null?c.bindings:void 0)for(u=0,h=f.length;u<h;u++)o=f[u],o.teardown&&o.teardown();return i={},r=n,e=t,e.bindingId=y=1,this},t.bind=function(n,i){return n==null&&(n=e),i==null&&(i=t.context(n)),k(i,n,ht(n),!0)},t.afterBound=function(n){return o?o.push(n):n()},k=function(n,i,u,f){var ri,st,ht,h,pt,wt,bt,p,kt,b,e,d,g,nt,l,tt,dt,gt,ni,ti,it,rt,ut,lt,at,ft,vt,yt,a,ii;if(o=[],e=null,i.bindingId&&t.unbind(i),kt=t.getAttribute(i,"define-array")){ut=ot(i,n,kt);u==null&&(u={});for(nt in u)ii=u[nt],ut.hasOwnProperty(nt)||(ut[nt]=ii);u=ut;e=c(i);e.indexes=u}for(h=null,lt=i.attributes,d=0,dt=lt.length;d<dt;d++)(st=lt[d],a=st.name,ct(a)&&(a=a.slice(5)),p=t.bindingTypes[a],p)&&(h==null&&(h=[]),b=st.value,h.push([a,p,b]));if(h)for(e==null&&(e=c(i)),e.bindings==null&&(e.bindings=[]),e.indexes==null&&(e.indexes=u),at=h.sort(et),g=0,gt=at.length;g<gt;g++)ft=at[g],ri=ft[0],p=ft[1],b=ft[2],ht=p(i,n,b,e),ht&&e.bindings.push(ht);for((rt=t.getAttribute(i,"context"))&&(l=v(i,rt),l[0]==="$root"&&(n=r,l=l.slice(1)),n=s(n,l)||w(n,l,{})),(e||rt||f)&&(e==null&&(e=c(i)),e.childContext=n,u!=null&&e.indexes==null&&(e.indexes=u)),wt=o,vt=i.children||[],tt=0,ni=vt.length;tt<ni;tt++)bt=vt[tt],k(n,bt,rt!=null?null:u);for(t.count=y,yt=wt||[],it=0,ti=yt.length;it<ti;it++)pt=yt[it],pt();return o=null,t},c=function(n){var t;return n.bindingId==null&&(n.bindingId=++y),i[t=n.bindingId]!=null?i[t]:i[t]={}},t.refresh=function(){if(!p)return p=!0,setTimeout(t.refreshImmediately,0)},pt=function(n){var t,u,i,r;if(n.bindings)for(r=n.bindings,t=0,u=r.length;t<u;t++)i=r[t],i.refresh!=null&&i.refresh()},t.refreshImmediately=function(){var n,t;p=!1;for(t in i)n=i[t],pt(n)},t.register=function(n,t){if(h[n])throw new Error("Twine error: '"+n+"' is already registered with Twine");else return h[n]=t},t.change=function(n,t){var i;return t==null&&(t=!1),i=document.createEvent("HTMLEvents"),i.initEvent("change",t,!0),n.dispatchEvent(i)},t.unbind=function(n){var f,h,e,r,u,c,l,o,a,s;if(e=n.bindingId){if(f=(a=i[e])!=null?a.bindings:void 0)for(r=0,c=f.length;r<c;r++)o=f[r],o.teardown&&o.teardown();delete i[e];delete n.bindingId}for(s=n.children||[],u=0,l=s.length;u<l;u++)h=s[u],t.unbind(h);return this},t.context=function(n){return g(n,!1)},t.childContext=function(n){return g(n,!0)},g=function(n,t){for(var u,f,o;n;){if(n===e)return r;if(t||(n=n.parentNode),!n)return console.warn("Unable to find context; please check that the node is attached to the DOM that Twine has bound, or that bindings have been initiated on this node's DOM"),null;if((f=n.bindingId)&&(u=(o=i[f])!=null?o.childContext:void 0))return u;t&&(n=n.parentNode)}},ht=function(n){for(var t,r,u=null;n;){if(t=n.bindingId)return(r=i[t])!=null?r.indexes:void 0;n=n.parentNode}},t.contextKey=function(n,t){for(var o,s,h,f=[],u=function(n){var i,r;for(i in n)if(r=n[i],t===r){f.unshift(i);break}return t=n};n&&n!==e&&(n=n.parentNode);)(s=n.bindingId)&&(o=(h=i[s])!=null?h.childContext:void 0)&&u(o);return n===e&&u(r),f.join(".")},dt=function(n){var t,i;return t=n.nodeName.toLowerCase(),t==="input"||t==="textarea"||t==="select"?(i=n.getAttribute("type"))==="checkbox"||i==="radio"?"checked":"value":"textContent"},v=function(n,t){var f,r,e,i,s,o,u;for(i=[],o=t.split("."),r=e=0,s=o.length;e<s;r=++e)if(t=o[r],(u=t.indexOf("["))!==-1)for(r===0?i.push.apply(i,tt(t.substr(0,u),n)):i.push(t.substr(0,u)),t=t.substr(u);(f=t.indexOf("]"))!==-1;)i.push(parseInt(t.substr(1,f),10)),t=t.substr(f+1);else r===0?i.push.apply(i,tt(t,n)):i.push(t);return i},tt=function(n,t){var r,u,f;return r=(u=i[t.bindingId])!=null?(f=u.indexes)!=null?f[n]:void 0:void 0,r!=null?[n,r]:[n]},s=function(n,t){for(var r,i=0,u=t.length;i<u;i++)r=t[i],n!=null&&(n=n[r]);return n},w=function(t,i,r){var o,f,e,s,h,u;for(u=i,i=2<=u.length?n.call(u,0,o=u.length-1):(o=0,[]),s=u[o++],f=0,h=i.length;f<h;f++)e=i[f],t=t[e]!=null?t[e]:t[e]={};return t[s]=r},kt=function(n){return[].map.call(n.attributes,function(n){return n.name+"="+JSON.stringify(n.value)}).join(" ")},u=function(n,t,i){var u,f,r;if(nt(n)&&(r=v(i,n)))return r[0]==="$root"?function(n,t){return s(t,r)}:function(n){return s(n,r)};n="return "+n;it(i)&&(n="with($arrayPointers) { "+n+" }");wt(t)&&(n="with($registry) { "+n+" }");try{return new Function(t,"with($context) { "+n+" }")}catch(f){u=f;throw"Twine error: Unable to create function on "+i.nodeName+" node with attributes "+kt(i);}},wt=function(n){return/\$registry/.test(n)},it=function(n){var t;return n.bindingId!=null&&((t=i[n.bindingId])!=null?t.indexes:void 0)},f=function(n,t){var f,i,r,u;if(i=it(n),!i)return{};u={};for(r in i)f=i[r],u[r]=t[r][f];return u},nt=function(n){return n!=="true"&&n!=="false"&&n!=="null"&&n!=="undefined"&&lt.test(n)},ct=function(n){return n[0]==="d"&&n[1]==="a"&&n[2]==="t"&&n[3]==="a"&&n[4]==="-"},d=function(n){var t;return t=document.createEvent("CustomEvent"),t.initCustomEvent("bindings:change",!0,!1,{}),n.dispatchEvent(t)},et=function(n,t){var i,r,u;return(r=n[0],u=t[0],i={define:1,bind:2,eval:3},!i[r])?1:i[u]?i[r]-i[u]:-1},t.bindingTypes={bind:function(n,i,e){var c,l,tt,o,a,it,y,p,b,k,g,h;if(h=dt(n),g=n[h],a=void 0,b=void 0,l=n.getAttribute("type")==="radio",tt=u(e,"$context,$root,$arrayPointers",n),y=function(){var t;if(t=tt.call(n,i,r,f(n,i)),t!==a)return(a=t,t===n[h])?void 0:(n[h]=l?t===n.value:t,d(n))},!nt(e))return{refresh:y};if(p=function(){return l?n.checked?w(i,o,n.value):void 0:w(i,o,n[h])},o=v(n,e),k=h!=="textContent"&&n.type!=="hidden",o[0]==="$root"&&(i=r,o=o.slice(1)),g!=null&&(k||g!=="")&&(it=s(i,o))==null&&p(),k){c=function(){if(s(i,o)!==this[h])return p(),t.refreshImmediately()};$(n).on("input keyup change",c);b=function(){return $(n).off("input keyup change",c)}}return{refresh:y,teardown:b}},"bind-show":function(n,t,i){var o,e;return o=u(i,"$context,$root,$arrayPointers",n),e=void 0,{refresh:function(){var i;if(i=!o.call(n,t,r,f(n,t)),i!==e)return $(n).toggleClass("hide",e=i)}}},"bind-class":function(n,t,i){var o,e;return o=u(i,"$context,$root,$arrayPointers",n),e={},{refresh:function(){var i,u,s;u=o.call(n,t,r,f(n,t));for(i in u)s=u[i],!e[i]!=!s&&$(n).toggleClass(i,!!s);return e=u}}},"bind-attribute":function(n,t,i){var o,e;return o=u(i,"$context,$root,$arrayPointers",n),e={},{refresh:function(){var i,u,s;u=o.call(n,t,r,f(n,t));for(i in u)s=u[i],e[i]!==s&&$(n).attr(i,s||null);return e=u}}},define:function(n,t,i){var s,e,o,c;s=u(i,"$context,$root,$registry,$arrayPointers",n);o=s.call(n,t,r,h,f(n,t));for(e in o)c=o[e],t[e]=c},eval:function(n,t,i){var e;e=u(i,"$context,$root,$registry,$arrayPointers",n);e.call(n,t,r,h,f(n,t))}},ot=function(n,t,i){var s,e,f,o,h;s=u(i,"$context,$root",n);o=s.call(n,t,r);e={};for(f in o){if(h=o[f],t[f]==null&&(t[f]=[]),!(t[f]instanceof Array))throw"Twine error: expected '"+f+"' to be an array";e[f]=t[f].length;t[f].push(h)}return e},ft=function(n,i){var e;return e=n==="checked"||n==="indeterminate"||n==="disabled"||n==="readOnly",t.bindingTypes["bind-"+i.toLowerCase()]=function(t,i,o){var h,s;return h=u(o,"$context,$root,$arrayPointers",t),s=void 0,{refresh:function(){var u;if(u=h.call(t,i,r,f(t,i)),e&&(u=!!u),u!==s)return t[n]=s=u,n==="checked"?d(t):void 0}}}},rt=["placeholder","checked","indeterminate","disabled","href","title","readOnly","src"],l=0,at=rt.length;l<at;l++)b=rt[l],ft(b,b);for(ft("innerHTML","unsafe-html"),yt=function(n){var i;return(n.type==="submit"||n.currentTarget.nodeName.toLowerCase()==="a")&&((i=t.getAttribute(n.currentTarget,"allow-default"))==="false"||i===!1||i===0||i===void 0||i===null)},bt=function(n){return t.bindingTypes["bind-event-"+n]=function(i,e,o){var s=function(s,h){var l,c;if(c=typeof(l=t.shouldDiscardEvent)[n]=="function"?l[n](s):void 0,(c||yt(s))&&s.preventDefault(),!c)return u(o,"$context,$root,$arrayPointers,event,data",i).call(i,e,r,f(i,e),s,h),t.refreshImmediately()};$(i).on(n,s);return{teardown:function(){return $(i).off(n,s)}}}},ut=["click","dblclick","mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","submit","dragenter","dragleave","dragover","drop","drag","change","keypress","keydown","keyup","input","error","done","success","fail","blur","focus","load","paste"],a=0,vt=ut.length;a<vt;a++)st=ut[a],bt(st);return t})}).call(this)}.call(this),function(){(function(n,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):n.IPv6=t(n)})(this,function(n){var t=n&&n.IPv6;return{best:function(n){var r,t,i,u;for(n=n.toLowerCase().split(":"),i=n.length,r=8,""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[i-1]&&""===n[i-2]&&n.pop(),i=n.length,-1!==n[i-1].indexOf(".")&&(r=7),t=0;t<i&&""!==n[t];t++);if(t<r)for(n.splice(t,1,"0000");n.length<r;)n.splice(t,0,"0000");for(t=0;t<r;t++){for(i=n[t].split(""),u=0;3>u;u++)if("0"===i[0]&&1<i.length)i.splice(0,1);else break;n[t]=i.join("")}var i=-1,f=u=0,e=-1,o=!1;for(t=0;t<r;t++)o?"0"===n[t]?f+=1:(o=!1,f>u&&(i=e,u=f)):"0"===n[t]&&(o=!0,e=t,f=1);for(f>u&&(i=e,u=f),1<u&&n.splice(i,u,""),i=n.length,r="",""===n[0]&&(r=":"),t=0;t<i;t++){if(r+=n[t],t===i-1)break;r+=":"}return""===n[i-1]&&(r+=":"),r},noConflict:function(){return n.IPv6===this&&(n.IPv6=t),this}}}),function(n){function i(n){throw RangeError(g[n]);}function s(n,t){for(var i=n.length;i--;)n[i]=t(n[i]);return n}function h(n,t){return s(n.split(d),t).join(".")}function c(n){for(var r=[],i=0,f=n.length,t,u;i<f;)t=n.charCodeAt(i++),55296<=t&&56319>=t&&i<f?(u=n.charCodeAt(i++),56320==(u&64512)?r.push(((t&1023)<<10)+(u&1023)+65536):(r.push(t),i--)):r.push(t);return r}function l(n){return s(n,function(n){var t="";return 65535<n&&(n-=65536,t+=f(n>>>10&1023|55296),n=56320|n&1023),t+f(n)}).join("")}function a(n,t){return n+22+75*(26>n)-((0!=t)<<5)}function v(n,i,r){var u=0;for(n=r?t(n/700):n>>1,n+=t(n/i);455<n;u+=36)n=t(n/35);return t(u+36*n/(n+38))}function y(n){var h=[],p=n.length,u,e=0,a=128,c=72,f,o,s,r,y;for(f=n.lastIndexOf("-"),0>f&&(f=0),o=0;o<f;++o)128<=n.charCodeAt(o)&&i("not-basic"),h.push(n.charCodeAt(o));for(f=0<f?f+1:0;f<p;){for(o=e,u=1,s=36;;s+=36){if(f>=p&&i("invalid-input"),r=n.charCodeAt(f++),r=10>r-48?r-22:26>r-65?r-65:26>r-97?r-97:36,(36<=r||r>t((2147483647-e)/u))&&i("overflow"),e+=r*u,y=s<=c?1:s>=c+26?26:s-c,r<y)break;r=36-y;u>t(2147483647/r)&&i("overflow");u*=r}u=h.length+1;c=v(e-o,u,0==o);t(e/u)>2147483647-a&&i("overflow");a+=t(e/u);e%=u;h.splice(e++,0,a)}return l(h)}function p(n){var o,s,y,d,p,u,e,h,r,l=[],w,b,k;for(n=c(n),w=n.length,o=128,s=0,p=72,u=0;u<w;++u)r=n[u],128>r&&l.push(f(r));for((y=d=l.length)&&l.push("-");y<w;){for(e=2147483647,u=0;u<w;++u)r=n[u],r>=o&&r<e&&(e=r);for(b=y+1,e-o>t((2147483647-s)/b)&&i("overflow"),s+=(e-o)*b,o=e,u=0;u<w;++u)if(r=n[u],r<o&&2147483647<++s&&i("overflow"),r==o){for(h=s,e=36;;e+=36){if(r=e<=p?1:e>=p+26?26:e-p,h<r)break;k=h-r;h=36-r;l.push(f(a(r+k%h,0)));h=t(k/h)}l.push(f(a(h,0)));p=v(s,b,y==d);s=0;++y}++s;++o}return l.join("")}var e="object"==typeof exports&&exports,w="object"==typeof module&&module&&module.exports==e&&module,u="object"==typeof global&&global;(u.global===u||u.window===u)&&(n=u);var r,b=/^xn--/,k=/[^ -~]/,d=/\x2E|\u3002|\uFF0E|\uFF61/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},t=Math.floor,f=String.fromCharCode,o;if(r={version:"1.2.3",ucs2:{decode:c,encode:l},decode:y,encode:p,toASCII:function(n){return h(n,function(n){return k.test(n)?"xn--"+p(n):n})},toUnicode:function(n){return h(n,function(n){return b.test(n)?y(n.slice(4).toLowerCase()):n})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return r});else if(e&&!e.nodeType)if(w)w.exports=r;else for(o in r)r.hasOwnProperty(o)&&(e[o]=r[o]);else n.punycode=r}(this),function(n,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):n.SecondLevelDomains=t(n)}(this,function(n){var i=n&&n.SecondLevelDomains,t={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(n){var i=n.lastIndexOf("."),r,u;return 0>=i||i>=n.length-1?!1:(r=n.lastIndexOf(".",i-1),0>=r||r>=i-1)?!1:(u=t.list[n.slice(i+1)],u?0<=u.indexOf(" "+n.slice(r+1,i)+" "):!1)},is:function(n){var i=n.lastIndexOf("."),r;return 0>=i||i>=n.length-1||0<=n.lastIndexOf(".",i-1)?!1:(r=t.list[n.slice(i+1)],r?0<=r.indexOf(" "+n.slice(0,i)+" "):!1)},get:function(n){var i=n.lastIndexOf("."),r,u;return 0>=i||i>=n.length-1?null:(r=n.lastIndexOf(".",i-1),0>=r||r>=i-1)?null:(u=t.list[n.slice(i+1)],!u||0>u.indexOf(" "+n.slice(r+1,i)+" ")?null:n.slice(r+1))},noConflict:function(){return n.SecondLevelDomains===this&&(n.SecondLevelDomains=i),this}};return t}),function(n,t){"object"==typeof exports?module.exports=t(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],t):n.URI=t(n.punycode,n.IPv6,n.SecondLevelDomains,n)}(this,function(n,t,i,r){function u(n,t){var i=1<=arguments.length,r=2<=arguments.length;if(!(this instanceof u))return i?r?new u(n,t):new u(n):new u;if(void 0===n){if(i)throw new TypeError("undefined is not a valid argument for URI");n="undefined"!=typeof location?location.href+"":""}return this.href(n),void 0!==t?this.absoluteTo(t):this}function h(n){return n.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(n){return void 0===n?"Undefined":String(Object.prototype.toString.call(n)).slice(8,-1)}function e(n){return"Array"===c(n)}function w(n,t){var r={},i,u;if("RegExp"===c(t))r=null;else if(e(t))for(i=0,u=t.length;i<u;i++)r[t[i]]=!0;else r[t]=!0;for(i=0,u=n.length;i<u;i++)(r&&void 0!==r[n[i]]||!r&&t.test(n[i]))&&(n.splice(i,1),u--,i--);return n}function v(n,t){var i,r,u;if(e(t)){for(i=0,r=t.length;i<r;i++)if(!v(n,t[i]))return!1;return!0}for(u=c(t),i=0,r=n.length;i<r;i++)if("RegExp"===u){if("string"==typeof n[i]&&n[i].match(t))return!0}else if(n[i]===t)return!0;return!1}function b(n,t){if(!e(n)||!e(t)||n.length!==t.length)return!1;n.sort();t.sort();for(var i=0,r=n.length;i<r;i++)if(n[i]!==t[i])return!1;return!0}function g(n){return escape(n)}function p(n){return encodeURIComponent(n).replace(/[!'()*]/g,g).replace(/\*/g,"%2A")}function l(n){return function(t,i){return void 0===t?this._parts[n]||"":(this._parts[n]=t||null,this.build(!i),this)}}function k(n,t){return function(i,r){return void 0===i?this._parts[n]||"":(null!==i&&(i+="",i.charAt(0)===t&&(i=i.substring(1))),this._parts[n]=i,this.build(!r),this)}}var nt=r&&r.URI,f,o,s,a,y,d;u.version="1.15.1";f=u.prototype;o=Object.prototype.hasOwnProperty;u._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:u.duplicateQueryParameters,escapeQuerySpace:u.escapeQuerySpace}};u.duplicateQueryParameters=!1;u.escapeQuerySpace=!0;u.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;u.idn_expression=/[^a-z0-9\.-]/i;u.punycode_expression=/(xn--)/i;u.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;u.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;u.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;u.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/};u.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};u.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;u.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};u.getDomAttribute=function(n){if(n&&n.nodeName){var t=n.nodeName.toLowerCase();return"input"===t&&"image"!==n.type?void 0:u.domAttributes[t]}};u.encode=p;u.decode=decodeURIComponent;u.iso8859=function(){u.encode=escape;u.decode=unescape};u.unicode=function(){u.encode=p;u.decode=decodeURIComponent};u.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}};u.encodeQuery=function(n,t){var i=u.encode(n+"");return void 0===t&&(t=u.escapeQuerySpace),t?i.replace(/%20/g,"+"):i};u.decodeQuery=function(n,t){n+="";void 0===t&&(t=u.escapeQuerySpace);try{return u.decode(t?n.replace(/\+/g,"%20"):n)}catch(i){return n}};s={encode:"encode",decode:"decode"};y=function(n,t){return function(i){try{return u[t](i+"").replace(u.characters[n][t].expression,function(i){return u.characters[n][t].map[i]})}catch(r){return i}}};for(a in s)u[a+"PathSegment"]=y("pathname",s[a]),u[a+"UrnPathSegment"]=y("urnpath",s[a]);s=function(n,t,i){return function(r){var e,f,o;for(e=i?function(n){return u[t](u[i](n))}:u[t],r=(r+"").split(n),f=0,o=r.length;f<o;f++)r[f]=e(r[f]);return r.join(n)}};u.decodePath=s("/","decodePathSegment");u.decodeUrnPath=s(":","decodeUrnPathSegment");u.recodePath=s("/","encodePathSegment","decode");u.recodeUrnPath=s(":","encodeUrnPathSegment","decode");u.encodeReserved=y("reserved","encode");u.parse=function(n,t){var i;return t||(t={}),i=n.indexOf("#"),-1<i&&(t.fragment=n.substring(i+1)||null,n=n.substring(0,i)),i=n.indexOf("?"),-1<i&&(t.query=n.substring(i+1)||null,n=n.substring(0,i)),"//"===n.substring(0,2)?(t.protocol=null,n=n.substring(2),n=u.parseAuthority(n,t)):(i=n.indexOf(":"),-1<i&&(t.protocol=n.substring(0,i)||null,t.protocol&&!t.protocol.match(u.protocol_expression)?t.protocol=void 0:"//"===n.substring(i+1,i+3)?(n=n.substring(i+3),n=u.parseAuthority(n,t)):(n=n.substring(i+1),t.urn=!0))),t.path=n,t};u.parseHost=function(n,t){var r=n.indexOf("/"),i,u;return-1===r&&(r=n.length),"["===n.charAt(0)?(i=n.indexOf("]"),t.hostname=n.substring(1,i)||null,t.port=n.substring(i+2,r)||null,"/"===t.port&&(t.port=null)):(u=n.indexOf(":"),i=n.indexOf("/"),u=n.indexOf(":",u+1),-1!==u&&(-1===i||u<i)?(t.hostname=n.substring(0,r)||null,t.port=null):(i=n.substring(0,r).split(":"),t.hostname=i[0]||null,t.port=i[1]||null)),t.hostname&&"/"!==n.substring(r).charAt(0)&&(r++,n="/"+n),n.substring(r)||"/"};u.parseAuthority=function(n,t){return n=u.parseUserinfo(n,t),u.parseHost(n,t)};u.parseUserinfo=function(n,t){var i=n.indexOf("/"),r=n.lastIndexOf("@",-1<i?i:n.length-1);return-1<r&&(-1===i||r<i)?(i=n.substring(0,r).split(":"),t.username=i[0]?u.decode(i[0]):null,i.shift(),t.password=i[0]?u.decode(i.join(":")):null,n=n.substring(r+1)):(t.username=null,t.password=null),n};u.parseQuery=function(n,t){if(!n)return{};if(n=n.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!n)return{};for(var i={},s=n.split("&"),h=s.length,r,f,e=0;e<h;e++)r=s[e].split("="),f=u.decodeQuery(r.shift(),t),r=r.length?u.decodeQuery(r.join("="),t):null,o.call(i,f)?("string"==typeof i[f]&&(i[f]=[i[f]]),i[f].push(r)):i[f]=r;return i};u.build=function(n){var t="";return n.protocol&&(t+=n.protocol+":"),!n.urn&&(t||n.hostname)&&(t+="//"),t+=u.buildAuthority(n)||"","string"==typeof n.path&&("/"!==n.path.charAt(0)&&"string"==typeof n.hostname&&(t+="/"),t+=n.path),"string"==typeof n.query&&n.query&&(t+="?"+n.query),"string"==typeof n.fragment&&n.fragment&&(t+="#"+n.fragment),t};u.buildHost=function(n){var t="";if(n.hostname)t=u.ip6_expression.test(n.hostname)?t+("["+n.hostname+"]"):t+n.hostname;else return"";return n.port&&(t+=":"+n.port),t};u.buildAuthority=function(n){return u.buildUserinfo(n)+u.buildHost(n)};u.buildUserinfo=function(n){var t="";return n.username&&(t+=u.encode(n.username),n.password&&(t+=":"+u.encode(n.password)),t+="@"),t};u.buildQuery=function(n,t,i){var s="",h,r,f,c;for(r in n)if(o.call(n,r)&&r)if(e(n[r]))for(h={},f=0,c=n[r].length;f<c;f++)void 0!==n[r][f]&&void 0===h[n[r][f]+""]&&(s+="&"+u.buildQueryParameter(r,n[r][f],i),!0!==t&&(h[n[r][f]+""]=!0));else void 0!==n[r]&&(s+="&"+u.buildQueryParameter(r,n[r],i));return s.substring(1)};u.buildQueryParameter=function(n,t,i){return u.encodeQuery(n,i)+(null!==t?"="+u.encodeQuery(t,i):"")};u.addQuery=function(n,t,i){if("object"==typeof t)for(var r in t)o.call(t,r)&&u.addQuery(n,r,t[r]);else if("string"==typeof t)void 0===n[t]?n[t]=i:("string"==typeof n[t]&&(n[t]=[n[t]]),e(i)||(i=[i]),n[t]=(n[t]||[]).concat(i));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};u.removeQuery=function(n,t,i){var r;if(e(t))for(i=0,r=t.length;i<r;i++)n[t[i]]=void 0;else if("RegExp"===c(t))for(r in n)t.test(r)&&(n[r]=void 0);else if("object"==typeof t)for(r in t)o.call(t,r)&&u.removeQuery(n,r,t[r]);else if("string"==typeof t)void 0!==i?"RegExp"===c(i)?n[t]=!e(n[t])&&i.test(n[t])?void 0:w(n[t],i):n[t]===i?n[t]=void 0:e(n[t])&&(n[t]=w(n[t],i)):n[t]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");};u.hasQuery=function(n,t,i,r){if("object"==typeof t){for(var f in t)if(o.call(t,f)&&!u.hasQuery(n,f,t[f]))return!1;return!0}if("string"!=typeof t)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(c(i)){case"Undefined":return t in n;case"Boolean":return n=Boolean(e(n[t])?n[t].length:n[t]),i===n;case"Function":return!!i(n[t],t,n);case"Array":return e(n[t])?(r?v:b)(n[t],i):!1;case"RegExp":return e(n[t])?r?v(n[t],i):!1:Boolean(n[t]&&n[t].match(i));case"Number":i=String(i);case"String":return e(n[t])?r?v(n[t],i):!1:n[t]===i;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");}};u.commonPath=function(n,t){for(var r=Math.min(n.length,t.length),i=0;i<r;i++)if(n.charAt(i)!==t.charAt(i)){i--;break}return 1>i?n.charAt(0)===t.charAt(0)&&"/"===n.charAt(0)?"/":"":(("/"!==n.charAt(i)||"/"!==t.charAt(i))&&(i=n.substring(0,i).lastIndexOf("/")),n.substring(0,i+1))};u.withinString=function(n,t,i){var r,f,e;i||(i={});var o=i.start||u.findUri.start,s=i.end||u.findUri.end,h=i.trim||u.findUri.trim;for(o.lastIndex=0;;){if(r=o.exec(n),!r)break;(r=r.index,i.ignoreHtml&&(f=n.slice(Math.max(r-3,0),r),f&&/[a-z0-9-]=["']?$/i.test(f)))||(f=r+n.slice(r).search(s),e=n.slice(r,f).replace(h,""),i.ignore&&i.ignore.test(e)||(f=r+e.length,e=t(e,r,f,n),n=n.slice(0,r)+e+n.slice(f),o.lastIndex=r+e.length))}return o.lastIndex=0,n};u.ensureValidHostname=function(t){if(t.match(u.invalid_hostname_characters)){if(!n)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(n.toASCII(t).match(u.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');}};u.noConflict=function(n){return n?(n={URI:this.noConflict()},r.URITemplate&&"function"==typeof r.URITemplate.noConflict&&(n.URITemplate=r.URITemplate.noConflict()),r.IPv6&&"function"==typeof r.IPv6.noConflict&&(n.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&"function"==typeof r.SecondLevelDomains.noConflict&&(n.SecondLevelDomains=r.SecondLevelDomains.noConflict()),n):(r.URI===this&&(r.URI=nt),this)};f.build=function(n){return!0===n?this._deferred_build=!0:(void 0===n||this._deferred_build)&&(this._string=u.build(this._parts),this._deferred_build=!1),this};f.clone=function(){return new u(this)};f.valueOf=f.toString=function(){return this.build(!1)._string};f.protocol=l("protocol");f.username=l("username");f.password=l("password");f.hostname=l("hostname");f.port=l("port");f.query=k("query","?");f.fragment=k("fragment","#");f.search=function(n,t){var i=this.query(n,t);return"string"==typeof i&&i.length?"?"+i:i};f.hash=function(n,t){var i=this.fragment(n,t);return"string"==typeof i&&i.length?"#"+i:i};f.pathname=function(n,t){if(void 0===n||!0===n){var i=this._parts.path||(this._parts.hostname?"/":"");return n?(this._parts.urn?u.decodeUrnPath:u.decodePath)(i):i}return this._parts.path=this._parts.urn?n?u.recodeUrnPath(n):"":n?u.recodePath(n):"/",this.build(!t),this};f.path=f.pathname;f.href=function(n,t){var f,i,r;if(void 0===n)return this.toString();if(this._string="",this._parts=u._parts(),i=n instanceof u,r="object"==typeof n&&(n.hostname||n.path||n.pathname),n.nodeName&&(r=u.getDomAttribute(n),n=n[r]||"",r=!1),!i&&r&&void 0!==n.pathname&&(n=n.toString()),"string"==typeof n||n instanceof String)this._parts=u.parse(String(n),this._parts);else if(i||r)for(f in i=i?n._parts:n,i)o.call(this._parts,f)&&(this._parts[f]=i[f]);else throw new TypeError("invalid input");return this.build(!t),this};f.is=function(n){var r=!1,f=!1,e=!1,t=!1,s=!1,h=!1,c=!1,o=!this._parts.urn;this._parts.hostname&&(o=!1,f=u.ip4_expression.test(this._parts.hostname),e=u.ip6_expression.test(this._parts.hostname),r=f||e,s=(t=!r)&&i&&i.has(this._parts.hostname),h=t&&u.idn_expression.test(this._parts.hostname),c=t&&u.punycode_expression.test(this._parts.hostname));switch(n.toLowerCase()){case"relative":return o;case"absolute":return!o;case"domain":case"name":return t;case"sld":return s;case"ip":return r;case"ip4":case"ipv4":case"inet4":return f;case"ip6":case"ipv6":case"inet6":return e;case"idn":return h;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var tt=f.protocol,it=f.port,rt=f.hostname;return f.protocol=function(n,t){if(void 0!==n&&n&&(n=n.replace(/:(\/\/)?$/,""),!n.match(u.protocol_expression)))throw new TypeError('Protocol "'+n+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return tt.call(this,n,t)},f.scheme=f.protocol,f.port=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0!==n&&(0===n&&(n=null),n&&(n+="",":"===n.charAt(0)&&(n=n.substring(1)),n.match(/[^0-9]/))))throw new TypeError('Port "'+n+'" contains characters other than [0-9]');return it.call(this,n,t)},f.hostname=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0!==n){var i={};u.parseHost(n,i);n=i.hostname}return rt.call(this,n,t)},f.host=function(n,t){return this._parts.urn?void 0===n?"":this:void 0===n?this._parts.hostname?u.buildHost(this._parts):"":(u.parseHost(n,this._parts),this.build(!t),this)},f.authority=function(n,t){return this._parts.urn?void 0===n?"":this:void 0===n?this._parts.hostname?u.buildAuthority(this._parts):"":(u.parseAuthority(n,this._parts),this.build(!t),this)},f.userinfo=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0===n){if(!this._parts.username)return"";var i=u.buildUserinfo(this._parts);return i.substring(0,i.length-1)}return"@"!==n[n.length-1]&&(n+="@"),u.parseUserinfo(n,this._parts),this.build(!t),this},f.resource=function(n,t){var i;return void 0===n?this.path()+this.search()+this.hash():(i=u.parse(n),this._parts.path=i.path,this._parts.query=i.query,this._parts.fragment=i.fragment,this.build(!t),this)},f.subdomain=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0===n){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,i)||""}return i=this._parts.hostname.length-this.domain().length,i=this._parts.hostname.substring(0,i),i=new RegExp("^"+h(i)),n&&"."!==n.charAt(n.length-1)&&(n+="."),n&&u.ensureValidHostname(n),this._parts.hostname=this._parts.hostname.replace(i,n),this.build(!t),this},f.domain=function(n,t){if(this._parts.urn)return void 0===n?"":this;if("boolean"==typeof n&&(t=n,n=void 0),void 0===n){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.match(/\./g);return i&&2>i.length?this._parts.hostname:(i=this._parts.hostname.length-this.tld(t).length-1,i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||"")}if(!n)throw new TypeError("cannot set domain empty");return u.ensureValidHostname(n),!this._parts.hostname||this.is("IP")?this._parts.hostname=n:(i=new RegExp(h(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(i,n)),this.build(!t),this},f.tld=function(n,t){if(this._parts.urn)return void 0===n?"":this;if("boolean"==typeof n&&(t=n,n=void 0),void 0===n){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.lastIndexOf("."),r=this._parts.hostname.substring(r+1);return!0!==t&&i&&i.list[r.toLowerCase()]?i.get(this._parts.hostname)||r:r}if(n)if(n.match(/[^a-zA-Z0-9-]/))if(i&&i.is(n))r=new RegExp(h(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(r,n);else throw new TypeError('TLD "'+n+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");r=new RegExp(h(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(r,n)}else throw new TypeError("cannot set TLD empty");return this.build(!t),this},f.directory=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0===n||!0===n){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var i=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,i)||(this._parts.hostname?"/":"");return n?u.decodePath(i):i}return i=this._parts.path.length-this.filename().length,i=this._parts.path.substring(0,i),i=new RegExp("^"+h(i)),this.is("relative")||(n||(n="/"),"/"!==n.charAt(0)&&(n="/"+n)),n&&"/"!==n.charAt(n.length-1)&&(n+="/"),n=u.recodePath(n),this._parts.path=this._parts.path.replace(i,n),this.build(!t),this},f.filename=function(n,t){var i,r;return this._parts.urn?void 0===n?"":this:void 0===n||!0===n?!this._parts.path||"/"===this._parts.path?"":(i=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(i+1),n?u.decodePathSegment(i):i):(i=!1,"/"===n.charAt(0)&&(n=n.substring(1)),n.match(/\.?\//)&&(i=!0),r=new RegExp(h(this.filename())+"$"),n=u.recodePath(n),this._parts.path=this._parts.path.replace(r,n),i?this.normalizePath(t):this.build(!t),this)},f.suffix=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0===n||!0===n){if(!this._parts.path||"/"===this._parts.path)return"";var i=this.filename(),r=i.lastIndexOf(".");return-1===r?"":(i=i.substring(r+1),i=/^[a-z0-9%]+$/i.test(i)?i:"",n?u.decodePathSegment(i):i)}if("."===n.charAt(0)&&(n=n.substring(1)),i=this.suffix())r=n?new RegExp(h(i)+"$"):new RegExp(h("."+i)+"$");else{if(!n)return this;this._parts.path+="."+u.recodePath(n)}return r&&(n=u.recodePath(n),this._parts.path=this._parts.path.replace(r,n)),this.build(!t),this},f.segment=function(n,t,i){var u=this._parts.urn?":":"/",r=this.path(),f="/"===r.substring(0,1),r=r.split(u),o;if(void 0!==n&&"number"!=typeof n&&(i=t,t=n,n=void 0),void 0!==n&&"number"!=typeof n)throw Error('Bad segment "'+n+'", must be 0-based integer');if(f&&r.shift(),0>n&&(n=Math.max(r.length+n,0)),void 0===t)return void 0===n?r:r[n];if(null===n||void 0===r[n])if(e(t))for(r=[],n=0,o=t.length;n<o;n++)(t[n].length||r.length&&r[r.length-1].length)&&(r.length&&!r[r.length-1].length&&r.pop(),r.push(t[n]));else(t||"string"==typeof t)&&(""===r[r.length-1]?r[r.length-1]=t:r.push(t));else t?r[n]=t:r.splice(n,1);return f&&r.unshift(""),this.path(r.join(u),i)},f.segmentCoded=function(n,t,i){var r,f;if("number"!=typeof n&&(i=t,t=n,n=void 0),void 0===t){if(n=this.segment(n,t,i),e(n))for(r=0,f=n.length;r<f;r++)n[r]=u.decode(n[r]);else n=void 0!==n?u.decode(n):void 0;return n}if(e(t))for(r=0,f=t.length;r<f;r++)t[r]=u.decode(t[r]);else t="string"==typeof t||t instanceof String?u.encode(t):t;return this.segment(n,t,i)},d=f.query,f.query=function(n,t){if(!0===n)return u.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof n){var i=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=n.call(this,i);return this._parts.query=u.buildQuery(r||i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==n&&"string"!=typeof n?(this._parts.query=u.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):d.call(this,n,t)},f.setQuery=function(n,t,i){var f=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r;if("string"==typeof n||n instanceof String)f[n]=void 0!==t?t:null;else if("object"==typeof n)for(r in n)o.call(n,r)&&(f[r]=n[r]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=u.buildQuery(f,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof n&&(i=t),this.build(!i),this},f.addQuery=function(n,t,i){var r=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return u.addQuery(r,n,void 0===t?null:t),this._parts.query=u.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof n&&(i=t),this.build(!i),this},f.removeQuery=function(n,t,i){var r=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return u.removeQuery(r,n,t),this._parts.query=u.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof n&&(i=t),this.build(!i),this},f.hasQuery=function(n,t,i){var r=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return u.hasQuery(r,n,t,i)},f.setSearch=f.setQuery,f.addSearch=f.addQuery,f.removeSearch=f.removeQuery,f.hasSearch=f.hasQuery,f.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},f.normalizeProtocol=function(n){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!n)),this},f.normalizeHostname=function(i){return this._parts.hostname&&(this.is("IDN")&&n?this._parts.hostname=n.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!i)),this},f.normalizePort=function(n){return"string"==typeof this._parts.protocol&&this._parts.port===u.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!n)),this},f.normalizePath=function(n){var t=this._parts.path,e,r,i,f;if(!t)return this;if(this._parts.urn)return this._parts.path=u.recodeUrnPath(this._parts.path),this.build(!n),this;if("/"===this._parts.path)return this;for(r="","/"!==t.charAt(0)&&(e=!0,t="/"+t),t=t.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(r=t.substring(1).match(/^(\.\.\/)+/)||"")&&(r=r[0]);;){if(i=t.indexOf("/.."),-1===i)break;else if(0===i){t=t.substring(3);continue}f=t.substring(0,i).lastIndexOf("/");-1===f&&(f=i);t=t.substring(0,f)+t.substring(i+3)}return e&&this.is("relative")&&(t=r+t.substring(1)),t=u.recodePath(t),this._parts.path=t,this.build(!n),this},f.normalizePathname=f.normalizePath,f.normalizeQuery=function(n){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(u.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!n)),this},f.normalizeFragment=function(n){return this._parts.fragment||(this._parts.fragment=null,this.build(!n)),this},f.normalizeSearch=f.normalizeQuery,f.normalizeHash=f.normalizeFragment,f.iso8859=function(){var n=u.encode,t=u.decode;u.encode=escape;u.decode=decodeURIComponent;try{this.normalize()}finally{u.encode=n;u.decode=t}return this},f.unicode=function(){var n=u.encode,t=u.decode;u.encode=p;u.decode=unescape;try{this.normalize()}finally{u.encode=n;u.decode=t}return this},f.readable=function(){var t=this.clone(),i,f,r;if(t.username("").password("").normalize(),i="",t._parts.protocol&&(i+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&n?(i+=n.toUnicode(t._parts.hostname),t._parts.port&&(i+=":"+t._parts.port)):i+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(i+="/"),i+=t.path(!0),t._parts.query){for(var r="",e=0,o=t._parts.query.split("&"),s=o.length;e<s;e++)f=(o[e]||"").split("="),r=r+("&"+u.decodeQuery(f[0],this._parts.escapeQuerySpace).replace(/&/g,"%26")),void 0!==f[1]&&(r+="="+u.decodeQuery(f[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"));i+="?"+r.substring(1)}return i+u.decodeQuery(t.hash(),!0)},f.absoluteTo=function(n){var t=this.clone(),i=["protocol","username","password","hostname","port"],r,f;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(n instanceof u||(n=new u(n)),t._parts.protocol||(t._parts.protocol=n._parts.protocol),this._parts.hostname)return t;for(r=0;f=i[r];r++)t._parts[f]=n._parts[f];return t._parts.path?".."===t._parts.path.substring(-2)&&(t._parts.path+="/"):(t._parts.path=n._parts.path,t._parts.query||(t._parts.query=n._parts.query)),"/"!==t.path().charAt(0)&&(i=(i=n.directory())?i:0===n.path().indexOf("/")?"/":"",t._parts.path=(i?i+"/":"")+t._parts.path,t.normalizePath()),t.build(),t},f.relativeTo=function(n){var r=this.clone().normalize(),t,i,f,e;if(r._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(n=new u(n).normalize(),t=r._parts,i=n._parts,f=r.path(),e=n.path(),"/"!==f.charAt(0))throw Error("URI is already relative");if("/"!==e.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===i.protocol&&(t.protocol=null),t.username===i.username&&t.password===i.password&&null===t.protocol&&null===t.username&&null===t.password&&t.hostname===i.hostname&&t.port===i.port)t.hostname=null,t.port=null;else return r.build();return f===e?(t.path="",r.build()):(n=u.commonPath(r.path(),n.path()),!n)?r.build():(i=i.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../"),t.path=i+t.path.substring(n.length),r.build())},f.equals=function(n){var f=this.clone();n=new u(n);var i={},r={},s={},t;if(f.normalize(),n.normalize(),f.toString()===n.toString())return!0;if(i=f.query(),r=n.query(),f.query(""),n.query(""),f.toString()!==n.toString()||i.length!==r.length)return!1;i=u.parseQuery(i,this._parts.escapeQuerySpace);r=u.parseQuery(r,this._parts.escapeQuerySpace);for(t in i)if(o.call(i,t)){if(e(i[t])){if(!b(i[t],r[t]))return!1}else if(i[t]!==r[t])return!1;s[t]=!0}for(t in r)if(o.call(r,t)&&!s[t])return!1;return!0},f.duplicateQueryParameters=function(n){return this._parts.duplicateQueryParameters=!!n,this},f.escapeQuerySpace=function(n){return this._parts.escapeQuerySpace=!!n,this},u}),function(n,t){"object"==typeof exports?module.exports=t(require("./URI")):"function"==typeof define&&define.amd?define(["./URI"],t):n.URITemplate=t(n.URI,n)}(this,function(n,t){function i(n){return i._cache[n]?i._cache[n]:(this instanceof i)?(this.expression=n,i._cache[n]=this,this):new i(n)}function r(n){this.data=n;this.cache={}}var e=t&&t.URITemplate,o=Object.prototype.hasOwnProperty,u=i.prototype,f={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};return i._cache={},i.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g,i.VARIABLE_PATTERN=/^([^*:]+)((\*)|:(\d+))?$/,i.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_]/,i.expand=function(n,t){for(var u=f[n.operator],h=u.named?"Named":"Unnamed",c=n.variables,e=[],o,r,s=0;r=c[s];s++)o=t.get(r.name),o.val.length?e.push(i["expand"+h](o,u,r.explode,r.explode&&u.separator||",",r.maxlength,r.name)):o.type&&e.push("");return e.length?u.prefix+e.join(u.separator):""},i.expandNamed=function(t,i,r,u,f,e){var c="",o=i.encode,a,l,h,s,v;for(i=i.empty_name_separator,a=!t[o].length,l=2===t.type?"":n[o](e),s=0,v=t.val.length;s<v;s++)f?(h=n[o](t.val[s][1].substring(0,f)),2===t.type&&(l=n[o](t.val[s][0].substring(0,f)))):a?(h=n[o](t.val[s][1]),2===t.type?(l=n[o](t.val[s][0]),t[o].push([l,h])):t[o].push([void 0,h])):(h=t[o][s][1],2===t.type&&(l=t[o][s][0])),c&&(c+=u),r?c+=l+(i||h?"=":"")+h:(s||(c+=n[o](e)+(i||h?"=":"")),2===t.type&&(c+=l+","),c+=h);return c},i.expandUnnamed=function(t,i,r,u,f){var o="",s=i.encode,c,l,h,e,a;for(i=i.empty_name_separator,c=!t[s].length,e=0,a=t.val.length;e<a;e++)f?h=n[s](t.val[e][1].substring(0,f)):c?(h=n[s](t.val[e][1]),t[s].push([2===t.type?n[s](t.val[e][0]):void 0,h])):h=t[s][e][1],o&&(o+=u),2===t.type&&(l=f?n[s](t.val[e][0].substring(0,f)):t[s][e][0],o+=l,o=r?o+(i||h?"=":""):o+","),o+=h;return o},i.noConflict=function(){return t.URITemplate===i&&(t.URITemplate=e),i},u.expand=function(n){var u="",t,f;for(this.parts&&this.parts.length||this.parse(),n instanceof r||(n=new r(n)),t=0,f=this.parts.length;t<f;t++)u+="string"==typeof this.parts[t]?this.parts[t]:i.expand(this.parts[t],n);return u},u.parse=function(){var o=this.expression,h=i.EXPRESSION_PATTERN,l=i.VARIABLE_PATTERN,a=i.VARIABLE_NAME_PATTERN,u=[],s=0,r,n,t,e,c;for(h.lastIndex=0;;){if(n=h.exec(o),null===n){u.push(o.substring(s));break}else u.push(o.substring(s,n.index)),s=n.index+n[0].length;if(!f[n[1]])throw Error('Unknown Operator "'+n[1]+'" in "'+n[0]+'"');if(!n[3])throw Error('Unclosed Expression "'+n[0]+'"');for(r=n[2].split(","),e=0,c=r.length;e<c;e++){if(t=r[e].match(l),null===t)throw Error('Invalid Variable "'+r[e]+'" in "'+n[0]+'"');if(t[1].match(a))throw Error('Invalid Variable Name "'+t[1]+'" in "'+n[0]+'"');r[e]={name:t[1],explode:!!t[3],maxlength:t[4]&&parseInt(t[4],10)}}if(!r.length)throw Error('Expression Missing Variable(s) "'+n[0]+'"');u.push({expression:n[0],operator:n[1],variables:r})}return u.length||u.push(o),this.parts=u,this},r.prototype.get=function(n){var t=this.data,r={type:0,val:[],encode:[],encodeReserved:[]},i;if(void 0!==this.cache[n])return this.cache[n];if(this.cache[n]=r,t="[object Function]"===String(Object.prototype.toString.call(t))?t(n):"[object Function]"===String(Object.prototype.toString.call(t[n]))?t[n](n):t[n],void 0!==t&&null!==t)if("[object Array]"===String(Object.prototype.toString.call(t))){for(i=0,n=t.length;i<n;i++)void 0!==t[i]&&null!==t[i]&&r.val.push([void 0,String(t[i])]);r.val.length&&(r.type=3)}else if("[object Object]"===String(Object.prototype.toString.call(t))){for(i in t)o.call(t,i)&&void 0!==t[i]&&null!==t[i]&&r.val.push([i,String(t[i])]);r.val.length&&(r.type=2)}else r.type=1,r.val.push([void 0,String(t)]);return r},n.expand=function(t,r){var u=new i(t).expand(r);return new n(u)},i})}.call(this),function(){window.Bindings=window.Twine}.call(this),function(){window.ComponentUrl=function(){function n(t){return this.original=null!=t?t:document.location.href,this.original.constructor===n?this.original:void this._parse()}return n.name="ComponentUrl",n.prototype.withoutHash=function(){return this.href.replace(this.hash,"")},n.prototype.withoutHashForIE10compatibility=function(){return this.withoutHash()},n.prototype.hasNoHash=function(){return 0===this.hash.length},n.prototype._parse=function(){var t,n;return(null!=(t=this.link)?t:this.link=document.createElement("a")).href=this.original,n=this.link,this.href=n.href,this.protocol=n.protocol,this.host=n.host,this.hostname=n.hostname,this.port=n.port,this.pathname=n.pathname,this.search=n.search,this.hash=n.hash,this.origin=[this.protocol,"//",this.hostname].join(""),0!==this.port.length&&(this.origin+=":"+this.port),this.relative=[this.pathname,this.search,this.hash].join(""),this.absolute=this.href},n}()}.call(this),function(){window.Common={include:function(n,t){if(!n)return!1;for(var i=0;i<n.length;i++)if(n[i]==t)return!0;return!1},difference:function(n,t){for(var r=[],i=0;i<n.length;i++)n[i]!=t&&r.push(n[i]);return r}}}.call(this),function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t},i=[].slice;window.Link=function(n){function r(n){return this.link=n,this.link.constructor===r?this.link:(this.original=this.link.href,void r.__super__.constructor.apply(this,arguments))}return t(r,n),r.name="Link",r.HTML_EXTENSIONS=["html"],r.allowExtensions=function(){var u,t,n,f;for(t=1<=arguments.length?i.call(arguments,0):[],n=0,f=t.length;f>n;n++)u=t[n],r.HTML_EXTENSIONS.push(u);return r.HTML_EXTENSIONS},r.prototype.shouldIgnore=function(){return this._crossOrigin()||this._anchored()||this._nonHtml()||this._optOut()||this._target()},r.prototype._crossOrigin=function(){return this.origin!==(new ComponentUrl).origin},r.prototype._anchored=function(){var n;return(this.hash&&this.withoutHash())===(n=new ComponentUrl).withoutHash()||this.href===n.href+"#"},r.prototype._nonHtml=function(){return this.pathname.match(/\.[a-z]+$/g)&&!this.pathname.match(new RegExp("\\.(?:"+r.HTML_EXTENSIONS.join("|")+")?$","g"))},r.prototype._optOut=function(){for(var t,n=this.link;!t&&n!==document&&null!==n;)t=null!=n.getAttribute("data-no-turbolink"),n=n.parentNode;return t},r.prototype._target=function(){return 0!==this.link.target.length},r}(ComponentUrl)}.call(this),function(){window.CSRFToken=function(){function n(){}return n.name="CSRFToken",n.get=function(n){var t;return null==n&&(n=document),{node:t=n.querySelector('meta[name="csrf-token"]'),token:null!=t&&"function"==typeof t.getAttribute?t.getAttribute("content"):void 0}},n.update=function(n){var t;return t=this.get(),null!=t.token&&null!=n&&t.token!==n?t.node.setAttribute("content",n):void 0},n}()}.call(this),function(){var r,u,f,e,o,s,h,i,t,c,n,l,a=[].slice,v=[].indexOf||function(n){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===n)return t;return-1};n=null;o=function(){return document.addEventListener("DOMContentLoaded",function(){return triggerEvent("page:change"),triggerEvent("page:update")},!0)};s=function(){if("undefined"!=typeof jQuery)return jQuery(document).on("ajaxSuccess",function(n,t){if(jQuery.trim(t.responseText))return triggerEvent("page:update")})};e=void 0!==window.history.state||navigator.userAgent.match(/Firefox\/2[6|7]/);u=window.history&&window.history.pushState&&window.history.replaceState&&e;window.triggerEvent=function(n,t){var i;return i=document.createEvent("Events"),t&&(i.data=t),i.initEvent(n,!0,!0),document.dispatchEvent(i)};window.triggerEventFor=function(n,t,i){var r;return r=document.createEvent("Events"),i&&(r.data=i),r.initEvent(n,!0,!0),t.dispatchEvent(r)};h=function(n){var t,i;return t=(null!=(i=document.cookie.match(new RegExp(n+"=(\\w+)")))?i[1].toUpperCase():void 0)||"",document.cookie=n+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",t};c="GET"===(l=h("request_method"))||""===l;f=u&&c;r=document.addEventListener&&document.createEvent;r&&(o(),s());t=function(n,t){var i;return i=t.parentNode.replaceChild(n,t),triggerEvent("page:after-node-removed",i)};i=function(n){var t;return t=n.parentNode.removeChild(n),triggerEvent("page:after-node-removed",t)};window.Turbolinks=function(){function r(){}var w,b,k,s,e,d,h,g,nt,tt,it,rt,c,ut,l,u,ft,et,ot,yt,o,st,ht,ct,y,lt,at,vt,p;return r.name="Turbolinks",s=null,e=null,u=null,o=null,tt=function(n,t){return null==t&&(t={}),ft(n)?void 0:(n=new ComponentUrl(n),lt(),null==t.partialReplace&&(t.partialReplace=!1),null==t.onlyKeys&&(t.onlyKeys=[]),t.onLoadFunction=function(){return t.onlyKeys.length||vt(),"function"==typeof t.callback?t.callback():void 0},it(n,t))},r.pushState=function(n,t,i){return window.history.pushState(n,t,i)},r.replaceState=function(n,t,i){return window.history.replaceState(n,t,i)},it=function(t,i){triggerEvent("page:fetch",{url:t.absolute});null!=n&&n.abort();n=new XMLHttpRequest;n.open("GET",t.withoutHashForIE10compatibility(),!0);n.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml");n.setRequestHeader("X-XHR-Referer",o);n.onload=function(){return n.status>=500?document.location.href=t.absolute:r.loadPage(t,n,i)};n.onloadend=function(){return n=null};n.onerror=function(){return document.location.href=t.absolute};n.send()},r.loadPage=function(n,t,i){var r,u;null==i&&(i={});triggerEvent("page:receive");null==i.updatePushState&&(i.updatePushState=!0);(r=ot(t,i.partialReplace))?(i.updatePushState&&st(n),u=k.apply(null,a.call(nt(r)).concat([i])),i.updatePushState&&ht(t),triggerEvent("page:load",u),"function"==typeof i.onLoadFunction&&i.onLoadFunction()):document.location.href=n.absolute},k=function(n,i,r,u,f){var o,s;return null==f&&(f={}),n&&(document.title=n),null==f.onlyKeys&&(f.onlyKeys=[]),null==f.exceptKeys&&(f.exceptKeys=[]),f.onlyKeys.length?(s=[].concat(c(),rt(f.onlyKeys)),o=y(s,i),w(o)&&p(),o):(y(c(),i),et(i),f.exceptKeys.length?ct(f.exceptKeys,i):d(i),triggerEvent("page:before-replace"),t(i,document.body),null!=r&&CSRFToken.update(r),p(),u&&g(),e=window.history.state,triggerEvent("page:change"),triggerEvent("page:update"),void 0)},rt=function(n){var f,r,e,t,i,o,s,u;for(r=[],t=0,o=n.length;o>t;t++)for(f=n[t],u=document.querySelectorAll("[refresh="+f+"]"),i=0,s=u.length;s>i;i++)e=u[i],r.push(e);return r},c=function(){var t,r,n,u,i;for(t=[],i=document.querySelectorAll("[refresh-always]"),n=0,u=i.length;u>n;n++)r=i[n],t.push(r);return t},w=function(n){for(var i,t=0,r=n.length;r>t;t++)if(i=n[t],i.querySelectorAll("input[autofocus], textarea[autofocus]").length>0)return!0;return!1},p=function(){var n,t;return n=(t=document.querySelectorAll("input[autofocus], textarea[autofocus]"))[t.length-1],n&&document.activeElement!==n?n.focus():void 0},d=function(n){var u,t,f,r;for(r=n.querySelectorAll("[refresh-never]"),t=0,f=r.length;f>t;t++)u=r[t],i(u)},y=function(n,r){var f,u,s,c,o,e,l;for(triggerEvent("page:before-partial-replace",n),c=function(t){for(var r,i=0,u=n.length;u>i;i++)if(r=n[i],t!==r&&r.contains(t))return!0;return!1},o=[],e=0,l=n.length;l>e;e++)if(f=n[e],!c(f)){if(!(s=f.getAttribute("id")))throw new Error("Turbolinks refresh: Refresh key elements must have an id.");(u=r.querySelector("#"+s))?(u=u.cloneNode(!0),t(u,f),"SCRIPT"===u.nodeName&&"false"!==u.getAttribute("data-turbolinks-eval")?h(u):o.push(u)):null===f.getAttribute("refresh-always")&&i(f)}return o},l=function(n,i){var u,e,o,r,s,f;for(f=[],r=0,s=i.length;s>r;r++){if(u=i[r],!(e=u.getAttribute("id")))throw new Error("TurboGraft refresh: Kept nodes must have an id.");f.push((o=n.querySelector("#"+e))?t(u,o):void 0)}return f},et=function(n){var i,u,r,t,f;for(i=[],r=document.querySelectorAll("[tg-static]"),t=0,f=r.length;f>t;t++)u=r[t],i.push(u);l(n,i)},ct=function(n,t){var u,e,o,i,r,s,h,f;for(u=[],i=0,s=n.length;s>i;i++)for(e=n[i],f=document.querySelectorAll("[refresh="+e+"]"),r=0,h=f.length;h>r;r++)o=f[r],u.push(o);l(t,u)},g=function(){var t,i,n,r,u;for(i=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])')),n=0,r=i.length;r>n;n++)t=i[n],(""===(u=t.type)||"text/javascript"===u)&&h(t)},h=function(n){var r,t,e,u,i,o,f;for(t=document.createElement("script"),f=n.attributes,i=0,o=f.length;o>i;i++)r=f[i],t.setAttribute(r.name,r.value);t.appendChild(document.createTextNode(n.innerHTML));u=n.parentNode;e=n.nextSibling;u.removeChild(n);u.insertBefore(t,e)},at=function(n){return n.innerHTML=n.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi,""),n},st=function(n){(n=new ComponentUrl(n)).absolute!==o&&r.pushState({turbolinks:!0,url:n.absolute},"",n.absolute)},ht=function(n){var t,i;(t=n.getResponseHeader("X-XHR-Redirected-To"))&&(t=new ComponentUrl(t),i=t.hasNoHash()?document.location.hash:"",r.replaceState(e,"",t.href+i))},lt=function(){return o=document.location.href},r.rememberCurrentUrl=function(){return r.replaceState({turbolinks:!0,url:document.location.href},"",document.location.href)},r.rememberCurrentState=function(){return e=window.history.state},yt=function(n){return window.scrollTo(n.positionX,n.positionY)},vt=function(){return document.location.hash?document.location.href=document.location.href:window.scrollTo(0,0)},ft=function(n){return!triggerEvent("page:before-change",n)},ot=function(n,t){var f,e,o,i,r,h,c;return null==t&&(t=!1),o=function(){var t;return 422===n.status?!1:400<=(t=n.status)&&600>t},c=function(){return n.getResponseHeader("Content-Type")?n.getResponseHeader("Content-Type").match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/):!1},r=function(n){var t,i,f,r,u;for(r=n.querySelector("head").childNodes,u=[],i=0,f=r.length;f>i;i++)t=r[i],null!=("function"==typeof t.getAttribute?t.getAttribute("data-turbolinks-track"):void 0)&&u.push(t.getAttribute("src")||t.getAttribute("href"));return u},f=function(n){var t;return u||(u=r(document)),t=r(n),t.length!==u.length||h(t,u).length!==u.length},h=function(n,t){var r,i,e,u,f;for(n.length>t.length&&(u=[t,n],n=u[0],t=u[1]),f=[],i=0,e=n.length;e>i;i++)r=n[i],v.call(t,r)>=0&&f.push(r);return f},o()||!c()||(i=s(n.responseText),e=f(i),!i||e&&!t)?void 0:i},nt=function(n){var t;return t=n.querySelector("title"),[null!=t?t.textContent:void 0,at(n.querySelector("body")),CSRFToken.get(n).token,"runScripts"]},ut=function(n){var t;if((null!=(t=n.state)?t.turbolinks:void 0))return r.visit(n.target.location.href)},b=function(n){return setTimeout(n,500)},s=function(n){var t;return/<(html|body)/i.test(n)?(t=document.documentElement.cloneNode(),t.innerHTML=n):(t=document.documentElement.cloneNode(!0),t.querySelector("body").innerHTML=n),t.head=t.querySelector("head"),t.body=t.querySelector("body"),t},f?(r.visit=tt,r.rememberCurrentUrl(),r.rememberCurrentState(),b(function(){return window.addEventListener("popstate",ut,!1)})):r.visit=function(n){return document.location.href=n},r}()}.call(this),function(){var r=location.href,i={},n=null,t=[],u=function(u){var e,f;if(location.href!==r&&(i={}),n!=null)e=n(),Bindings.reset(e),Bindings.bind(),n=null;else if(u!=null)for(f=0;f<u.length;f++)Bindings.bind(u[f]);for(f=0;f<t.length;f++){var o=t[f],s=o[0],h=o[1];h(s)}t.length=0;Bindings.refreshImmediately();e!=null&&typeof e.pageLoaded=="function"&&e.pageLoaded()},e,f;window.Page=function(t){n=t;n==null&&(n=function(){return{}})};document.addEventListener("DOMContentLoaded",function(){u()});document.addEventListener("page:load",function(n){u(n.data);r=location.href});$(document).ajaxComplete(function(){Bindings.refresh()});f=[];e=function(n,t){var i,u,r;return n.preventDefault(),u=n.originalEvent.data,i=new Bizweb.Confirm({link:u}),r=i.show(),r.done(function(){for(var u,n=0,r=t.length;r>n;n++)(u=t[n])();return Turbolinks.visit(i.link())}),r.fail(function(){return i.hide()})};Page.onRefresh=function(n,r,u){u==null&&(u=r);r!=null&&Bindings.register(function(){var f=Bindings.contextKey(r,n),arguments=i[f];arguments!=null&&t.push([arguments,u]);i[f]=n})};Page.onChange=function(n,t){if(!$.isFunction(n)||!$.isFunction(t))throw new Error("shouldTriggerCallback and doneCallback must both be functions");return f.push({shouldTriggerCallback:n,doneCallback:t})};Page.setLocation=function(n){window.location.href=n};Page.pushState=function(n){return window.history.pushState({turbolinks:!0,url:n},null,n)};Page.replaceState=function(n){return window.history.replaceState({turbolinks:!0,url:n},null,n)};Page.visit=function(n){window.location=n};Page.refresh=function(n,t){var r,i,u;return null==n&&(n={}),r=n.url?n.url:n.queryParams?(i=$.param(n.queryParams),i?i="?"+i:void 0,location.pathname+i):location.href,n.response?(n.partialReplace=!0,n.onLoadFunction=t,u=n.response,delete n.response,Turbolinks.loadPage(null,u,n)):(n.partialReplace=!0,t&&(n.callback=t),Turbolinks.visit(r,n))};Page.open=function(){return window.open.apply(window,arguments)}}.call(this),function(){Bizweb.Utility={loadAjax:function(n,t,i,r){NProgress.start();r==null&&(r={hide:!0});$.ajax({url:n,success:function(u){var o,h;r.hide&&(Bizweb.Modal.hide(),$(".modal-backdrop.fade.in").remove());r.pushState&&Page.pushState(n);Bindings.unbind($(t).get(0));var o="",c=$(u),s=c.find(t),f=null,e=u.match("<title>(.*?)<\/title>");e!=null&&e.length>0&&(f=e[1]);o=s.length>0?s.html():u;$(t).html(o);f!=null&&f!=""&&$("head title").html(f);h=$(u).find(".section-footer").html();$(".section-footer").html(h);Bindings.bind($(t).get(0));r.pageLoad&&$(document).trigger("page:load");i&&i()}})},getThumb:function(n,t){if(n=="")return"";if(n.startsWith("//")&&(n="http:"+n),t.toLowerCase()=="original")return n.replace("http://","//").replace("https://","//");var i=new URL(n),r=i.pathname+i.search;return Bizweb.routes.domain.thumb+t.toLowerCase()+r},postLink:function(n,t){var i=$("<form>");i.attr("method","post");i.attr("action",n);t==null&&(t=[]);for(param in t)param!=null&pram.length>1&&i.append("<input type='hidden' name='"+param[0]+"' value='"+param[1]+"'");$(document.body).append(i);i.submit()},isNumeric:function(n){return!isNaN(parseFloat(n))&&isFinite(n)},getParameter:function(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))},isMobile:function(){return $(window).width()<855},toggleSidebar:function(){var n=Bindings.context(document.body).navDrawer;Bizweb.Utility.isMobile()?n&&(n.isOpen?n.close():n.open()):($(".page-wrapper").toggleClass("page-minimize"),n&&n.isOpen&&n.close())},hideSidebar:function(){var n=Bindings.context(document.body).navDrawer;Bizweb.Utility.isMobile()?n&&n.isOpen&&n.close():($(".page-wrapper").addClass("page-minimize had-minimize"),n&&n.isOpen&&n.close())},showSidebar:function(){var n=Bindings.context(document.body).navDrawer;Bizweb.Utility.isMobile()?n&&!n.isOpen&&n.open():$(".page-wrapper").removeClass("page-minimize")},toggleMenu:function(){$(".page-wrapper").toggleClass("page-hide-menu")},showMenu:function(){$(".page-wrapper").removeClass("page-hide-menu")},hideMenu:function(){$(".page-wrapper").addClass("page-hide-menu")},getCookie:function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)!=-1)return t.substring(r.length,t.length)}return""},decodeHtml:function(n){return $("<textarea />").html(n).text()},changeUrl:function(n){window.history.pushState(null,null,n)},scrollTo:function(n,t){t||(t="fast");$("html, body").animate({scrollTop:$(n).offset().top},t)}}}.call(this),function(){$(document).on("page:fetch turbograft:remote:init",function(){if(!Bizweb.Loading._noLoading)return Bizweb.Loading.start()});$(document).on("page:load turbograft:remote:always",function(){return Bizweb.Loading._continueLoading?Bizweb.Loading._continue():Bizweb.Loading.stop()});Bizweb.Loading={continueAfterRefresh:function(n){var t;t=this._continueLoading;this._continueLoading=!0;try{return n()}finally{this._continueLoading=t}},withoutLoadingBar:function(n){var t;t=this._noLoading;this._noLoading=!0;try{return n()}finally{this._noLoading=t}},start:function(){NProgress.start()},stop:function(){NProgress.done()},_continue:function(){if(this.loading)return(NProgress.set(NProgress.status),$("body").addClass("is-loading"))}}}.call(this),function(){var n="bizweb-modal",t=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.Modal=function(){function i(i,r){this.show=t(this.show,this);this.modalContainer=$("#"+n);this.node=i;this.options={};r!=null&&(this.options=r)}return i.container=function(){return document.getElementById(n)},i.hide=function(){var n=Bizweb.Modal.container();n!=null&&n.currentModal!=null&&n.currentModal.hide()},i.prototype.onClickHide=function(n){n.preventDefault();Bizweb.Modal.hide()},i.prototype.bindingsContext=function(){return Bindings.childContext(this.node)},i.prototype.show=function(n){if(n==null&&(n={}),n.context==null&&(n.context=this.bindingsContext()),this.modalContainer.length>0&&(this.modalContainer[0].currentModal&&this.modalContainer[0].currentModal.hide(),this.modalContainer[0].currentModal=this),n.content==null){var t=this.node.href;if(t!=null){this.fetchHTML(t,n);return}}n.content!=null?this.modalContainer.html(n.content):this.modalContainer.html(this.node.innerHTML);Bindings.bind(this.modalContainer[0],n.context).refreshImmediately();this.modalContainer.on("click",".close-modal",this.onClickHide);typeof n.onRender=="function"&&n.onRender();this._rebindValidation();this.modalContainer.modal("show");this.isShown=!0;this._focusFirstInput(this.modalContainer)},i.prototype._rebindValidation=function(){var n=this.modalContainer.find("form");n.length!=0&&(n.data("validator",null),$.validator.unobtrusive.parse(document),n.data("unobtrusiveValidation")&&n.validate(n.data("unobtrusiveValidation").options))},i.prototype.hide=function(n){n==null&&(n={});this.isShown&&(this.modalContainer.modal("hide"),this.options.move?$(this.node).append(this.modalContainer.children()):Bindings.unbind(this.modalContainer[0]),this.modalContainer.empty(),this.modalContainer[0].currentModal=null)},i.prototype.fetchHTML=function(n,t){var i=this;t==null&&(t={});$.ajax({url:n,dataType:"html",data:t.data,success:function(n){return i.show({context:t.context,content:n,onRender:t.onRender})}})},i.prototype._focusFirstInput=function(n){return n.find("input:visible:enabled").first().focus()},i.name="Modal",i}()}.call(this),function(){$(document).on("ready page:load",function(){if(!$(".ajax-notification").hasClass("is-visible")){var t=$(".ajax-notification-message"),i=t.hasClass("error"),n=t.text();n!==null&&n!=""&&Bizweb.Flash.display(n,i)}});Bizweb.Flash={error:function(n,t){t==null&&(t=5e3);Bizweb.Flash.display(n,!0,t)},notice:function(n,t){t==null&&(t=3e3);Bizweb.Flash.display(n,!1,t)},display:function(n,t,i){var r=$(".ajax-notification");t!=null&&r.toggleClass("has-errors",t);i==null&&(i=3e3);clearTimeout(i);$(".ajax-notification-message").text(n);r.addClass("is-visible");setTimeout(Bizweb.Flash.hide.bind(this),i)},hide:function(){$(".ajax-notification").removeClass("is-visible");$(".ajax-notification-message").text("")}}}.call(this),function(){$(document).on("focus",":input[editable-placeholder]",function(n){n.target.value===""&&(n.target.value=n.target.placeholder,Bindings.change(n.target))});$(document).on("blur",":input[editable-placeholder]",function(n){n.target.value===n.target.placeholder&&(n.target.value="",Bindings.change(n.target))});Bizweb.Inflection={generateAlias:function(n,t){return n=n.toLowerCase(),n=n.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a"),n=n.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),n=n.replace(/ì|í|ị|ỉ|ĩ/g,"i"),n=n.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),n=n.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),n=n.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),n=n.replace(/đ/g,"d"),n=n.replace(/'|\"|\(|\)|\[|\]/g,""),n=n.replace(/\W+/g,"-"),n.slice(-1)==="-"&&(n=n.replace(/-+$/,"")),n.slice(0,1)==="-"&&(n=n.replace(/^-+/,"")),t&&n.length>t&&(n=n.substring(0,t)),n},pluralize:function(n,t,i){return i||(i=t+"s"),1===n?t:i},pluralizeWithCount:function(n,t,i){var r;return i||(i=t+"s"),r=Bizweb.Inflection.pluralize(n,t,i),n+" "+r}}}.call(this),function(){Bizweb.Form=function(){function n(n,t){$this=$(n);this.$form=$(n);var i=$this.attr("action");$this.submit(function(){var r=$(n).find("[type='submit']"),u=r.html();return r.addClass("disabled").html(Bizweb.LOADING),NProgress.start(),$.ajax({url:i,data:$(n).serialize(),type:"POST",global:!1,success:function(n){Bizweb.Utility.loadAjax(window.location.href,t,function(){n.message?Bizweb.Flash.notice(n.message):Bizweb.Flash.notice("Cập nhật thông tin thành công")})},error:function(n){n.responseJSON&&n.responseJSON.error?Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,"")):Bizweb.Flash.error("Cập nhật thông tin thất bại");r.removeClass("disabled").html(u);NProgress.done()}}),!1})}return n}()}.call(this),function(){var t='<li class="theme-editor-tab">\n  <a class="theme-editor-tab-filename"><\/a>\n  <a class="theme-editor-close-tab">x<\/a>\n<\/li>',i='<li><a class="asset-listing-theme-file" data-asset-key=""><\/a><\/li>',r='<option value=""><\/option>',n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.ThemeAsset=function(){function n(n,t,i,r){this.theme=t;this.key=n.key;this.publicUrl=n.public_url;this.basename=this.key.substr(this.key.indexOf("/")+1);this.oldBasename=this.basename;this.bucketName=this.key.substr(0,this.key.indexOf("/")).replace(/\//g,"").toLowerCase();this.bucket=i[this.bucketName];this.isVersionable()&&(this.versions=[]);r.indexOf(this.key.toLowerCase())!=-1&&(this.isRequired=!0);this.isImage=n.content_type.indexOf("image")!==-1?!0:!1;this.isFlash=n.content_type.indexOf("flash")!==-1?!0:!1;this.version=-1}return n.getNameWithoutType=function(t){var i=n.getBaseName(t);return i.replace("."+n.getType(t),"")},n.getBaseName=function(n){return n.substr(n.indexOf("/")+1)},n.getType=function(n){var i=n.lastIndexOf("."),t="";return i>0&&(t=n.substring(i+1,n.length)),n.toLowerCase().endsWith(".js.bwt")&&(t="js"),n.toLowerCase().endsWith(".css.bwt")&&(t="css"),t},n.prototype.listItem=function(){return $("[data-asset-key='"+this.key+"']")},n.prototype.getType=function(){var t=this.key.lastIndexOf("."),n="";return t>0&&(n=this.key.substring(t+1,this.key.length)),this.key.toLowerCase().endsWith(".js.bwt")&&(n="js"),this.key.toLowerCase().endsWith(".css.bwt")&&(n="css"),n},n.prototype.getNameWithoutType=function(){return this.basename.replace("."+this.getType(),"")},n.prototype.render=function(){var n=$(i);n.children("a").text(this.basename);n.children("a").attr("data-asset-key",this.key);n.children("a").addClass("file-type-"+this.getType());this.bucket.element().children(".asset-listing-list").append(n);switch(this.bucket.key){case"layouts":this.getNameWithoutType()!="theme"&&this._renderAddOption();break;case"locales":this._renderAddOption(!0)}},n.prototype._renderAddOption=function(n){var i=$($("#modal-add-"+this.bucket.key).html()),t=$(r);n?(t.attr("value",this.basename),t.text(this.basename)):(t.attr("value",this.getNameWithoutType()),t.text(this.getNameWithoutType()));i.find("#theme-source-"+this.bucket.key).prepend(t);$("#modal-add-"+this.bucket.key).html(i)},n.prototype.reRender=function(){if(this.oldKey!==null&&this.oldKey!==""){var n=$(".asset-listing-list li a[data-asset-key='"+this.oldKey+"']");n.text(this.basename);n.attr("data-asset-key",this.key);switch(this.bucket.key){case"layouts":this._reRenderAddOption();break;case"locales":this._reRenderAddOption(!0)}}},n.prototype._reRenderAddOption=function(t){var u=$($("#modal-add-"+this.bucket.key).html()),f=u.find("#theme-source-"+this.bucket.key),r,i;t?(r=n.getBaseName(this.oldKey),i=f.find("option[value='"+r+"']"),$(i[0]).attr("value",this.basename),$(i[0]).text(this.basename)):(r=n.getNameWithoutType(this.oldKey),i=f.find("option[value='"+r+"']"),$(i[0]).attr("value",this.getNameWithoutType()),$(i[0]).text(this.getNameWithoutType()));$("#modal-add-"+this.bucket.key).html(u)},n.prototype.destroy=function(){switch(this.bucket.key){case"layouts":this.getNameWithoutType()!="theme"&&this._removeAddOption();break;case"locales":this._removeAddOption(!0)}this.listItem().parent().remove()},n.prototype._removeAddOption=function(n){var t=$($("#modal-add-"+this.bucket.key).html());n?t.find("option[value='"+this.basename+"']").remove():t.find("option[value='"+this.getNameWithoutType()+"']").remove();$("#modal-add-"+this.bucket.key).html(t)},n.prototype.url=function(n,t){var i=Bizweb.routes.themes+"/"+n+"/"+this.theme.id;return t&&(i+="?key="+this.key),i},n.prototype.isVersionable=function(){return this.getType()=="bwt"||this.getType()=="css"||this.getType()=="js"},n.name="ThemeAsset",n}();Bizweb.ThemeEditor=function(){function i(t){var i,r;for(this.search=n(this.search,this),this.assetListClicked=n(this.assetListClicked,this),this.toggleBucket=n(this.toggleBucket,this),this.updateIsDirty=n(this.updateIsDirty,this),this.saveAsset=n(this.saveAsset,this),this.activateNextTab=n(this.activateNextTab,this),this.activatePreviousTab=n(this.activatePreviousTab,this),this.tabsContainer=$("#theme-editor-tabs"),this.codeContainer=$("#code-asset-container").hide(),this.imageContainer=$("#image-asset-container").hide(),this.versionContainer=$(".all-asset-versions").addClass("hide"),this.allVersionLink=$(".show-all-versions-link").hide(),this.theme=t.theme,this.currentTab={},this.newAssetTab="upload",this.buckets=[],this.assets=[],this.tabs=[],this.requiredFiles=t.required_files.map(function(n){return n.toLowerCase()}),this.isLoading=!1,r=0;r<t.buckets.length;r++)i=t.buckets[r],i.key=i.key.toLowerCase(),i.element=function(){return $("#bucket-"+this.key)},i.collapsed&&i.element().addClass("is-collapsed"),i.wasOpen=!i.element().hasClass("is-collapsed"),this.buckets[i.key]=i;for(r=0;r<t.assets.length;r++)this.assets[t.assets[r].key]=new Bizweb.ThemeAsset(t.assets[r],this.theme,this.buckets,this.requiredFiles);$("#asset-search").on("input",this.search);$(document.body).on("click","[data-asset-key]",this.assetListClicked);$(window).on("resize",this.resize);this.resize();this.initializeEditor();this.parseState()}return i.prototype.assetListClicked=function(n){var t=n.currentTarget.getAttribute("data-asset-key");this.assets[t].isImage||this.assets[t].isFlash?this.activateTabForAsset(this.assets[t]):this.getAsset(t,function(n){return this.activateTabForAsset(n)})},i.prototype.search=function(n){var f,t=n.target.value,r,u,i;t!==null&&t!==""&&(f=new RegExp(t,"g"));for(bucketKey in this.buckets)this.buckets[bucketKey].shouldOpen=!1;for(assetKey in this.assets)r=this.assets[assetKey],u=r.listItem(),u.html(r.basename),u.show(),t!==null&&t!==""&&(assetKey.indexOf(t)!==-1?(u.html(r.basename.replace(f,"<strong>"+t+"<\/strong>")),r.bucket.shouldOpen=!0):u.hide());for(bucketKey in this.buckets)i=this.buckets[bucketKey],t!==null&&t!==""?i.element()[i.shouldOpen?"removeClass":"addClass"]("is-collapsed"):i.wasOpen?i.element().removeClass("is-collapsed"):i.element().addClass("is-collapsed")},i.prototype.resize=function(){this.$container==null&&(this.$container=$(".theme-editor-container"));var n=$(window).height();n-=this.$container.offset().top;this.$container[0].style.height=""+n+"px";this.assetContainer==null&&(this.assetContainer=$(".asset-container")[0]);n-=this.assetContainer.offsetTop;n-=1;this.assetContainer.style.height=""+n+"px"},i.prototype.initializeEditor=function(){this.bindKeys({"Ctrl-Space":"autocomplete","Cmd-S":this.saveAsset,"Cmd-O":function(){return $("#asset-search").focus()},"Cmd-Alt-[":this.activatePreviousTab,"Cmd-Alt-]":this.activateNextTab});this.editor=CodeMirror(this.codeContainer[0],{extraKeys:this.extraKeys,lineNumbers:!0,styleActiveLine:!0,mode:"application/x-ejs",htmlMode:!0,indentUnit:4,indentWithTabs:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchTags:{bothTags:!0},autoCloseTags:{whenOpening:!1,whenClosing:!0}});this.editor.setSize("100%","100%");this.editor.on("change",this.updateIsDirty)},i.prototype.parseState=function(){var n=Bizweb.Utility.getParameter("key");n!==null&&n!==""&&this.getAsset(n,function(n){return this.activateTabForAsset(n,!1)})},i.prototype.updateState=function(n){var r=[],t,i;for(t in n)i=n[t],i&&r.push(""+t+"="+i);history.replaceState(n,"","?"+r.join("&"))},i.prototype.bindKeys=function(n){this.extraKeys==null&&(this.extraKeys={});for(key in n)key.indexOf("Cmd")!==-1?this.extraKeys[key.replace("Cmd","Ctrl")]=n[key]:this.extraKeys[key]=n[key]},i.prototype.toggleBucket=function(n){var t=this.buckets[n];t.element().toggleClass("is-collapsed");t.wasOpen=!t.element().hasClass("is-collapsed")},i.prototype.getAsset=function(n,t){var r=this,i=this.assets[n];i&&(i.value==null?$.ajax({type:"GET",url:i.url("assets",!0),contentType:"application/json; charset=utf-8",success:function(n){n.value!=null&&(i.value=n.value);typeof t=="function"&&t.call(r,i)},error:function(){Bizweb.Flash.error("Đã có lỗi xảy ra khiến tệp tin "+i.basename+" không thể tải được nội dung.")}}):typeof t=="function"&&t.call(r,i))},i.prototype.activateTabForAsset=function(n,t){this.showAsset(n);this.tabsContainer.find(".active").removeClass("active");this.currentTab=n;this.updateIsDirty();t||this.updateState({key:n!=null?n.key:void 0});n.tab==null&&this.addTabForAsset(n);n.tab.addClass("active");Bindings.refreshImmediately();this.resize();this.initVersionSelector()},i.prototype.showAsset=function(n){n.bucket.wasOpen||n.bucket.element().removeClass("is-collapsed");n.isImage?(this.imageContainer.find("img").attr("src",n.publicUrl),this.imageContainer.find("embed").attr("src",""),this.imageContainer.find("embed").hide(),this.codeContainer.hide(),this.imageContainer.show()):n.isFlash?(this.imageContainer.find("embed").attr("src",n.publicUrl),this.imageContainer.find("embed").show(),this.imageContainer.find("img").attr("src",""),this.codeContainer.hide(),this.imageContainer.show()):(this.imageContainer.hide(),this.codeContainer.show(),(n.value===null||typeof n.value=="undefined")&&(n.value=""),n.doc==null&&(n.doc=CodeMirror.Doc(n.value,this.getModeForAsset(n))),this.editor.swapDoc(n.doc),this.editor.focus())},i.prototype.getModeForAsset=function(n){return n.mode==null&&(n.mode=n.getType()==="json"||n.getType()==="js"||n.key.endsWith(".js.bwt")?"javascript":n.getType()==="css"||n.key.endsWith(".css.bwt")||n.getType()==="scss"||n.key.endsWith(".scss.bwt")?"css":n.key.endsWith("bwt")?"htmlmixedliquid":"application/x-ejs"),n.mode},i.prototype.addTabForAsset=function(n){var i=this;n.tab=$(t);n.tab.data("asset",n);n.tab.on("click",function(){return i.activateTabForAsset(n)});n.tab.find(".theme-editor-close-tab").on("click",function(){return i.closeTabForAsset(n)});n.tab.find(".theme-editor-tab-filename").text(n.basename);this.tabsContainer.append(n.tab);this.tabs.indexOf(n)&&this.tabs.push(n)},i.prototype.closeTabForAsset=function(n){var t=n.tab.prev(),i;t.length===0&&(t=n.tab.next());i=t.data("asset");this.removeTabForAsset(n);delete n.value;delete n.doc;i!=null?this.activateTabForAsset(i):(this.currentTab={},this.codeContainer.hide(),this.imageContainer.hide(),Bindings.refreshImmediately());this.currentTab.selectHtml=""},i.prototype.removeTabForAsset=function(n){this.tabs.splice(this.tabs.indexOf(n),1);n.tab.removeData();n.tab.remove();n.tab=null},i.prototype.activateNextTab=function(){var n=this.tabs.indexOf(this.currentTab)+1;n>=this.tabs.length&&(n=0);this.activateTabForAsset(this.tabs[n])},i.prototype.activatePreviousTab=function(){var n=this.tabs.indexOf(this.currentTab)-1;n<0&&(n=this.tabs.length-1);this.activateTabForAsset(this.tabs[n])},i.prototype.saveAsset=function(){var n,i,r,t;this.currentTab.isDirty&&(n=this,i=this.currentTab,this.currentTab&&(r=this.currentTab.doc.getValue()),t={theme_id:this.currentTab.theme.id,key:this.currentTab.key,value:r},$.ajax({type:"POST",url:i.url("UpdateAssets",!0),contentType:"application/json; charset=utf-8",data:JSON.stringify(t),dataType:"json",success:function(i){if(i.error!=null){Bizweb.Flash.error(i.error);return}n.currentTab.version>=0&&(n.currentTab.version=0,n.currentTab.versions[0].doc=n.currentTab.doc,n.getAllVersions(),$("<select class='select-all-asset-versions'><\/select>").val(0));n.currentTab.value=t.value;n.updateIsDirty();Bizweb.Flash.notice("Nội dung chỉnh sửa đã được lưu.")},error:function(t){if(n.updateIsDirty(),typeof t.responseJSON=="undefined"){Bizweb.Flash.error("Đã xảy ra lỗi khiến quá trình lưu tài nguyên thất bại.");return}t.responseJSON.error!==null&&t.responseJSON.error!==""&&Bizweb.Flash.error(t.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""))}}))},i.prototype.renameAsset=function(n){var t=this;$.ajax({type:"POST",url:n.url("RenameAssets",!0),data:{key:n.key,newName:n.basename},dataType:"json",success:function(){var i=""+n.bucketName+"/"+n.basename;n.oldBasename=n.basename;t.assets[i]=n;t.assets[n.key]=null;n.oldKey=n.key;n.key=i;n.reRender();n.tab.find(".theme-editor-tab-filename").text(n.basename);t.updateState({key:n!=null?n.key:void 0})},error:function(n){if(t.currentTab.basename=t.currentTab.oldBasename,typeof n.responseJSON=="undefined"){Bizweb.Flash.error("Đã xảy ra lỗi khiến quá trình đổi tên tài nguyên thất bại.");return}n.responseJSON.error!==null&&n.responseJSON.error!==""&&Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""))}})},i.prototype.deleteAsset=function(){this.isLoading=!0;var n=this,t=this.currentTab;$.ajax({type:"POST",url:t.url("DeleteAssets",!0),contentType:"application/json; charset=utf-8",complete:function(){n.isLoading=!1;Bizweb.Modal.hide()},success:function(){n.closeTabForAsset(t);t.destroy();n.assets[t.key]=null;delete n.assets[t.key];Bizweb.Flash.notice("Tài nguyên giao diện đã bị xóa.");n.updateState({key:""})},error:function(n){if(typeof n.responseJSON=="undefined"){Bizweb.Flash.error("Đã xảy ra lỗi khiến quá trình xóa tài nguyên thất bại.");return}n.responseJSON.error!==null&&n.responseJSON.error!==""&&Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""))}})},i.prototype.createAsset=function(n,t){this.isLoading=!0;var i=this,u=!0,f="application/json; charset=utf-8",r=jQuery.extend({},this[n]);if(this.newAsset!=null&&this.newAssetTab==="upload"){if(r.file===null)return;r=r.file;f=!1;u=!1}else this.prepareDataForCreateAsset(r,t),r=JSON.stringify(r);$.ajax({type:"POST",url:Bizweb.routes.themes+"/AddAssets/"+i.theme.id,contentType:f,processData:u,data:r,complete:function(){i[n]=null;i.isLoading=!1;Bizweb.Modal.hide()},success:function(n){i.assets[n.key]=new Bizweb.ThemeAsset(n,i.theme,i.buckets,i.requiredFiles);i.assets[n.key].render();i.getAsset(n.key,function(n){return this.activateTabForAsset(n)});Bizweb.Flash.notice("Thêm tài nguyên thành công.")},error:function(n){if(typeof n.responseJSON=="undefined"){Bizweb.Flash.error("Đã xảy ra lỗi khiến quá trình thêm tài nguyên thất bại.");return}n.responseJSON.error!==null&&n.responseJSON.error!==""&&Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""))}})},i.prototype.prepareDataForCreateAsset=function(n,t){if(n.themeId=this.theme.id,t.bucket!=null)switch(t.bucket){case"layouts":case"templates":if(n.isDuplicate){if(n.key===null||n.key==="")return!1;n.key=""+t.bucket+"/"+n.sourceKey+"."+n.key+"."+Bizweb.config.theme_extension;n.sourceKey=""+t.bucket+"/"+n.sourceKey+"."+Bizweb.config.theme_extension}else n.key=""+t.bucket+"/"+n.sourceKey+"."+Bizweb.config.theme_extension,delete n.sourceKey;break;case"snippets":n.key=""+t.bucket+"/"+n.key+"."+Bizweb.config.theme_extension;break;case"assets":n.key=""+t.bucket+"/"+n.key+n.extension;break;case"locales":if(n.isDuplicate){if(n.key===null||n.key==="")return!1;n.key=""+t.bucket+"/"+n.key+".json";n.sourceKey=""+t.bucket+"/"+n.sourceKey}else n.key=""+t.bucket+"/"+n.key+".json",delete n.sourceKey;n.value="{\n}"}if(!n.key)return!1},i.prototype.updateIsDirty=function(){this.currentTab.doc!=null&&(this.currentTab.isDirty=this.currentTab.doc.getValue()!==this.currentTab.value?!0:!1);this.currentTab.isDirty?$("#save-button").removeClass("disabled"):$("#save-button").addClass("disabled")},i.prototype.updateNewLayoutModal=function(n,t){typeof t!="undefined"&&t.keyCode==13&&$(n).closest(".modal-dialog").find(".btn-add:not(.disabled)").click();this.newLayout==null&&(this.newLayout={});this.newLayout.isDuplicate=this.assets["Layouts/"+this.newLayout.sourceKey+"."+Bizweb.config.theme_extension]!=null||this.assets["layouts/"+this.newLayout.sourceKey+"."+Bizweb.config.theme_extension]!=null||this.assets["Layouts/"+this.newLayout.sourceKey.toLowerCase()+"."+Bizweb.config.theme_extension]!=null||this.assets["layouts/"+this.newLayout.sourceKey.toLowerCase()+"."+Bizweb.config.theme_extension]!=null?!0:!1;this.newLayout.isDuplicate&&(this.newLayout.key===null||this.newLayout.key==="")?$("#create-layout-button").addClass("disabled"):$("#create-layout-button").removeClass("disabled")},i.prototype.updateNewTemplateModal=function(n,t){typeof t!="undefined"&&t.keyCode==13&&$(n).closest(".modal-dialog").find(".btn-add:not(.disabled)").click();this.newTemplate==null&&(this.newTemplate={});this.newTemplate.sourceKey=$("#theme-source-templates").val();this.newTemplate.key=$("#theme-key-templates").val();this.newTemplate.isDuplicate=this.assets["Templates/"+this.newTemplate.sourceKey+"."+Bizweb.config.theme_extension]!=null||this.assets["templates/"+this.newTemplate.sourceKey+"."+Bizweb.config.theme_extension]!=null||this.assets["Templates/"+this.newTemplate.sourceKey.toLowerCase()+"."+Bizweb.config.theme_extension]!=null||this.assets["templates/"+this.newTemplate.sourceKey.toLowerCase()+"."+Bizweb.config.theme_extension]!=null?!0:!1;this.newTemplate.isDuplicate&&(this.newTemplate.key===null||this.newTemplate.key==="")?$("#create-template-button").addClass("disabled"):$("#create-template-button").removeClass("disabled")},i.prototype.updateNewSnippetModal=function(n,t){typeof t!="undefined"&&t.keyCode==13&&$(n).closest(".modal-dialog").find(".btn-add:not(.disabled)").click();this.newSnippet==null&&(this.newSnippet={});this.newSnippet.key=$("#theme-key-snippets").val();this.newSnippet.key===null||this.newSnippet.key===""?$("#create-snippet-button").addClass("disabled"):$("#create-snippet-button").removeClass("disabled")},i.prototype.updateNewAssetModal=function(n,t){typeof t!="undefined"&&t.keyCode==13&&$(n).closest(".modal-dialog").find(".btn-add:not(.disabled)").click();this.newAsset==null&&(this.newAsset={});this.newAssetTab!=="upload"?(this.newAsset.key=$("#theme-key-assets").val(),this.newAsset.extension=$("#theme-extension-assets").val(),this.newAsset.key==null||this.newAsset.key==""?$("#create-asset-button").addClass("disabled"):$("#create-asset-button").removeClass("disabled")):this.newAsset.file==null?$("#create-asset-button").addClass("disabled"):$("#create-asset-button").removeClass("disabled")},i.prototype.updateNewLocaleModal=function(n,t){typeof t!="undefined"&&t.keyCode==13&&$(n).closest(".modal-dialog").find(".btn-add:not(.disabled)").click();this.newLocale==null&&(this.newLocale={});this.newLocale.isDuplicate=this.newLocale.sourceKey!=="scratch"?!0:!1;this.newLocale.key===null||this.newLocale.key===""?$("#create-locale-button").addClass("disabled"):$("#create-locale-button").removeClass("disabled")},i.prototype.activeNewAssetTab=function(n){this.newAssetTab=n;this.updateNewAssetModal()},i.prototype.fileInputChanged=function(n){if(this.newAsset.file=null,n.files!=null&&n.files[0]!=null){var t=new FormData;t.append("key","assets/"+n.files[0].name);t.append("upload",n.files[0]);t.append("theme_id",this.theme.id);this.newAsset.file=t}this.updateNewAssetModal()},i.prototype.showModal=function(n){this.newAssetTab="upload";this["new"+n]=null;this[n].show();var t="updateNew"+n+"Modal";typeof this[t]=="function"&&this[t]()},i.prototype.initVersionSelector=function(){var n,t;if(this.allVersionLink.hide(),$(".select-all-asset-versions").remove(),this.currentTab.isVersionable())if(this.currentTab.versions[0]={},this.currentTab.versions[0].doc=this.currentTab.doc,this.currentTab.version>=0&&this.currentTab.selectHtml){n=$("<select class='select-all-asset-versions'><\/select>");n.append(this.currentTab.selectHtml);n.val(this.currentTab.version);t=this;n.on("change",function(){return t.chooseAssetVersion()});this.versionContainer.prepend(n);this.versionContainer.removeClass("hide")}else this.versionContainer.addClass("hide"),this.allVersionLink.show();else this.versionContainer.addClass("hide")},i.prototype.getAllVersions=function(){this.currentTab.version=0;var n=this,t=this.currentTab.key;$.ajax({type:"GET",url:"/admin/themes/GetAllAssetVersions",data:{themeId:this.currentTab.theme.id,key:this.currentTab.key},contentType:"application/json; charset=utf-8",success:function(t){n.renderVersionSelector(t)},error:function(){Bizweb.Flash.error("Đã có lỗi xảy ra")}})},i.prototype.renderVersionSelector=function(n){var r,i,t;for($(".select-all-asset-versions").remove(),r=this,i=$("<select class='select-all-asset-versions'><\/select>"),i.append($('<option value="0">Hiện tại<\/option>')),t=0;t<n.length;t++)i.append($("<option value="+n[t].id+">"+(n.length-t)+" - "+n[t].created_on+"<\/option>"));i.on("change",function(){return r.chooseAssetVersion()});this.versionContainer.prepend(i);this.versionContainer.removeClass("hide");$(".show-all-versions-link").hide();this.currentTab.selectHtml=$(".select-all-asset-versions").html()},i.prototype.chooseAssetVersion=function(){this.currentTab.versions[0].value=this.currentTab.value;var n=this,t=$(".select-all-asset-versions option:selected").val();if(t==0){this.chooseOriginAsset();this.updateIsDirty();return}this.currentTab.versions==null&&(this.currentTab.versions=[]);this.currentTab.versions[t]!=null&&this.currentTab.versions[t].value!=null?(this.currentTab.version=t,this.currentTab.doc=CodeMirror.Doc(this.currentTab.versions[t].value,n.getModeForAsset(n.currentTab)),this.editor.swapDoc(this.currentTab.doc),this.editor.focus(),this.updateIsDirty()):$.ajax({type:"GET",url:"/admin/themes/GetDetailAssetVersion",data:{themeId:this.currentTab.theme.id,key:this.currentTab.key,version:t},contentType:"application/json; charset=utf-8",success:function(t){n.currentTab.version=t.id;n.currentTab.versions[t.id]=t;n.currentTab.doc=CodeMirror.Doc(t.value,n.getModeForAsset(n.currentTab));n.editor.swapDoc(n.currentTab.doc);n.currentTab.selectHtml=$(".select-all-asset-versions").html();n.editor.focus();n.updateIsDirty()},error:function(){Bizweb.Flash.error("Đã có lỗi xảy ra")}})},i.prototype.chooseOriginAsset=function(){this.currentTab.version=0;this.currentTab.doc=CodeMirror.Doc(this.currentTab.value,this.getModeForAsset(this.currentTab));this.editor.swapDoc(this.currentTab.doc);this.editor.focus();this.currentTab.selectHtml=$(".select-all-asset-versions").html()},i.prototype.cancelAllVersions=function(){this.chooseOriginAsset();this.currentTab.version=-1;$(".select-all-asset-versions").remove();$(".show-all-versions-link").show();this.versionContainer.addClass("hide")},i.name="ThemeEditor",i}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.Remote=function(){function t(t,i,r,u){this.ajaxOptions=null!=t?t:{};this.refreshOnSuccess=i;this.refreshOnError=r;this.fullRefresh=null!=u?u:!1;this.submit=n(this.submit,this)}return t.prototype.submit=function(){NProgress.start();var n=$.ajax(this.ajaxOptions);n.always(function(){return NProgress.done()});n.done(function(n){return function(t,i,r){var f,e,u;return(f=r.getResponseHeader("X-Next-Redirect"))?void Page.visit(f,{reload:!0}):(null!=(e=n.ajaxOptions.done)&&e.apply(null,arguments),u=n.refreshOnSuccess?n.refreshOnSuccess.split(" "):[],n.fullRefresh?Page.refresh({onlyKeys:u}):"false"!==n.refreshOnSuccess?Page.refresh({response:r,onlyKeys:u}):void 0)}}(this));n.fail(function(n){return function(t,i,r){var u;return null!=(u=n.ajaxOptions.fail)&&u.apply(null,arguments),"false"!==n.refreshOnError?n.refreshOnError?Page.refresh({response:t,onlyKeys:n.refreshOnError.split(" ")}):Bizweb.handleError(t,i,r):void 0}}(this))},t}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};$(document).on("keypress","form[no-submit-on-enter] input",function(n){if(13===n.which)return n.preventDefault()});$(document).on("keydown","form[submit-on-cmd-enter] input",function(n){if(n.which===13)return n.metaKey||n.ctrlKey?this.form.submit():n.preventDefault()});$(document).on("keypress",".click-on-enter",function(n){if(13===n.which)return $(n.target).click()});Page.onChange(function(){return Bizweb.Forms._dirtyForm},function(){return Bizweb.Forms._dirtyForm=!1});$(document).on("submit","form[ajax]",function(n){n.preventDefault();var t=$(n.target),i=t.serialize(),r={type:t.attr("method"),url:t.attr("action"),data:i,dataType:"html",fail:function(){return t.trigger("fail",arguments)},done:function(){return t.trigger("done",arguments)}},u=new Bizweb.Remote(r,t.attr("refresh-on-success"),t.attr("refresh-on-error"));u.submit()});Bizweb.Forms=function(){function t(t,i){this.opts=null!=i?i:{};this.stopLoading=n(this.stopLoading,this);this.startLoading=n(this.startLoading,this);this.submit=n(this.submit,this);this._updateDirtyState=n(this._updateDirtyState,this);this._updateDirty=n(this._updateDirty,this);this.bindingsFinished=n(this.bindingsFinished,this);this.$form=$(t);this.$primaryButtons=this.$form.find(this.PRIMARY_BUTTON_SELECTOR);(null!=t?t.id:void 0)&&(this.$primaryButtons=this.$primaryButtons.add(".js-btn-primary[form='"+t.id+"']"));this.$loadableButtons=this.$form.find(this.LOADABLE_BUTTON_SELECTOR);(null!=t?t.id:void 0)&&(this.$loadableButtons=this.$loadableButtons.add(".js-btn-loadable[form='"+t.id+"']"));this.$loadableButtons.addClass("has-loading");this.$form.on("input change paste bindings:change",this._updateDirty);this.$form.on("submit",this.submit);this.$form.on("fail done",this.stopLoading);this.opts.disabledUntilDirty&&this.$primaryButtons.addClass("disabled").attr("disabled","disabled");this.opts.observer&&this.opts.observer.register(this,this.$form);Twine.afterBound(this.bindingsFinished)}return t.prototype.PRIMARY_BUTTON_SELECTOR="a.js-btn-primary, input.js-btn-primary, button.js-btn-primary",t.prototype.LOADABLE_BUTTON_SELECTOR="a.js-btn-loadable, input.js-btn-loadable, button.js-btn-loadable, select.js-btn-loadable",t._dirtyForm=!1,t.withIgnoreUnsavedChanges=function(n){var t;return t=this._dirtyForm,this._dirtyForm=!1,n.call(),this._dirtyForm=t},t.makeClean=function(){return this._dirtyForm=!1},t.prototype.bindingsFinished=function(){return this.resetDirtyTracking(),this.opts.startDirty?this.makeDirty():void 0},t.prototype._getInputValues=function(){var n;return n=this.$form.find("input, select, textarea").not(".js-no-dirty"),_.map(n,function(n){var t;return"checkbox"===(t=n.type)||"radio"===t?{value:n.checked,disabled:n.disabled}:{value:n.value,disabled:n.disabled}})},t.prototype._alertIfFormDirty=function(){return Bizweb.Forms._dirtyForm=!0},t.prototype._updateDirty=function(n){var i,t;t=n.target;t.classList.contains("js-no-dirty")||("form"===(i=t.nodeName.toLowerCase())||"input"===i||"textarea"===i||"select"===i)&&("hidden"!==t.type||null!=$(t).data("dirty-trigger"))&&(null==this.debounceValidate&&(this.debounceValidate=_.debounce(this._updateDirtyState,10,{leading:!0,trailing:!0})),this.debounceValidate())},t.prototype._updateDirtyState=function(){return this._matchEnabledValues(this._getInputValues(),this.initialValues)?this.makeClean():this.makeDirty()},t.prototype._matchEnabledValues=function(n,t){return _.size(n)!==_.size(t)?!1:_(n).zip(t).every(function(n){var i,t;return t=n[0],i=n[1],t.disabled||t.value===i.value})},t.prototype.makeDirty=function(){return this.isDirty=!0,this.opts.alertUnsavedChanges&&this._alertIfFormDirty(),this.disabled?void 0:(this.$primaryButtons.addClass("btn-primary"),this.$primaryButtons.removeClass("disabled").removeAttr("disabled","disabled"))},t.prototype.makeClean=function(){return this.isDirty=!1,Bizweb.Forms._dirtyForm=!1,this.$primaryButtons.removeClass("btn-primary"),this.opts.disabledUntilDirty?this.$primaryButtons.addClass("disabled").attr("disabled","disabled"):void 0},t.prototype.resetDirtyTracking=function(){return this.makeClean(),this.initialValues=this._getInputValues()},t.prototype.enable=function(){return this.disabled=!1,this.isDirty?this.makeDirty():void 0},t.prototype.disable=function(){return this.disabled=!0,this.$primaryButtons.removeClass("btn-primary"),this.$primaryButtons.addClass("disabled").attr("disabled","disabled")},t.prototype.submit=function(n){if(this.$form.valid()){var t,i;return Bizweb.Forms._dirtyForm=!1,i=null!=(t=this.opts.submit)?t.apply(this,arguments):void 0,(null!=n?n.isImmediatePropagationStopped():void 0)||this.startLoading(),i}},t.prototype.startLoading=function(n){var t;return t=this.$loadableButtons,(null!=n?n.loadingElements:void 0)&&(t=n.loadingElements),NProgress.start(),t.attr("disabled","disabled").addClass("is-loading")},t.prototype.stopLoading=function(n){var t;return t=this.$loadableButtons,(null!=n?n.loadingElements:void 0)&&(t=n.loadingElements),NProgress.done(),t.removeAttr("disabled").removeClass("is-loading")},t.prototype.disableHiddenInputs=function(){return this.$form.find(".disable-inputs-when-hidden:visible :input").prop("disabled",!1),this.$form.find(".disable-inputs-when-hidden:not(:visible) :input").prop("disabled","disabled")},t}()}.call(this),function(){Bizweb.EditProduct=function(){function n(n,t){if(this.aviary=new Bizweb.AviaryEditor,t)for(var i in t)this[i]=t[i];$(".variantOperations input[type='text']").on("focus",function(){$(this).select().mouseup(function(n){n.preventDefault()})});this.initializeSortable()}return n.prototype.submitFormCreateOrEditProduct=function(n){var l,e,u,f,r,s,t,i;if($("#frm-create-edit-product").valid())if(l=this,this.id==0){if(this.uploadImages!=null&&this.uploadImages.length>0){var e=[],o=[],h=$(".product-photo-item");for(t=0;t<h.length;t++){var a=$(h[t]).attr("id"),v=$(h[t]).find("img"),i=$(v).attr("alt"),y=l.getIndexImageByIdElement(a),s=this.uploadImages[y].File,c={};c.File=s;i==undefined?(i="",c.Alt=null):c.Alt=i;o.push(i);e.push(s)}$("#fileUpload").remove()}else e=[];for(u=$("#frm-create-edit-product").serializeArray(),f=new FormData,r=0;r<u.length;++r)if(u[r].name=="mediaImages")break;else f.append(u[r].name,u[r].value);for(t=0;t<e.length;t++)s=e[t],f.append("mediaImages",s);if(o!=undefined)for(t=0;t<o.length;t++)i=o[t],f.append("alts",i);NProgress.start();$.ajax({url:"/admin/products/create",type:"POST",data:f,contentType:!1,processData:!1,global:!1,success:function(t){var r=t.id,i;r>0?(i=Bizweb.routes.products+"/",n=="save"?i+=r:n=="saveAndCreate"&&(i+="create"),Bizweb.Utility.loadAjax(i,".page-content",function(){Bizweb.Flash.notice("Thêm sản phẩm thành công");Bizweb.Utility.changeUrl(i);initializeDatetimePicker()})):Bizweb.Flash.error("Thêm sản phẩm thất bại")},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));NProgress.done()}})}else NProgress.start(),$.ajax({url:Bizweb.routes.products+"/"+this.id,type:"POST",global:!1,data:$("#frm-create-edit-product").serialize(),success:function(n){var t=n.id;t>0?Bizweb.Utility.loadAjax(Bizweb.routes.products+"/"+t,".page-content",function(){Bizweb.Utility.changeUrl(Bizweb.routes.products+"/"+t);Bizweb.Flash.notice("Cập nhật sản phẩm thành công");initializeDatetimePicker()}):n.error?Bizweb.Flash.error(n.error):Bizweb.Flash.error("Cập nhật sản phẩm thất bại")},error:function(n){var t=JSON.parse(n.responseText);Bizweb.Flash.error(t.error);NProgress.done()}})},n.prototype.getIndexImageByIdElement=function(n){for(var i,t=0;t<this.uploadImages.length;t++)if(i=this.uploadImages[t],i.IdImageElement==n)return t;return 0},n.prototype.showModal=function(n){this[n].show()},n.prototype.showReOrderOptionModel=function(){this.showModal("reOrderOptionModel");$(".dragable-option").sortable({handle:".dragable-option-item",axis:"y",update:function(){$(".modal-footer .btn-add").removeClass("disabled");$(".option-item").each(function(n){var t=$(this).find(".product-option-sort");t.val(n)});$(".list-option-value").each(function(n){$(this).removeClass("option"+$(this).attr("option"));$(this).addClass("option"+(n+1));$(this).attr("option",n+1)})}});$(".dragable-option-value").sortable({update:function(){$(".modal-footer .btn-add").removeClass("disabled")}})},n.prototype.reOrderOption=function(){var t=this,n=$(".form-reorder-option").parents(".modal-content").find(".btn-add");n.addClass("disabled").html(Bizweb.LOADING);NProgress.start();$.ajax({url:$(".form-reorder-option").attr("action"),type:"POST",global:!1,data:$(".form-reorder-option").serialize(),success:function(){Bizweb.Utility.loadAjax(Bizweb.routes.products+"/"+t.id,"#editProduct",function(){Bizweb.Flash.notice("Cập nhật thành công")})},error:function(){n.removeClass("disabled").html("Cập nhật");NProgress.done()}})},n.prototype.previewImage=function(n){this.previewProductImageModal.show();$(".product-image-show").attr("src",n)},n.prototype.showEditImageAlt=function(n,t,i){this.editProductImageAltModal.show();$(".product-image-modal").attr("src",n);var r=$("#product-image-"+t+" img").attr("alt");r=="null"&&(r="");$('.form-edit-product-image-alt input[name="alt"]').val(r);$('.form-edit-product-image-alt input[name="productId"]').val(i);$('.form-edit-product-image-alt input[name="productImageId"]').val(t)},n.prototype.editProductImageAlt=function(){var n=$('.form-edit-product-image-alt input[name="productImageId"]').val(),i=$('.form-edit-product-image-alt input[name="alt"]').val(),t=this;n>0?$.ajax({url:"/admin/products/UpdateProductImageAlt",type:"POST",data:$(".form-edit-product-image-alt").serialize(),success:function(i){$("#product-image-"+n+" img").attr("alt",i.alt);t.editProductImageAltModal.hide();Bizweb.Flash.notice("Sửa ảnh sản phẩm thành công")}}):($("#product-image-"+n+" img").attr("alt",i),t.editProductImageAltModal.hide())},n.prototype.showUploadImageFromUrlModal=function(n){this.uploadImageFromUrlModal.show();$('.form-upload-product-image-from-url input[name="productId"]').val(n)},n.prototype.uploadImageFromUrl=function(){var n=this,t=$(".form-upload-product-image-from-url input[name=src]").val();n.isUrlValid(t)?$.ajax({url:"/admin/products/UploadProductImageFromUrl",type:"POST",data:$(".form-upload-product-image-from-url").serialize(),success:function(t){var u=$("#product-images"),r,i;t.src!=null?(r=n.generateAddedImage(t.src,t.alt,t.id),i=$(r),u.append(i),Bindings.bind(i[0],n),n.uploadImageFromUrlModal.hide(),$(".no-image-found").addClass("hide"),Bizweb.Flash.notice("Upload ảnh sản phẩm thành công")):Bizweb.Flash.error("Upload ảnh sản phẩm không thành công")}}):Bizweb.Flash.error("Đường dẫn ảnh không hợp lệ")},n.prototype.isUrlValid=function(n){var t=new RegExp("^(http://www.|https://www.|http://|https://)[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?$");return t.test(n)?!0:!1},n.prototype.showDeleteProductImageModal=function(n,t){this.deleteProductImageModal.show();$('.form-delete-product-image input[name="productId"]').val(n);$('.form-delete-product-image input[name="productImageId"]').val(t)},n.prototype.deleteProductImage=function(){var e=$('.form-delete-product-image input[name="productId"]').val(),n=$('.form-delete-product-image input[name="productImageId"]').val(),t,i,r,u,f;if(n>0)deleteImage(e,n);else{if(this.uploadImages.length<=0)return;t=this.getRemoveImageIndex(n);this.uploadImages.splice(t,1);i=$("#product-image-"+n);i.remove();r=$("#fileUpload")[0].files.length;r==1&&$("#fileUpload").val("");u=this.uploadImages.length;$("#uploaded-images").html("Đã chọn "+u+" ảnh sản phẩm");Bizweb.Flash.notice("Xóa ảnh sản phẩm thành công");Bizweb.Modal.hide()}f=$(".product-photo-item");f.length==0?$(".no-image-found").removeClass("hide"):$(".no-image-found").addClass("hide")},n.prototype.getRemoveImageIndex=function(n){for(var i,t=0;t<this.uploadImages.length;t++)if(i=this.uploadImages[t],i.Position==n)return t;return 0},n.prototype.createMultiImages=function(n,t,i){var f=this,u,e,r,o;if(!(t.length<=0)){for(u=new FormData,r=0;r<t.length;r++)e=t[r],u.append("mediaImages",e);if(i!=undefined)for(r=0;r<i.length;r++)o=i[r],u.append("alts",o);u.append("productId",n);NProgress.start();$.ajax({type:"POST",url:"/admin/products/Upload",data:u,global:!1,contentType:!1,processData:!1,success:function(t){Bizweb.Utility.loadAjax(Bizweb.routes.products+"/"+n,".product-list-image",function(){t.message?Bizweb.Flash.notice(t.message):Bizweb.Flash.notice("Cập nhật thành công");f.initializeSortable()})},error:function(t){Bizweb.Utility.loadAjax(Bizweb.routes.products+"/"+n,".product-list-image",function(){t.responseJSON?Bizweb.Flash.error(t.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,"")):Bizweb.Flash.error("Cập nhật thất bại");f.initializeSortable()})}})}},n.prototype.uploadMultiImages=function(n){var f=this,a,v,i,h,o,l,t,r,c,e,s,u,y,p;if(n>0){for(a=[],i=$("#fileUpload")[0].files,t=0;t<i.length;t++)r=i[t],u={},u.File=r,u.Alt="",a.push(u);f.createMultiImages(n,i)}else{if(v=$("#product-images"),i=$("#fileUpload")[0].files.length,i<=0)return;for(this.uploadImages==null&&(this.uploadImages=[]),this.lastIndexImage==null&&(this.lastIndexImage=0),this.lastPosition=this.lastIndexImage,h=["jpg","png","gif","jpeg"],o=[],t=0;t<i;t++){var r=document.getElementById("fileUpload").files[t],c=r.size,e=r.name;c<=1048576?(s=e.substr(e.lastIndexOf(".")+1),$.inArray(s.toLowerCase(),h)!=-1&&(l=new FileReader,l.onload=function(n){var i=f.generateAddedImage(n.target.result,"",-f.lastIndexImage),t=$(i);v.append(t);Bindings.bind(t[0],f);f.lastIndexImage++},l.readAsDataURL(r))):o.push(e)}for(o.length>0&&Bizweb.Flash.error("Ảnh "+o.join(", ")+" vượt quá 1 MB"),i.length>0&&$(".no-image-found").addClass("hide"),t=0;t<i;t++)r=document.getElementById("fileUpload").files[t],c=r.size,c<=1048576&&(e=r.name,s=e.substr(e.lastIndexOf(".")+1),$.inArray(s.toLowerCase(),h)!=-1&&(u={},u.File=r,u.Position=-f.lastPosition,u.IdImageElement="product-image-"+-f.lastPosition,this.uploadImages.push(u),f.lastPosition++));y=this.uploadImages.length;$("#uploaded-images").html("Đã chọn "+y+" ảnh sản phẩm");p=$(".product-photo-item");$(p).length==0&&this.uploadImages.length==0?$(".no-image-found").removeClass("hide"):$(".no-image-found").addClass("hide")}$("#fileUpload").val("")},n.prototype.generateAddedImage=function(n,t,i,r){var u,f;return i>0?(u=Bizweb.Utility.getThumb(n,"large"),f=Bizweb.Utility.getThumb(n,"compact")):(u=n,f=n),'<li class="product-photo-item" id="product-image-'+i+'"><div class="product-image next-media-square-aspect-ratio"><img class="media-image image-align-middle" src="'+u+'" alt="'+t+'" /><div class="product-photo-hover-overlay drag"><div class="image-option-tools"><a class="image-action tooltip tooltip-bottom" href="javascript:void(0);" bind-event-click="previewImage(&quot;'+u+'&quot;)"><i class="fa fa-eye"><\/i><\/a>'+function(){if(this.id>0||r)return'<a class="image-action tooltip tooltip-bottom" href="javascript:void(0)" bind-event-click="launchAviary(&quot;'+i+"&quot;, &quot;"+n+'&quot;)"><i class="fa fa-pencil"><\/i><\/a>'}()+'<a class="image-action tooltip tooltip-bottom" bind-event-click="showEditImageAlt(&quot;'+f+"&quot;,"+i+","+this.id+')" href="javascript:void(0);"><span>ALT<\/span><\/a><a class="image-action tooltip tooltip-bottom" bind-event-click="showDeleteProductImageModal('+this.id+","+i+')" href="javascript:void(0);"><i class="fa fa-trash-o"><\/i><\/a><\/div><\/div><input type="hidden" name="productImageIds" value="'+i+'" /><\/div><\/li>'},n.prototype.updateSortProductImages=function(n){var t,r,i;if(n>0)t=new FormData,t.append("productId",n),r=$("[name=productImageIds]").each(function(){var n=$(this).val();t.append("productImageIds",n)}),i=this,$.ajax({type:"POST",url:"/admin/products/UpdateSortProductImages",data:t,contentType:!1,processData:!1,success:function(n){var u=$("#product-images"),f,t;for(u.empty(),f=$("#fileUpload"),f.val(""),t=0;t<n.length;t++){var r=n[t],o=i.generateAddedImage(r.src,r.alt,r.id,i.id>0),e=$(o);u.append(e);Bindings.bind(e[0],i)}Bizweb.Flash.notice("Cập nhật ảnh sản phẩm thành công")},error:function(){}});else return},n.prototype.openFileUpload=function(){$("#fileUpload").click()},n.prototype.initializeSortable=function(){var n=this;$(".dragable-product-images").sortable({items:"li",update:function(){n.updateSortProductImages(n.id)}})},n.prototype.removeCollection=function(n){$(".list-collection table tr[collection-id='"+n+"']").remove();$(".collection-select[collection-id='"+n+"']").removeClass("added-ico");var t=$(".list-collection").find("table tr").length;t>0?$(".no-colection-found").hide():$(".no-colection-found").show()},n.prototype.copyProduct=function(){var n=$(".copy-product-form").find("input[name=name]").val();if(n)$(".copy-product-form").submit();else{Bizweb.Flash.error("Nhập vào tên sản phẩm");return}},n.prototype.launchAviary=function(n,t){var i=this;return this.aviary.launchEditor("image-"+n,t,function(){return function(t){$.ajax({url:Bizweb.routes.update_product_image.replace("{0}",i.id).replace("{1}",n),data:{imageurl:t},dataType:"html",method:"POST",success:function(){Bizweb.Flash.notice("Chỉnh sửa ảnh thành công.");Bizweb.Utility.loadAjax(document.location.href,"#product-image-"+n)},error:function(){Bizweb.Flash.error("Chỉnh sửa ảnh thất bại.")}})}}(this))},n}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.ProductOptionsEdit=function(){function t(t,i){if(this.optionValueToBeDeleted={},i)for(var r in i)this[r]=i[r];this.removeVariantsClick=n(this.removeVariantsClick,this);$(t).find(".option-value .gi-remove").on("click",this.removeVariantsClick)}return t.prototype.removeVariantsClick=function(n){this.optionValueToBeDeleted.optionName=$(n.currentTarget).closest(".form-group").find(".option-name").val();var t=$(n.currentTarget).closest(".form-group").attr("option"),i=$(n.currentTarget).closest(".option-value").text().trim();this.optionValueToBeDeleted.tag={tagLabel:i,index:t};this.optionValueToBeDeleted.numVariants=this.variants.filter(function(n){return n["option"+t]==i}).length;Bindings.refreshImmediately()},t.prototype.deleteVariant=function(){if(this.optionValueToBeDeleted.tag){var i=this.urlDeleteVariant,r=this.optionValueToBeDeleted.tag.index,u=this.optionValueToBeDeleted.tag.tagLabel,f=this.variants.filter(function(n){return n["option"+r]==u}).map(function(n){return n.id}),n=this,t=$(".btn-delete-variant");t.addClass("disabled").html(Bizweb.LOADING);NProgress.start();$.ajax({url:i,type:"POST",global:!1,data:{ids:f,productId:n.id},success:function(t){var i=Bizweb.routes.products+"/"+n.id;Bizweb.Utility.loadAjax(i,"#editProduct",function(){t.message?Bizweb.Flash.notice(t.message):Bizweb.Flash.notice("Xóa thành công phiên bản")})},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));t.removeClass("disabled").html("Xóa");NProgress.done()}})}},t.prototype.canDeleteOption=function(n){return this.options.length>1&&this.options[n-1].values.split(",").length==1},t.prototype.addNewOption=function(n){for(var u,i="",r=0;r<Bizweb.DEFAULT_OPTION_NAMES.length;r++)if(u=Bizweb.DEFAULT_OPTION_NAMES[r],this.options.filter(function(n){return n.name.toLowerCase()==u.toLowerCase()}).length==0){i=u;break}this.options.push({name:i,position:this.options.length+1,values:"",isNew:!0});var t=this.options.length-1,e='<div option="'+(t+1)+'" class="form-group"><div class="col-sm-4"><input bind="options['+t+'].name" type="text bind="options['+t+'].name" value="'+i+'" name="options['+t+'].name" id="Options_'+t+'__Name" class="form-control"><\/div><div class="col-sm-6"><input type="text" bind-placeholder="\'Default \' + options['+t+"].name || 'Default value'\" bind=\"options["+t+'].values"       class="form-control new-option-value"/><\/div><div class="col-sm-2 text-right delete-option" bind-show="canDeleteOption('+(t+1)+')"><a href="javascript:void(0)" bind-event-click="deleteOption(this,'+(t+1)+')" style="color:#357ebd;" class="btn btn-white"><i class="gi gi-trash"><\/i><\/a><\/div><\/div>',f=$(e);$(n).closest(".form-group").before(f);Bindings.bind(f[0],this)},t.prototype.deleteOption=function(n,t){var r,i,u,f,e;if(Bindings.unbind($(".product-option-edit").get(0)),r=this.options.splice(t-1,1)[0],r.position==2||r.position==1)for(i=0;i<this.variants.length;i++)u=this.variants[i].option2,f=this.variants[i].option3,this.variants[i].option2=f,r.position==1&&(this.variants[i].option1=u);e=$(n).parents(".product-option-edit");$(n).closest(".form-group").remove();e.find(".form-group").each(function(n){$(this).attr("option",n+1);$(this).find(".option-name").attr("name","option["+n+"].name");$(this).find(".option-name").attr("bind","options["+n+"].name");$(this).find(".new-option-value").attr("bind","options["+n+"].values");$(this).find(".delete-option").attr("bind-show","canDeleteOption("+(n+1)+")");$(this).find(".edit-option-list-value").removeClass("option1 option2 option3").addClass("option"+(n+1))});Bindings.bind($(".product-option-edit").get(0),this)},t.prototype.submit=function(){for(var i,n,r,u,t=0;t<this.options.length;t++)if(i=this.options[t],i.isNew){if(t==0)for(n=0;n<this.variants.length;n++)this.variants[n].option1=i.values;if(t==1)for(n=0;n<this.variants.length;n++)this.variants[n].option2=i.values;if(t==2)for(n=0;n<this.variants.length;n++)this.variants[n].option3=i.values}return r={options:this.options,variants:this.variants},u=this,$(".btn-update-option-edit").addClass("disabled").html(Bizweb.LOADING),NProgress.start(),$.ajax({url:this.url,dataType:"json",type:"PUT",global:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify(r),success:function(n,t,i){n!=undefined&&i.status==200?Bizweb.Utility.loadAjax(Bizweb.routes.products+"/"+u.id,"#editProduct",function(){Bizweb.Flash.notice("Cập nhật thành công")}):(Bizweb.Flash.error("Cập nhật thất bại"),NProgress.done())},error:function(n){if($(".btn-update-option-edit").removeClass("disabled").html("Cập nhật"),n.responseJSON&&n.responseJSON.data_error){Bizweb.Flash.error(JSON.stringify(n.responseJSON.data_error.errors).replace(/\n/g,"; ").replace(/; $/,""));return}Bizweb.Flash.error("Cập nhật thất bại");NProgress.done()}}),!1},t.prototype.cancel=function(){this.optionValueToBeDeleted={};Bindings.refreshImmediately()},t}()}.call(this),function(){Bizweb.ProductImageActions=function(){function n(n,t){if(t)for(var i in t)this[i]=t[i];this.ele=n;this.selectChanged=!1}return n.prototype.selectImage=function(n,t){this.selected_id=n;this.selected_src=t;this.selectChanged=!0},n.prototype.chooseImage=function(){if(this.selected_id>0)if(this.call_back)window[this.call_back](this);else{var n=Bindings.context(document.body).editProductVariant.editVariant;n&&(n.image_id=this.selected_id,n.src=Bizweb.Utility.getThumb(this.selected_src,"compact"),n.id>0?this.chooseVariantImage(n):Bizweb.Modal.hide())}},n.prototype.chooseVariantImage=function(n){if(n.id>0){var t={variant:{image_id:n.image_id}};$(".update-variant-image").addClass("disabled").html(Bizweb.LOADING);NProgress.start();$.ajax({url:"/admin/variants/"+n.id+".json",dataType:"json",type:"PUT",global:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify(t),success:function(t,i,r){t!=undefined&&r.status==200?t.variant&&t.variant.id>0&&Bizweb.Utility.loadAjax("/admin/products/"+n.product_id+"/variants/"+n.id,".page-body-render",function(){Bizweb.Flash.notice("Cập nhật ảnh thành công");Bizweb.Modal.hide()}):(Bizweb.Flash.error("Cập nhật ảnh thất bại"),$(".update-variant-image").removeClass("disabled").html("Cập nhật"));NProgress.done()},error:function(){Bizweb.Flash.error("Cập nhật ảnh thất bại");$(".update-variant-image").removeClass("disabled").html("Cập nhật");NProgress.done()}})}else Bizweb.Modal.hide()},n.prototype.next=function(){this.loadUrl(this.next_page)},n.prototype.prev=function(){this.loadUrl(this.prev_page)},n.prototype.loadUrl=function(n){Bindings.unbind($(".image-popup").get(0));var t=this;$.ajax({url:n,success:function(n){$(t.ele).parent(".modal-dialog").html(n);Bindings.bind($(".image-popup").get(0),this)}})},n.prototype.remove=function(){if(this.selected_id=null,this.selected_src=null,this.selectChanged=!0,this.call_back)window[this.call_back](this);else{var n=Bindings.context(document.body).editProductVariant.editVariant;n&&(n.image_id=null,n.src="",n.id>0?this.chooseVariantImage(n):Bizweb.Modal.hide())}},n.prototype.uploadVariantImage=function(n,t){var e=this,r=new FormData,u=$("#variant-upload-image")[0].files.length,i,f;if(!(u<=0)){for(i=0;i<u;i++)f=document.getElementById("variant-upload-image").files[i],r.append("mediaImages",f);r.append("productId",n);NProgress.start();$.ajax({type:"POST",url:"/admin/products/Upload",data:r,contentType:!1,processData:!1,global:!1,success:function(i){if(i.message?Bizweb.Flash.notice(i.message):Bizweb.Flash.notice("Cập nhật thành công"),i.images&&i.images.length>0){var u=i.images[0],r="",f=!1,e=Bindings.context(document.body).editProduct;e!=undefined?(f=!0,r=Bizweb.routes.products+"/"+n+"/images/chooseproductimage?variantId="+t+"&uploadedImageId="+u.id+"&callback=changeVariantImage&redirectToProduct=true",t<=0&&(r=Bizweb.routes.products+"/"+n+"/images/chooseproductimage?variantId=0&callback=updateVariantsImage&redirectToProduct=true&uploadedImageId="+u.id+"&"+$("#frmBulkActions").serialize())):r=Bizweb.routes.products+"/"+n+"/images/chooseproductimage?variantId="+t+"&uploadedImageId="+u.id+"&redirectToProduct=false";Bizweb.Utility.loadAjax(r,"#bizweb-modal",null,{hide:!1});f&&Bizweb.Utility.loadAjax(Bizweb.routes.products+"/"+n,".product-list-image",function(){e.initializeSortable()},{hide:!1})}},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));$(e.element).find(".btn-save-setting").removeClass("disabled").html("Lưu");NProgress.done()}})}},n.prototype.openVariantImageUpload=function(){$("#variant-upload-image").click()},n}()}.call(this),function(){Bizweb.EditProductVariant=function(){function n(n,t){if(t)for(var i in t)this[i]=t[i];this.ele=n}return n}()}.call(this),function(){Bizweb.EditVariant=function(){function n(n,t){if(t)for(var i in t)this[i]=t[i];this.ele=n}return n.prototype.deleteVariant=function(n){var t=$(".form-delete-variant"),i=$(".btn-delete-variant");i.addClass("disabled").html(Bizweb.LOADING);NProgress.start();$.ajax({url:$(t).attr("action"),type:"POST",global:!1,data:$(t).serialize(),success:function(t){var i=Bizweb.routes.products+"/"+n;Bizweb.Utility.loadAjax(i,".page-content",function(){t.message?Bizweb.Flash.notice(t.message):Bizweb.Flash.notice("Xóa thành công phiên bản");Bizweb.Utility.changeUrl(i)})},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));i.removeClass("disabled").html("Xóa");NProgress.done()}})},n}()}.call(this),function(){function t(n,t,i){i==undefined&&(i="");return'<tr index="'+n+'" class="options option'+n+'"><td><input bind="options['+(n-1)+'].name" name="Options['+(n-1)+'].Name" value="'+t+'" class="form-control" /><\/td><td class="option-value option-value'+n+'"><input bind="options['+(n-1)+'].values" value="'+i+'" class="taginput option-value-input" placeholder="Nhập giá trị" class="form-control" /><\/td><td><a bind-show="options.length > 1" bind-event-click="removeOption('+n+')" class="btn btn-default remove-option" href="javascript:void(0)"><i class="gi gi-trash"><\/i><\/a><\/td><\/tr>'}function n(n,t){for(var r,u=[],f=n.split(","),i=0;i<f.length;i++)r=f[i],u.push('<span class="option-value'+t+'">'+r+'<\/span><input type="hidden" value="'+r+'" name="Variants[{0}].Option'+t+'"/>');return u}function i(n){var r,u,t,f;if(n.length===0)return[];if(n.length===1)return n[0];for(r=[],u=i(n.slice(1)),t=0;t<n[0].length;t++)for(f in u)r.push(n[0][t]+" * "+u[f]);return r}Bizweb.NewProductVariantOptions=function(){function r(n,t){var i,r;if(t)for(i in t)this[i]=t[i];if(this.ele=n,!this.auto_generate&&this.options.length>0){$(".table-option .option-value-input").tagsinput({});r=this;$(".table-option .option-value-input").on("itemAdded",function(){r.genVariant()});$(".table-option .option-value-input").on("itemRemoved",function(){r.genVariant()})}}return r.prototype.addNewOption=function(){for(var u,n=this.options.length+1,i="",r=0;r<Bizweb.DEFAULT_OPTION_NAMES.length;r++)if(u=Bizweb.DEFAULT_OPTION_NAMES[r],this.options.filter(function(n){return n.name.toLowerCase()==u.toLowerCase()}).length==0){i=u;break}this.options.push({name:i,position:this.options.length+1,values:[]});var o=t(n,i),f=$(o),e=this;$(".table-option tr.add-option").before(f);$(".table-option tr.options.option"+n+" .option-value input").tagsinput({});$(".table-option tr.options.option"+n+" .option-value input").on("itemAdded",function(){e.genVariant()});$(".table-option tr.options.option"+n+" .option-value input").on("itemRemoved",function(){e.genVariant()});Bindings.bind(f[0],this)},r.prototype.toggleAutoGenerate=function(){this.auto_generate=!this.auto_generate;this.genOption();this.genVariant()},r.prototype.genOption=function(){var i,r,n,u;if(this.auto_generate)Bindings.unbind($(".table-option").get(0)),$(".table-option tr.options").remove();else if(this.options.length==0)this.addNewOption();else{for(i="",r=this,Bindings.unbind($(".table-option").get(0)),$(".table-option tr.options").remove(),n=0;n<this.options.length;n++)i+=t(n+1,this.options[n].name,this.options[n].values);u=$(i);$(".table-option tr.add-option").before(u);Bindings.bind($(".table-option").get(0),this);$(".table-option tr.options .option-value input").tagsinput({});$(".table-option tr.options .option-value input").on("itemAdded",function(){r.genVariant()});$(".table-option tr.options .option-value input").on("itemRemoved",function(){r.genVariant()})}},r.prototype.removeOption=function(n){this.options.splice(n-1,1);this.genOption()},r.prototype.genVariant=function(){var r,h,t;if(this.auto_generate)Bindings.unbind($(".table-variant").get(0)),$(".table-variant tbody").empty();else{var u=[],f=$(".table-option tr.options:eq(0)").find(".option-value-input").val(),e=$(".table-option tr.options:eq(1)").find(".option-value-input").val(),o=$(".table-option tr.options:eq(2)").find(".option-value-input").val(),s=!0;if(f!=undefined&&f!=""&&(s=!1,u.push(n(f,1))),e!=undefined&&e!=""&&(s=!1,u.push(n(e,2))),o!=undefined&&o!=""&&(s=!1,u.push(n(o,3))),r=i(u),$(".table-variant tbody").empty(),this.variants=[],r.length>0){for(h="",Bindings.unbind($(".table-variant").get(0)),t=0;t<r.length;t++)this.variants.push({}),h+='<tr><td><input bind="variants['+t+'].is_create" value="true" bind-event-change="this.value=this.checked;" checked="checked" name="Variants['+t+'].IsCreate" type="checkbox" class="checkbox is-create"><\/td><td>'+r[t].format(t)+'<\/td><td><input bind="variants['+t+'].price" value="'+this.variant.price+'" name="Variants['+t+'].Price" type="number" class="form-control"><\/td><td><input bind="variants['+t+'].sku" value="'+this.variant.sku+(r.length>1?this.variant.sku==""?"":"_"+(t+1):"")+'" name="Variants['+t+'].Sku" type="text" class="form-control"><\/td><td><input bind="variants['+t+'].barcode" value="'+this.variant.barcode+'" name="Variants['+t+'].Barcode"type="text" class="form-control"><input type="hidden" value="'+this.variant.compare_at_price+'" name="Variants['+t+'].CompareAtPrice" id="Variants_'+t+'__CompareAtPrice" bind="compare_at_price"><input type="hidden" value="'+this.variant.inventory_management+'" name="Variants['+t+'].InventoryManagement" id="Variants_'+t+'__InventoryManagement" bind="inventory_management"/><input type="hidden" value="'+this.variant.inventory_policy+'" name="Variants['+t+'].InventoryPolicy" id="Variants_'+t+'__InventoryPolicy" bind="inventory_policy"><input type="hidden" value="'+this.variant.inventory_quantity+'" name="Variants['+t+'].InventoryQuantity" id="Variants_'+t+'__InventoryQuantity" data-val="true" bind="inventory_quantity"/><input type="hidden" value="'+this.variant.requires_shipping+'" name="Variants['+t+'].RequiresShipping" id="Variants_'+t+'__RequiresShipping" bind="requires_shipping"/><input type="hidden" value="'+this.variant.taxable+'" name="Variants['+t+'].Taxable" id="Variants_'+t+'__Taxable" bind="taxable"/><input type="hidden" value="'+this.variant.weight+'" name="Variants['+t+'].Weight" id="Variants_'+t+'__Weight" data-val="true" bind="weight"><input type="hidden" value="'+this.variant.weight_unit+'" name="Variants['+t+'].WeightUnit" id="Variants_'+t+'__WeightUnit" bind="weight_unit"><\/td><\/tr>';$(".table-variant tbody").append(h);Bindings.bind($(".table-variant").get(0),this)}}Bindings.refreshImmediately()},r.prototype.changeInventoryPolicy=function(n){this.variant.inventory_policy=$(n).is(":checked")?"continue":"deny"},r}()}.call(this),function(){Bizweb.Notifications=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n}return n.prototype.toggle=function(n){Bizweb.Utility.loadAjax($(n).attr("href"),".notification-order-email")},n.prototype.showRevertEmailTemplateToDefaultModal=function(n){this.revertEmailTemplateToDefaultModal.show();$('.form-revert-email-default input[name="template"]').val(n)},n.prototype.showRevertOrderPrintTemplateToDefaultModal=function(n){this.revertOrderPrintTemplateToDefaultModal.show();$('.form-revert-order-print-default input[name="template"]').val(n)},n.prototype.showDeleteOrderNotification=function(n){this.deleteOrderNotificationModal.show();$('.form-delete-order-notification input[name="orderNotificationId"]').val(n)},n.prototype.showDeleteWebhook=function(n){this.deleteWebhookModal.show();$('.form-delete-webhook input[name="webhookId"]').val(n)},n}()}.call(this),function(){Bizweb.PreviewEmailTemplate=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n}return n.prototype.previewEmailTemplate=function(){var n=$("#email-template-content").val(),t=$("#email-template-subject").val(),i=this;$.ajax({url:"/admin/settings/notifications/PreviewEmailTemplate",type:"POST",data:{Subject:t,Content:n},success:function(n){$(".btn-back-to-edit").removeClass("hide");$(".btn-preview").addClass("hide");$(".email-template-edit").addClass("hide");$(".modal-title").html("Xem trước mẫu Email");$(".email-template-subject-preview").html(n.subject);$(".email-template-content-preview").html(n.email);$(".email-template-preview").removeClass("hide")}})},n.prototype.backToEditEmailTemplate=function(n){$(".btn-back-to-edit").addClass("hide");$(".btn-preview").removeClass("hide");$(".email-template-edit").removeClass("hide");$(".modal-title").html("Chỉnh sửa mẫu email "+n);$(".email-template-preview").addClass("hide")},n.prototype.sendTestEmail=function(n){$.ajax({url:"/admin/settings/notifications/SendTestMail",type:"POST",data:{template:n},success:function(n){n!="OK"?Bizweb.Flash.error("Gửi email thử nghiệm không thành công"):Bizweb.Flash.notice("Gửi email thử nghiệm thành công")}})},n}()}.call(this),function(){Bizweb.PreviewPrintOrderTemplate=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n}return n.prototype.previewPrintOrderTemplate=function(){var n=$("#email-template-content").val(),t=this;$.ajax({url:"/admin/settings/notifications/PreviewPrintOrderTemplate",type:"POST",data:{Content:n},success:function(n){$(".btn-back-to-edit").removeClass("hide");$(".btn-preview").addClass("hide");$(".email-template-edit").addClass("hide");$(".modal-title").html("Xem trước mẫu In đơn hàng");$(".email-template-content-preview").html(n.email);$(".email-template-preview").removeClass("hide")}})},n.prototype.backToEditPrintOrderTemplate=function(n){$(".btn-back-to-edit").addClass("hide");$(".btn-preview").removeClass("hide");$(".email-template-edit").removeClass("hide");$(".modal-title").html("Chỉnh sửa mẫu "+n);$(".email-template-preview").addClass("hide")},n.prototype.printTestOrder=function(n){$.ajax({url:"/admin/settings/notifications/PrintTestOrder",type:"POST",data:{template:n},success:function(n){n.result!="OK"?Bizweb.Flash.error("In thử nghiệm không thành công"):(window.frames.print_frame.document.body.innerHTML=n.content,window.frames.print_frame.window.focus(),window.frames.print_frame.window.print())}})},n}()}.call(this),function(){Bizweb.FilterAndSavedSearch=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n;this.isValid=!1;this.$filterForm=$("#frmFilter");$(".btn-filter").on("click",this.openFilterMenu);$("body").on("click",this.closeFilterMenu);this.showFilterBar(this.type)}return n.optionsNeedingValue=["greater_than","less_than","equals","not_equals"],n.prototype.openFilterMenu=function(n){$(n.currentTarget).parent().children(".dropdown-filter").hasClass("is-visible")?$(n.currentTarget).parent().children(".dropdown-filter").removeClass("is-visible"):$(n.currentTarget).parent().children(".dropdown-filter").addClass("is-visible")},n.prototype.closeFilterMenu=function(n){$(".btn-filter").is(n.target)||$(".dropdown-filter.is-visible").has(n.target).length!==0||$(".datepicker").has(n.target).length!==0||$(n.target).hasClass("day")||$(".dropdown-filter").removeClass("is-visible")},n.prototype.showFilterBar=function(){var n=0,t=[],r,f,i;if(n+=$("#filter-tab-all").width(),r=$(".filter-tab-list").width(),f=$("#dropdown-hidden-search"),$("#filter-tab-list").find(".filter-tab-item").each(function(){var i=$(this);n+=i.width();n>=r-100&&(t.push(i),n-=i.width())}),t.length>0){for(i=0;i<t.length;i++){var u=t[i],e=u.attr("data-tab-id"),o=u.attr("data-tab-name");f.append(this.generateHiddenTabItem(e,o,this.type));u.remove()}$("#hidden-search").width(r-n);$("#hidden-search").show()}$(".filter-tab-list").removeClass("overflow-hidden-x")},n.prototype.generateHiddenTabItem=function(n,t){return'<li> <a href="javascript:;" class="" bind-event-click="openSavedSearch('+n+');">'+t+"<\/a><\/li>"},n.prototype.resetFilter=function(){this.option="";this.value=null;this.isValid=!1},n.prototype.resetValue=function(){this.value=null;this.isValid=!1},n.prototype.optionSelected=function(){return this.option!=null&&this.option!=""?!0:!1},n.prototype.hasValue=function(){return this.value!=null&&this.option!=""?!0:!1},n.prototype.optionRequiresValue=function(){return this.constructor.optionsNeedingValue.indexOf(this.option)>=0?!0:!1},n.prototype.needValue=function(){return!this.option||this.optionRequiresValue()},n.prototype.removeFilterItem=function(n){var t=this.$filterForm.find("input[name="+n+"]");t.remove();this.removeFilterFormSaveSearch();this.$filterForm.submit()},n.prototype.submitFilter=function(){var t="",n="";if(this.needValue()?(t=this.generateKeyWithOption(this.filterKey,this.option),n=this.value):(t=this.filterKey,n=this.option),n===null||n===""){this.isValid=!0;return}this.setFilterFormQueryValue(t,n);this.removeFilterFormSaveSearch();this.setFilterFormQueryValue("page",1);this.$filterForm.submit()},n.prototype.submitQuery=function(){var n=this.query.trim();this.setFilterFormQueryValue("Query",n);this.removeFilterFormSaveSearch();this.setFilterFormQueryValue("page",1);this.$filterForm.submit()},n.prototype.generateKeyWithOption=function(n,t){switch(t){case"less_than":return""+n+"Max";case"greater_than":return""+n+"Min";case"not_equals":return""+n+"Not";default:return n}},n.prototype.setFilterFormQueryValue=function(n,t){var i=this.$filterForm.find("input[name="+n+"]");i.length!==0?i.val(t):this.$filterForm.append("<input type='hidden' name='"+n+"' value='"+t+"' />")},n.prototype.removeFilterFormSaveSearch=function(){var n=document.getElementById("frmFilter").elements.namedItem("savedSearchId");n!=null?n.parentNode.removeChild(n):(n=document.getElementById("frmFilter").elements.namedItem("SavedSearchId"),n!=null&&n.parentNode.removeChild(n))},n.prototype.showAllItems=function(){$(".filter-tab").removeClass("filter-tab-active");$(".show-all-items").addClass("filter-tab-active");$("#frmFilter").empty();document.getElementById("frmFilter").submit()},n.prototype.openSavedSearch=function(n){$("#frmFilter").empty();var t=document.createElement("input");t.type="hidden";t.name="savedSearchId";t.value=n;document.getElementById("frmFilter").appendChild(t);document.getElementById("frmFilter").submit()},n.prototype.showDeleteSavedSearchModal=function(n){var t=this;bootbox.dialog({message:"Bạn có muốn xóa kết quả tìm kiếm này? Thao tác này không thể khôi phục.",title:"Bạn muốn xóa dữ liệu này?",buttons:{cancel:{label:"Hủy"},danger:{label:"Xóa",className:"btn-danger",callback:function(){t.deleteSavedSearch(n)}}}})},n.prototype.deleteSavedSearch=function(n){$("#frmRemoveSavedSearch input[name='savedSearchId']").val(n);$("#frmRemoveSavedSearch").attr("action",this.urlDeleteSavedSearch);$("#frmRemoveSavedSearch").submit()},n.prototype.addSavedSearch=function(){var n=$(this.addSaveSearchModel.node).attr("href");n=n+"?"+$("#frmFilter").serialize();$(this.addSaveSearchModel.node).attr("href",n);this.addSaveSearchModel.show()},n.name="FilterAndSavedSearch",n}()}.call(this),function(){Bizweb.BulkActions=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n;this.init();this.selectedItems=[]}return n.prototype.init=function(){$(".bulk-action-item").prop("checked",!1)},n.prototype.addOrRemoveBulkActionItem=function(n,t){var e,r,i,f,u;n=n.toString();e=t.checked;r=$(".bulk-action-items-count").attr("selected-bulk-action-items");e?(this.selectedItems.push(n),i=document.createElement("input"),i.type="hidden",i.name="ids",i.value=n,i.id="bulk-action-item-"+n,document.getElementById("frmBulkActions").appendChild(i),r++):(f=this.selectedItems.indexOf(n),f>-1&&this.selectedItems.splice(f,1),u=document.getElementById("bulk-action-item-"+n),u!=null&&(u.parentNode.removeChild(u),r--));this.showBulkActionItemsCount(r)},n.prototype.selectBulkActionItem=function(n){$("#bulk-action-"+n).prop("checked",!0);$("#bulk-action-"+n).trigger("change")},n.prototype.addOrRemoveAllBulkActionItems=function(){var n,i,t,r;this.selectedItems=[];n=$("#frmBulkActions input[name='ids']");n!=null&&n.length>0&&n.remove();i=$(".all-bulk-action").prop("checked");i?(t=0,r=this,$(".bulk-action-context").find(".bulk-action-item").each(function(){var u=$(this),i,n;u.prop("checked",!0);i=u.val();r.selectedItems.push(i);n=document.createElement("input");n.type="hidden";n.name="ids";n.value=i;n.id="bulk-action-item-"+i;document.getElementById("frmBulkActions").appendChild(n);t++}),this.showBulkActionItemsCount(t)):($(".bulk-action-context").find(".bulk-action-item").each(function(){var n=$(this);n.prop("checked",!1)}),this.showBulkActionItemsCount(0))},n.prototype.checkAllBulkActionItems=function(){$(".all-bulk-action").prop("checked",!0);this.addOrRemoveAllBulkActionItems()},n.prototype.uncheckAllBulkActionItems=function(){$(".all-bulk-action").prop("checked",!1);this.addOrRemoveAllBulkActionItems()},n.prototype.showBulkActionItemsCount=function(n){var t;$(".bulk-action-items-count").attr("selected-bulk-action-items",n);var r=$(".bulk-actions").attr("all-items"),u=$(".bulk-actions").attr("total-records"),f=$(".bulk-actions").attr("items-page"),i=$("#frmBulkActions input[name='SelectedAll']");(i==null||i.length<=0)&&(t=document.createElement("input"),t.type="hidden",t.name="SelectedAll",t.value=!1,document.getElementById("frmBulkActions").appendChild(t));$("#frmBulkActions input[name='SelectedAll']").prop("value",!1);n>0?($(".bulk-actions").removeClass("hide"),$(".bulk-action-items-count .display-bulk-action-items-count").html(n),n==r?($(".all-bulk-action").prop("checked",!0),$(".bulk-action-all-selector .bulk-action-all").html("Đã chọn tất cả "+this.type+'<span class="on-this-page-text"> trên trang này.<\/span>'),u-f>0||(this.type=="variant"?$(".bulk-action-all-selector .bulk-action-all").html("Đã chọn tất cả "+this.type+" của sản phẩm.<\/span>"):$(".bulk-action-all-selector .bulk-action-all").html("Đã chọn tất cả "+this.type+" của gian hàng.<\/span>")),$("#frmBulkActions input[name='SelectedAll']").prop("value",!0)):($(".bulk-action-all-selector .bulk-action-all").html(""),$(".bulk-action-all-selector .multipage-selected-all").addClass("hide"),$(".all-bulk-action").prop("checked",!1))):$(".bulk-actions").addClass("hide")},n.prototype.addBulkActionAll=function(){var t=document.getElementById("frmBulkActions").elements.namedItem("SelectedAll"),n;t==null?(n=document.createElement("input"),n.type="hidden",n.name="SelectedAll",n.value=!0,document.getElementById("frmBulkActions").appendChild(n)):t.value=!0;$(".bulk-action-all-selector .bulk-action-all").html("Đã chọn tất cả "+this.type+" của gian hàng.<\/span>");$(".bulk-action-all-selector .multipage-selected-all").addClass("hide");$(".bulk-action-all-selector .clear-multipage-selection").removeClass("hide")},n.prototype.removeBulkActionAll=function(){var t=document.getElementById("frmBulkActions").elements.namedItem("SelectedAll"),n;t==null?(n=document.createElement("input"),n.type="hidden",n.name="SelectedAll",n.value=!1,document.getElementById("frmBulkActions").appendChild(n)):t.value=!1;$(".bulk-action-all-selector .bulk-action-all").html("Đã chọn tất cả "+this.type+'<span class="on-this-page-text"> trên trang này.<\/span>');$(".bulk-action-all-selector .multipage-selected-all").removeClass("hide");$(".bulk-action-all-selector .clear-multipage-selection").addClass("hide")},n.prototype.showDeleteItemsModal=function(){this.deleteItemsModal.show()},n.prototype.deleteItems=function(){var n=$(".btn-delete-bulk-action");n.addClass("disabled").html(Bizweb.LOADING);NProgress.start();$.ajax({url:this.urlBulkActionDelete,type:"POST",global:!1,data:$("#frmBulkActions").serialize(),success:function(n){var t=window.location.href;Bizweb.Utility.loadAjax(t,".page-content",function(){n.message?Bizweb.Flash.notice(n.message):n.result&&n.result.message?Bizweb.Flash.notice(n.result.message):Bizweb.Flash.notice("Xóa thành công")})},error:function(t){Bizweb.Flash.error(t.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));n.removeClass("disabled").html("Xóa");NProgress.done()}})},n.prototype.publishItems=function(){$.ajax({url:this.urlBulkActionPublish,type:"POST",data:$("#frmBulkActions").serialize(),success:function(n){Bizweb.Flash.notice(n.result.message);window.location.href=window.location.href}})},n.prototype.unPublishItems=function(){$.ajax({url:this.urlBulkActionUnPublish,type:"POST",data:$("#frmBulkActions").serialize(),success:function(n){Bizweb.Flash.notice(n.result.message);window.location.href=window.location.href}})},n.prototype.addTags=function(){var n=window.location.href;$.ajax({url:this.urlBulkActionAddTag+"?"+$("#frmBulkActions").serialize()+"&ReturnUrl="+encodeURIComponent(n),success:function(n){$("#bizweb-modal").html(n);$("#bizweb-modal").modal("show");$(".tag-value-input").tagsinput({})}})},n.prototype.removeTags=function(){var n=window.location.href;$.ajax({url:this.urlBulkActionRemoveTag+"?"+$("#frmBulkActions").serialize()+"&ReturnUrl="+encodeURIComponent(n),success:function(n){$("#bizweb-modal").html(n);$("#bizweb-modal").modal("show");$(".tag-value-input").tagsinput({})}})},n.prototype.postAction=function(n){$.ajax({url:n,type:"POST",data:$("#frmBulkActions").serialize(),success:function(n){Bizweb.Flash.notice(n.result.message);window.location.href=window.location.href}})},n.prototype.appLink=function(n){return this.selectedItems.length>0?n+"&ids="+this.selectedItems.join(","):n},n.prototype.allSelected=function(){var n=$(".bulk-actions").attr("all-items");return this.selectedItems.length==n},n}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.LinklistForm=function(){function t(t){this.prepareSubmitForm=n(this.prepareSubmitForm,this);this.$form=$(t);this.newResourceId==null&&(this.newResourceId=0);this.$form.on("submit",this.prepareSubmitForm);this.initializeSortable()}return t.prototype.prepareSubmitForm=function(){this.disableHiddenInputs();this.setIndexForMultiObjectPost()},t.prototype.initializeSortable=function(){var n=this;this.linklist=$(".linklist-links",this.$form).sortable({handle:".drag-handle",items:".linklist-links",placeholder:"sortable-placeholder",helper:"clone",opacity:.7,update:function(){n.updatePositions()},start:function(n,t){t.placeholder.height(t.helper.height())}})},t.prototype.updatePositions=function(){$(".link-position",this.node).each(function(n,t){return $(t).val(n+1)})},t.prototype.setIndexForMultiObjectPost=function(){for(var r,t,n,u=this.$form.find("tr.linklist-links"),i=0;i<u.length;i++)for(r=$(u[i]).find(":input"),t=0;t<r.length;t++)n=$(r[t]).attr("name"),typeof n!="undefined"&&n.indexOf("[]")>=0&&(n=n.replace("[]","["+i+"]"),$(r[t]).attr("name",n))},t.prototype.disableHiddenInputs=function(){this.$form.find(".diable-hidden-input:visible :input").prop("disabled",!1);this.$form.find(".diable-hidden-input:not(:visible) :input").prop("disabled","disabled")},t.prototype.insertLinks=function(){var n=this;this.newResourceId++;$.ajax({url:"/admin/links/GetLinkRow",type:"POST",dataType:"html",data:{index:this.newResourceId},success:function(t){var i=$(t);$("table.linklist-links").append(i);Bindings.bind(i[0]);n.updatePositions()}})},t.prototype.removeLink=function(n){var t=$(n).closest(".linklist-links");t.remove()},t.prototype.countLinks=function(){return this.$form.find("tr.linklist-links").length},t.name="LinklistForm",t}()}.call(this),function(){Bizweb.EditOrder=function(){function n(n,t){if(t)for(var i in t)this[i]=t[i]}return n.prototype.showModal=function(n){this[n].show()},n.prototype.deleteOrder=function(n){var t=$(n);if(t.valid()){var i=t.attr("action"),r=t.attr("method"),u=this;$.ajax({url:i,type:r,data:{},success:function(n){n!="OK"?(Bizweb.Modal.hide(),Bizweb.Flash.error("Xóa đơn hàng thất bại")):(Bizweb.Flash.notice("Xóa đơn hàng thành công"),window.location.href=Bizweb.routes.orders)},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""))}})}return!1},n.prototype.updateFulfillment=function(n){var t=$(n),i=this;if(t.valid()){var r=t.attr("action"),u=t.attr("method"),i=this;NProgress.start();$.ajax({url:r,type:u,global:!1,data:t.serialize(),success:function(){Bizweb.Utility.loadAjax(Bizweb.routes.orders+"/"+i.id,".timeline",function(){Bizweb.Flash.notice("Cập nhật vận đơn thành công")})},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));NProgress.done()}})}return!1},n.prototype.updateOrderDetails=function(){for(var t,e,i,r=this,o=$('input[name="Tags"]').val(),s=$("#Note").val(),u=[],f=$("input#noteAttributes"),n=0;n<f.length;n++)t=$(f)[n],e={name:$(t).attr("attribute-name"),value:$(t).val()},u.push(e);NProgress.start();i=$(".update-order-btn");i.addClass("disabled").html(Bizweb.LOADING);$.ajax({url:Bizweb.routes.orders+"/"+r.id,data:{note:s,tags:o,noteAttributes:u},type:"POST",global:!1,success:function(n){var t=Bizweb.routes.orders+"/"+r.id;Bizweb.Utility.loadAjax(t,".order-info",function(){n.message?Bizweb.Flash.notice(n.message):Bizweb.Flash.notice("Cập nhật đơn hàng thành công")})},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));i.removeClass("disabled").html("Lưu");NProgress.done()}})},n.updateOrderEmail=function(){var n=$("#order-email").val(),t=$("#update-profile").is(":checked"),u=$('input[name="orderId"]').val(),i=$('input[name="customerId"]').val(),r=this;$.ajax({url:Bizweb.routes.orders+"/UpdateOrderEmail",dataType:"html",data:{email:n,updateProfile:t,id:r.id,customerId:i},type:"post",success:function(n){n!="OK"?$(".order-email-error-refresh").html(n):(Bizweb.Modal.hide(),Bizweb.Flash.notice("Cập nhật email đơn hàng thành công"),window.location.reload())}})},n}()}.call(this),function(){Bizweb.OrderAction=function(){function n(n,t){if(t)for(var i in t)this[i]=t[i]}return n.prototype.showModal=function(n){this[n].show()},n.prototype.archiveOrder=function(n,t){var i="";i=t?"Lưu trữ":"Hủy lưu trữ";$.ajax({url:n,type:"post",data:{isArchive:t},success:function(n){n!="OK"?Bizweb.Flash.notice(i+" đơn hàng không thành công"):(Bizweb.Flash.notice(i+" đơn hàng thành công"),window.location.reload())},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""))}})},n.prototype.getTotalRefund=function(){var n=0;return $(".refund-quantity").each(function(){n+=parseInt($(this).val())}),n},n.prototype.getTotalRefundAmount=function(n){var t=0;return $(".refund-quantity").each(function(){t+=parseFloat($(this).attr("value-per-item"))*parseInt($(this).val())}),t>n&&(t=n),t},n.prototype.updateRefundedNet=function(n){var t=0;$(".refund-quantity").each(function(){var n=$(this).attr("value-per-item"),i=$(this).val(),r=Math.floor(i);$(this).val(r);t+=parseInt($(this).val())*parseFloat(n)});$(".refundedNet").html(t);this.updateRefundAmounts(t);var i=$(n).attr("item-position"),r=$(n).attr("value-per-item"),u=r*$(n).val();$(".refundTotal-"+i).html(u)},n.prototype.updateRefundAmounts=function(n){if(n<=0)$(".refund-amount").each(function(){$(this).val(0)});else{var t=0;$(".refund-amount").each(function(){if(t<n){var i=parseFloat(n-t),r=parseFloat($(this).attr("max"));r<i&&(i=r);$(this).val(i);t+=parseFloat(i)}})}},n}()}.call(this),function(){Bizweb.OrderPaymentProcessing=function(){function n(n,t){if(t)for(var i in t)this[i]=t[i];this.hasNoAmountToCapture=!1;this.hasNoAmountToRefund=!0;this.hasSelectedQuantity=!1}return n.prototype.showModal=function(n){this[n].show()},n.prototype.getTotalRefund=function(){var n=0;return $(".refund-quantity").each(function(){n+=parseInt($(this).val())}),n},n.prototype.updateRefundedNet=function(n){var t=0,i=0;$(".refund-quantity").each(function(){var n=$(this).attr("value-per-item"),r=$(this).val(),u=Math.floor(r);$(this).val(u);i+=parseInt($(this).val());t+=parseInt($(this).val())*parseFloat(n)});$(".refundedNet").html(t);this.hasSelectedQuantity=i>0?!0:!1;this.updateRefundAmounts(t);var r=$(n).attr("item-position"),u=$(n).attr("value-per-item"),f=u*$(n).val();$(".refundTotal-"+r).html(f)},n.prototype.updateRefundAmounts=function(n){if(n<=0)$(".refund-amount").each(function(){$(this).val(0)});else{var t=0;$(".refund-amount").each(function(){if(t<n){var i=parseFloat(n-t),r=parseFloat($(this).attr("max"));r<i&&(i=r);$(this).val(i);t+=parseFloat(i)}})}this.updateFormattedRefundAmount()},n.prototype.updateFormattedRefundAmount=function(){var n=0;$(".refund-amount").each(function(){var t=parseFloat($(this).val());isNaN(t)&&(t=0,$(this).val(0));n+=t});this.hasNoAmountToRefund=n>0?!1:!0;$(".formattedRefundAmount").html(n)},n.prototype.actionRefund=function(n){var t=$(n);if(t.valid()){var i=t.attr("action"),r=t.attr("method"),u=this;$.ajax({url:i,type:r,data:t.serialize(),success:function(n){n!="OK"?(t.html($(n).find(".refund-form").html()),Bindings.bind(t.get(0),u)):(Bizweb.Modal.hide(),window.location.reload(),Bizweb.Flash.notice("Hoàn trả thành công"))},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""))}})}return!1},n.prototype.updateCaptureAmount=function(){for(var r,n,t=0,u=$(".capture-amount"),i=0;i<u.length;i++)r=u[i],n=parseFloat($(r).val()),isNaN(n)&&(n=0,$(r).val(0)),t+=n;this.hasNoAmountToCapture=t>0?!1:!0;$(".formattedCaptureAmount").html(t)},n.prototype.actionCapture=function(n){var t=$(n);if(t.valid()){var i=t.attr("action"),r=t.attr("method"),u=this;$.ajax({url:i,type:r,data:t.serialize(),success:function(n){n!="OK"?(t.html($(n).find(".capture-form").html()),Bindings.bind(t.get(0),u)):(Bizweb.Modal.hide(),window.location.reload(),Bizweb.Flash.notice("Nhận tiền thành công"))},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""))}})}return!1},n}()}.call(this),function(){var n=[].indexOf||function(n){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===n)return t;return-1};Bizweb.CollectionRules=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n;this.$rulesTable=$("#smart-filter-conditions")}return n.prototype.isOnlyRule=function(){return 1===$(".collection-rule",this.$rulesTable).length},n.prototype.removeRule=function(n){this.isOnlyRule()||$(n).closest(".collection-rule").remove()},n.prototype.addRule=function(){var n;n=$(".collection-rule",this.$rulesTable).first().clone();$(".rule-field, .rule-relation",n).each(function(){return this.selectedIndex=0});$(".rule-condition",n).val("");this.$rulesTable.append(n);Bindings.bind(n[0])},n}();Bizweb.CollectionRule=function(){function t(n,t){this.options=t;this.element=n;this.$node=$(n);this.ruleFieldChanged()}return t.prototype.ruleFieldChanged=function(){this.field=$(".rule-field",this.$node).val();this.prefix=this.options.prefixes[this.field]||"";this.suffix=this.options.suffixes[this.field]||"";Bindings.refreshImmediately();var n=$(".rule-relation",this.$node);$("option:selected:disabled",n).length>0&&(n[0].selectedIndex=0)},t.prototype.isRelationDisabled=function(t){return n.call(this.options.restrictions[this.field]||[],t)<0},t}()}.call(this),function(){Bizweb.ProductBulkActions=function(){function n(t,i){n.base.constructor.call(this,t,i)}return extend(Bizweb.BulkActions,n),n.prototype.addCollections=function(){var n=window.location.href;$.ajax({url:this.urlBulkActionAddCollections+"?type=custom&"+$("#frmBulkActions").serialize()+"&ReturnUrl="+encodeURIComponent(n),success:function(n){$("#bizweb-modal").html(n);$("#bizweb-modal").modal("show")}})},n.prototype.removeCollections=function(){var n=window.location.href;$.ajax({url:this.urlBulkActionRemoveCollections+"?type=custom&"+$("#frmBulkActions").serialize()+"&ReturnUrl="+encodeURIComponent(n),success:function(n){$("#bizweb-modal").html(n);$("#bizweb-modal").modal("show")}})},n}()}.call(this),function(){Bizweb.MediaFile=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n}return n.prototype.uploadFiles=function(){var t=new FormData,i=$("#fileUpload")[0].files.length,n,r,u;if(!(i<=0)){for(n=0;n<i;n++)r=document.getElementById("fileUpload").files[n],t.append("mediaImages",r);u=this;$.ajax({type:"POST",url:"/admin/settings/files/Upload",data:t,contentType:!1,processData:!1,success:function(n){if(n.error){Bizweb.Flash.error(n.error);return}Bizweb.Flash.notice("Thêm file thành công");window.location.href=window.location.href},error:function(){}})}},n.prototype.openFileUpload=function(){$("#fileUpload").click()},n}()}.call(this),function(){Bizweb.FileBulkActions=function(){function n(t,i){n.base.constructor.call(this,t,i)}return extend(Bizweb.BulkActions,n),n.prototype.previewImage=function(n){this.previewImageModal.show();$(".image-show").attr("src",n)},n.prototype.showDeleteFileModal=function(n){this.deleteFileModal.show();$('.form-delete-file input[name="fileId"]').val(n)},n.prototype.deleteFile=function(){var n=$('.form-delete-file input[name="fileId"]').val();$.ajax({type:"POST",url:"/admin/settings/files/Delete",data:{fileId:n},dataType:"json",success:function(){Bizweb.Flash.notice("Xóa file thành công");Bizweb.Modal.hide();window.location.href=window.location.href},error:function(){}})},n}()}.call(this),function(){Bizweb.Account=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n}return n.prototype.showStopAllSession=function(){this.stopAllSessionModal.show()},n.prototype.stopAllSession=function(){$.ajax({url:"/admin/settings/account/StopAllSession",type:"GET",success:function(){window.location="/admin/dashboard"}})},n.prototype.showDeleteUser=function(n){this.deleteUserModal.show();$('.form-delete-user input[name="userId"]').val(n)},n.prototype.takePlan=function(n,t,i){i||(i=0);$.ajax({url:Bizweb.routes.plans+"/takeplan",type:"POST",data:{channel:n,packageName:t,period:i},success:function(n){n!=null&&n.charge_id>0&&(window.location=Bizweb.routes.charges+"/"+n.charge_id);n!=null&&n.redirect&&(window.location=n.redirect)},error:function(n){if(typeof n.responseJSON=="undefined"){Bizweb.Flash.error("Thao tác thất bại");return}n.responseJSON.error!==null&&n.responseJSON.error!==""&&Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""))}})},n}()}.call(this),function(){Bizweb.DiscountBulkActions=function(){function n(t,i){n.base.constructor.call(this,t,i)}return extend(Bizweb.BulkActions,n),n.prototype.showDeleteDiscountModal=function(n){this.deleteDiscountModal.show();$('.form-delete-discount input[name="id"]').val(n)},n.prototype.deleteDiscount=function(){var n=$('.form-delete-discount input[name="id"]').val();$.ajax({type:"POST",url:"/admin/discounts/Delete",data:{id:n},dataType:"json",success:function(){Bizweb.Flash.notice("Xóa mã khuyến mãi thành công");Bizweb.Modal.hide();window.location.href=window.location.href},error:function(){}})},n}()}.call(this),function(){Bizweb.PaymentSetting=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n;this.$ele=$(n);this.id="#"+n.id}return n.prototype.saveSetting=function(n){var t=$(n);if(t.valid()){var r=t.attr("action"),u=t.attr("method"),i=this;NProgress.start();$.ajax({url:r,type:u,data:t.serialize(),global:!1,success:function(){Bizweb.Utility.loadAjax(Bizweb.routes.setting.checkout,i.id,function(){$.validator.unobtrusive.parse($(i.id).find("form").get(0));Bizweb.Flash.notice("Cập nhật thành công")})},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));NProgress.done()}})}return!1},n.prototype.removeSetting=function(n){var t=this;NProgress.start();$.ajax({url:$(n).attr("action"),type:$(n).attr("method"),global:!1,success:function(){Bizweb.Utility.loadAjax(Bizweb.routes.setting.checkout,t.id,function(){$.validator.unobtrusive.parse($(t.id).find("form").get(0));Bizweb.Flash.notice("Ngưng sử dụng cấu hình thành công")})},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));NProgress.done()}})},n}()}.call(this),function(){Bizweb.ShippingSetting=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n;this.$ele=$(n);this.id="#"+n.id}return n.prototype.saveSetting=function(n){var t=$(n),i=this;if(t.valid()){$(i.element).find(".btn-save-setting").addClass("disabled").html(Bizweb.LOADING);var r=t.attr("action"),u=t.attr("method"),i=this;NProgress.start();$.ajax({url:r,type:u,data:t.serialize(),global:!1,success:function(){Bizweb.Utility.loadAjax(Bizweb.routes.setting.shipping,i.id,function(){$.validator.unobtrusive.parse($(i.id).find("form").get(0));Bizweb.Flash.notice("Cập nhật thành công")})},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));$(i.element).find(".btn-save-setting").removeClass("disabled").html("Lưu");NProgress.done()}})}return!1},n.prototype.removeSetting=function(n){var t=this;$(t.element).find(".btn-delete-setting").addClass("disabled").html(Bizweb.LOADING);NProgress.start();$.ajax({url:$(n).attr("action"),type:$(n).attr("method"),global:!1,success:function(){Bizweb.Utility.loadAjax(Bizweb.routes.setting.shipping,t.id,function(){$.validator.unobtrusive.parse($(t.id).find("form").get(0));Bizweb.Flash.notice("Ngưng sử dụng cấu hình thành công")})},error:function(n){$(t.element).find(".btn-delete-setting").removeClass("disabled").html("Đồng ý");Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));NProgress.done()}})},n}()}.call(this),function(){Bizweb.ShippingMethod=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n;this.$ele=$(n);this.shippingProviderId=$("#shippingProviderId").val();this.changeProvider()}return n.prototype.changeProvider=function(){$(".shipping-provider-html:not('.shipping-provider-html-"+this.shippingProviderId+"') :input").prop("disabled",!0);$(".shipping-provider-html.shipping-provider-html-"+this.shippingProviderId+" :input").prop("disabled",!1)},n}()}.call(this),function(){Bizweb.Fulfilment=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n;this.$ele=$(n)}return n.prototype.checkValid=function(n){var i=$(n).val(),t=Math.floor(i),r=$(n).attr("max");parseInt(t)>parseInt(t)?$(n).val(r):$(n).val(t)},n.prototype.updateFulfillments=function(){var n=this;$(".btn-fulfill").addClass("disabled").html(Bizweb.LOADING);NProgress.start();$.ajax({url:Bizweb.routes.orders+"/"+n.order_id+"/fulfillments/create",type:"post",data:$(".fulfill-item-form").serialize(),global:!1,success:function(){Bizweb.Utility.loadAjax(Bizweb.routes.orders+"/"+n.order_id,".orderContext",function(){Bizweb.Flash.notice("Cập nhật thông tin giao hàng thành công")})},error:function(n){n.responseJSON?Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,"")):Bizweb.Flash.error("Cập nhật thất bại");$(".btn-fulfill").removeClass("disabled").html("Lưu");NProgress.done()}})},n}()}.call(this),function(){Bizweb.GHNShipping=function(){function n(n,t){var r,i;if(t!=null)for(r in t)this[r]=t[r];this.element=n;this.$ele=$(n);i=this;this.$warehouse=$(".shipping-provider-html.ghn-provider-context .warehouse");this.$province=$(".shipping-provider-html.ghn-provider-context .province");this.$district=$(".shipping-provider-html.ghn-provider-context .district");this.$service=$(".shipping-provider-html.ghn-provider-context .service");$.ajax({url:Bizweb.routes.ghn+"?province="+this.province,success:function(n){for(var r,f,u,o,e="",t=0;t<n.pick_hubs.length;t++)r=n.pick_hubs[t],e+="<option district='"+r.district_code+"' "+(r.main?"selected='selected'":"")+" value='"+r.pick_hub_id+"'>"+r.address+"( "+r.district_name+" )<\/option>";for(i.$warehouse.empty(),i.$warehouse.html(e),f="",t=0;t<n.provinces.length;t++)u=n.provinces[t],f+="<option "+(n.province==u.code?"selected='selected'":"")+" value='"+u.code+"'>"+u.name+"<\/option>";i.$province.empty();i.$province.html(f);n.province!=null?(o=n.districts,i.bindDistrict(o,i.district)):i.changeProvince()},error:function(n){n.responseJSON?Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,"")):Bizweb.Flash.error("Thông tin giao hàng nhanh không đúng.")}})}return n.prototype.bindDistrict=function(n,t){for(var i,u="<option ghn='' value=''>Chọn quận/huyện<\/option>",f="",r=0;r<n.length;r++)i=n[r],t==i.bw_district_code&&(f=i.ghn_district_code),u+="<option "+(t==i.bw_district_code?"selected='selected'":"")+" ghn='"+i.ghn_district_code+"' value='"+i.bw_district_code+","+i.ghn_district_code+"'>"+i.bw_district_name+"<\/option>";this.$district.empty();this.$district.html(u);this.changeDistrict(f)},n.prototype.changeProvince=function(){var n=this;$.ajax({url:Bizweb.routes.ghn+"/getdistrict?province="+$(".shipping-provider-html.ghn-provider-context .province").val(),success:function(t){t!=undefined&&t!=""&&t.length&&n.bindDistrict(t,"")}})},n.prototype.changeDistrict=function(n){var t=this;n==undefined&&(n=t.$district.find("option:selected").attr("ghn"));n!=""?$.ajax({url:Bizweb.routes.ghn+"/getservicelist?from="+t.$warehouse.find("option:selected").attr("district")+"&to="+n,success:function(n){var r,i,u;if(n!=undefined&&n!=""&&n.length){for(r="<option value='0'>Chọn gói giao hàng<\/option>",i=0;i<n.length;i++)u=n[i],r+="<option value='"+u.shipping_service_id+"'>"+u.name+"<\/option>";t.$service.empty();t.$service.html(r)}}}):t.$service.empty()},n}()}.call(this),function(){Bizweb.ScShipping=function(){function n(n,t){var r,i;if(t!=null)for(r in t)this[r]=t[r];this.element=n;this.$ele=$(n);i=this;this.$province=$(".shipping-provider-html.sc-provider-context .province");this.$district=$(".shipping-provider-html.sc-provider-context .district");$.ajax({url:Bizweb.routes.shipchung+"?province="+this.province,success:function(n){for(var t,f,u="",r=0;r<n.provinces.length;r++)t=n.provinces[r],u+="<option "+(n.code==t.code?"selected='selected'":"")+" value='"+t.code+"'>"+t.name+"<\/option>";i.$province.empty();i.$province.html(u);n.code!=null?(f=n.districts,i.bindDistrict(f,i.district)):i.changeProvince()},error:function(n){n.responseJSON?Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,"")):Bizweb.Flash.error("Địa chỉ giao hàng không đúng.")}})}return n.prototype.bindDistrict=function(n,t){for(var i,u="<option sc='' value=''>Chọn quận/huyện<\/option>",r=0;r<n.length;r++)i=n[r],u+="<option "+(t==i.bw_district_code?"selected='selected'":"")+" sc='"+i.sc_district_code+"' value='"+i.bw_district_code+","+i.sc_district_code+"'>"+i.bw_district_name+"<\/option>";this.$district.empty();this.$district.html(u)},n.prototype.changeProvince=function(){var n=this;$.ajax({url:Bizweb.routes.shipchung+"/getdistrict?province="+$(".shipping-provider-html.sc-provider-context .province").val(),success:function(t){t!=undefined&&t!=""&&t.length&&n.bindDistrict(t,"")}})},n}()}.call(this),function(){Bizweb.GHTKShipping=function(){function n(n,t){var r,i;if(t!=null)for(r in t)this[r]=t[r];this.element=n;this.$element=$(n);this.$province=$(".shipping-provider-html.ghtk-provider-context .province");this.$district=$(".shipping-provider-html.ghtk-provider-context .district");this.$warehouse=$(".shipping-provider-html.ghtk-provider-context .warehouse");this.$provinceHiddenInput=$(".shipping-provider-html.ghtk-provider-context input[name=Province]");this.$districtHiddenInput=$(".shipping-provider-html.ghtk-provider-context input[name=District]");i=this;$.ajax({url:Bizweb.routes.ghtk+"?province="+this.province,success:function(n){if(i.renderProvincesSelector(n.provinces,n.province),i.renderPickHubsSelector(n.pick_hubs,n.bizweb_pick_hub),i.bindSelectedProvinceInput(),n.province!=null){var t=n.districts;i.bindDistrict(t,i.district)}else i.changeProvince()},error:function(n){n.responseJSON?Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,"")):Bizweb.Flash.error("Thông tin giao hàng tiết kiệm không đúng.")}})}return n.prototype.renderProvincesSelector=function(n,t){for(var i,u="",r=0;r<n.length;r++)i=n[r],u+="<option "+(t==i.code?"selected='selected'":"")+" value='"+i.code+"'>"+i.name+"<\/option>";this.$province.empty();this.$province.html(u)},n.prototype.renderPickHubsSelector=function(n,t){var u="",i,r;for(t&&(u+="<option selected='selected' value='0'>"+t.address+"("+t.district+")<\/option>"),i=0;i<n.length;i++)r=n[i],u+="<option value='"+r.hub_code+"'>"+r.address+"("+r.district_name+")<\/option>";this.$warehouse.empty();this.$warehouse.html(u)},n.prototype.bindSelectedProvinceInput=function(){var n=this.$province.children("option:selected");n&&this.$provinceHiddenInput.val(n.text())},n.prototype.bindDistrict=function(n,t){for(var i,u="<option ghtk='' value=''>Chọn quận/huyện<\/option>",r=0;r<n.length;r++)i=n[r],u+="<option "+(t==i.code?"selected='selected'":"")+"value='"+i.code+"'>"+i.name+"<\/option>";this.$district.empty();this.$district.html(u);this.bindSelectedDistrictInput()},n.prototype.bindSelectedDistrictInput=function(){var n=this.$district.children("option:selected");n&&this.$districtHiddenInput.val(n.text())},n.prototype.changeProvince=function(){this.bindSelectedProvinceInput();var n=this;$.ajax({url:Bizweb.routes.ghtk+"/getdistrict?province="+$(".shipping-provider-html.ghtk-provider-context .province").val(),success:function(t){t!=undefined&&t!=""&&t.length&&n.bindDistrict(t,"")}})},n}()}.call(this),function(){Bizweb.VTPShipping=function(){function n(n,t){var r,i;if(t!=null)for(r in t)this[r]=t[r];this.element=n;this.$ele=$(n);i=this;this.$province=$(".shipping-provider-html.vtp-provider-context .province");this.$district=$(".shipping-provider-html.vtp-provider-context .district");$.ajax({url:Bizweb.routes.vtp+"?province="+this.province,success:function(n){for(var t,f,u="",r=0;r<n.provinces.length;r++)t=n.provinces[r],u+="<option "+(n.province==t.code?"selected='selected'":"")+" value='"+t.code+"'>"+t.name+"<\/option>";i.$province.empty();i.$province.html(u);n.province!=null?(f=n.districts,i.bindDistrict(f,i.district)):i.changeProvince()},error:function(n){n.responseJSON?Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,"")):Bizweb.Flash.error("Địa chỉ giao hàng không đúng.")}})}return n.prototype.bindDistrict=function(n,t){for(var i,u="<option sc='' value=''>Chọn quận/huyện<\/option>",r=0;r<n.length;r++)i=n[r],u+="<option "+(t==i.code?"selected='selected'":"")+" value='"+i.code+"'>"+i.name+"<\/option>";this.$district.empty();this.$district.html(u)},n.prototype.changeProvince=function(){var n=this;$.ajax({url:Bizweb.routes.vtp+"/getdistrict?province="+$(".shipping-provider-html.vtp-provider-context .province").val(),success:function(t){t!=undefined&&t!=""&&t.length&&n.bindDistrict(t,"")}})},n}()}.call(this),function(){Bizweb.ShippingAreaSetting=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n;this.$ele=$(n)}return n.prototype.showDeleteShippingAreaModal=function(n,t){this.deleteShippingAreaModal.show();$("form.delete-shipping-area-form .shipping-area-name").text(t);$("form.delete-shipping-area-form").find("input[name='id']").val(n)},n.prototype.showAddShippingRateModal=function(n,t){this.addShippingRateModal.show();$("form.add-shipping-rate-form .shipping-area-name").text(t);$("form.add-shipping-rate-form").find("input[name='shippingAreaId']").val(n)},n.prototype.deleteShippingArea=function(n){var t=$(n);if(t.valid()){var i=t.attr("action"),r=t.attr("method"),u=this;$.ajax({url:i,type:r,data:t.serialize(),success:function(n){n!="OK"?(t.parent().html(n),Bindings.bind(t.get(0),u)):(window.location.reload(),Bizweb.Flash.notice("Xóa khu vực vận chuyển thành công"))},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""))}})}return!1},n.prototype.addShippingRate=function(){var n=this;return $(".add-shipping-rate-form").valid()&&($(".add-shipping-rate-btn").addClass("disabled").html(Bizweb.LOADING),NProgress.start(),$.ajax({url:Bizweb.routes.setting.shipping+"/addShippingRate",type:"post",global:!1,data:$(".add-shipping-rate-form").serialize(),success:function(n){Bizweb.Utility.loadAjax(Bizweb.routes.setting.shipping,".shipping-area",function(){Bizweb.Flash.notice(n.message)})},error:function(n){n.responseJSON?Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,"")):Bizweb.Flash.error("Thêm mới thất bại");$(".add-shipping-rate-btn").removeClass("disabled").html("Thêm");NProgress.done()}})),!1},n}()}.call(this),function(){Bizweb.ShippingRate=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n;this.$ele=$(n)}return n.prototype.editShippingRate=function(n){var t=$(n),i=this;if(t.valid()){$(".btn-save-shipping-rate-"+i.id).addClass("disabled").html(Bizweb.LOADING);var r=t.attr("action"),u=t.attr("method"),i=this;NProgress.start();$.ajax({url:r,type:u,data:t.serialize(),global:!1,success:function(n){Bizweb.Utility.loadAjax(Bizweb.routes.setting.shipping,".shipping-rate-detail-"+i.id,function(){n.message?Bizweb.Flash.notice(n.message):Bizweb.Flash.notice("Cập nhật thông tin thành công")})},error:function(n){n.responseJSON&&n.responseJSON.error?Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,"")):Bizweb.Flash.error("Cập nhật thông tin thất bại");$(".btn-save-shipping-rate-"+i.id).removeClass("disabled").html("Lưu");NProgress.done()}})}return!1},n.prototype.toggleShippingRateEditor=function(){return this.selected=!this.selected},n.prototype.showDeleteShippingRateModal=function(n,t,i){this.deleteShippingRateModal.show();$("form.delete-shipping-area-form .shipping-area-name").text(i);$("form.delete-shipping-area-form").find("input[name='id']").val(n)},n.prototype.deleteShippingRate=function(n){var t=$(n);if(t.valid()){var i=t.attr("action"),r=t.attr("method"),u=this;$.ajax({url:i,type:r,data:t.serialize(),success:function(n){n!="OK"?(t.parent().html(n),Bindings.bind(t.get(0),u)):(window.location.reload(),Bizweb.Flash.notice("Xóa phí vận chuyển thành công"))},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""))}})}return!1},n.prototype.showModifiedMoney=function(n,t,i){var r=this.calculatePrice(n,t);return this.textMoneyWithSymbol(r,i)},n.prototype.calculatePrice=function(n,t){return Bizweb.Utility.isNumeric(n)?Bizweb.Utility.isNumeric(t)?parseInt(n)+parseInt(t):parseInt(n):Bizweb.Utility.isNumeric(t)?parseInt(t):0},n.prototype.textMoneyWithSymbol=function(n,t){Globalize.culture=Globalize.cultures[t];Bizweb.Utility.isNumeric(n)||(n=0);return Globalize.format(parseInt(n),"c",Globalize.culture.name)},n}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.Discount=function(){function t(t,i){if(this.prepareSubmitForm=n(this.prepareSubmitForm,this),i!=null)for(var r in i)this[r]=i[r];this.element=t;this.$form=$(t);this.$form.on("submit",this.prepareSubmitForm)}return t.prototype.generateCode=function(){var n,u,t,i,f,r;for(n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="",f=[],u=i=8;i>=1;u=--i)t=Math.floor(Math.random()*n.length),f.push(r+=n.substring(t,t+1));$("#discount_code").val(r)},t.prototype.disableHiddenInputs=function(){this.$form.find(".diable-hidden-input:visible :input").prop("disabled",!1);this.$form.find(".diable-hidden-input:not(:visible) :input").prop("disabled","disabled")},t.prototype.prepareSubmitForm=function(){this.disableHiddenInputs()},t.prototype.unlimitedUsageChanged=function(){var n=$('input[name="NoLimit"]').prop("checked");n?($(".infinity").removeClass("hide"),$("#discount_usage_limit").prop("disabled",!0),$("#discount_usage_limit").val("")):($(".infinity").addClass("hide"),$("#discount_usage_limit").prop("disabled",!1),$("#discount_usage_limit").focus())},t.prototype.neverExpiresChanged=function(){var n=$('input[name="NeverExpires"]').prop("checked");n?$('input[name="Ends"]').prop("disabled",!0):$('input[name="Ends"]').prop("disabled",!1)},t.prototype.startsAtChanged=function(){var n=$("input[name=StartsAt]").val().split("/"),t=$("input[name=EndsAt]").val().split("/"),r=new Date(n[2],n[1]-1,n[0]),u=new Date(t[2],t[1]-1,t[0]),i=new Date;i=r<=u?u:r;$("input[name=EndsAt]").datepicker("setDate",i);$("input[name=EndsAt]").datepicker("option","minDate",i)},t}()}.call(this),function(){Bizweb.EditCollection=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n}return n.prototype.openUploadImage=function(){$("#collection-upload-image").click()},n.prototype.uploadImage=function(){var n=$("#collection-upload-image")[0].files;n.length>0?($(".collection-image").remove(),this.showImageFromComputer(),$("#uploaded-images").html("Đã chọn ảnh")):$("#uploaded-images").html("Up ảnh đại diện")},n.prototype.showImageFromComputer=function(){var n=$("#collection-upload-image")[0].files[0],u=n.size,t=n.name,r,i;u<=1048576?(r=t.substr(t.lastIndexOf(".")+1),$.inArray(r.toLowerCase(),["jpg","png","gif","jpeg"])!=-1&&(i=new FileReader,i.onload=function(n){var t=$("#collection-image-template").html(),i=Mustache.render(t,{image:{largeImage:n.target.result,smallImage:n.target.result,uploadedImage:0}});$("#btn-upload-collection-image").after(i);Bindings.bind($(".upload-image").get(0),Bindings.context(document.body).editCollection)},i.readAsDataURL(n))):errors.push(t)},n.prototype.bindImageInTemplate=function(n,t){var i=Bizweb.Utility.getThumb(n,"large"),r=Bizweb.Utility.getThumb(n,"small"),u=$("#collection-image-template").html(),f=Mustache.render(u,{image:{largeImage:i,smallImage:r,uploadedImage:t}});$("#btn-upload-collection-image").after(f);Bindings.bind($(".upload-image").get(0),Bindings.context(document.body).editCollection)},n.prototype.previewImage=function(n){this.previewCollectionImageModal.show();$(".collection-image-show").attr("src",n)},n.prototype.deleteCollectionImage=function(n){var t=this,i;n?(i=$('.form-delete-collection-image input[name="collectionId"]').val(),$.ajax({type:"POST",url:"/admin/collections/DeleteImage",data:{collectionId:i},dataType:"json",success:function(){$(".collection-image").remove();Bizweb.Flash.notice("Xóa ảnh thành công");t.previewCollectionImageModal.hide()},error:function(){}})):($(".collection-image").remove(),$("#collection-upload-image").val(""),$("#uploaded-images").html("Up ảnh đại diện"),t.previewCollectionImageModal.hide(),t.src_image!=null&&t.bindImageInTemplate(t.src_image,1))},n}()}.call(this),function(){Bizweb.ShortProducts=function(){function n(n,t){if(t)for(var i in t)this[i]=t[i];this.ele=n;this.selectChanged=!1;this.initializeSortable()}return n.prototype.next=function(){this.loadUrl(this.next_page)},n.prototype.prev=function(){this.loadUrl(this.prev_page)},n.prototype.showAllProducts=function(){this.loadUrl(this.show_all)},n.prototype.loadUrl=function(n){Bindings.unbind($(".list-product").get(0));var t=this;$.ajax({url:n,success:function(n){$(".list-product").html(n);Bindings.bind($(".list-product").get(0),Bindings.context(document.body).editCollection.sortProducts)}})},n.prototype.updateSortOrder=function(){var r=this,n=this.id,t=$("select[name=SortOrder]").val(),i=this.page;$.ajax({url:"/admin/collections/UpdateSortOrder",type:"POST",data:{collectionId:n,page:i,sortOrder:t},success:function(n){$(".list-product").html(n);Bindings.bind($(".list-product").get(0));Bizweb.Flash.notice("Cập nhật danh mục thành công")}})},n.prototype.removeProduct=function(n,t,i){var u=this.type,r=this;u=="custom"?($("#frmDeleteProduct input[name='productId']").val(i),$("#frmDeleteProduct input[name='collectionId']").val(t),$.ajax({url:"/admin/collections/DeleteProduct",type:"POST",data:$("#frmDeleteProduct").serialize()+"&page="+r.page+"&limit="+r.page_size,success:function(n){$(".product-dropdown .product-suggest-result li[product-id='"+i+"']").removeClass("added-ico");$(".list-product").html(n);Bindings.bind($(".list-product").get(0));Bizweb.Flash.notice("Cập nhật danh mục thành công")}})):Bizweb.Flash.notice("Thao tác không được hỗ trợ")},n.prototype.initializeSortable=function(){if(this.sort_order=="manual"){var n=this;$(".dragable-product").sortable({items:"tr",axis:"y",update:function(){var t=[];$(".product-item").each(function(n){var i=$(this).attr("product-id");t[n]=i});$.ajax({url:Bizweb.routes.collections+"/"+n.id+"/order.json?product_ids="+t.join(",")+"&page="+n.page+"&limit="+n.page_size,type:"POST",success:function(){Bizweb.Flash.notice("Cập nhật thành công");$.ajax({url:Bizweb.routes.collections+"/GetProducts?collectionId="+n.id+"&page="+n.page+"&showAll="+n.is_show_all,type:"GET",success:function(n){var t=$(n).find(".dragable-product");t.length>0&&($(".dragable-product").html(t.html()),Bindings.unbind($(".dragable-product")[0]),Bindings.bind($(".dragable-product")[0]))}})},error:function(){Bizweb.Flash.error("Cập nhật thất bại")}})}})}},n.prototype.upToFistPosition=function(n,t){if(this.sort_order=="manual"){var i=this;$.ajax({url:Bizweb.routes.collections+"/"+i.id+"/push_top.json?product_id="+t,type:"POST",success:function(){Bizweb.Flash.notice("Cập nhật thành công");location.reload()},error:function(){Bizweb.Flash.error("Cập nhật thất bại")}})}},n}()}.call(this),function(){var i=function(t){t.addClass("active");var i=n(t);i.removeClass("display-from-bottom").addClass("is-visible");t.trigger("dropdown:show")},n=function(n){var t=n.attr("data-dropdown");return $(t,n)},t=function(t){if(t.hasClass("active")){var i=n(t);i.removeClass("is-visible");t.removeClass("active").trigger("dropdown:hide")}};$(document).on("click",function(n){var t=$(n.target),i=t.closest("a"),r=t.closest("[data-dropdown]");r.length>0?(n.preventDefault(),Bizweb.Dropdown.trigger(r)):(i.length>0&&!i.hasClass("keep-open")||!t.closest(".dropdown").length>0)&&Bizweb.Dropdown.hide()});Bizweb.Dropdown={trigger:function(n){n.hasClass("active")?t(n):i(n)},hide:function(){return $("[data-dropdown]").each(function(){return t($(this))})}}}.call(this),function(){Bizweb.RedirectsBulkActions=function(){function n(t,i){n.base.constructor.call(this,t,i)}return extend(Bizweb.BulkActions,n),n.prototype.showDeleteRedirectModal=function(n){this.deleteRedirectModal.show();$('.form-delete-redirect input[name="id"]').val(n)},n.prototype.deleteRedirect=function(){var n=$('.form-delete-redirect input[name="id"]').val();$.ajax({type:"POST",url:"/admin/settings/Redirects/Delete",data:{id:n},dataType:"json",success:function(){Bizweb.Flash.notice("Xóa chuyển hướng thành công");Bizweb.Modal.hide();window.location.href=window.location.href},error:function(){}})},n}()}.call(this),function(){Bizweb.RedirectsURL=function(){function n(n,t){if(t)for(var i in t)this[i]=t[i];this.ele=n}return n.prototype.addRedirect=function(){this.addRedirectModal.show()},n}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.SingleDropdown=function(){function t(t,i){if(this.checkFocus=n(this.checkFocus,this),i!=null)for(var r in i)this[r]=i[r];this.Type="collection";i.type!=null&&(this.Type=i.type);$(document).on("click",this.checkFocus);this.element=t;this.init();this.timer=null;this.request=null}return t.closeAllOpenDropdown=function(){$(".single-dropdown").removeClass("is-visible")},t.prototype.dropdown=function(){t.closeAllOpenDropdown();var n=this;this.isLoaded?$(this.element).find(".single-dropdown").addClass("is-visible"):($.ajax({type:"GET",url:_urlMappings[this.Type],success:function(t){n.isLoaded=!0;$(n.element).append(t);Bindings.bind($(n.element).find(".single-dropdown").get(0),n)},error:function(){},async:!1}),$(this.element).find(".single-dropdown").hasClass("is-visible")?$(this.element).find(".single-dropdown").removeClass("is-visible"):$(this.element).find(".single-dropdown").addClass("is-visible"))},t.prototype.suggest=function(){var n=this,t=$(this.element).find(".single-query").val(),i=_urlSuggestMappings[this.Type]+"?query="+t;this.page=1;this.timer!=null&&clearTimeout(this.timer);this.timer=setTimeout(function(){this.request!=null&&this.request.abort();this.request=$.ajax({url:i,type:"GET",success:function(t){$(n.element).find(".single-suggest-result").html(t);Bindings.bind($(n.element).find(".single-dropdown").get(0),n)}})},1e3)},t.prototype.toggle=function(n,t,i){if(this.valueType==="alias"){if(this.themeSettingId){var r=this.removeJQInvalidCharacter(this.themeSettingId);$("#setting-"+r).val(i);$("#setting-"+r).attr("setting-text",t);$("#setting-"+r).trigger("change")}$(this.element).find("[type='hidden']").val(i)}else $(this.element).find(".single-dropdown-select-id").val(n);$(this.element).find(".choosed-single").html(t);$(this.element).find(".single-dropdown-select-name").val(t);$(this.element).find(".single-dropdown").hasClass("is-visible")&&$(this.element).find(".single-dropdown").toggleClass("is-visible")},t.prototype.removeJQInvalidCharacter=function(n){return n.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-")},t.prototype.hideDropdown=function(){$(this.element).find(".single-dropdown").hasClass("is-visible")&&$(this.element).find(".single-dropdown").removeClass("is-visible")},t.prototype.checkFocus=function(n){var t=$(n.target);t.closest(".single-dropdown").length==0&&t.find(".dropdown-toggle").length>0&&this.hideDropdown()},t.prototype.init=function(){var n=$(this.element).find(".choosed-single").html();n&&$(this.element).find(".choosed-single").html(this.itemName)},t.prototype.next=function(){var n=$(this.element).find(".single-query").val(),t=_urlSuggestMappings[this.Type]+"?query="+n;this.page=this.page+1;this.next_page=t+"&page="+this.page;this.loadUrl(this.next_page)},t.prototype.prev=function(){var n=$(this.element).find(".single-query").val(),t=_urlSuggestMappings[this.Type]+"?query="+n;this.page=this.page-1;this.prev_page=t+"&page="+this.page;this.loadUrl(this.prev_page)},t.prototype.loadUrl=function(n){var t=this,t=this;$.ajax({url:n,success:function(n){$(t.element).find(".single-suggest-result").html(n);Bindings.bind($(t.element).find(".single-dropdown").get(0),t)}})},t}()}.call(this),function(){Bizweb.ThemeSelect=function(){function n(n,t){if(t)for(var i in t)this[i]=t[i];this.ele=n}return n.prototype.showPublishTheme=function(n,t,i){this.publishThemeModal.show();$(".form-publish-theme .theme-name").html(i);$(".form-publish-theme input[name=id]").val(n)},n.prototype.deleteTheme=function(n,t){this.deleteThemeModal.show();$(".form-delete-theme .theme-name").html(t);$(".form-delete-theme input[name=id]").val(n)},n.prototype.publishTheme=function(n){$(".btn-publish-theme").removeClass("disabled");$(".theme-role").removeClass("theme-role-selected");$(".role-"+n).addClass("theme-role-selected");$(".form-publish-theme input[name=role]").val(n)},n.prototype.unpublishTheme=function(n){$.ajax({type:"POST",url:"/admin/themes/UnPublishTheme",data:{mobileThemeId:n},success:function(){window.location.href=window.location.href;Bizweb.Flash.notice("Theme đã được ẩn")},error:function(){}})},n.prototype.enableUploadThemeSubmit=function(){$("#uploadTheme")[0].files.length>0&&$(".btn-upload-theme").removeClass("disabled")},n.prototype.uploadTheme=function(){$(".btn-upload-theme").addClass("disabled")},n}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.FilterAndSavedSearchWithDropDown=function(){function n(t,i){n.base.constructor.call(this,t,i);this.Type="";this.filterKey=="customerId"&&(this.Type="customer")}return extend(Bizweb.FilterAndSavedSearch,n),n.closeAllOpenDropdown=function(){$(".single-dropdown").removeClass("is-visible")},n.prototype.dropdown=function(){n.closeAllOpenDropdown();var t=this;this.isLoaded?$(this.element).find(".single-dropdown").addClass("is-visible"):($.ajax({type:"GET",url:_urlMappings[this.Type],success:function(n){t.isLoaded=!0;$(t.element).append(n);Bindings.bind($(t.element).find(".single-dropdown").get(0),t)},error:function(){},async:!1}),$(this.element).find(".single-dropdown").hasClass("is-visible")?$(this.element).find(".single-dropdown").removeClass("is-visible"):$(this.element).find(".single-dropdown").addClass("is-visible"))},n.prototype.suggest=function(){var n=this,t=$(this.element).find(".single-query").val(),i=_urlSuggestMappings[this.Type]+"?query="+t;$.ajax({url:i,type:"GET",success:function(t){$(n.element).find(".single-suggest-result").html(t);Bindings.bind($(n.element).find(".single-dropdown").get(0),n)},async:!1})},n.prototype.toggle=function(n,t,i){this.valueType==="alias"?$(this.element).find("[type='hidden']").val(i):$(this.element).find(".choosed-single-id").val(n);$(this.element).find(".choosed-single").html(t);$(this.element).find(".single-dropdown").hasClass("is-visible")&&$(this.element).find(".single-dropdown").toggleClass("is-visible")},n.prototype.hideDropdown=function(){$(this.element).find(".single-dropdown").hasClass("is-visible")&&$(this.element).find(".single-dropdown").removeClass("is-visible")},n.prototype.checkFocus=function(n){var t=$(n.target);t.closest(".single-dropdown").length==0&&t.find(".dropdown-toggle").length>0&&this.hideDropdown()},n.prototype.init=function(){var n=$(this.element).find(".choosed-single").html();n&&$(this.element).find(".choosed-single").html(this.itemName)},n}()}.call(this),function(){Bizweb.OrderFilterAndSavedSearch=function(){function n(t,i){n.base.constructor.call(this,t,i);this.element=t;this.isValid=!1;this.$filterForm=$("#frmFilter")}return extend(Bizweb.FilterAndSavedSearchWithDropDown,n),n.optionsNeedingValue=["greater_than","less_than","equals","not_equals"],n.closeAllOpenDropdown=function(){$(".single-dropdown").removeClass("is-visible")},n.prototype.dropdown=function(){n.closeAllOpenDropdown();var t=this;this.isLoaded?$(this.element).find(".single-dropdown").addClass("is-visible"):($.ajax({type:"GET",url:_urlMappings.customer,success:function(n){t.isLoaded=!0;$(t.element).find(".result-dropdown").append(n);Bindings.bind($(t.element).find(".single-dropdown").get(0),t)},error:function(){},async:!1}),$(this.element).find(".single-dropdown").hasClass("is-visible")?$(this.element).find(".single-dropdown").removeClass("is-visible"):$(this.element).find(".single-dropdown").addClass("is-visible"))},n.prototype.suggest=function(){var n=this,t=$(this.element).find(".single-query").val(),i=_urlSuggestMappings.customer+"?query="+t;$.ajax({url:i,type:"GET",success:function(t){$(n.element).find(".single-suggest-result").html(t);Bindings.bind($(n.element).find(".single-dropdown").get(0),n)},async:!1})},n.prototype.toggle=function(n,t){$(this.element).find(".choosed-single-id").val(n);$("#frmFilter").find("input[name='customerId']").val(n);$(this.element).find(".choosed-single").html(t);$(this.element).find(".single-dropdown").hasClass("is-visible")&&$(this.element).find(".single-dropdown").toggleClass("is-visible");this.option=n},n}()}.call(this),function(){Bizweb.OrderBulkActions=function(){function n(t,i){n.base.constructor.call(this,t,i)}return extend(Bizweb.BulkActions,n),n.prototype.fulfillOrders=function(){$.ajax({url:this.urlBulkActionFulfillOrders+"?"+$("#frmBulkActions").serialize(),success:function(n){$("#bizweb-modal").html(n);$("#bizweb-modal").modal("show")}})},n.prototype.archiveOrders=function(){$.ajax({url:this.urlBulkActionArchiveOrders,type:"POST",data:$("#frmBulkActions").serialize(),success:function(n){Bizweb.Flash.notice(n.result.message);window.location.href=window.location.href}})},n.prototype.unarchiveOrders=function(){$.ajax({url:this.urlBulkActionUnArchiveOrders,type:"POST",data:$("#frmBulkActions").serialize(),success:function(n){Bizweb.Flash.notice(n.result.message);window.location.href=window.location.href}})},n}()}.call(this),function(){Bizweb.EditArticle=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n}return n.prototype.openUploadImage=function(){$("#article-upload-image").click()},n.prototype.uploadImage=function(){var n=$("#article-upload-image")[0].files;n.length>0?($(".article-image").remove(),$("#uploaded-images").html("Đã chọn ảnh"),this.showImageFromComputer()):$("#uploaded-images").html("Up ảnh đại diện")},n.prototype.showImageFromComputer=function(){var n=$("#article-upload-image")[0].files[0],u=n.size,t=n.name,r,i;u<=1048576?(r=t.substr(t.lastIndexOf(".")+1),$.inArray(r.toLowerCase(),["jpg","png","gif","jpeg"])!=-1&&(i=new FileReader,i.onload=function(n){var t=$("#article-image-template").html(),i=Mustache.render(t,{image:{largeImage:n.target.result,smallImage:n.target.result,uploadedImage:0}});$("#btn-upload-article-image").after(i);Bindings.bind($(".upload-image").get(0),Bindings.context(document.body).editArticle)},i.readAsDataURL(n))):errors.push(t)},n.prototype.previewImage=function(n){this.previewImageModal.show();$(".image-show").attr("src",n)},n.prototype.bindImageInTemplate=function(n,t){var i=Bizweb.Utility.getThumb(n,"large"),r=Bizweb.Utility.getThumb(n,"small"),u=$("#article-image-template").html(),f=Mustache.render(u,{image:{largeImage:i,smallImage:r,uploadedImage:t}});$("#btn-upload-article-image").after(f);Bindings.bind($(".upload-image").get(0),Bindings.context(document.body).editArticle)},n.prototype.deleteArticleImage=function(n){var t=this,i;n?(i=$('.form-delete-article-image input[name="articleId"]').val(),$.ajax({type:"POST",url:"/admin/articles/DeleteImage",data:{articleId:i},dataType:"json",success:function(){$(".article-image").remove();Bizweb.Flash.notice("Xóa ảnh đại diện bài viết thành công");t.previewImageModal.hide()},error:function(){}})):($(".article-image").remove(),$("#article-upload-image").val(""),$("#uploaded-images").html("Up ảnh đại diện"),t.previewImageModal.hide(),t.src_image!=null&&t.bindImageInTemplate(t.src_image,1))},n}()}.call(this),function(){Bizweb.Inventory=function(){function n(n){this.oldQuantity=n;this.manualSet=!1;this.amount=0}return n.name="Inventory",n.prototype.useManualUpdate=function(){return this.manualSet=!0},n.prototype.useRelativeUpdate=function(){return this.manualSet=!1},n.prototype.usingManualUpdate=function(){return this.manualSet},n.prototype.inventoryHasChanged=function(){return this.newQuantity()!==parseInt(this.oldQuantity)},n.prototype.newQuantity=function(){return Bizweb.Utility.isNumeric(this.amount)?this.manualSet?parseInt(this.amount):parseInt(this.oldQuantity)+parseInt(this.amount):(this.amount=0,Bizweb.Utility.isNumeric(this.oldQuantity)||(this.oldQuantity=0),0)},n.prototype.updateVariant=function(n){var t=this,i=$(n);return $.ajax({url:i.attr("action"),type:"POST",dataType:"json",data:JSON.stringify({inventory_quantity:t.newQuantity(),id:t.id}),success:function(n,i,r){r.status==200&&(t.oldQuantity=n.inventory_quantity,t.amount=0,t.manualSet=!1,Bizweb.Flash.notice("Cập nhật kho thành công"))},error:function(){Bizweb.Flash.error("Cập nhật không thành công")}}),!1},n}()}.call(this),function(){Bizweb.VariantsBulkActions=function(){function n(t,i){n.base.constructor.call(this,t,i)}return extend(Bizweb.BulkActions,n),n.prototype.inventoryPolicyContinue=function(){this.BulkVariantsInventoryPolicyContinue="/admin/products/BulkVariantsInventoryPolicyContinue";$.ajax({url:this.BulkVariantsInventoryPolicyContinue,type:"POST",data:$("#frmBulkActions").serialize(),success:function(n){Bizweb.Flash.notice(n.result.message)}})},n.prototype.inventoryPolicyDeny=function(){this.BulkVariantsInventoryPolicyDeny="/admin/products/BulkVariantsInventoryPolicyDeny";$.ajax({url:this.BulkVariantsInventoryPolicyDeny,type:"POST",data:$("#frmBulkActions").serialize(),success:function(n){Bizweb.Flash.notice(n.result.message)}})},n.prototype.updateInventoryVariants=function(n,t){n==0?$.ajax({url:this.urlBulkUpdateQuantity+"?"+$("#frmBulkActions").serialize(),success:function(n){$("#bizweb-modal").html(n);$("#bizweb-modal").modal("show");Bindings.bind($("#bizweb-modal")[0],Bindings.context(document.body).variantsInventory)}}):$.ajax({url:this.urlBulkUpdateQuantity+"?"+$("#frmBulkActions").serialize()+"&productId="+n+"&productName="+t,success:function(n){$("#bizweb-modal").html(n);$("#bizweb-modal").modal("show");Bindings.bind($("#bizweb-modal")[0],Bindings.context(document.body).variantsInventory)}})},n}()}.call(this),function(){Bizweb.VariantOperations=function(){function n(t,i){n.base.constructor.call(this,t,i)}return extend(Bizweb.VariantsBulkActions,n),n.prototype.changePriceVariants=function(){$.ajax({url:this.urlBulkActionPrice+"?"+$("#frmBulkActions").serialize(),success:function(n){$("#bizweb-modal").html(n);$("#bizweb-modal").modal("show");Bindings.bind($("#bizweb-modal")[0],Bindings.context(document.body).variantChangePrice)}})},n.prototype.updateVariantsImage=function(n){var i=this,t="/admin/products/"+n+"/images/chooseproductimage?variantId=0&callback=updateVariantsImage&redirectToProduct=true&"+$("#frmBulkActions").serialize();$.ajax({url:t,success:function(n){$("#bizweb-modal").html(n);$("#bizweb-modal").modal("show");Bindings.bind($("#bizweb-modal")[0],Bindings.context(document.body).editProduct)}})},n.prototype.selectAllSubset=function(n,t){var f=this,r,i,u;for(this.uncheckAllBulkActionItems(),r=$(".option"+t+"-"+n),i=0;i<r.length;i++)u=$(r[i]).attr("variant-id"),f.selectBulkActionItem(u)},n.prototype.deleteVariant=function(n,t){var r=this,i=$(".btn-delete-variant");return i.addClass("disabled").html(Bizweb.LOADING),NProgress.start(),$.ajax({url:$(n).attr("action"),type:"POST",global:!1,data:{id:t},success:function(n){var t=Bizweb.routes.products+"/"+r.product_id;Bizweb.Utility.loadAjax(t,"#editProduct",function(){n.message?Bizweb.Flash.notice(n.message):Bizweb.Flash.notice("Xóa thành công phiên bản")})},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));i.removeClass("disabled").html("Xóa");NProgress.done()}}),!1},n}()}.call(this),function(){Bizweb.BulkVariantsUpdateInventory=function(){function n(){this.manualSet=!1;this.amount=0}return n.prototype.usingManualUpdate=function(){return $("input[name=SetInventoryQuantity]").val(this.manualSet),this.manualSet},n.prototype.useRelativeUpdate=function(){this.manualSet=!1;$("input[name=SetInventoryQuantity]").val(this.manualSet)},n.prototype.useManualUpdate=function(){this.manualSet=!0;$("input[name=SetInventoryQuantity]").val(this.manualSet)},n.prototype.newQuantity=function(n){return Bizweb.Utility.isNumeric(this.amount)?this.manualSet?parseInt(this.amount):parseInt(n)+parseInt(this.amount):(this.amount=0,0)},n.prototype.inventoryHasChanged=function(n){return this.newQuantity()!==parseInt(n)},n.prototype.submitVariantsInventory=function(){var n=this;$.ajax({url:$(".bulk-update-variants-inventory").attr("action"),type:"POST",data:$(".bulk-update-variants-inventory").serialize(),success:function(t){t.error?Bizweb.Flash.error(t.error):(n.updateAllInventory(),Bizweb.Flash.notice("Cập nhật variant thành công"),$("#bizweb-modal").modal("hide"))}})},n.prototype.updateAllInventory=function(){var t=$(".inventory-quantity--modified"),n;if(t.length>0)for(n=0;n<t.length;n++){var i=t[n],r=$(i).attr("id-variant"),u=$(i).html();$("#variant-quantity-"+r).val(u)}},n}()}.call(this),function(){Bizweb.BulkVariantsChangePrice=function(){function n(){}return n.prototype.submitFormBulkVariantPrice=function(){var t=this,n=$(".update-variant-price").val();if(!n.trim()){Bizweb.Flash.error("Nhập giá muốn cập nhật");return}$(".btn-bulk-update-price").addClass("disabled").html(Bizweb.LOADING);NProgress.start();$.ajax({url:$(".bulk-update-variants-price").attr("action"),type:"POST",global:!1,data:$(".bulk-update-variants-price").serialize(),success:function(n){Bizweb.Utility.loadAjax(window.location.href,".variants",function(){Bizweb.Flash.notice(n.message)});$("#bizweb-modal").modal("hide")},error:function(n){$(".btn-bulk-update-price").removeClass("disabled").html("Lưu");Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));NProgress.done()}})},n}()}.call(this),function(){Bizweb.HoverIntent=function(n,t){$(n).hoverIntent({sensitivity:7,interval:100,timeout:100,over:function(){var n;return n=$(this),!n.hasClass("disabled")&&(n.addClass("active"),t)?n.find(t).addClass("is-visible"):void 0},out:function(){var n;return n=$(this).removeClass("active"),t&&(n=n.find(t)),n.removeClass("is-visible")}})}}.call(this),function(){Bizweb.CustomerBubble=function(){function n(n,t){var i,r;this.node=n;r=new Bizweb.HoverIntent(this.node,t);i=$(this.node);i.find("img").on("error",function(){return $(this).removeAttr("src")});i.one("mouseenter",function(){return i.find("img[data-src]").each(function(n,t){var i;return i=$(t),i.attr("src",i.attr("data-src"))})})}return n.name="CustomerBubble",n}()}.call(this),function(){Bizweb.ThemeSettingLanguage=function(){function n(){this.role=="main"&&(this.isMainTheme=!0);this.otherLanguage=!1;this.otherLanguageCustomRegion=!1;this.showFilterBar()}return n.prototype.openSettingLanguage=function(){this.changeThemeLanguageModal.show();var n=$("select[name=themeLanguage]").val();this.otherLanguage=n=="other"?!0:!1},n.prototype.openSettingLanguageCategory=function(n){$(".filter-tab").removeClass("filter-tab-active");$(n).addClass("filter-tab-active")},n.prototype.addSettingToFormSettingThemeLanguage=function(n){var i=$("#frmThemeSettingLanguage"),f=$("#frmThemeSettingLanguageSubmit"),e=i.find("#"+n),o=e.val(),r=i.find("#frm-setting-item-"+n),t,u;r.length!==0&&r.remove();t=this.utf8_encode(o);t=escape(t).replace(/\+/g,"%2B");u="<input type='hidden' class='frm-setting-item' name='SettingLanguages["+n+"]' value='"+t+"' id='frm-setting-item-"+n+"' setting-id='"+n+"'/>";f.append($(u))},n.prototype.utf8_encode=function(n){var i,t,f,h;if(n===null||typeof n=="undefined")return"";var e=n+"",o="",r,u,s=0;for(r=u=0,s=e.length,i=0;i<s;i++){if(t=e.charCodeAt(i),f=null,t<128)u++;else if(t>127&&t<2048)f=String.fromCharCode(t>>6|192,t&63|128);else if((t&63488)!=55296)f=String.fromCharCode(t>>12|224,t>>6&63|128,t&63|128);else{if((t&64512)!=55296)throw new RangeError("Unmatched trail surrogate at "+i);if(h=e.charCodeAt(++i),(h&64512)!=56320)throw new RangeError("Unmatched lead surrogate at "+(i-1));t=((t&1023)<<10)+(h&1023)+65536;f=String.fromCharCode(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}f!==null&&(u>r&&(o+=e.slice(r,u)),o+=f,r=u=i+1)}return u>r&&(o+=e.slice(r,s)),o},n.prototype.showFilterBar=function(){var n=0,t=[],u,f,i;if(n+=$("#filter-tab-all").width(),u=$(".filter-tab-list").width(),f=$("#dropdown-hidden-search"),$("#filter-tab-list").find(".filter-tab-item").each(function(){var i=$(this);n+=i.width();n>=u-100&&(t.push(i),n-=i.width())}),t.length>0){for(i=0;i<t.length;i++){var r=t[i],e=r.attr("data-tab-name"),o=r.attr("data-tab-category"),s=r.attr("data-tab-themeId");f.append(this.generateHiddenTabItem(s,o,e));r.remove()}$("#hidden-search").width(u-n);$("#hidden-search").show()}},n.prototype.generateHiddenTabItem=function(n,t,i){return'<li> <a href="/admin/themes/language/'+n+"?category="+t+'" class="" bind-event-click="">'+i+"<\/a><\/li>"},n.prototype.submitFormSettingThemeLanguage=function(){$.ajax({url:"/admin/themes/language",type:"POST",data:$("#frmThemeSettingLanguageSubmit").serialize(),success:function(n){n.error?Bizweb.Flash.error(n.error):Bizweb.Flash.notice("Tùy biến ngôn ngữ giao diện thành công.")}})},n.prototype.changeThemeLanguage=function(n){var t=$(n).val();this.otherLanguage=t=="other"?!0:!1;$("input[name=themeLanguageRegion]").val("")},n.prototype.selectRegion=function(n){var t=$(n).val();this.otherLanguageCustomRegion=t=="custom"?!0:!1;$("input[name=themeLanguageRegion]").val("")},n}()}.call(this),function(){Bizweb.ThemeSettings=function(){function n(n,t){if(t)for(var i in t)this[i]=t[i];this.ele=n;this.changes=0;this.canUndo=!1;this.settings=[];this.changeSteps=[];this.undoing=!1;this.originValues={};this.applyPresetValues={};this.undoAll=!1;this.settingDropdowns=[];this.openCurrentSection()}return n.prototype.openCurrentSection=function(){var n=this.current_section;n>=0&&($(".next-pane").removeClass("next-pane--is-active"),$("#section-"+n).addClass("next-pane--is-active"))},n.prototype.openSection=function(n){$(".next-pane").removeClass("next-pane--is-active");$("#section-"+n).addClass("next-pane--is-active");this.current_section=n},n.prototype.backToList=function(){$(".next-pane").removeClass("next-pane--is-active");$("#sections-list").addClass("next-pane--is-active");this.current_section=-1},n.prototype.openUploadTmpImage=function(n){var t=this.removeJQInvalidCharacter(n);$("#uploadTmpImage-"+t).click()},n.prototype.removeJQInvalidCharacter=function(n){return n.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-")},n.prototype.saveChanges=function(){var n=$("#frmThemeSettings").find("input[name=themeId]").val(),t=this.current_section;$("#frmThemeSettings").find("input[name=CurrentSection]").val(this.current_section);$.ajax({url:"/admin/themes/SaveSettingChanges",type:"POST",data:$("#frmThemeSettings").serialize(),success:function(){window.location.href="/admin/themes/editor/?id="+n+"&currentSection="+t}})},n.prototype.uploadTmpImage=function(n){var r=this.removeJQInvalidCharacter(n),e=$("#frmThemeSettings").find("input[name=themeId]").val(),o=this,t=new FormData,u=$("#uploadTmpImage-"+r)[0].files.length,i,f;if(!(u<=0)){for(i=0;i<u;i++)f=document.getElementById("uploadTmpImage-"+r).files[i],t.append("mediaImage",f);t.append("themeId",e);t.append("settingId",n);$.ajax({type:"POST",url:"/admin/themes/createImgeTmp",data:t,contentType:!1,processData:!1,success:function(n){if(n.error){alert(n.error);return}var t=$("#uploadTmpImage-"+r);t.val("");o.showImgTmp(n.setting_id,n.public_url)},error:function(){}})}},n.prototype.showImgTmp=function(n,t){var i=this.removeJQInvalidCharacter(n),r=t;$("img#img-setting-"+i).attr("src",r);$("#setting-"+i).val(t);$("#setting-"+i).trigger("change")},n.prototype.submitFormSettingTheme=function(){$.ajax({url:"/admin/themes/overridereditor",type:"POST",data:$("#frmThemeSettings").serialize(),success:function(){var n=document.getElementById("theme-editor-iframe");n.src=n.src;Bizweb.Modal.hide()}})},n.prototype.overrideThemeEditor=function(n,t,i){var r,f,a,l,o,h,u,e,s;if(!this.undoing&&!this.undoAll){if(r={},f=this.removeJQInvalidCharacter(n),this.originValues[n]==null){var c=$("#setting-"+f).attr("start-value"),v=$("#setting-"+f).attr("origin-value"),l=r.OriginValue=v;r.SettingId=n;r.SettingType=t;r.StartValue=c;e=["collection","blog","page"];$.inArray(t,e)>-1?(a=$("#setting-"+f).attr("start-text"),r.StartText=a):r.StartText=c;this.originValues[n]=r}else l=this.originValues[n].OriginValue;switch(t){case"text":case"textarea":case"radio":case"color":u=$(i).val();break;case"collection":case"blog":case"page":u=$(i).val();o=$("#setting-"+f).attr("setting-text");break;case"checkbox":h=$(i).attr("checked");u=typeof h!=typeof undefined&&h!==!1?"true":"false";break;case"select":case"snippet":u=$("#setting-"+f+" option:selected").val();break;case"link_list":case"font":u=$("#setting-"+f+" option:selected").val();break;case"image":u=$(i).val()}this.addSettingToFormSettingTheme(n,t,u,l);this.settings[n]==null&&(this.settings[n]=[]);this.settings[n].push(u);e=["collection","blog","page"];$.inArray(t,e)>-1&&o!=undefined&&o!=""&&(this.settingDropdowns[n]==null&&(this.settingDropdowns[n]=[]),this.settingDropdowns[n].push(o));s={};s.SettingType=t;s.SettingId=n;this.changeSteps.push(s);this.canUndo=!0;this.submitFormSettingTheme()}this.changeSteps.length==0&&(this.canUndo=!1);this.undoing=!1},n.prototype.addSettingToFormSettingTheme=function(n,t,i,r){var f=$("#frmThemeSettings"),e=this.removeJQInvalidCharacter(n),o=f.find("#frm-setting-item-"+e),u,s;o.length!==0&&(o.remove(),this.changes--);i!=r&&(u=this.utf8_encode(i),u=escape(u).replace(/\+/g,"%2B"),s="<input type='hidden' class='frm-setting-item' name='Settings["+n+"]' value='"+u+"' id='frm-setting-item-"+e+"' setting-id='"+n+"' setting-type='"+t+"'/>",f.append($(s)),this.changes++,this.changes>0&&($(".btn-remove-changes").removeAttr("disabled"),$(".btn-save-changes").removeAttr("disabled"),$(".btn-remove-changes").removeClass("disabled"),$(".btn-save-changes").removeClass("disabled")))},n.prototype.utf8_encode=function(n){var i,t,f,h;if(n===null||typeof n=="undefined")return"";var e=n+"",o="",r,u,s=0;for(r=u=0,s=e.length,i=0;i<s;i++){if(t=e.charCodeAt(i),f=null,t<128)u++;else if(t>127&&t<2048)f=String.fromCharCode(t>>6|192,t&63|128);else if((t&63488)!=55296)f=String.fromCharCode(t>>12|224,t>>6&63|128,t&63|128);else{if((t&64512)!=55296)throw new RangeError("Unmatched trail surrogate at "+i);if(h=e.charCodeAt(++i),(h&64512)!=56320)throw new RangeError("Unmatched lead surrogate at "+(i-1));t=((t&1023)<<10)+(h&1023)+65536;f=String.fromCharCode(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}f!==null&&(u>r&&(o+=e.slice(r,u)),o+=f,r=u=i+1)}return u>r&&(o+=e.slice(r,s)),o},n.prototype.changeSettingValue=function(n,t,i,r,u){this.setSettingValue(t,n,i,u);this.addSettingToFormSettingTheme(n,t,i,r)},n.prototype.setSettingValue=function(n,t,i,r){var u=this.removeJQInvalidCharacter(t),e,f;switch(n){case"text":case"textarea":$("#setting-"+u).val(i);break;case"color":$("#setting-"+u).val(i);$(".setting-minicolor-"+u).minicolors("value",i);break;case"collection":case"blog":case"page":$("#setting-"+u).val(i);$("#setting-"+u).attr("setting-text",r);$("input.choosed-single-setting-"+u).val(i);$("span.choosed-single-setting-"+u).html(r);break;case"radio":for($("#setting-"+u).iCheck("uncheck"),e=$("#setting-"+u),f=0;f<e.length;f++)$(e[f]).val()==i&&$(e[f]).iCheck("check");break;case"checkbox":i=="true"?$("#setting-"+u).iCheck("check"):i=="false"?$("#setting-"+u).iCheck("uncheck"):$("#setting-"+u).iCheck("uncheck");break;case"select":case"font":case"link_list":case"snippet":$("#setting-"+u).val(i);break;case"image":$("#setting-"+u).val(i);this.showImgTmp(t,i)}},n.prototype.undo=function(){var u,i,r,f;this.undoing=!0;var e=this.changeSteps.length,n=this.changeSteps[e-1].SettingId,t=this.changeSteps[e-1].SettingType,c=this.removeJQInvalidCharacter(n);if(t=="clearChanges")return this.undoAfterClearChanges();if(t=="applyPreset")return this.undoAfterApplyPreset();var o=this.originValues[n].OriginValue,s=this.originValues[n].StartValue,h=this.originValues[n].StartText;this.settings[n].splice(-1,1);u=["collection","blog","page"];$.inArray(t,u)>-1&&this.settingDropdowns[n].splice(-1,1);i=this.settings[n].length;i==0?(r=s,f=h):(r=this.settings[n][i-1],f=$.inArray(t,u)>-1?this.settingDropdowns[n][i-1]:"");this.setSettingValue(t,n,r,f);this.addSettingToFormSettingTheme(n,t,r,o);this.changeSteps.splice(-1,1);this.changeSteps.length==0&&(this.canUndo=!1);this.submitFormSettingTheme();switch(t){case"radio":case"checkbox":case"color":break;default:this.undoing=!1}},n.prototype.undoAfterApplyPreset=function(){var n=this;this.undoAll=!0;$.each(this.applyPresetValues,function(){var t=this.SettingId,f=this.SettingType,e=this.OriginValue,o=this.StartValue,i,r,u;n.settings[t].splice(-1,1);n.settingDropdowns[t]!=null&&n.settingDropdowns[t].length>0&&n.settingDropdowns[t].splice(-1,1);i=n.settings[t].length;i==0?(r=o,u=startText):(r=n.settings[t][i-1],u=n.settingDropdowns[t][i-1]);n.changeSettingValue(t,f,r,e)});this.changeSteps.splice(-1,1);this.changeSteps.length==0&&(this.canUndo=!1);this.submitFormSettingTheme();this.undoAll=!1},n.prototype.undoAfterClearChanges=function(){var n=this;this.undoAll=!0;$.each(this.originValues,function(){var t=this.SettingId,e=this.SettingType,o=this.OriginValue,f=n.originValues[t].StartText,i,r,u;n.settings[t].splice(-1,1);n.settingDropdowns[t]!=null&&n.settingDropdowns[t].length>0&&n.settingDropdowns[t].splice(-1,1);i=n.settings[t].length;i==0?(r=startValue,u=f):(r=n.settings[t][i-1],u=n.settingDropdowns[t]!=null?n.settingDropdowns[t][i-1]:f);n.changeSettingValue(t,e,r,o,u)});this.changeSteps.splice(-1,1);this.changeSteps.length==0&&(this.canUndo=!1);this.submitFormSettingTheme();this.undoAll=!1},n.prototype.clearChanges=function(){var i,o,v,e,c,t,u;for(this.undoAll=!0,i=this,o=$("#frmThemeSettings").find(".frm-setting-item"),t=0;t<o.length;t++){var u=o[t],n=$(u).attr("setting-id"),s=$(u).attr("setting-type");if(i.originValues[n]!=undefined)var l=i.originValues[n].OriginValue,a=i.originValues[n].StartValue,f=this.originValues[n].StartText;else{var h=this.removeJQInvalidCharacter(n),r={},l=r.OriginValue=$("#setting-"+h).attr("origin-value"),a=$("#setting-"+h).attr("start-value"),f=$("#setting-"+h).attr("start-text");r.SettingId=n;r.SettingType=s;r.StartValue=a;i.originValues[n]=r}i.changeSettingValue(n,s,a,l,f);this.settings[n].push(l);v=["collection","blog","page"];$.inArray(s,v)>-1&&f!=undefined&&f!=""&&(this.settingDropdowns[n]==null&&(this.settingDropdowns[n]=[]),this.settingDropdowns[n].push(f))}for(this.changes=0,e={},e.SettingType="clearChanges",e.SettingId="",this.changeSteps.push(e),this.undoAll=!1,c=$("#frmThemeSettings").find(".frm-setting-item"),t=0;t<c.length;t++)u=c[t],$(u).remove();this.submitFormSettingTheme()},n.prototype.changeColor=function(){},n.prototype.showClearChangesModal=function(){this.clearChangesModal.show()},n.prototype.showDeletePresetModal=function(n){this.deletePresetModal.show();$("#delete-preset").val(n);$("#frm-delete-preset").find(".preset-name").html(n)},n.prototype.deletePreset=function(){var n=$("#frm-delete-preset").find("input[name=preset]").val();$.ajax({url:"/admin/themes/deletepreset",type:"POST",data:$("#frm-delete-preset").serialize(),success:function(){$("#presets-list ul").find("#preset-"+n).remove();Bizweb.Modal.hide()}})},n.prototype.saveCurrentPreset=function(){this.saveCurrentPresetModal.show()},n.prototype.saveCurrentSettingBeforeApplyPreset=function(n,t){var i=$(".btn-remove-changes").attr("disabled"),r=$(".btn-save-changes").attr("disabled");i!="disabled"&&r!="disabled"?(this.applyPresetModal.show(),$("#apply-preset").val(t)):this.applyPreset(n,t)},n.prototype.applyPresetWithoutSaving=function(n){var t=$("#apply-preset").val();this.applyPreset(n,t)},n.prototype.applyPreset=function(n,t){$("#frmThemeSettings").find("input[name=CurrentSection]").val(this.current_section);this.undoAll=!0;var i=this;$.ajax({url:"/admin/themes/ApplyPreset",type:"POST",data:{preset:t,themeId:n},success:function(n){for(var l,r,e,u=0;u<n.length;u++){var t=n[u].setting_id,o=i.removeJQInvalidCharacter(t),s=$("#setting-"+o).attr("setting-type"),c=$("#setting-"+o).attr("origin-value"),a=$("#setting-"+o).attr("start-value"),f=n[u].value,h=f;i.changeSettingValue(t,s,f,c,f);i.settings[t]==null&&(i.settings[t]=[]);i.settings[t].push(f);l=["collection","blog","page"];$.inArray(s,l)>-1&&h!=undefined&&h!=""&&(i.settingDropdowns[t]==null&&(i.settingDropdowns[t]=[]),i.settingDropdowns[t].push(h));r={};r.OriginValue=c;r.SettingId=t;r.SettingType=s;r.StartValue=a;i.applyPresetValues[t]=r}i.undoAll=!1;e={};e.SettingType="applyPreset";e.SettingId="";i.changeSteps.push(e);i.canUndo=!0;i.submitFormSettingTheme()}})},n}()}.call(this),function(){Bizweb.ThemeEditorPreview=function(){function n(){}return n.prototype.changeThemePreviewMode=function(n){$(".preview-window__option").removeClass("btn-primary");var t=$(n).attr("data-preview");$(".theme-editor__iframe-container").attr("data-preview-window",t);$(n).addClass("btn-primary")},n.prototype.previewThemeFullScreen=function(){$(".theme-editor__preview").hasClass("theme-editor__preview-full-screen")?($(".ico-toggle-sidebar").removeClass("ico-toggle-sidebar-open"),$(".theme-editor__preview").removeClass("theme-editor__preview-full-screen")):($(".ico-toggle-sidebar").addClass("ico-toggle-sidebar-open"),$(".theme-editor__preview").addClass("theme-editor__preview-full-screen"))},n}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.SingleSelectRemoteSourceAutocomplete=function(){function t(t,i){var r,u;if(this.closePopover=n(this.closePopover,this),this.element=t,i!=null)for(r in i)this[r]=i[r];this.allItems=[];this.suggestItems=[];this.initSelectItems();$("body").on("click",this.closePopover);u=this;$(t).focusout(function(n){u.closePopover(n)})}return t.prototype.initSelectItems=function(){var t=$(this.element).find(".next-list__item"),n,i,r;if(this.allItems.length<=0)for(n=0;n<t.length;n++)i=t[n],r=$(i).attr("item-value"),this.allItems.push(r);this.suggestItems=this.allItems;this.showSelected()},t.prototype.suggest=function(n,t){var u,i,r;if(this.suggestItems=[],u=$(this.element).find(".next-list--toggles"),$(u).empty(),$.trim(n).length==0||t==!0)this.suggestItems=this.allItems;else for(i=0;i<this.allItems.length;i++)r=this.allItems[i],r.toLowerCase().search(n.toLowerCase())>-1&&this.suggestItems.push(r);this.showSuggestItems(n,t);$(this.element).find(".next-popover").addClass("next-popover--is-active");$(this.element).find(".next-popover").addClass("next-popover--is-positioned-beneath")},t.prototype.showSuggestItems=function(n){var r=this,o=$(this.element).find(".next-list--toggles"),h=this.getSuggestNewItem(-1,n),i=$(h),u,t,f,s,e;for(o.append(i),Bindings.bind(i[0],r),u=!1,t=0;t<this.suggestItems.length;t++)f=this.suggestItems[t],f==n&&(u=!0),s=r.getSuggestItem(t,f),e=$(s),o.append(e),Bindings.bind(e[0],r);u&&i.remove();$.trim(n).length==0&&i.remove();this.showSelected()},t.prototype.getSuggestNewItem=function(n,t){return'<li><a bind-event-click="selectSuggestion(this)" class="next-list__item next-list__item--promoted-action" item-value="'+t+'"><div class="next-grid next-grid--no-outside-padding next-grid--compact"><div class="next-grid__cell next-grid__cell--no-flex"><i class="gi gi-plus pull-left next-icon next-icon--12"><\/i><\/div><div class="next-grid__cell"><strong> Thêm <\/strong>"'+t+'"<\/div><\/div><\/a><\/li>'},t.prototype.getSuggestItem=function(n,t){return'<li><a bind-event-click="selectSuggestion(this)" class="next-list__item" item-value="'+t+'"><div class="next-grid next-grid--no-outside-padding next-grid--compact"><div class="next-grid__cell next-grid__cell--no-flex"><i class="gi pull-left gi-ok next-icon next-icon--12"><\/i><\/div><div class="next-grid__cell">'+t+"<\/div><\/div><\/a><\/li>"},t.prototype.inputChanged=function(n){if(n.keyCode!=13){var t=$(this.element).find(".next-field--connected").val();this.suggest(t,!1)}},t.prototype.showSelected=function(){var i,r,n,t,u;for($(".next-list__item").removeClass("next-list__item--is-applied"),$(".next-list__item").removeClass("next-list__item--is-selected"),i=$(this.element).find(".next-list__item"),r=$(this.element).find(".next-field--connected").val(),n=0;n<i.length;n++)t=i[n],u=$(t).attr("item-value"),u==r&&($(t).addClass("next-list__item--is-applied"),$(t).addClass("next-list__item--is-selected"))},t.prototype.selectInputValue=function(n){if(n.keyCode==13){var t=$(this.element).find(".next-field--connected").val();this.selectValue(t)}},t.prototype.selectSuggestion=function(n){var t=$(n).attr("item-value");this.selectValue(t)},t.prototype.selectValue=function(n){$(this.element).find(".next-field--connected").val(n);$(".next-popover").removeClass("next-popover--is-active");$(".next-popover").removeClass("next-popover--is-positioned-beneath");this.showSelected()},t.prototype.togglePopover=function(){var n,t;this.showSelected();n=$(".next-popover-"+this.type).hasClass("next-popover--is-active");n?($(".next-popover").removeClass("next-popover--is-active"),$(".next-popover").removeClass("next-popover--is-positioned-beneath")):(t=$(this.element).find(".next-field--connected").val(),this.suggest(t,!0))},t.prototype.closePopover=function(n){var t=$(n.target).attr("id"),i=this.type;t!="btn-toggle-popover-"+this.type&&t!="fa-toggle-"+this.type&&($(".next-popover-"+i).removeClass("next-popover--is-active"),$(".next-popover-"+i).removeClass("next-popover--is-positioned-beneath"))},t}()}.call(this),function(){Bizweb.AddSavedSearch=function(){function n(){}return n.prototype.showCreateSavedSearch=function(){$("#div-update-saved-search").hide();$("#div-create-saved-search").show()},n.prototype.showUpdateSavedSearch=function(){$("#div-create-saved-search").hide();$("#div-update-saved-search").show()},n.prototype.submitForm=function(){var t,n;if($("#frm-saved-search").valid())if($("#create-saved-search").length==0||$("#create-saved-search").prop("checked"))t=$("input[name=Name]").val(),$("#savedSearchSave").addClass("disabled").html(Bizweb.LOADING),$("#frm-saved-search").submit();else{if(n=$("#override-saved-search").val(),n<=0)return Bizweb.Flash.error("Chọn kết quả tìm kiếm lưu đè"),!1;$(".btn-add").addClass("disabled").html(Bizweb.LOADING);$("#frm-saved-search").submit()}},n}()}.call(this),function(){Bizweb.App=function(){function n(n){this.$ele=$(n)}return n.prototype.remove=function(n){this.$ele.find(".btn-danger").addClass("disabled is-loading");var t=this;NProgress.start();$.ajax({url:Bizweb.routes.apps+"/remove",type:"POST",data:{id:n},global:!1,success:function(){Bizweb.Utility.loadAjax(Bizweb.routes.app,".page-wrapper-sub")},error:function(){Bizweb.Modal.hide();Bizweb.Flash.error("Xóa ứng dụng thất bại");NProgress.done()}})},n}()}.call(this),function(){var n=[].slice;Bizweb.Mixin=function(){var i,r,u,f,e,t,o;for(f=arguments[0],u=2<=arguments.length?n.call(arguments,1):[],t=0,o=u.length;o>t;t++){r=u[t];for(i in r)e=r[i],f[i]=e}}}.call(this),function(){var n=function(n,t){var r=new URI(t),e,u,f,o,i;if(t==null&&(t=""),i=r.segment(),e=i.slice(0,n.length),Common.difference(n,e).length>0)for(u=f=0;f<n.length;u=++f)o=n[u],i=r.segment(),i.splice(u,0,o),r.segment(i);return r},t=function(n){var t;return t=n.path()+n.search()+n.hash(),t[0]!=="/"&&(t="/"+t),t};Bizweb.Path={admin:function(i){return t(n(["admin"],i))},app:function(i,r){return t(n(["admin","apps",i],r))}}}.call(this),function(){var t=[].slice,n=function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],Bizweb.AppMessenger.debug&&("undefined"!=typeof console&&null!==console?console.log:void 0)?console.log.apply(console,["Bizweb.AppMessenger"].concat(n)):void 0},i=function(n,t){return n.protocol()===t.protocol()&&n.port()===t.port()&&t.hostname().slice(-n.hostname().length)===n.hostname()&&""!==n.hostname()};Bizweb.AppMessenger=function(){function t(n,t){this.applicationUrl=n;this.target=t;this.appUri=URI(this.applicationUrl);this.applicationOrigin=""+this.appUri.protocol()+"://"+this.appUri.authority();this.applicationOriginUri=URI(this.applicationOrigin);this.debug=!1}return t.prototype.enableDebug=function(){return this.debug=!0},t.prototype.start=function(n){return window.addEventListener("message",this._listener=this.receive.bind(this,n))},t.prototype.stop=function(){return window.removeEventListener("message",this._listener)},t.prototype.broadcast=function(n,t){return null==t&&(t={}),this.send(n,t,this.target),this.modalTarget?this.send(n,t,this.modalTarget):void 0},t.prototype.send=function(n,t,i){var r;return null==t&&(t={}),null==i&&(i=this.target),r="Bizweb.API.initialize"===n?"*":this.applicationOrigin,i.postMessage(JSON.stringify({message:n,data:t}),r)},t.prototype.receive=function(t,r){var u;if(u=null,r.origin!==this.applicationOrigin&&!i(this.applicationOriginUri,URI(r.origin)))return n("received message",u,"from unexpected origin",r.origin,"; expecting "+this.applicationOrigin+" or subdomain thereof");try{u=JSON.parse(r.data);this.stopInactivityTimeout();n("received message",u)}catch(f){n("failed to parse JSON "+r.data+" from origin "+r.origin)}if(u)return t(u.message,u.data)},t.prototype.print=function(){return this.send("Bizweb.API.print")},t.prototype.toAbsoluteAppPath=function(n){var t;return n?(t=URI(n),t.authority()?n:(t.authority(this.applicationOriginUri.authority()),t.protocol(this.applicationOriginUri.protocol()),t.toString())):n},t.prototype.startInactivityTimeout=function(){return this.inactivityTimer=setTimeout(this.showInactivityTimeoutMessage,4e3)},t.prototype.stopInactivityTimeout=function(){if(this.inactivityTimer)return clearTimeout(this.inactivityTimer)},t.prototype.showInactivityTimeoutMessage=function(){return Bizweb.Flash.error("This app appears to be unresponsive")},t.name="AppMessenger",t}()}.call(this),function(){var n=function(n){return n.height($(window).height())};Bizweb.EmbeddedAppHost=function(){function n(n,t,i,r){this.applicationUrl=n;this.slug=t;this.name=i;this.resize();this.access_scope=r.access_scope||[];this.$iframe=$(".app-iframe");$(window).on("resize",this.resize)}return n.prototype.resize=function(){this.$container==null&&(this.$container=$(".app-iframe"));var n=$(window).height();n-=this.$container.offset().top;this.$container[0].style.height=""+n+"px"},n.prototype.respondsTo=function(n){return Common.include(this.events,n)},n.prototype.betas=function(){return{}},n.name="EmbeddedAppHost",n}()}.call(this),function(){var n=function(n){var t=URI(n).protocol();return t!=="http"&&t!="https"&&t!==""&&(n=""),n};Bizweb.EmbeddedAppButtons={build:function(t,i){if(i==null&&(i=!1),!t)return t;var r={label:t.label,type:t.type,message:t.message,print:!!t.print};if(t.hasOwnProperty("loading")&&(r.loading=!!t.loading),t.type==="dropdown"&&(r.loading=!1,t.links&&(r.links=function(){for(var i=[],n=0;n<t.links.length;n++)i.push(Bizweb.EmbeddedAppButtons.build(t.links[n]));return i}())),t.href){r.href=n(t.href);r.target=t.target;switch(t.target){case"bizweb":r.href=Bizweb.Path.admin(r.href);break;case"parent":case"app":break;default:r.target="new";r.loading=!1}}return r["class"]=function(){var n="";switch(t.style){case"danger":n="btn btn-danger";break;default:n=i?"btn btn-primary":"btn btn-default"}return t.style==="disabled"&&(n+=" disabled"),n}(),r},arrayify:function(n){return n instanceof Array?n:[n]},buildGroup:function(n,t){var r=[],i,u;if(t==null&&(t={}),n)for(n=this.arrayify(n),n=[].concat(n).slice(0,t.limit),i=0;i<n.length;i++)u=Bizweb.EmbeddedAppButtons.build(n[i],t.primary),r.push(u);return r}}}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};Bizweb.AdminEmbeddedAppHost=function(t){function r(t,i,u,f){this.applicationUrl=t;this.slug=i;this.name=Bizweb.Utility.decodeHtml(u);this.initializeUser=n(this.initializeUser,this);r.__super__.constructor.apply(this,arguments);this.is_channel_app=f.is_channel_app;this.$header=$(".page-heading");this.appMessenger=new Bizweb.AppMessenger(this.applicationUrl,this.$iframe[0].contentWindow);var e=this;$(document).one("page:before-change",function(){return e.appMessenger.stop()});this.$iframe.on("load",function(){e.appMessenger.send("Bizweb.API.initialize",{User:{current:e.initializeUser(f.client_betas)}});Common.include(f.client_betas,"Bizweb.API.inactivityTimeout")&&e.appMessenger.startInactivityTimeout()});this.navigationResolver=f.navigationResolver}return i(r,t),r.prototype.events=["Bizweb.API.initialize","Bizweb.API.pushState","Bizweb.API.replaceState","Bizweb.API.redirect","Bizweb.API.Utility.toggleMinimize","Bizweb.API.flash.error","Bizweb.API.flash.notice","Bizweb.API.Bar.initialize","Bizweb.API.Bar.title","Bizweb.API.Bar.breadcrumb","Bizweb.API.Bar.icon","Bizweb.API.Bar.pagination","Bizweb.API.Bar.buttons","Bizweb.API.Bar.loading.on","Bizweb.API.Bar.loading.off","Bizweb.API.Bar.closeDropdown","Bizweb.API.Bar.error.404","Bizweb.API.Bar.error.422","Bizweb.API.Bar.error.500","Bizweb.API.Modal.alert","Bizweb.API.Modal.confirm","Bizweb.API.Modal.input","Bizweb.API.Modal.open","Bizweb.API.Modal.close","Bizweb.API.Modal.setHeight","Bizweb.API.Modal.filePicker"],r.prototype.initialize=function(n){if(n.debug)return this.appMessenger.enableDebug()},r.prototype.currentUser=function(){return Bizweb.currentUser},r.prototype.initializeUser=function(n){var t={accountAccess:this.currentUser().roles};return Common.include(n,"User.additionalData")&&(t.name=this.currentUser().last_name!==null?this.currentUser().last_name+" "+this.currentUser().first_name:this.currentUser().first_name,t.email=this.currentUser().email,t.account_owner=this.currentUser().account_owner,t.accountOwner=this.currentUser().account_owner),t},r.prototype.start=function(n){return this.appMessenger.start(n)},r.prototype.flashError=function(n){return Bizweb.Flash.error(n)},r.prototype.flashNotice=function(n){return Bizweb.Flash.notice(n)},r.prototype.closeModal=function(n){if(this.appMessenger.modal)return(this.appMessenger.modal.hide({trigger:!1}),this.appMessenger.broadcast("Bizweb.API.Modal.close",n),delete this.appMessenger.modal,delete this.appMessenger.modalTarget)},r.prototype.pushAppState=function(n){return Page.pushState(Bizweb.Path.app(this.slug,n))},r.prototype.replaceAppState=function(n){return Page.replaceState(Bizweb.Path.app(this.slug,n))},r.prototype.redirect=function(n){return Page.visit(Bizweb.Path.admin(n),{reload:!0})},r.prototype.closeDropdown=function(){this.$header.find(".dropdown").removeClass("open")},r.prototype.clickButton=function(n,t){if(t.href){t.loading&&"app"===t.target&&Bizweb.Loading.start();switch(t.target){case"parent":case"bizweb":Page.visit(t.href,{reload:!0});break;case"app":break;default:Page.open(t.href)}}t.print&&this.appMessenger.print();t.message&&this.appMessenger.broadcast(t.message,t.data)},r.prototype.showError=function(n){this.renderTitle(function(){switch(n){case 404:return"404 - Page not found";case 422:return"422 - Unable to complete request";case 500:return"500 - Server error";default:return"Something has gone wrong"}}());this.renderIcon(null);this.renderBreadcrumb(null);this.renderButtons(null)},r.prototype.renderBar=function(n){this.resetBar();this.renderIcon(n.icon);this.renderTitle(n.title);this.renderBreadcrumb(n.breadcrumb);this.renderButtons(n.buttons)},r.prototype.resetBar=function(){this.$header.find(".breadcrumb").html("");this.$header.find(".title").text("")},r.prototype.renderIcon=function(n){var t=this.appMessenger.toAbsoluteAppPath(n);this.$header.find(".breadcrumb img").length>0?this.$header.find(".breadcrumb img").attr("src",t):this.$header.find(".breadcrumb").html('<img src="'+t+'" class="ico"/>')},r.prototype.renderBreadcrumb=function(n){n&&(n=Bizweb.EmbeddedAppButtons.build(n),this.$header.find(".breadcrumb .breadcrumb").length>0?this.$header.find(".breadcrumb .breadcrumb").html('<a href="#" bind-event-click=\'clickButton(this, '+JSON.stringify(n)+")'>"+n.label+" /<\/a>"):this.$header.find(".breadcrumb").append('<span class="breadcrumb"><a href="#" bind-event-click=\'clickButton(this, '+JSON.stringify(n)+")'>"+n.label+" /<\/a><\/span>"),Bindings.unbind(this.$header.find(".header__main")[0]),Bindings.bind(this.$header.find(".header__main")[0]))},r.prototype.renderTitle=function(n){if(n!=null&&n!=""){var t=null;n&&!this.is_channel_app&&(t=Bizweb.routes.apps+"/"+this.slug);this.$header.find(".breadcrumb").append('<a href="'+t+'">'+Bizweb.Utility.decodeHtml(this.name)+"<\/a> /")}this.setTitle(n)},r.prototype.setTitle=function(n){n!=null&&n!=""?this.$header.find(".title").text(Bizweb.Utility.decodeHtml(n)):this.$header.find(".title").text(Bizweb.Utility.decodeHtml(this.name))},r.prototype.renderButtons=function(n){var f,u,e,i,t,r;for(this.$header.find(".header-right").html(""),n={primary:Bizweb.EmbeddedAppButtons.buildGroup(n!=null?n.primary:void 0,{primary:!0,limit:1}),secondary:Bizweb.EmbeddedAppButtons.buildGroup(n!=null?n.secondary:void 0,{limit:4})},i=0;i<n.secondary.length;i++){if(t=n.secondary[i],t.type==="dropdown"){for(r=$('<span class="dropdown"><a href="javascript:void(0)" class="'+t.class+'" data-toggle="dropdown">'+t.label+' <span class="caret"><\/span><\/a><\/span>'),f=$('<ul class="dropdown-menu arrow-style pull-right" role="menu">'),u=0;u<t.links.length;u++)e=t.links[u],f.append('<li><a href="#" bind-event-click=\'clickButton(this, '+JSON.stringify(e)+")'>"+e.label+"<\/a><\/li>");r.append(f)}else r='<a href="#" class="'+t.class+"\" bind-event-click='clickButton(this, "+JSON.stringify(t)+")'>"+t.label+"<\/a>";this.$header.find(".header-right").append(r);Bindings.unbind(this.$header.find(".header-right")[0]);Bindings.bind(this.$header.find(".header-right")[0])}for(i=0;i<n.primary.length;i++)t=n.primary[i],r='<a href="#" class="'+t.class+"\" bind-event-click='clickButton(this, "+JSON.stringify(t)+")'>"+t.label+"<\/a>",this.$header.find(".header-right").append(r),Bindings.unbind(this.$header.find(".header-right")[0]),Bindings.bind(this.$header.find(".header-right")[0])},r.prototype.toggleMinimize=function(n){n||(n={});n.active===!0?(Bizweb.Utility.hideSidebar(),n.hideMenu&&Bizweb.Utility.hideMenu()):n.active===!1?(Bizweb.Utility.showSidebar(),n.hideMenu&&Bizweb.Utility.showMenu()):(Bizweb.Utility.toggleSidebar(),n.hideMenu&&Bizweb.Utility.toggleMenu())},r.prototype.startLoading=function(){Bizweb.Loading.start()},r.prototype.stopLoading=function(){Bizweb.Loading.stop()},r.prototype.filePicker=function(){var n=$("#filePicker").get(0);n&&(this.filePickerModal=new Bizweb.Modal(n),this.filePickerModal.show())},r.prototype.filePickerConfirm=function(n){this.appMessenger.broadcast("Bizweb.API.Modal.close",{result:!0,data:{file:n}});this.filePickerModal.hide()},r.prototype.filePickerCancel=function(){this.appMessenger.broadcast("Bizweb.API.Modal.close",{result:!1})},r.name="AdminEmbeddedAppHost",r}(Bizweb.EmbeddedAppHost)}.call(this),function(){Bizweb.EmbeddedApp=function(){function n(n,t,i,r){this.client_betas=r.client_betas||[];r.navigationResolver=r.navigation!=null?function(){return r.navigation}:function(){return Bindings.context(document.querySelector("body")).nextNavigation};this.host=new Bizweb.AdminEmbeddedAppHost(n,t,i,r);this.host.start(this.handleMessage.bind(this))}return n.prototype.isInBeta=function(n){return Common.include(this.client_betas,n)},n.prototype.handleMessage=function(n,t){if(!this.host.respondsTo(n))return console.log("Unsupported message '"+n+"'");switch(n){case"Bizweb.API.initialize":return this.host.initialize(t);case"Bizweb.API.pushState":return this.host.pushAppState(t.location);case"Bizweb.API.replaceState":return this.host.replaceAppState(t.location);case"Bizweb.API.redirect":return this.host.redirect(t.location);case"Bizweb.API.Utility.toggleMinimize":return this.host.toggleMinimize(t.option);case"Bizweb.API.flash.error":return this.host.flashError(t.message);case"Bizweb.API.flash.notice":return this.host.flashNotice(t.message);case"Bizweb.API.Bar.initialize":return this.host.renderBar(t);case"Bizweb.API.Bar.title":return this.host.setTitle(t.title);case"Bizweb.API.Bar.breadcrumb":return this.host.renderBreadcrumb(t.breadcrumb);case"Bizweb.API.Bar.icon":return this.host.renderIcon(t.icon);case"Bizweb.API.Bar.buttons":return this.host.renderButtons(t.buttons);case"Bizweb.API.Bar.loading.on":return this.host.startLoading(t);case"Bizweb.API.Bar.loading.off":return this.host.stopLoading(t);case"Bizweb.API.Bar.closeDropdown":return this.host.closeDropdown();case"Bizweb.API.Bar.error.404":return this.host.showError(404);case"Bizweb.API.Bar.error.422":return this.host.showError(422);case"Bizweb.API.Bar.error.500":return this.host.showError(500);case"Bizweb.API.Modal.close":return this.host.closeModal(t);case"Bizweb.API.Modal.filePicker":return this.host.filePicker(t);default:console.log("Unknown message '"+n+"'")}},n.name="EmbeddedApp",n}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.MultipleDropdown=function(){function t(t,i){this.checkFocus=n(this.checkFocus,this);$(document).on("click",this.checkFocus);if(i!=null)for(var r in i)this[r]=i[r];i.type!=null&&(this.Type=i.type);this.element=t;this.timer=null;this.request=null}return t.prototype.checkFocus=function(n){var t=$(n.target);t.closest(".dropdown").length==0&&t.find(".dropdown-toggle").length>0&&this.hideDropdown()},t.prototype.dropdown=function(){var n=this;this.isLoaded||$.ajax({type:"GET",url:_urlMultipleMappings[this.Type],success:function(t){n.isLoaded=!0;$(n.element).append(t);Bindings.bind($(n.element).find(".dropdown").get(0),n)},error:function(){},async:!1});$(this.element).find(".dropdown").hasClass("is-visible")?$(this.element).find(".dropdown").removeClass("is-visible"):$(this.element).find(".dropdown").addClass("is-visible")},t.prototype.suggest=function(){var n=this,t=$(this.element).find(".query").val(),i=_urlMultipleSuggestMappings[this.Type]+"query="+t;this.page=1;this.timer!=null&&clearTimeout(this.timer);this.timer=setTimeout(function(){this.request!=null&&this.request.abort();this.request=$.ajax({url:i,type:"GET",success:function(t){$(n.element).find(".multiple-suggest-result").html(t);Bindings.bind($(n.element).find(".dropdown").get(0),n)}})},1e3)},t.prototype.hideDropdown=function(){$(this.element).find(".dropdown").hasClass("is-visible")&&$(this.element).find(".dropdown").removeClass("is-visible")},t.prototype.next=function(){var n=$(this.element).find(".query").val(),t=_urlMultipleSuggestMappings[this.Type]+"query="+n;this.page=this.page+1;this.next_page=t+"&page="+this.page;this.loadUrl(this.next_page)},t.prototype.prev=function(){var n=$(this.element).find(".query").val(),t=_urlMultipleSuggestMappings[this.Type]+"query="+n;this.page=this.page-1;this.prev_page=t+"&page="+this.page;this.loadUrl(this.prev_page)},t.prototype.loadUrl=function(n){var t=this,t=this;$.ajax({url:n,success:function(n){$(t.element).find(".multiple-suggest-result").html(n);Bindings.bind($(t.element).find(".dropdown").get(0),t)}})},t}()}.call(this),function(){Bizweb.CollectionMultipleDropdown=function(){function n(t,i){n.base.constructor.call(this,t,i)}return extend(Bizweb.MultipleDropdown,n),n.prototype.toggle=function(n,t,i){var e=$(".list-collection table tr[collection-id='"+n+"']").length>0,r,u,f;e?this.removeCollection(n):(r=Bizweb.Utility.getThumb(i,"thumb"),u='<tr collection-id="'+n+'"><td class="pl-none"><img src="'+(r!=""?r:"/assets/images/no-image-50-50.png")+'" class="'+(r!=""?"":"image-is-blank")+'"/><\/td><td><a href="/admin/collections/'+n+'">'+t+'<\/a><\/td><td class="pr-none" style="width: 80px; text-align:right;"><a bind-event-click="removeCollection('+n+')" href="javascript:void(0)"><i class="gi gi-remove"><\/i><\/a><input type="hidden" name="collectionId" value="'+n+'"/><\/td><\/tr>',$(".list-collection table tbody").append(u),Bindings.bind($(".list-collection")[0]),$(".collection-select[collection-id='"+n+"']").addClass("added-ico"));f=$(".list-collection").find("table tr").length;f>0?$(".no-colection-found").hide():$(".no-colection-found").show()},n.prototype.removeCollection=function(n){$(".list-collection table tr[collection-id='"+n+"']").remove();$(".collection-select[collection-id='"+n+"']").removeClass("added-ico");var t=$(".list-collection").find("table tr").length;t>0?$(".no-colection-found").hide():$(".no-colection-found").show()},n}()}.call(this),function(){Bizweb.ProductMultipleDropdown=function(){function n(t,i){n.base.constructor.call(this,t,i)}return extend(Bizweb.MultipleDropdown,n),n.prototype.existProductId=function(n){return this.product_ids.indexOf(n)>-1},n.prototype.toggle=function(n,t,i){var r=this,u=this.collectionId,e=$(".list-product table tr").length,o=$(".sort-products-context").attr("product-limit"),f;this.product_ids.indexOf(n)>-1?(f=$(".list-product table tr[product-id='"+n+"']").attr("collect-id"),r.deleteProduct(f,u,n)):($("#frmAddProduct input[name='productId']").val(n),$("#frmAddProduct input[name='collectionId']").val(u),$.ajax({url:"/admin/collections/AddProduct",type:"POST",data:$("#frmAddProduct").serialize(),success:function(f){var h,s,c,l;r.product_ids.push(n);e<o?(h=r.generateAddedProductItem(u,n,t,i,f.id,f.position),$(".list-product table tbody").append(h),s=$(".list-product table tr[product-id='"+n+"']"),c=$("select[name=SortOrder]").val(),c=="manual"&&(l=s.attr("product-position"),s.prepend(r.enableDragProduct(l))),Bindings.bind(s.get(0),Bindings.context(document.body).editCollection.sortProducts)):$(".btn-next").removeClass("disabled");$(".product-dropdown .product-suggest-result li[product-id='"+n+"']").addClass("added-ico");$(".no-product-found").hide();Bizweb.Flash.notice("Cập nhật danh mục thành công")}}))},n.prototype.deleteProduct=function(n,t,i){Bindings.context(document.body).editCollection.sortProducts.removeProduct(n,t,i);var r=this.product_ids.indexOf(i);r>=0&&this.product_ids.splice(r,1)},n.prototype.generateAddedProductItem=function(n,t,i,r,u,f){var o=$(".sort-products-context").attr("product-limit"),e="/assets/images/no-image-50-50.png";return r!=""&&(e=Bizweb.Utility.getThumb(r,"thumb")),'<tr product-id="'+t+'" class="product-item product-image" product-position="'+f+'" id="collect-'+u+'" collect-id ="'+u+'" ><td class="pl-none"><img src="'+e+'" class="'+(r!=""?"":"image-is-blank")+'" /><\/td><td class=""><a href="/admin/products/'+t+'">'+i+'<\/a><\/td><td class="pr-none"><a bind-event-click="removeProduct('+u+","+n+","+t+')" href="javascript:void(0)" id="remove-collect-'+u+'"><i class="gi gi-remove"><\/i><\/a><input type="hidden" name="productIds" value="'+t+'" /><\/td><\/tr>'},n.prototype.generateInputProduct=function(n,t){return'<input type="hidden" name="productIds" value="'+n+'" product-id="'+n+'" collect-id="'+t+'" />'},n.prototype.enableDragProduct=function(n){return'<td class="pl-none"><label class="col-sm-3 dragable-product-item"> <input type="hidden" class="product-option-sort" name="product.sort" value="'+n+'"/><i class="ico-drag-handle"><\/i><\/label><\/td>'},n}()}.call(this),function(){Bizweb.CustomersImportAndExport=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n}return n.prototype.showExportCustomers=function(){this.exportCustomersModal.show();var r=$("#frmFilter"),n=$("#form-export-customers"),u=$("#frmBulkActions"),t=this.copyFromFormToAnother(r,n),i=this.copyOnlyInputNameFromFormToAnother(u,n,"ids");i<=0?$("#exportCustomersType-selected-customers").attr("disabled","disabled"):t>1&&$("#customers-match-current-search").html(i+" ");t<=1&&$("#exportCustomersType-current-search").attr("disabled","disabled")},n.prototype.exportCustomers=function(){var n=this,t=$("#form-export-customers");$.ajax({url:"/admin/customers/Export",type:"POST",data:t.serialize(),success:function(t){if(t.error!=null){Bizweb.Flash.error(t.error);return}Bizweb.Flash.notice(t.success);n.exportCustomersModal.hide()}})},n.prototype.copyFromFormToAnother=function(n,t){var i=0;return $(":input[name]",n).each(function(){$(this).val()&&($("[name="+$(this).attr("name")+"]",t).val($(this).val()),i++)}),i},n.prototype.copyOnlyInputNameFromFormToAnother=function(n,t,i){var r=0;return $(":input[name]",n).each(function(){if($(this).attr("name")==i){var n=$(this).attr("value");t.append("<input type='hidden' name='"+i+"' value='"+n+"' />");r++}}),r},n.prototype.enableButtonImport=function(){var n=$("#importCustomersFileUpload").val();n!=undefined&&n!=""?$(".btn-import-customers").prop("disabled",!1):$(".btn-import-customers").prop("disabled",!0)},n.prototype.openFileImportCustomers=function(){this.importCustomersModal.show();$("#importCustomersFileUpload").val("")},n.prototype.importCustomers=function(){$("#form-import-customers").submit()},n}()}.call(this),function(){Bizweb.SaleChannel=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n}return n.prototype.install=function(n){var t=this;$(".btn-add-channel").addClass("disabled").html(Bizweb.LOADING);NProgress.start();$.ajax({url:Bizweb.routes.channels+"/add/"+n,type:"POST",global:!1,success:function(n){Bizweb.Utility.loadAjax(Bizweb.routes.channels,".page-wrapper-sub",function(){Bizweb.Flash.notice(n.message)})},error:function(n){$(".btn-add-channel").removeClass("disabled").html("Thêm mới "+t.name);Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));NProgress.done()}})},n.prototype.remove=function(n){var t=this;$(".btn-add-channel").addClass("disabled").html(Bizweb.LOADING);NProgress.start();$.ajax({url:Bizweb.routes.channels+"/remove/"+n,type:"POST",global:!1,success:function(n){Bizweb.Utility.loadAjax(Bizweb.routes.channels,".page-wrapper-sub",function(){Bizweb.Flash.notice(n.message)})},error:function(n){$(".btn-add-channel").removeClass("disabled").html("Thêm mới "+t.name);Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));NProgress.done()}})},n}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.KeyboardSelector=function(){function t(t,i){this._keypressHandler=n(this._keypressHandler,this);this.cssClass=i;$(t).on("keydown",this._keypressHandler)}var i;return t.name="KeyboardSelector",i={enter:13,up:38,down:40},t.prototype.bind=function(n,t){return this.selectedIndex=null,this.$lastSelectedNode=null,this.children=$(n).find(t).toArray(),this},t.prototype._keypressHandler=function(n){switch(n.which){case i.enter:this._selectOption();break;case i.up:this._focusPreviousOption();break;case i.down:this._focusNextOption();break;default:return!0}return!1},t.prototype._selectOption=function(){var n;if(null!=(n=this.$lastSelectedNode))return n.trigger("click")},t.prototype._focusPreviousOption=function(){if(null!=this.children)return this.focusOption(this.$lastSelectedNode&&0!==this.selectedIndex?this.selectedIndex-1:this.children.length-1)},t.prototype._focusNextOption=function(){if(null!=this.children)return this.focusOption(this.$lastSelectedNode&&this.selectedIndex!==this.children.length-1?this.selectedIndex+1:0)},t.prototype.focusOption=function(n){var t;return null!=(t=this.$lastSelectedNode)&&t.removeClass(this.cssClass),this.selectedIndex=n,this.$lastSelectedNode=$(this.children[this.selectedIndex]),this.$lastSelectedNode.addClass(this.cssClass)},t}()}.call(this),function(){var n=[].slice;Bizweb.dedupedXHR=function(t,i){var r,u;return null==i&&(i=null),r=null,u=null,function(){var e,f,o;return f=1<=arguments.length?n.call(arguments,0):[],"pending"===(null!=r?r.state():void 0)&&r.abort(),null!=i?(o=this,clearTimeout(u),e=function(){return r=t.apply(o,f)},u=setTimeout(e,i)):r=t.apply(this,f)}}}.call(this),function(){Bizweb.Partial=function(){function n(n,t,i){this.node=n;this.partial_container_id=t;this.options=null!=i?i:{replace:!1};this.$container=$("#"+this.partial_container_id)}return n.name="Partial",n.prototype.loadPartial=function(n){var t;return null==n&&(n=Bindings.context(this.node)),t=this.node.getAttribute("href"),this.fetchHTML(t,n)},n.prototype.fetchHTML=function(n,t){var i,r=this;return i=$.ajax({dataType:"html",url:n}),i.done(function(n){return r.show(n,t)}),i.fail(Bizweb.handleError)},n.prototype.show=function(n,t){var i;return i=$(n),this.$container=this.options.replace?this.$container.html(i):this.$container.append(i),Bindings.bind(this.$container.children().last()[0],t).refreshImmediately()},n}()}.call(this),function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};Bizweb.ResourceDropdown=function(n){function i(n,t,i){this.node=n;this.partial_container_id=t;this.options=null!=i?i:{replace:!1};this.$node=$(n);this.$container=$("#"+this.partial_container_id);this.initialized=!1;this.submitQuery=_.debounce(Bizweb.dedupedXHR(this.submitQuery),300)}return t(i,n),i.name="ResourceDropdown",i.prototype.renderDropdown=function(){if(!this.initialized)return(this.loadPartial(),this.initialized=!0)},i.prototype.focus=function(){return this.$node.focus()},i.prototype.submitQuery=function(n,t,i){var r;return n||(n=this.$node.attr("href")),n+=n.indexOf("?",0)>=0?"&":"?",n+="query="+t,r=$.ajax({dataType:"html",url:n}),r.done(function(n,t,r){return Page.refresh({response:r,onlyKeys:i})}),r.fail(Bizweb.handleError),Bindings.refresh(),r},i}(Bizweb.Partial)}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};Bizweb.SearchDropdown=function(t){function r(t,i,u,f,e,o,s){this.refreshKeys=f;this.clearSearchQuery=n(this.clearSearchQuery,this);r.__super__.constructor.call(this,t,i,e);this.query="";$("#"+u).on("dropdown:hide",this.clearSearchQuery);s&&(this.renderDropdown(),$("#"+u).trigger("focus"))}return i(r,t),r.name=name,r.prototype.clearSearchQuery=function(){if(this.query.length)return(this.query="",this.submitQuery())},r.prototype.submitQuery=function(n){var t=this;return Bindings.unbind(this.$container[0]),r.__super__.submitQuery.call(this,typeof n=="string"?n:null,this.query,this.refreshKeys).done(function(){return Bindings.bind(t.$container[0]),""!==t.query&&null!=n?n.focusOption(0):void 0})},r.prototype.fetchHTML=function(){var n=this;return Bindings.unbind(this.$container[0]),r.__super__.fetchHTML.apply(this,arguments).done(function(){return Bindings.bind(n.$container[0])})},r}(Bizweb.ResourceDropdown)}.call(this),function(){var n;n={TOP_AND_BOTTOM_SHADOW:"scroll-shadow--top-and-bottom",BOTTOM_SHADOW:"scroll-shadow--bottom",TOP_SHADOW:"scroll-shadow--top"};Bizweb.ScrollShadow={update:function(t){var i,f,r,u;return i=t.scrollTop,r=!(i+t.clientHeight>=t.scrollHeight),u=i>0,f=u&&r,t.classList[r?"add":"remove"](n.BOTTOM_SHADOW),t.classList[u?"add":"remove"](n.TOP_SHADOW),t.classList[f?"add":"remove"](n.TOP_AND_BOTTOM_SHADOW)}}}.call(this),function(){var i,s,t,h,o,f,p,r,u,vt,w,c,yt,n,b,k,d,g,nt,tt,it,l,pt,wt,e,rt,ut,ft,et,bt,ot,st,kt,ht,dt,gt,y,a,ni,ct,lt,v,ti,at,ii=[].slice;s="next-popover";t={BASE:s,CONTAINER:s+"__container",CONTENT_WRAPPER:s+"__content-wrapper",CONTENT:s+"__content",TOOLTIP:s+"__tooltip",PANE:s+"__pane"};f={BASE:{ACTIVE:t.BASE+"--is-active",POSITIONED_BELOW:t.BASE+"--is-positioned-beneath",POSITIONED_ABOVE:t.BASE+"--is-positioned-above"},CONTAINER:{ACTIVE:t.CONTAINER+"--contains-active-popover",DEACTIVATING:t.CONTAINER+"--is-deactivating"},CONTENT:{CALCULATING:"next-popover__content--is-calculating"}};u={BASE:{ALIGN_TO_EDGE:t.BASE+"--align-to-edge",FULL_WIDTH:t.BASE+"--full-width",NO_FOCUS:t.BASE+"--do-not-show-on-focus",HOVER_ACTIVATED:t.BASE+"--hover-activated",JS_ACTIVATED:t.BASE+"--js-activated"},CONTAINER:{HOVER_ACTIVATED:t.CONTAINER+"--hover-activated"},PANE:{FIXED:t.PANE+"--fixed"}};h={ACTIVATING:t.BASE+":activating",ACTIVATED:t.BASE+":activated",DEACTIVATED:t.BASE+":deactivated",DEACTIVATING:t.BASE+":deactivating"};i={PREFERRED_POSITION:"data-popover-preferred-position",HORIZONTALLY_RELATIVE_TO:"data-popover-horizontally-relative-to-closest",VERTICALLY_RELATIVE_TO:"data-popover-vertically-relative-to-closest",RELATIVE_TO:"data-popover-relative-to-closest",ACTIVATE_FROM:"data-popover-activate-from",CSS_CACHE:{MAX_HEIGHT:"data-popover-css-max-height",MAX_WIDTH:"data-popover-css-max-width",VERTICAL_MARGIN:"data-popover-css-vertical-margin",HORIZONTAL_MARGIN:"data-popover-css-horizontal-margin"}};o={TOP:"top",BOTTOM:"bottom"};p=5;vt=21;r=function(i){var u,r;return u=$(i).siblings(":not("+t.BASE+")")[0],nt(i),w(i,u),r={activate:function(){c(i)},deactivate:function(){e(i)},toggle:function(){v(i)},reposition:function(){a()},isActive:function(){var t;return i===(null!=(t=n.popover)?t.base:void 0)}},$(i).data(t.BASE,r),r};r["for"]=function(n){var i;return i=$(n).closest("."+t.BASE),i.length?i.data(t.BASE)||r(i[0]):void 0};r.send=function(){var n,t,i;return t=arguments[0],n=2<=arguments.length?ii.call(arguments,1):[],n.length?null!=(i=ct[t])?i.apply(null,n):void 0:ct[t]};r.deactivate=function(){return e()};r.CLASSES=t;r.EVENTS=h;r.STATES=f;r.VARIANTS=u;r.ATTRS=i;r.POSITIONS=o;r.ZINDEX=vt;Bizweb.UIPopover=r;kt=1;w=function(n,i){var u,f,e,r;return e=kt++,r=n.id||t.BASE+"--"+e,f=ot(i),u=f.id||t.BASE+"-activator--"+e,$(n).attr({id:r,"aria-labelledby":u,"aria-expanded":"false"}),$(f).attr({id:u,"aria-expanded":"false","aria-haspopup":"true","aria-owns":r,"aria-controls":r})};nt=function(n){var r,f,e;return e=window.getComputedStyle(n),n.setAttribute(i.CSS_CACHE.VERTICAL_MARGIN,l(e.marginTop,n)||0),n.setAttribute(i.CSS_CACHE.HORIZONTAL_MARGIN,l(e.marginLeft,n)||0),r=$(n).children("."+t.CONTENT_WRAPPER)[0],f=window.getComputedStyle(r),n.setAttribute(i.CSS_CACHE.MAX_HEIGHT,l(f.maxHeight,r)||1e4),n.setAttribute(i.CSS_CACHE.MAX_WIDTH,l(f.maxWidth,r)||1e4),n.classList.contains(u.BASE.FULL_WIDTH)||(n.style.maxWidth="none"),n.style.marginLeft=n.style.marginRight="0px"};g=function(){var n;return n=void 0,function(){var t,i;return null!=n?n:(t=$("<div>M<\/div>").appendTo("body"),t.css({display:"inline-block",padding:"0",lineHeight:"1",position:"absolute",visibility:"hidden",fontSize:"1em"}),i=t.height(),t.remove(),n)}}();l=function(n,t){var i;return"none"===n?!1:(i=parseFloat(n),n.indexOf("rem")>=0?i*g():n.indexOf("em")>=0?i*parseFloat(window.getComputedStyle(t).fontSize):n.indexOf("%")>=0?i/100:i)};n={};yt=function(n){var t,i,u,r;for(r=n.parentNode.children,i=0,u=r.length;u>i;i++)if(t=r[i],t!==n&&t.offsetWidth>0)return t;return n.previousElementSibling||n.nextElementSibling};ot=function(n){var t;return t=$(n),t.is(":input")?n:t.find(":input")[0]||n};c=function(r){var s,f,c,l,v,y,p,w;if(r!==(null!=(y=n.popover)?y.base:void 0))return n.popover&&e(),p=r.querySelector("."+t.TOOLTIP),f=yt(r),c=document.getElementById("wrapper")||document.body,v=$(r).closest(r.getAttribute(i.RELATIVE_TO)).get(0)||$(r).closest(r.getAttribute(i.HORIZONTALLY_RELATIVE_TO)).get(0)||c,w=$(r).closest(r.getAttribute(i.RELATIVE_TO)).get(0)||$(r).closest(r.getAttribute(i.VERTICALLY_RELATIVE_TO)).get(0)||c,s=r.getAttribute(i.ACTIVATE_FROM),n={container:r.parentNode,activator:f,activatorInput:ot(f),source:s?f.querySelector(s):f,horizontallyRelativeTo:v,verticallyRelativeTo:w,preferredPosition:r.getAttribute(i.PREFERRED_POSITION)||o.BOTTOM,horizontallyPosition:!r.classList.contains(u.BASE.FULL_WIDTH),positionAgainstEdge:r.classList.contains(u.BASE.ALIGN_TO_EDGE),popover:{base:r,container:r.parentNode,content:r.querySelector("."+t.CONTENT),contentWrapper:r.querySelector("."+t.CONTENT_WRAPPER),tooltip:p,panes:Array.prototype.slice.call(r.querySelectorAll("."+t.PANE))},styles:{horizontalMargin:parseInt(r.getAttribute(i.CSS_CACHE.HORIZONTAL_MARGIN)),verticalMargin:parseInt(r.getAttribute(i.CSS_CACHE.VERTICAL_MARGIN)),maxHeight:parseInt(r.getAttribute(i.CSS_CACHE.MAX_HEIGHT)),maxWidth:parseFloat(r.getAttribute(i.CSS_CACHE.MAX_WIDTH))}},l=!1,$(r).off("transitionend webkitTransitionEnd"),$(r).one("transitionend webkitTransitionEnd",function(){if(!l)return(l=!0,ti(),$(r).trigger(h.ACTIVATED))}),d(r),b(),a()};b=function(){var t;t=n.popover.base;t.setAttribute("aria-expanded","true");n.activatorInput.setAttribute("aria-expanded","true");_.prepareTransition(t).addClass(f.BASE.ACTIVE);n.popover.container.classList.add(f.CONTAINER.ACTIVE);$(t).trigger(h.ACTIVATING)};d=function(n){return $(n).on("wheel","."+t.PANE,y)};v=function(t){var i;return(null!=(i=n.popover)?i.base:void 0)!==t?c(t):e()};wt=function(){if(n.popover)return $(n.popover.base).closest(document).length?void 0:e()};e=function(t){var i,u,o,s,c,r,e;if(n.popover&&(!t||t===n.popover.base)){r=n.popover.base;c=n.popover.content;s=n.popover.container;i=$(r);u=!!i.closest(document).length;i.off("transitionend webkitTransitionEnd");i.trigger(h.DEACTIVATING);e=function(){var n;return n=!1,function(){if(!n)return(n=!0,s.classList.remove(f.CONTAINER.DEACTIVATING),c.style.width="",$(r).trigger(h.DEACTIVATED))}}();u&&(i.one("transitionend webkitTransitionEnd",e),_.prepareTransition(i));k();u||e();rt(r);for(o in n)delete n[o]}};k=function(){var t;return t=n.popover,t.container.classList.add(f.CONTAINER.DEACTIVATING),t.container.classList.remove(f.CONTAINER.ACTIVE),t.base.classList.remove(f.BASE.ACTIVE),t.base.setAttribute("aria-expanded","false"),n.activatorInput.setAttribute("aria-expanded","false")};rt=function(n){return $(n).off("wheel","."+t.PANE,y)};a=function(t){var f,h,i,u,l,r,e,o,c,s;if(n.popover)return e=!(null!=t?t.type:void 0)||"resize"===t.type,i={base:{},wrapper:{},content:{},tooltip:{}},r=lt(),ut({rect:r},i),e&&n.horizontallyPosition&&(u=tt(),h=r.left/r.horizontallyRelativeTo.width<=.5,s=it(r.horizontallyRelativeTo.width),i.content.width=s,f={offsets:u,width:s,left:h,rect:r},n.positionAgainstEdge?et(f,i):ft(f,i),o=r.width/2+u.leftFromContainerToActivator+u.leftFromActivatorToSource-i.base.left,i.tooltip.left=Math.round(o),l=n.popover.base.style,c=i.base.transformOrigin.split(" ").slice(1).join(" "),n.styles.transformOriginX=Math.round(o)+"px",i.base.transformOrigin=n.styles.transformOriginX+" "+c),requestAnimationFrame(function(){var t;return t=n.popover,null!=t?($(t.base).css(i.base),$(t.content).css(i.content),$(t.contentWrapper).css(i.wrapper),$(t.tooltip).css(i.tooltip),e&&(t.content.style.height=pt()+2),t.base.style.transformOrigin=i.base.transformOrigin):void 0})};et=function(t,i){var f,r,o,u,s,e;return r=t.offsets,e=t.width,s=t.rect,f=t.left,o=s[f?"right":"left"]+s.width/2-n.styles.horizontalMargin,u=f?0:s.width-e,u+=r.leftFromContainerToActivator,i.base.left=e>o?f?u-(e-o)-r.leftFromActivatorToSource:u+(e-o):f?u-r.leftFromActivatorToSource:u-r.rightFromActivatorToSource,i.base.left=Math.round(i.base.left+r.leftFromActivatorToSource)};ft=function(t,i){var f,e,r,o,u;return e=t.offsets,u=t.width,r=t.rect,f=t.left,o=.5*u+n.styles.horizontalMargin,i.base.left=f&&r.left<o?r.width/2+n.styles.horizontalMargin-r.left:!f&&r.right<o?r.width/2-u+r.right-n.styles.horizontalMargin:r.width/2-u/2,i.base.left=Math.round(i.base.left+e.leftFromContainerToActivator+e.leftFromActivatorToSource)};tt=function(){var t,r,i;return t=n.activator.getBoundingClientRect(),r=n.source===n.activator,i=r?t:n.source.getBoundingClientRect(),{leftFromContainerToActivator:t.left-n.container.getBoundingClientRect().left,leftFromActivatorToSource:i.left-t.left,rightFromActivatorToSource:i.right-t.right}};lt=function(){var i,r,t,u,f;return t=n.source.getBoundingClientRect(),i=n.horizontallyRelativeTo.getBoundingClientRect(),f=n.verticallyRelativeTo.getBoundingClientRect(),u=t.top+.5*t.height,r=t.left+.5*t.width,r-=i.left,{height:t.height,width:t.width,top:u-at(),bottom:window.innerHeight-u,left:r,right:i.width-r,horizontallyRelativeTo:i,verticallyRelativeTo:f}};pt=function(){var t;return t=function(n,t){return n+t.scrollHeight},function(){return n.popover.panes.reduce(t,0)}}();it=function(t){var i,r;return n.styles.contentWidth||(i=n.popover.content,i.classList.add(f.CONTENT.CALCULATING),n.styles.contentWidth=i.offsetWidth+2,i.classList.remove(f.CONTENT.CALCULATING)),r=t-2*n.styles.horizontalMargin,Math.min(r,n.styles.maxWidth,n.styles.contentWidth)};ut=function(t,i){var u,s,f,e,r;return u=n.popover.base.offsetHeight+2*n.styles.verticalMargin,r=t.rect,e=r.verticallyRelativeTo.top+r.verticallyRelativeTo.height-(r.top+r.height),f=window.scrollY+r.top-r.verticallyRelativeTo.top,s=n.preferredPosition===o.BOTTOM?r.bottom<u&&r.top>r.bottom||u>e&&f>u?o.TOP:o.BOTTOM:r.top<u&&r.bottom>r.top||u>f&&e>u?o.BOTTOM:o.TOP,ni(s,r,i)};ni=function(t,i,r){var e,s,u;return u=t===o.TOP,e=n.horizontallyPosition?0:"50%",r.base.transformOrigin=u?(n.styles.transformOriginX||e)+" calc(100% + "+p+"px)":(n.styles.transformOriginX||e)+" -"+p+"px",t!==n.position&&(n.position=t,n.popover.base.classList[u?"remove":"add"](f.BASE.POSITIONED_BELOW),n.popover.base.classList[u?"add":"remove"](f.BASE.POSITIONED_ABOVE)),s=i[t]-i.height/2-2*n.styles.verticalMargin,r.content.maxHeight=Math.min(s,n.styles.maxHeight)};ti=function(){return n.popover.panes.forEach(function(n){if(!n.classList.contains(u.PANE.FIXED))return Bizweb.ScrollShadow.update(n)})};at=function(){var n,t;return n=t=0,$(document).on("ready page:load",function(){var i;return n=(null!=(i=document.querySelector(".page .header-row"))?i.offsetHeight:void 0)||0,_.defer(function(){var n;return t=(null!=(n=document.querySelector("#turbo"))?n.offsetHeight:void 0)||0})}),function(){return t+n}}();st=function(){var i,r;return i=0,r=null,function(f){var s,h,y,l,p,w,o,a,b;if(h=(p="function"==typeof(y=f.target).getAttribute?y.getAttribute("for"):void 0)?(w=!0,$("#"+p)):$(f.target),!h.closest("[disabled]").length&&!h.closest("."+t.BASE).length)return(s=h.closest("."+t.CONTAINER),s.length)?w?void 0:(l=s[0],a=Date.now(),r===l&&500>a-i)?void 0:(i=a,r=l,f.preventDefault(),o=s.children("."+t.BASE)[0],o.classList.contains(u.BASE.JS_ACTIVATED))?void 0:o.classList.contains(u.BASE.NO_FOCUS)?e():"focusin"===f.type?c(o):v(o):(null!=(b=n.popover)?b.base.classList.contains(u.BASE.JS_ACTIVATED):void 0)?void 0:e()}}();ht=function(i){var r,f,o,s,h;if(f=$(i.target).closest("."+t.BASE).length,f&&i.which===Bizweb.Keycodes.ESCAPE)n.activator.focus(),e(),i.preventDefault();else{if(r=$(i.currentTarget).children("."+t.BASE)[0],f||r.classList.contains(u.BASE.JS_ACTIVATED))return;(o=i.which)!==Bizweb.Keycodes.ENTER&&o!==Bizweb.Keycodes.SPACE||"input"===(null!=(s=i.target)&&null!=(h=s.tagName)?h.toLowerCase():void 0)?i.which===Bizweb.Keycodes.ESCAPE&&(e(),i.preventDefault()):(v(r),i.preventDefault())}};dt=function(n){var i,r;r=$(n.target).closest("."+t.BASE).length;i=$(n.currentTarget).children("."+t.BASE)[0];r||i.classList.contains(u.BASE.JS_ACTIVATED)||c(i)};gt=function(n){var i,r;r=$(n.target).closest("."+t.BASE).length;i=$(n.currentTarget).children("."+t.BASE)[0];r||i.classList.contains(u.BASE.JS_ACTIVATED)||e()};y=function(n){var i,s,t,u,r,f,e,h,c,o;t=n.currentTarget;i=n.originalEvent.deltaY;o=0>i;r=[t.offsetHeight,t.scrollHeight,t.scrollTop];s=r[0];f=r[1];e=r[2];u=function(){return n.stopPropagation(),n.preventDefault()};h=!o&&i>f-s-e;c=o&&-i>e;h&&(t.scrollTop=f,u());c&&(t.scrollTop=0,u());Bizweb.ScrollShadow.update(t)};ct={activeCache:n,a11yPopovers:w,cachePopoverCSSProperties:nt,baseFontSize:g,calculatePixelDimension:l,activate:c,applyActivationMarkup:b,attachActiveEventListeners:d,toggle:v,deactivate:e,applyDeactivationMarkup:k,detachActiveEventListeners:rt,positionPopover:a,horizontallyPositionWithCenterAlignment:ft,horizontallyPositionWithEdgeAlignment:et,calculateHorizontalOffsets:tt,spaceDetailsForActivePopover:lt,calculateMaxWidth:it,determineVerticalPositioning:ut,topSpaceReservedForHeader:at,popoverFocus:st,popoverKeydown:ht,popoverPaneScroll:y};bt=function(){var n,f,e,i,u;for(i=document.getElementsByClassName(t.BASE),u=[],n=0,f=i.length;f>n;n++)e=i[n],u.push(r(e));return u};$(document).on("ready page:load",bt).on("page:load",wt).on("click focusin touchstart",st).on("keydown","."+t.CONTAINER,ht).on("mouseenter","."+u.CONTAINER.HOVER_ACTIVATED,dt).on("mouseleave","."+u.CONTAINER.HOVER_ACTIVATED,gt);$(window).on("resize scroll",_.debounce(a,50,{leading:!0}))}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.DraftBuilder=function(){function t(t,i){if(i)for(var r in i)this[r]=i[r];this.line_items=[];this.shipping_methods=[];this.default_customer={id:0,shipping_address:null,billing_address:null};this.customer=this.default_customer;this.default_address={last_name:null,first_name:null,address1:null,province:null,province_code:null,country:null,country_code:null};this.no_shipping_address=!0;this.no_billing_address=!0;this.is_discount_percent=!1;this.reason_discount="";this.discount=0;this.isDiscountPercent=!1;this.reason_discount="";this.isShippingInVietnam=!1;this.resetAddress();this.custom_shipping_name=null;this.custom_shipping_fee=null;this.shipping_custom=!0;this.shipping_value="custom";this.validDraftOrder=!0;this.isShippingCustom=n(this.isShippingCustom,this)}return t.prototype.resetShipping=function(){this.shipping_name="";this.shipping_fee=0;this.isShippingInVietnam=!1},t.prototype.resetApplyDiscount=function(){this.discount_tmp=this.discount;this.reason_discount_tmp=this.reason_discount;this.isDiscountPercentTmp=this.is_discount_percent},t.prototype.addLineItem=function(n){var t,u,f,i,r,e,o;if(n.quantity=this.getRoundQuantity(n.quantity),typeof n.price=="string"&&(n.price=parseFloat(n.price)),n.title==undefined&&(n.title=""),n.id>0&&(t=$(".variant_id_"+n.id),u=$(t).attr("item-index"),t.length>0)){f=t.find(".line_item_quantity");i=this.getRoundQuantity(f.val());isNaN(i)&&(i=1);this.line_items[u].quantity=i;Bindings.bind($(".line_item_"+u).get(0),this);Bindings.refreshImmediately();t.find(".line_item_quantity").focus().select();$(document).click();return}r=this.line_items.length;n.money_format=this.money_format;n.item_index=r;n.reason_discount="";n.is_discount_percent=!1;n.discount_value=0;n.total_discount=0;n.discount_reason="";n.discount=!1;n.reason_discount_tmp="";n.is_discount_percent_tmp=!1;n.discount_value_tmp=0;(n.grams==null||n.grams==undefined)&&(n.grams=0);this.line_items.push(n);e=$("#line-item-template").html();o=Mustache.render(e,{line_item:n});$("#line_item_rows").append(o);Bindings.bind($(".line_item_"+r).get(0),this);$(".line_item_"+r).find(".line_item_quantity").focus().select();Bizweb.Modal.hide();$(document).click();this.getShippingMethods()},t.prototype.validateLineItemQuantity=function(n){var t=this.getRoundQuantity(this.line_items[n].quantity);parseInt(t)<1&&(t=1);this.line_items[n].quantity=t;this.getShippingMethods()},t.prototype.getRoundQuantity=function(n){var t=Math.floor(Math.abs(n));return parseInt(t)<1?1:t},t.prototype.removeDiscountLineItem=function(n){this.line_items[n].discount_value=this.line_items[n].total_discount=0;this.line_items[n].is_discount_percent=!1;this.line_items[n].discount_reason="";this.line_items[n].discount=!1;$(".line_item_"+n+"_price").html(money(this.line_items[n].price,this.money_format).replace(" ",""));Bizweb.UIPopover.deactivate()},t.prototype.isValidDiscountLineItem=function(n){var t=$(".line-item-discount-value-"+n).val();if(Bizweb.Utility.isNumeric(t))return parseInt(t)>0?this.line_items[n].is_discount_percent_tmp&&parseInt(t)>100?!1:!0:!1},t.prototype.applyDiscountLineItem=function(n){this.line_items[n].discount_value=$(".line-item-discount-value-"+n).val();this.line_items[n].discount_reason=$(".line-item-discount-reason-"+n).val();this.line_items[n].is_discount_percent=this.line_items[n].is_discount_percent_tmp;this.line_items[n].is_discount_percent?(this.line_items[n].discount_value>100&&(this.validDraftOrder=!1),this.line_items[n].total_discount=this.line_items[n].discount_value*this.line_items[n].price/100):this.line_items[n].total_discount=this.line_items[n].discount_value;this.line_items[n].total_discount>this.line_items[n].price&&(this.line_items[n].total_discount=this.line_items[n].price);var t=this.line_items[n].price-this.line_items[n].total_discount;$(".line_item_"+n+"_price").html(money(t,this.money_format).replace(" ",""));this.line_items[n].discount=!0;Bizweb.UIPopover.deactivate();this.getShippingMethods()},t.prototype.resetApplyDiscountLineItem=function(n){this.line_items[n].discount_value_tmp=this.line_items[n].discount_value;this.line_items[n].discount_reason_tmp=this.line_items[n].discount_reason;this.line_items[n].is_discount_percent_tmp=this.line_items[n].is_discount_percent},t.prototype.getShippingMethods=function(){for(var r,n,u,i=$(".shipping-method-radio"),t=0;t<i.length;t++)r=i[t],$(r).remove();if(n=this,this.shipping_address_provinceId>0||this.shipping_address_province_code!=""){n=this;u=this.shipping_address_districtId==""?0:this.shipping_address_districtId;var o=this.shipping_address_provinceId,f=this.caculateTotalPrice(),e=this.caculateTotalWeight();$.ajax({url:"/admin/orders/GetShippingMethods",type:"POST",data:{provinceId:n.shipping_address_provinceId,districtId:n.shipping_address_districtId,provinceCode:n.shipping_address_province_code,districtCode:n.shipping_address_district_code,totalPrice:f,totalWeight:e},success:function(t){if(t.error)n.shipping_methods=[],n.checkCurrentShippingMethod();else{n.shipping_methods=t.shipping_methods;var i=$("#shipping-methods-template").html(),r=Mustache.render(i,{"shipping-methods":n.shipping_methods});$(".shipping-method-fee-radio").before(r);$(".shipping-methods-select").find('input[type="checkbox"], input[type="radio"]').iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"});Bindings.bind($(".shipping-methods-select").get(0),n);n.checkCurrentShippingMethod()}}})}else n.shipping_methods=[],n.checkCurrentShippingMethod()},t.prototype.checkCurrentShippingMethod=function(){var n,t,i;if(this.shipping_methods==null){this.shipping_methods=[];return}if(n=!1,this.shipping_custom)n=!0;else for(t=0;t<this.shipping_methods.length;t++)i=this.shipping_methods[t],this.shipping_custom||i.name!=this.shipping_name||i.fee!=this.shipping_fee||(n=!0);if(!n){if(this.shipping_value=="free")return;this.shipping_name=null;this.shipping_fee=0;this.shipping_value="custom"}},t.prototype.caculateTotalWeight=function(){for(var t=0,n=0;n<this.line_items.length;n++)this.line_items[n]!=null&&this.line_items[n].item_index!=null&&this.line_items[n].item_index!=undefined&&(t+=this.line_items[n].grams*this.line_items[n].quantity);return t},t.prototype.checkDiscountLineItemType=function(n){return this.line_items[n].is_discount_percent},t.prototype.removeLineItem=function(n){this.line_items[n]=null;Bindings.unbind($("#line_item_rows").get(0));Bindings.bind($("#line_item_rows").get(0));$(".line_item_"+n).remove();Bindings.refreshImmediately();this.getShippingMethods()},t.prototype.checkNewLineItem=function(n){return!isNaN(n.price)&&n.name&&n.price!=""&&n.price>=0},t.prototype.getCountLineItems=function(){for(var t=0,n=0;n<this.line_items.length;n++)this.line_items[n]!=null&&this.line_items[n].item_index!=null&&this.line_items[n].item_index!=undefined&&t++;return t},t.prototype.bindSrc=function(){var n="https://secure.gravatar.com/avatar/",t="?s=60&d=http%3A%2F%2Fbizweb.dktcdn.net%2Fassets%2Fadmin%2Fno-gravatar.png",i;return this.customer&&this.customer.email?(i=CryptoJS.MD5(this.customer.email),n+i+".jpg"+t):n+t},t.prototype.selectCustomer=function(n){n.default_address==null?(n.default_address=this.default_address,this.no_shipping_address=this.no_billing_address=!0):this.no_shipping_address=this.no_billing_address=!1;var t="",i="",r="";n.default_address.first_name!=null&&(i=n.default_address.first_name);n.default_address.last_name!=null&&(r=n.default_address.last_name);t=(r+" "+i).trim();n.shipping_address=n.default_address;n.shipping_address.name=t;n.billing_address=n.default_address;n.billing_address.name=t;this.shipping_address_name=t;this.shipping_address_first_name=n.default_address.first_name;this.shipping_address_last_name=n.default_address.last_name;this.shipping_address_province=n.default_address.province;this.shipping_address_phone=n.default_address.phone;this.shipping_address_country=n.default_address.country;this.shipping_address_country_code=n.default_address.country_code;this.shipping_address_address1=n.default_address.address1;this.shipping_address_city=n.default_address.province;this.shipping_address_province_code=n.default_address.province_code;this.shipping_address_districtId=0;this.shipping_address_district_code=n.default_address.district_code;this.shipping_address_district=n.default_address.district;this.shipping_address_company=n.default_address.company;this.shipping_address_zip=n.default_address.zip;this.billing_address_name=t;this.billing_address_first_name=n.default_address.first_name;this.billing_address_last_name=n.default_address.last_name;this.billing_address_province=n.default_address.province;this.billing_address_phone=n.default_address.phone;this.billing_address_country=n.default_address.country;this.billing_address_country_code=n.default_address.country_code;this.billing_address_address1=n.default_address.address1;this.billing_address_city=n.default_address.province;this.billing_address_province_code=n.default_address.province_code;this.billing_address_districtId=0;this.billing_address_district_code=n.default_address.district_code;this.billing_address_district=n.default_address.district;this.billing_address_company=n.default_address.company;this.billing_address_zip=n.default_address.zip;this.customer=n;Bindings.unbind($(".order-sidebar")[0]);Bindings.bind($(".order-sidebar")[0]);Bindings.refreshImmediately();this.getShippingMethods()},t.prototype.isSameAddress=function(){return!this.isNullAddress(this.getShippingAddress())||!this.isNullAddress(this.getBillingAddress())?_.equal(this.getShippingAddress(),this.getBillingAddress()):!0},t.prototype.isNullAddress=function(n){return n.name!=undefined&&n.name.trim().length>0?!1:n.address1!=undefined&&n.address1.trim().length>0?!1:n.province!=undefined&&n.province.trim().length>0?!1:n.country!=undefined&&n.country.trim().length>0?!1:n.phone!=undefined&&n.phone.trim().length>0?!1:!0},t.prototype.getShippingAddress=function(){var n={};return n.name=this.shipping_address_name,n.province=this.shipping_address_province,n.phone=this.shipping_address_phone,n.country=this.shipping_address_country,n.address1=this.shipping_address_address1,n},t.prototype.invalidShippingAddress=function(){var n={};return n.name=this.shipping_address_name_tmp,n.province=this.shipping_address_province_tmp,n.phone=this.shipping_address_phone_tmp,n.country=this.shipping_address_country_tmp,n.address1=this.shipping_address_address1_tmp,this.isNullAddress(n)},t.prototype.getBillingAddress=function(){var n={};return n.name=this.billing_address_name,n.province=this.billing_address_province,n.phone=this.billing_address_phone,n.country=this.billing_address_country,n.address1=this.billing_address_address1,n},t.prototype.invalidBillingAddress=function(){var n={};return n.name=this.billing_address_name_tmp,n.province=this.billing_address_province_tmp,n.phone=this.billing_address_phone_tmp,n.country=this.billing_address_country_tmp,n.address1=this.billing_address_address1_tmp,this.isNullAddress(n)},t.prototype.updateBillingAddress=function(){this.billing_address_name=(this.customerAddress.address_last_name+" "+this.customerAddress.address_first_name).trim();this.billing_address_first_name=this.customerAddress.address_first_name;this.billing_address_last_name=this.customerAddress.address_last_name;this.billing_address_company=this.customerAddress.address_company;this.billing_address_zip=this.customerAddress.address_zip;this.billing_address_phone=this.customerAddress.address_phone;this.billing_address_address1=this.customerAddress.address_address1;this.billing_address_city=this.customerAddress.address_city;this.billing_address_countryId=this.customerAddress.country_id;this.billing_address_country=$("#CountryId option:selected").text();this.customerAddress.have_city?(this.billing_address_province=$("#provinceSlt option:selected").text(),this.billing_address_provinceId=this.customerAddress.province_id,this.billing_address_districtId=this.customerAddress.district_id,this.billing_address_district=$("#districtSlt option:selected").text()):(this.billing_address_city=this.customerAddress.city,this.billing_address_province=this.customerAddress.city,this.billing_address_district="",this.billing_address_provinceId=0,this.billing_address_province_code="",this.billing_address_districtId=0,this.billing_address_district_code="",this.billing_address_district="");Bizweb.Modal.hide();Bindings.bind($(".order-sidebar")[0],this);this.no_billing_address=!1},t.prototype.resetBillingAddress=function(){var n=this;$.ajax({url:Bizweb.routes.orders+"/address?callback=updateBillingAddress",type:"POST",data:{firstName:this.billing_address_first_name,lastName:this.billing_address_last_name,company:this.billing_address_company,zip:this.billing_address_zip,phone:this.billing_address_phone,address1:this.billing_address_address1,city:this.billing_address_city,countryId:this.billing_address_countryId,countryCode:this.billing_address_country_code,provinceId:this.billing_address_provinceId,provinceCode:this.billing_address_province_code,districtId:this.billing_address_districtId,districtCode:this.billing_address_district_code},success:function(n){var t=new Bizweb.Modal;t.show({content:n})}})},t.prototype.updateShippingAddress=function(){this.shipping_address_name=(this.customerAddress.address_last_name+" "+this.customerAddress.address_first_name).trim();this.shipping_address_first_name=this.customerAddress.address_first_name;this.shipping_address_last_name=this.customerAddress.address_last_name;this.shipping_address_company=this.customerAddress.address_company;this.shipping_address_zip=this.customerAddress.address_zip;this.shipping_address_phone=this.customerAddress.address_phone;this.shipping_address_address1=this.customerAddress.address_address1;this.shipping_address_city=this.customerAddress.address_city;this.shipping_address_countryId=this.customerAddress.country_id;this.shipping_address_country=$("#CountryId option:selected").text();this.customerAddress.have_city?(this.shipping_address_province=$("#provinceSlt option:selected").text(),this.shipping_address_provinceId=this.customerAddress.province_id,this.shipping_address_districtId=this.customerAddress.district_id,this.shipping_address_district=$("#districtSlt option:selected").text()):(this.shipping_address_city=this.customerAddress.city,this.shipping_address_province=this.customerAddress.city,this.shipping_address_district="",this.shipping_address_provinceId=0,this.shipping_address_province_code="",this.shipping_address_districtId=0,this.shipping_address_district_code="",this.shipping_address_district="");Bizweb.Modal.hide();Bindings.bind($(".order-sidebar")[0],this);this.no_shipping_address=!1;this.getShippingMethods()},t.prototype.resetShippingAddress=function(){var n=this;$.ajax({url:Bizweb.routes.orders+"/address?callback=updateShippingAddress",type:"POST",data:{firstName:this.shipping_address_first_name,lastName:this.shipping_address_last_name,company:this.shipping_address_company,zip:this.shipping_address_zip,phone:this.shipping_address_phone,address1:this.shipping_address_address1,city:this.shipping_address_city,countryId:this.shipping_address_countryId,countryCode:this.shipping_address_country_code,provinceId:this.shipping_address_provinceId,provinceCode:this.shipping_address_province_code,districtId:this.shipping_address_districtId,districtCode:this.shipping_address_district_code},success:function(n){var t=new Bizweb.Modal;t.show({content:n})}})},t.prototype.isValidPaid=function(){return this.validDraftOrder&&this.getCountLineItems()>0},t.prototype.isValidPending=function(){return this.validDraftOrder&&this.getCountLineItems()>0&&this.caculateTotalPrice()>0},t.prototype.isPaid=function(){$(".btn-default.btn-save").addClass("disabled");$(".btn-paid").addClass("disabled").html(Bizweb.LOADING);this.createDraftOrder("paid")},t.prototype.isPending=function(){$(".btn-default.btn-save").addClass("disabled");$(".btn-pending").addClass("disabled").html(Bizweb.LOADING);this.createDraftOrder("pending")},t.prototype.createDraftOrder=function(n){var t={},u,r,i;for(this.customer&&this.customer.id>0&&(t.customerId=this.customer.id,t.email=this.customer.email,this.no_shipping_address||this.customer.shipping_address&&(t.shippingAddress={},t.shippingAddress.firstName=this.shipping_address_first_name,t.shippingAddress.lastName=this.shipping_address_last_name,t.shippingAddress.name=this.shipping_address_name,t.shippingAddress.phone=this.shipping_address_phone,t.shippingAddress.address1=this.shipping_address_address1,t.shippingAddress.country=this.shipping_address_country,t.shippingAddress.countryId=this.shipping_address_countryId,t.shippingAddress.countryCode=this.shipping_address_country_code,t.shippingAddress.city=this.shipping_address_city,t.shippingAddress.province=this.shipping_address_province,t.shippingAddress.provinceId=this.shipping_address_provinceId,t.shippingAddress.provinceCode=this.shipping_address_provinceCode,t.shippingAddress.districtId=this.shipping_address_districtId,t.shippingAddress.districtCode=this.shipping_address_district_code,t.shippingAddress.district=this.shipping_address_district,t.shippingAddress.company=this.shipping_address_company,t.shippingAddress.zip=this.shipping_address_zip),this.no_billing_address||this.customer.billing_address&&(t.billingAddress={},t.billingAddress.firstName=this.billing_address_first_name,t.billingAddress.lastName=this.billing_address_last_name,t.billingAddress.name=this.billing_address_name,t.billingAddress.phone=this.billing_address_phone,t.billingAddress.address1=this.billing_address_address1,t.billingAddress.country=this.billing_address_country,t.billingAddress.countryId=this.billing_address_countryId,t.billingAddress.countryCode=this.billing_address_country_code,t.billingAddress.province=this.billing_address_province,t.billingAddress.provinceId=this.billing_address_provinceId,t.billingAddress.provinceCode=this.billing_address_provinceCode,t.billingAddress.districtId=this.billing_address_districtId,t.billingAddress.districtCode=this.billing_address_district_code,t.billingAddress.district=this.billing_address_district,t.billingAddress.company=this.billing_address_company,t.billingAddress.zip=this.billing_address_zip)),this.hasShipping&&(t.shippingLine={},t.shippingLine.code=t.shippingLine.title=this.shipping_name,t.shippingLine.price=this.shipping_fee,t.shippingLine.custom=this.shipping_custom),t.financialStatus=n,t.note=$(".draft-order-note").val(),this.discount&&(t.appliedDiscount={},t.appliedDiscount.description=this.reason_discount,t.appliedDiscount.value=this.discount,t.appliedDiscount.discountType=this.is_discount_percent?"percentage":"dollar"),t.lineItems=[],u=0;u<this.line_items.length;u++)this.line_items[u]!=null&&this.line_items[u].item_index!=null&&this.line_items[u].item_index!=undefined&&(r=this.line_items[u],i={},i.quantity=r.quantity,i.variantId=r.id,i.variantTitle=r.title,i.title=r.name,i.requiresShipping=r.requires_shipping,i.price=r.price,i.grams=r.grams,r.discount&&(i.appliedDiscount={},i.appliedDiscount.value=r.discount_value,i.appliedDiscount.description=r.discount_reason,i.appliedDiscount.discountType=r.is_discount_percent?"percentage":"dollar"),t.lineItems.push(i));$.ajax({type:"POST",url:"/admin/orders/create",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),dataType:"json",success:function(n){if(n.error!=null){Bizweb.Flash.error(n.error);return}var t=n.id;window.location.href="/admin/orders/"+t},error:function(){Bizweb.Flash.error("Đã xảy ra lỗi khiến quá trình tạo đơn hàng thất bại.")}})},t.prototype.resetAddress=function(){this.shipping_address_name="";this.shipping_address_first_name="";this.shipping_address_last_name="";this.shipping_address_province="";this.shipping_address_phone="";this.shipping_address_country="";this.shipping_address_address1="";this.shipping_address_city="";this.shipping_address_provinceId=0;this.shipping_address_districtId=0;this.shipping_address_district="";this.shipping_address_zip="";this.shipping_address_company="";this.billing_address_first_name="";this.billing_address_last_name="";this.billing_address_name="";this.billing_address_province="";this.billing_address_phone="";this.billing_address_country="";this.billing_address_address1="";this.billing_address_city="";this.billing_address_provinceId=0;this.billing_address_districtId=0;this.billing_address_district="";this.billing_address_zip="";this.billing_address_company="";this.no_shipping_address=!0;this.no_billing_address=!0;this.hasShipping=!1;this.shipping_name="";this.shipping_fee=0},t.prototype.removeCustomer=function(){this.customer=this.default_customer;this.resetAddress();this.getShippingMethods()},t.prototype.updateEmail=function(){this.customer.email=$("input#order_email").val();this.editEmailModal.hide()},t.prototype.resetOrderEmail=function(){this.email_tmp=this.customer.email;this.editEmailModal.show()},t.prototype.caculateTotalLineItemPrice=function(){for(var t=0,n=0;n<this.line_items.length;n++)this.line_items[n]!=null&&this.line_items[n].item_index!=null&&this.line_items[n].item_index!=undefined&&(t+=(this.line_items[n].price-this.line_items[n].total_discount)*this.line_items[n].quantity);return t},t.prototype.isValidDiscount=function(){if(this.getCountLineItems()>0){var n=this.discount_tmp,t=this.isDiscountPercentTmp;if(Bizweb.Utility.isNumeric(n)&&parseInt(n)>0)if(t){if(parseInt(n)<=100)return!0}else return!0}return!1},t.prototype.applyDiscount=function(){this.line_items.length>0?(this.discount=this.discount_tmp,this.reason_discount=this.reason_discount_tmp,this.is_discount_percent=this.isDiscountPercentTmp):this.discount=0;Bizweb.UIPopover.deactivate();this.getShippingMethods()},t.prototype.caculateDiscount=function(){var n=this.caculateTotalLineItemPrice();return this.is_discount_percent?n*this.discount/100:parseFloat(this.discount)},t.prototype.caculateTotalPrice=function(){var n=this.caculateTotalLineItemPrice();return n-Math.min(this.caculateDiscount(),n)+this.shipping_fee},t.prototype.caculateSubtotalPrice=function(){var n=this.caculateTotalLineItemPrice();return n-Math.min(this.caculateDiscount(),n)},t.prototype.removeDiscount=function(){this.discount=0;this.reason_discount="";this.discount_tmp=0;this.reason_discount_tmp="";this.is_discount_percent=this.isDiscountPercentTmp=!1;Bizweb.UIPopover.deactivate()},t.prototype.canSaveShippingRate=function(){var i=$("input[name='shippingMethod']:checked").val(),n,t;return i=="custom"?(n=$("#customShippingName").val(),t=parseFloat($("#customShippingFee").val()),n!=""&&Bizweb.Utility.isNumeric(t)):!0},t.prototype.setShippingLine=function(){var i=this.shipping_value=$("input[name='shippingMethod']:checked").val(),n,t;i=="custom"?(this.shipping_custom=this.shipping_custom_tmp=!0,n=$("#customShippingName").val(),t=parseFloat($("#customShippingFee").val()),n.trim()||(n="Tùy chọn"),Bizweb.Utility.isNumeric(t)||(t=0),this.shipping_name=this.custom_shipping_name=n,this.shipping_fee=this.custom_shipping_fee=t):(this.shipping_custom=this.shipping_custom_tmp=!1,this.shipping_name=$("input[name='shippingMethod']:checked").attr("shipping-name"),this.shipping_fee=parseFloat($("input[name='shippingMethod']:checked").attr("fee")));this.hasShipping=!0;Bizweb.UIPopover.deactivate()},t.prototype.isValidShippingFee=function(){var i=this.shipping_value=$("input[name='shippingMethod']:checked").val(),t,n;if(i=="custom"){if(this.shipping_custom=this.shipping_custom_tmp=!0,t=$("#customShippingName").val(),n=parseFloat($("#customShippingFee").val()),!t.trim())return!1}else n=parseFloat($("input[name='shippingMethod']:checked").attr("fee"));if(Bizweb.Utility.isNumeric(n)){if(n<0)return!1}else return!1;return!0},t.prototype.isShippingCustom=function(){var n=$("input[name='shippingMethod']:checked").val();this.shipping_custom_tmp=n=="custom"?!0:!1},t.prototype.resetShippingLine=function(){this.custom_shipping_name_tmp=this.custom_shipping_name;this.custom_shipping_fee_tmp=this.custom_shipping_fee;this.shipping_custom_tmp=this.shipping_custom;$('input[name="shippingMethod"][value="'+this.shipping_value+'"]').iCheck("check")},t.prototype.removeShipping=function(){this.hasShipping=!1;this.shipping_name="";this.shipping_fee=0;Bizweb.UIPopover.deactivate()},t.prototype.quickCreateCustomer=function(){$("#bizweb-modal .btn-default.btn-primary").addClass("disabled").html(Bizweb.LOADING);this.isCustomerInVietnam=!0;var n=this,t=$("#form-quick-add-customer");$.ajax({url:"/admin/customers/quickcreate",type:"POST",data:t.serialize(),success:function(t){t.error!=null?Bizweb.Flash.error(t.error):t.id!=null&&t.id>0&&(n.selectCustomer(t),Bizweb.Modal.hide())}})},t}()}.call(this),function(){Bizweb.CustomerAddress=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];$.provinces=$(t.province_slt);$.districts=$(t.district_slt);this.element=n}return n.prototype.changeCountry=function(){var n=this;$.ajax({url:"/admin/countries/{0}/provinces".format(n.country_id),success:function(t){var i,u,r;if(t.length==0)n.have_city=!1,$.provinces.empty(),$.districts.empty();else{i="";for(u in t)r=t[u],i+="<option value='"+r.id+"'>"+r.name+"<\/option>";$.provinces.empty().html(i);$.provinces.trigger("change");n.have_city=!0}}})},n.prototype.changeProvince=function(){var n=this;$.ajax({url:"/admin/provinces/{0}/districts".format(n.province_id),success:function(n){var t,r,i;if(n.length==0)$.districts.empty();else{t="";for(r in n)i=n[r],t+="<option value='"+i.id+"'>"+i.name+"<\/option>";$.districts.empty().html(t);$.districts.trigger("change")}}})},n}()}.call(this),function(){Bizweb.ProductsImportAndExport=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n}return n.prototype.showExportProducts=function(){this.exportProductsModal.show();var r=$("#frmFilter"),n=$("#form-export-products"),u=$("#frmBulkActions"),t=this.copyFromFormToAnother(r,n),i=this.copyOnlyInputNameFromFormToAnother(u,n,"ids");i<=0?$("#exportProductsType-selected-products").attr("disabled","disabled"):t>1&&$("#products-match-current-search").html(i+" ");t<=1&&$("#exportProductsType-current-search").attr("disabled","disabled")},n.prototype.exportProducts=function(){var n=this,t=$("#form-export-products");$.ajax({url:"/admin/products/Export",type:"POST",data:t.serialize(),success:function(t){if(t.error!=null){Bizweb.Flash.error(t.error);return}Bizweb.Flash.notice(t.success);n.exportProductsModal.hide()}})},n.prototype.copyFromFormToAnother=function(n,t){var i=0;return $(":input[name]",n).each(function(){$(this).val()&&($("[name="+$(this).attr("name")+"]",t).val($(this).val()),i++)}),i},n.prototype.copyOnlyInputNameFromFormToAnother=function(n,t,i){var r=0;return $(":input[name]",n).each(function(){if($(this).attr("name")==i){var n=$(this).attr("value");t.append("<input type='hidden' name='"+i+"' value='"+n+"' />");r++}}),r},n.prototype.openFileImportProducts=function(){this.importProductsModal.show();$("#importProductsFileUpload").val("")},n.prototype.enableButtonImportProducts=function(){var n=$("#importProductsFileUpload").val();n!=undefined&&n!=""?$(".btn-import-products").prop("disabled",!1):$(".btn-import-products").prop("disabled",!0)},n.prototype.importProducts=function(){$("#form-import-products").submit()},n}()}.call(this),function(){Bizweb.Apps=function(){function n(){}return n.prototype.buyApp=function(n){$.ajax({url:Bizweb.routes.apps+"/buyapp",type:"POST",data:{apiKey:n},success:function(n){n!=null&&n.charge_id>0&&(window.location=Bizweb.routes.charges+"/"+n.charge_id);n!=null&&n.redirect&&(window.location=n.redirect)},error:function(n){if(typeof n.responseJSON=="undefined"){Bizweb.Flash.error("Thao tác thất bại");return}n.responseJSON.error!==null&&n.responseJSON.error!==""&&Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""))}})},n}()}.call(this),function(){Bizweb.ShippingAddress=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n}return n.prototype.setSelect=function(n,t,i,r,u){var f,e;$("option",n).remove();f=$(n);e=f.prop?f.prop("options"):f.attr("options");e[0]=new Option(u,"",!0,!0);r.length>0?(f.removeAttr("disabled"),$.each(r,function(n,r){e[e.length]=new Option(r[i],r[t])})):f.attr("disabled","disabled")},n.prototype.getDistrictByCity=function(n){return this.districts.filter(function(t){return t.province_code==n})},n.prototype.reloadData=function(){var n=$("select[name='ProvinceCode']").val(),t=this.getDistrictByCity(n);this.setSelect("select[name='DistrictCode']","code","name",t,"--- Chọn thành quận/huyện ---")},n.prototype.save=function(){var n=this;return $(".btn-save-shipping-address").addClass("disabled").html(Bizweb.LOADING),NProgress.start(),$.ajax({type:"POST",url:Bizweb.routes.setting.shipping+"/updateshippingaddress",data:$(n.element).find("form").serialize(),global:!1,success:function(){Bizweb.Utility.loadAjax(Bizweb.routes.setting.shipping,".payment-setting")},error:function(){Bizweb.Flash.error("Cập nhật thất bại");$(".btn-save-shipping-address").removeClass("disabled").html("Cập nhật");NProgress.done()}}),!1},n}()}.call(this),function(){Bizweb.OrderEvent=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n}return n.prototype.resendMail=function(n,t){$(n).addClass("disabled").html(Bizweb.LOADING);var i=this.order_id;$.ajax({url:Bizweb.routes.orders+"/resendNotification?id="+i+"&eventId="+t,type:"POST",success:function(n){Bizweb.Flash.notice(n.message);Bizweb.Modal.hide()},error:function(t){Bizweb.Flash.error(t.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));$(n).removeClass("disabled").html("Xác nhận")}})},n}()}.call(this),function(){Bizweb.OrdersExport=function(){function n(n,t){if(t!=null)for(var i in t)this[i]=t[i];this.element=n}return n.prototype.showExportOrders=function(){this.exportOrdersModal.show();var t=$("#frmFilter"),n=$("#form-export-orders"),i=$("#frmBulkActions"),r=this.copyFromFormToAnother(t,n),u=this.copyOnlyInputNameFromFormToAnother(i,n,"ids");u<=0&&$("#exportOrdersType-selected-orders").attr("disabled","disabled");$("#orders-match-current-search").html(this.orders_match_current_search+" ");r<=1&&$("#exportOrdersType-current-search").attr("disabled","disabled")},n.prototype.exportOrders=function(){$("#form-export-orders input[name=ExportTransactions]").val(!1);this.submitFormExportOrders()},n.prototype.exportOrderTransactions=function(){$("#form-export-orders input[name=ExportTransactions]").val(!0);this.submitFormExportOrders()},n.prototype.submitFormExportOrders=function(){var n=this,t=$("#form-export-orders");$.ajax({url:"/admin/orders/Export",type:"POST",data:t.serialize(),success:function(t){if(t.error!=null){Bizweb.Flash.error(t.error);return}Bizweb.Flash.notice(t.success);n.exportOrdersModal.hide()}})},n.prototype.copyFromFormToAnother=function(n,t){var i=0;return $(":input[name]",n).each(function(){$(this).val()&&($("[name="+$(this).attr("name")+"]",t).val($(this).val()),i++)}),i},n.prototype.copyOnlyInputNameFromFormToAnother=function(n,t,i){var r=0;return $(":input[name]",n).each(function(){if($(this).attr("name")==i){var n=$(this).attr("value");t.append("<input type='hidden' name='"+i+"' value='"+n+"' />");r++}}),r},n}()}.call(this),function(){Bizweb.Keycodes={BACKSPACE:8,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,SHIFT:16,SPACE:32,TAB:9}}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.Drawer=function(){function t(t){this.drawerKeyup=n(this.drawerKeyup,this);this.$pager=$(".page-wrapper");this.$drawer=$(t);this.$parent=$("html, body");this.$wrapper=$(".page-content");this.isOpen=this.$drawer.hasClass(this.DRAWER_OPEN_CLASS);this.numOfOpenningOrder=0;this.showOpenningOder()}return t.prototype.NO_SCROLLING_CLASS="no-scrolling",t.prototype.DRAWER_OPEN_CLASS="nav-drawer-open",t.prototype.toggle=function(){this.$pager.hasClass("had-minimized")?this.$pager.toggleClass("page-minimize"):this.isOpen?this.close():this.open()},t.prototype.open=function(){if(!this.isOpen){_.prepareTransition(this.$drawer).addClass(this.DRAWER_OPEN_CLASS);this.$parent.addClass(this.NO_SCROLLING_CLASS);this.isOpen=!0;this.$wrapper.on("touchmove.drawer",function(){return!1});$(document).on("keyup.drawer",this.drawerKeyup)}},t.prototype.close=function(){this.isOpen&&(_.prepareTransition(this.$drawer).removeClass(this.DRAWER_OPEN_CLASS),this.$parent.removeClass(this.NO_SCROLLING_CLASS),this.isOpen=!1,this.$wrapper.off(".drawer"),$(document).off(".drawer"))},t.prototype.drawerKeyup=function(n){n.keyCode===Bizweb.Keycodes.ESCAPE&&this.close()},t.prototype.showOpenningOder=function(){var n=this;$.ajax({url:"/admin/orders/GetOpeningOrder",async:!1,global:!1,success:function(t){n.numOfOpenningOrder=t.num_of_opening_order}});console.log(this.numOfOpenningOrder)},t.name="Drawer",t}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.NotificationListener=function(){function t(t,i){this.$container=$(".sidebar-default .nav-user .notifications");this.$counter=$(".sidebar-default .nav-user .notifications .notifications-count");this.$menuContainer=$(".sidebar-default .nav-user .notifications .notifications-menu");this.serverUrl=t;this.sessionId=i;this.buckets=[];this.rerenderLink=!1;this.processMessage=n(this.processMessage,this);this.initialize()}return t.prototype.initialize=function(){var n=this;this.isInReadUrl()?this.markAsRead(this.loadNotificationOverviews):this.loadNotificationOverviews();this.$container.on("shown.bs.dropdown",function(){n.$container.closest(".sidebar").css("overflow-y","visible");n.$container.closest(".sidebar").css("z-index","99")});this.$container.on("hide.bs.dropdown",function(){n.$container.closest(".sidebar").css("overflow-y","");n.$container.closest(".sidebar").css("z-index","")})},t.prototype.loadNotificationOverviews=function(){var n=this;$.ajax({type:"GET",url:Bizweb.routes.notifications+"/overview",contentType:"application/json; charset=utf-8",global:!1,success:function(t){for(var i in t)n.buckets[i]={},n.buckets[i].name=i,n.buckets[i].size=t[i];n.render();n.connectNotificationServer()},error:function(n){console.log("Can't load  notifications due to error: "+n)}})},t.prototype.connectNotificationServer=function(){var n=this;if(!this.socket&&window.io){this.socket=io.connect(this.serverUrl);this.socket.emit("startlisten",this.sessionId);this.socket.on("serverMsg",function(t){n.processMessage(t)});$(document).trigger("NotifierStarted")}},t.prototype.processMessage=function(n){var i,t;n&&(i=JSON.parse(n),i.verb==="create"&&(t=i.subject_type.toLowerCase(),this.buckets[t]||(this.buckets[t]={},this.buckets[t].name=t,this.buckets[bucketNamee].size=0),this.buckets[t].notification=i,this.buckets[t].size++,this.render()))},t.prototype.render=function(){this.renderNotifcationTotals();this.renderNotificationItems()},t.prototype.renderNotifcationTotals=function(){this.totalNotifications=this.getTotalNotifications();this.totalNotifications>0?(this.$counter.removeClass("hide"),this.$counter.text(this.totalNotifications),this.$menuContainer.find(".notifications-caption").text("Bạn có "+this.totalNotifications+" thông báo mới")):(this.$counter.addClass("hide"),this.$menuContainer.find(".notifications-caption").text("Bạn không có thông báo mới"))},t.prototype.renderNotificationItems=function(){var n,i,t;for(n in this.buckets)if(i=this.buckets[n],t=this.$menuContainer.find(".notifications-"+n.toLowerCase()),t.length>0){var f=t.find("a"),r=t.find(".notification-title"),u=this.getBucketTitle(n),e=this.getBucketHref(n);i.size>0?r.text("Bạn có "+i.size+" "+u+" mới"):r.text("Bạn không có "+u+" mới");f.attr("href",e)}},t.prototype.getTotalNotifications=function(){var n=0;for(var t in this.buckets)this.buckets[t].size>0&&n++;return n},t.prototype.getBucketTitle=function(n){switch(n){case"comment":return"bình luận bài viết";case"customer":return"khách hàng";case"order":return"đơn hàng";default:return"unknown"}},t.prototype.getBucketHref=function(n){var i=Bizweb.routes.root,r=this.buckets[n],u,t;switch(n){case"comment":i=Bizweb.routes.comments;r.size==1&&(t=r.notification,t&&t.body&&(u=JSON.parse(t.body),i=Bizweb.routes.blogs+("/"+u.blog_id+"/articles/"+u.article_id)));break;case"customer":i=Bizweb.routes.customers;r.size==1&&(t=r.notification,t&&t.body&&(i+="/"+t.subject_id));break;case"order":i=Bizweb.routes.orders;r.size==1&&(t=r.notification,t&&t.body&&(i+="/"+t.subject_id))}return i},t.prototype.reloadContainer=function(){var i=this,n,t;if(!this.rerenderLink)for(n in this.buckets)t=this.buckets[n],t.size!=1||t.notification||$.ajax({type:"GET",url:Bizweb.routes.notifications+"?subjectType="+n,contentType:"application/json; charset=utf-8",global:!1,success:function(n){if(n&&n.length>0){var t=n[0].subject_type.toLowerCase();i.buckets[t].notification=n[0];i.renderLinks()}},error:function(n){console.log("Can't load  notifications due to error: "+n)}});this.rerenderLink=!0},t.prototype.renderLinks=function(){var n,u,t,i,r;for(n in this.buckets)u=this.buckets[n],t=this.$menuContainer.find(".notifications-"+n.toLowerCase()),t.length>0&&(i=t.find("a"),r=this.getBucketHref(n),i.attr("href",r))},t.prototype.isInReadUrl=function(){return/\/admin\/customers\/?$/.test(document.location.pathname)?!0:/\/admin\/comments\/?$/.test(document.location.pathname)?!0:/\/admin\/orders\/?$/.test(document.location.pathname)?!0:/\/admin\/customers\/[0-9]+\/?$/.test(document.location.pathname)?!0:/\/admin\/orders\/[0-9]+\/?$/.test(document.location.pathname)?!0:!1},t.prototype.markAsRead=function(t){var i;t=n(t,this);/\/admin\/customers\/?$/.test(document.location.pathname)?this.markAsReadByBucketName("customer",t):/\/admin\/comments\/?$/.test(document.location.pathname)?this.markAsReadByBucketName("comment",t):/\/admin\/orders\/?$/.test(document.location.pathname)?this.markAsReadByBucketName("order",t):/\/admin\/customers\/[0-9]+\/?$/.test(document.location.pathname)?(i=document.location.pathname.replace(Bizweb.routes.customers,""),i=i.replace(/\//g,""),this.markAsReadById(parseInt(i),t)):/\/admin\/orders\/[0-9]+\/?$/.test(document.location.pathname)&&(i=document.location.pathname.replace(Bizweb.routes.orders,""),i=i.replace(/\//g,""),this.markAsReadById(parseInt(i),t))},t.prototype.markAsReadById=function(n,t){$.ajax({type:"POST",url:Bizweb.routes.notifications+"/MarkAsRead?SubjectId="+n,contentType:"application/json; charset=utf-8",global:!1,success:function(){t()},error:function(){t()}})},t.prototype.markAsReadByBucketName=function(n,t){$.ajax({type:"POST",url:Bizweb.routes.notifications+"/MarkAsRead?SubjectType="+n,contentType:"application/json; charset=utf-8",global:!1,success:function(){t()},error:function(){t()}})},t.prototype.markAsReadByListId=function(n,t){if(n&&n.length>0){var i=this,r=JSON.stringify({subjectIds:n,subjectType:t});$.ajax({type:"POST",url:Bizweb.routes.notifications+"/MarkAsRead",contentType:"application/json; charset=utf-8",data:r,global:!1,success:function(){i.buckets=[];i.loadNotificationOverviews()},error:function(){}})}},t.currentNotifier=function(){if(Bindings.context(document.body))return Bindings.context(document.body).notificationListener},t.name="NotificationListener",t}()}.call(this),function(){Bizweb.FilePicker=function(){function n(n,t){if(t)for(var i in t)this[i]=t[i];this.ele=n;this.selectChanged=!1;this.selected_id?this.selectChanged=!0:this.selected_id=0}return n.prototype.selectFile=function(n,t){this.selected_id=n;this.selected_src=t;this.selectChanged=!0},n.prototype.chooseFile=function(n){n&&n.callback?callback({id:this.selected_id,src:this.selected_src}):Bindings.context(document.body).app&&Bindings.context(document.body).app.host.filePickerConfirm({id:this.selected_id,src:this.selected_src})},n.prototype.cancelPicker=function(){Bindings.context(document.body).app&&Bindings.context(document.body).app.host.filePickerCancel()},n.prototype.next=function(){this.loadUrl(this.next_page)},n.prototype.prev=function(){this.loadUrl(this.prev_page)},n.prototype.loadUrl=function(n){var t=this;Bindings.unbind($(".image-popup").get(0));$.ajax({url:n,success:function(n){$(t.ele).parent(".modal-dialog").html(n);Bindings.bind($(".image-popup").get(0),this)}})},n.prototype.uploadFile=function(){var u=this,t=new FormData,i=$("#file-uploader")[0].files.length,n,r;if(!(i<=0)){for(n=0;n<i;n++)r=document.getElementById("file-uploader").files[n],t.append("mediaImages",r);NProgress.start();$.ajax({type:"POST",url:"/admin/settings/files/upload",data:t,contentType:!1,processData:!1,global:!1,success:function(n){n.error?(Bizweb.Flash.error(n.error),NProgress.done()):n.length>0?Bizweb.Utility.loadAjax("/admin/settings/files/picker?selectedId="+n[0].id,"#bizweb-modal",Bizweb.Flash.notice("Cập nhật thành công"),{hide:!1}):Bizweb.Utility.loadAjax("/admin/settings/files/picker","#bizweb-modal",Bizweb.Flash.notice("Cập nhật thành công"),{hide:!1})},error:function(n){Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,""));NProgress.done()}})}},n.prototype.openFileUpload=function(){$("#file-uploader").click()},n}()}.call(this),function(){var n='<tr class="menu-item" linklist-id="{{ linklist.id }}"><td><a href="/admin/links/{{ linklist.id }}" target="_blank">{{ linklist.title }}<\/a><\/td><td class="pr-none" style="width: 80px; text-align:right;"><a bind-event-click="removeMenu({{ linklist.id }})" href="javascript:void(0)"><i class="gi gi-remove"><\/i><\/a><input type="hidden" name="LinklistIds" value="{{ linklist.id }}" /><\/td><\/tr>';Bizweb.MenuPicker=function(){function t(n,t){if(t)for(var i in t)this[i]=t[i];this.$container=$(n);this.linklistIds||(this.linklistIds=[])}return t.prototype.removeMenu=function(n){this.$container.find("tr[linklist-id="+n+"]").remove();this.linklistIds=$.grep(this.linklistIds,function(t){return t!=n})},t.prototype.addToMenu=function(t,i){if(!Common.include(this.linklistIds,t)){this.linklistIds.push(t);var r=n.replace(/{{ linklist.id }}/g,t).replace(/{{ linklist.title }}/g,i);this.$container.find(".table tbody").append(r);Bindings.refreshImmediately();Bindings.unbind(this.$container.find(".table tbody").get(0));Bindings.bind(this.$container.find(".table tbody").get(0))}Bizweb.Modal.hide();$(".tooltip").remove()},t.prototype.createChildMenu=function(n){var t=this;$.ajax({type:"POST",url:"/admin/links/createjson",data:{title:n},success:function(n){n&&t.addToMenu(n.id,n.title)},error:function(n){n?Bizweb.Flash.error(n.responseJSON.error.replace(/\n/g,"; ").replace(/; $/,"")):Bizweb.Flash.error("Thêm menu thất bại.")}})},t.name="MenuPicker",t}()}.call(this),function(){Bizweb.EnterUserPassword=function(){function n(n,t){this.$parentForm=$(n);this.modal=t;this.passwordRequired=!1;this.showEmailChange=!1;this.showPasswordChange=!1;this.showLogoutOptions=!1}return n.prototype.expandEmailChange=function(){return this.showEmailChange=!0,this.flagPasswordAsRequired(!1)},n.prototype.expandPasswordChange=function(){return this.showPasswordChange=!0,this.flagPasswordAsRequired(!0)},n.prototype.flagPasswordAsRequired=function(n){return this.passwordRequired=!Bizweb.current_user.is_employee,this.showLogoutOptions=n},n.prototype.showOrSubmitModal=function(){return this.passwordRequired?(this.modal.show(),$("#current_password").focus()):this.$parentForm.submit()},n.prototype.submitUserForm=function(n){var t;return t=n.current_password.value,this.$parentForm.find("#user_current_password").val(t),n.revoke_mobile_access_tokens.checked&&this.$parentForm.find("#user_revoke_mobile_access_tokens").val(!0),this.$parentForm.submit(),this.modal.hide()},n}()}.call(this),function(){var t,i,n;window.Page||(window.Page={});Page.visit=function(n,t){return null==t&&(t={}),t.reload?window.location=n:Turbolinks.visit(n)};n=[];Page.onReplace=function(t,r){if(!t||!r)throw new Error("Page.onReplace: Node and callback must both be specified");if(!i(r))throw new Error("Page.onReplace: Callback must be a function");return n.push({node:t,callback:r})};i=function(n){return!!(n&&n.constructor&&n.call&&n.apply)};t=function(n,t){return n.contains?n.contains(t):!!(n===t||n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)};document.addEventListener("page:before-partial-replace",function(i){var r,e,u,f,h,c,l,o,s;for(o=i.data,s=[],u=0,h=n.length;h>u;u++){for(r=n[u],e=!1,f=0,c=o.length;c>f;f++)if(l=o[f],t(l,r.node)){r.callback();e=!0;break}e||s.push(r)}return n=s});document.addEventListener("page:before-replace",function(){for(var i,t=0,r=n.length;r>t;t++)i=n[t],i.callback();return n=[]})}.call(this),function(){var n;n=["rememberMe","home_date_range","homeSidebarDate","homeSidebarChannel"];window.SafeLocalStorage={get:function(n,t){var r,u,f,e,i;if(2!==arguments.length)throw"SafeLocalStorage developer error: You must supply a 2nd argument, a fallback/default value, to SafeLocalStorage.get()";try{i=localStorage.getItem(n);try{return i=JSON.parse(i),"undefined"===i?t:null!=i?i:t}catch(f){return r=f,"undefined"===i?t:null!=i?i:t}}catch(e){return u=e,t}},set:function(n,t){try{return localStorage.setItem(n,JSON.stringify(t))}catch(i){}},"delete":function(n){try{return localStorage.removeItem(n)}catch(t){}},clear:function(){try{return localStorage.clear()}catch(n){}},clearUnsafeItems:function(){var r,u,t,e,o,s,i,f;try{for(f={},r=0,e=n.length;e>r;r++)t=n[r],i=this.get(t,null),i&&(f[t]=i);for(s=this.clear(),u=0,o=n.length;o>u;u++)t=n[u],i=f[t],i&&this.set(t,i);return s}catch(h){}}}}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.BulkEditor=function(){function t(t){null==t&&(t={});this._persistColumnState=n(this._persistColumnState,this);this.toggleStickyHeaders=n(this.toggleStickyHeaders,this);this.spreadsheetScrolled=n(this.spreadsheetScrolled,this);this.scrollerScrolled=n(this.scrollerScrolled,this);this.resizableMouseMove=n(this.resizableMouseMove,this);this.resizableMouseUp=n(this.resizableMouseUp,this);this.resizableMouseDown=n(this.resizableMouseDown,this);this.debouncedRedraw=_.debounce(this._redrawTable,1e3,{leading:!0,trailing:!0});this.submitting=!1;this.anyFormDirty=!1;this.resizing=!1;this.resizingCell=null;this.startResizingWidth=null;this.startResizingPosition=null;this.resourceName=t.resource_name;this.showColumns=t.show_columns||[];this.editColumns=t.edit_columns||[];this.ids=t.ids;this.search=t.search||{};this.metafieldTitles=t.metafield_titles;this.metafieldOptions=t.metafield_options;this.resourceTitle=t.resource_title;this._persistColumnState()}var r=230,u="bulk",f="columns",i={BULK_FORM_BUTTON:"bulk-submit",DIRTY_FORM_BUTTON:"btn-primary",DIRTY_INDICATOR_CELL:"spreadsheet__cell--dirty-indicator",HIDDEN_INDICATOR:"spreadsheet__status-indicator--is-hidden",HEADER_GROUP:"spreadsheet__header-group",HIDDEN_HEADER_GROUP:"spreadsheet__header-group--is-hidden",FIXED_HEADER_GROUP:"spreadsheet__header-group--is-fixed",SPINDICATOR:"next-spinner",DIRTY:"spreadsheet__cell--has-changes",RESIZABLE_CELL:"spreadsheet__cell--resizable",RESIZABLE_HANDLE:"spreadsheet__resize-handle",SCROLLER:{BASE:"spreadsheet-scroller",SCROLLBAR:"spreadsheet-scroller__scroll-bar"}};return t.goToBulkEditor=function(n,t){var i={resourceName:n,edit:t.defaultEditColumns,show:t.defaultShowColumns};i.returnTo=t.returnTo;i.edit=this._fromSessionStorage("edit",n)||i.edit;i.show=this._fromSessionStorage("show",n)||i.show;t.useSearch?_.extend(i,URI().search(!0)):i.ids=t.ids;t.customParams&&_.merge(i,t.customParams);document.location.href=Bizweb.funcRoutes.bulk(i).html},t._fromSessionStorage=function(n,t,i){return null==i&&(i=!1),sessionStorage.getItem("bulk-editor-"+n+"-"+t)},t.prototype.bind=function(n){return this.node=n,this.$node=$(n),this.$headerGroup=$(this.node).find("."+i.HEADER_GROUP),this.$headerCells=this.$headerGroup.children(),this.$scroller=$(this.node).find("."+i.SCROLLER.SCROLLBAR),this.$scrollerContainer=$(this.node).find("."+i.SCROLLER.BASE),this.setInitialCellWidths(),this.addResizeHandles(),this.duplicateTableHeader(),this.setScrollerWidth(),$(window).on("scroll.bulk-editor",_.debounce(this.toggleStickyHeaders,10)),this.$node.on("mousedown.bulk-editor","."+i.RESIZABLE_HANDLE,this.resizableMouseDown),this.$node.on("mouseup.bulk-editor",this.resizableMouseUp),this.$node.on("mousemove.bulk-editor",_.debounce(this.resizableMouseMove,10)),this.$scrollerContainer.on("scroll.bulk-editor",_.throttle(this.scrollerScrolled,10)),this.$node.on("scroll.bulk-editor",_.throttle(this.spreadsheetScrolled,10)),Page.onReplace(this.node,function(){return $(window).off(".bulk-editor")})},t.prototype.resizableMouseDown=function(n){var t;return this.resizing=!0,t=$(n.target.parentNode),this.resizingCell=t.index(),this.startResizingPosition=n.pageX,this.startResizingWidth=t.width()},t.prototype.resizableMouseUp=function(){var n;if(this.resizing)return this.resizing=!1,n=this.$headerCells.eq(this.resizingCell),SafeLocalStorage.set("bulk-editor-column-size-"+n.attr("title"),n.width())},t.prototype.resizableMouseMove=function(n){var t;if(this.resizing)return t=this.startResizingWidth+(n.pageX-this.startResizingPosition),t>100?(this.$headerCells.eq(this.resizingCell).css({width:t,"min-width":t}),this.$clonedHeaderCells.eq(this.resizingCell).css({width:t,"min-width":t}),this.$headerGroupClone.width(this.$headerGroup.width()),this.setScrollerWidth()):void 0},t.prototype.setInitialCellWidths=function(){return this.$headerCells.each(function(){var n,t;return n=$(this),t=SafeLocalStorage.get("bulk-editor-column-size-"+n.attr("title"),null),t?n.width(t):void 0})},t.prototype.addResizeHandles=function(){var n;return n=$("<span>").addClass(i.RESIZABLE_HANDLE),this.$headerGroup.find("."+i.RESIZABLE_CELL).append(n)},t.prototype.duplicateTableHeader=function(){return this.$headerGroup.width(this.$headerGroup.width()),this.$headerGroupClone=this.$headerGroup.clone(),this.$headerGroupClone.addClass(i.FIXED_HEADER_GROUP).addClass(i.HIDDEN_HEADER_GROUP),this.$headerGroup.after(this.$headerGroupClone),this.$clonedHeaderCells=this.$headerGroupClone.children()},t.prototype.setScrollerWidth=function(){return this.$scroller.width(this.$headerGroup.width())},t.prototype.scrollerScrolled=function(){return this.$node.scrollLeft(this.$scrollerContainer.scrollLeft())},t.prototype.spreadsheetScrolled=function(){return this.$scrollerContainer.scrollLeft(this.$node.scrollLeft()),this.scrollHeaderHorizontally()},t.prototype.scrollHeaderHorizontally=function(){var n;return n=r-this.node.scrollLeft,this.$headerGroupClone.css("left",n+"px")},t.prototype.toggleStickyHeaders=function(){var n;return n=$(window).scrollTop()+$(".header-row").height(),this.$headerGroupClone.toggleClass(i.HIDDEN_HEADER_GROUP,n<=this.node.offsetTop)},t.prototype.register=function(n,t){return t.off("bindings:change"),t.on("input change paste",function(n){return function(){return n._setDirty(t)}}(this))},t.prototype.submitAll=function(){var n;return this.submitting=!0,n=$("."+i.DIRTY_FORM_BUTTON+"."+i.BULK_FORM_BUTTON),this.submissionFailures=0,this.submissionSuccesses=0,n.length?this.submitNextRow(n.toArray()):(this.submitting=!1,this.anyFormDirty=!1,Bindings.refresh())},t.prototype.submitNextRow=function(n){if(n.length===0)this._finishSubmitting();else{var i=n.shift(),t=$(i).closest("form");if(t[0].checkValidity()){t.one("turbograft:remote:success",function(t){return function(){t.submissionSuccesses++;t.submitNextRow(n)}}(this));t.one("turbograft:remote:fail",function(i){return function(r){var u,f,e;i.submissionFailures++;422!==(null!=r&&null!=(u=r.originalEvent)&&null!=(f=u.data)&&null!=(e=f.xhr)?e.status:void 0)&&i._handleSubmissionError(t);i.submitNextRow(n)}}(this));this._setClean(t);this._toggleSpindicate(t);i.click()}else this.submissionFailures++,this.submitNextRow(n)}},t.prototype.fadeIndicators=function(n){return $(n).one("transitionend webkitTransitionEnd oTransitionEnd",function(){return $(n).addClass("hide")}),_.defer(function(){return $(n).addClass(i.HIDDEN_INDICATOR)})},t.prototype.addColumn=function(n,t){var i;if(!this.columnIsSelected(n))return i={full_name:n},null!=t&&(i.type=t),this.editColumns.push(i),this.debouncedRedraw()},t.prototype.removeColumn=function(n){var t;return t=this._columnIndex(n),t>=0?(this.editColumns.splice(t,1),this.debouncedRedraw()):void 0},t.prototype.columnIsSelected=function(n){return this._columnIndex(n)>=0},t.prototype._finishSubmitting=function(){var n="";$("."+i.DIRTY_FORM_BUTTON+"."+i.BULK_FORM_BUTTON+":enabled").length<=0&&(this.anyFormDirty=!1);this.submissionSuccesses&&(n="Đã chỉnh sửa "+this.submissionSuccesses+" "+this.resourceTitle+".");this.submissionFailures?Bizweb.Flash.error("Chỉnh sửa "+this.submissionFailures+" "+this.resourceTitle+" thất bại. "+n):Bizweb.Flash.notice(n);this.submitting=!1},t.prototype._handleSubmissionError=function(n){return this._toggleSpindicate(n),this._setDirty(n)},t.prototype._toggleSpindicate=function(n){var t=n.find("."+i.DIRTY_INDICATOR_CELL);n.find("."+i.SPINDICATOR).toggleClass("next-spinner--is-hidden")},t.prototype._setDirty=function(n){var t=n.find("."+i.DIRTY_INDICATOR_CELL);n.find("."+i.DIRTY_INDICATOR_CELL).addClass(i.DIRTY);this.anyFormDirty=!0;Bindings.refresh()},t.prototype._setClean=function(n){return n.find("."+i.DIRTY_INDICATOR_CELL).removeClass(i.DIRTY)},t.prototype._redrawTable=function(){var n;return n=this.search,n.edit=this.editColumnsParam(),n.show=this.showColumnsParam(),n.ids=this.ids,n.resourceName=this.resourceName,Page.refresh({queryParams:n,onlyKeys:[u,f],updatePushState:!1},this._postRedrawCallback(n))},t.prototype._postRedrawCallback=function(n){return this._replaceHistory(n),this._persistColumnState},t.prototype._persistColumnState=function(){return this._persistToSessionStorage("edit",this.editColumnsParam()),this._persistToSessionStorage("show",this.showColumnsParam()),this._persistToSessionStorage("metafield-titles",this.metafieldTitles?JSON.stringify(this.metafieldTitles):null),this._persistToSessionStorage("metafield-options",this.metafieldOptions?JSON.stringify(this.metafieldOptions):null)},t.prototype._persistToSessionStorage=function(n,t){return t?sessionStorage.setItem("bulk-editor-"+n+"-"+this.resourceName,t):sessionStorage.removeItem("bulk-editor-"+n+"-"+this.resourceName)},t.prototype._replaceHistory=function(n){var t,i;return t=$.param(n),t&&(t="?"+t),i=location.pathname+t,Page.replaceState(i)},t.prototype.showColumnsParam=function(){return this._columnsAsString(this.showColumns)},t.prototype.editColumnsParam=function(){return this._columnsAsString(this.editColumns)},t.prototype._columnsAsString=function(n){return _.map(n,function(n){var t;return t=""+n.full_name,null!=n.type&&(t+=":"+n.type),t}).join(",")},t.prototype._columnIndex=function(n){return _.findIndex(this.editColumns,function(t){return t.full_name===n})},t.prototype.initializePublishingDatetimePicker=function(){$("[data-rel=publish_datepicker]").datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0});$("[data-rel=publish_timepicker]").timepicker2()},t}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.SpreadsheetNavigator=function(){function t(t){this.node=t;this.focusCursor=n(this.focusCursor,this);this.applyMultiEdit=n(this.applyMultiEdit,this);this.customApplyMultiEdit=n(this.customApplyMultiEdit,this);this.multiselectDrag=n(this.multiselectDrag,this);this.stopDragging=n(this.stopDragging,this);this.startDragClick=n(this.startDragClick,this);this.clickHandler=n(this.clickHandler,this);this.preventClickIfShiftClicking=n(this.preventClickIfShiftClicking,this);this.keypressHandler=n(this.keypressHandler,this);this.outsideClickHandler=n(this.outsideClickHandler,this);$(this.node).on("keydown",this.keypressHandler);$(this.node).on("mousedown",this.clickHandler);$(this.node).on("click",this.preventClickIfShiftClicking);$(this.node).on("turbograft:remote:done",this.clearSelection);$(document).on("mouseup.spreadsheet",this.stopDragging);$(document).on("mousedown.spreadsheet",this.outsideClickHandler);this.multiEditing=!1;this.dragging=!1;this.autoFocusFirstCell();Page.onReplace(this.node,function(){return $(document).off("mousedown.spreadsheet",this.outsideClickHandler),$(document).off("mouseup.spreadsheet",this.stopDragging)})}var r=9,i={CELL:"spreadsheet__cell",CELL_SELECTABLE:"spreadsheet__cell--selectable",HOVER_CELL:"spreadsheet__cell--visually-focused",CURSOR_CELL:"spreadsheet__cell--focused",ROW:"spreadsheet__row",ROW_GROUP:"spreadsheet__row-group"};return t.prototype.autoFocusFirstCell=function(){var n;return n=this._cellInputElements($(".spreadsheet__cell--selectable:first")).first(),n.length?(this._updateCursorCell(n.closest("."+i.CELL)),n.focus()):void 0},t.prototype.outsideClickHandler=function(n){return $(this.node).is(n.target)||0!==$(this.node).has(n.target).length?!0:(this.clearSelection(),!0)},t.prototype.keypressHandler=function(n){var i,t;return t=n.which,this._ignoreKeypressHandler(n,t)?!0:(i=this._keyPressTargetCell(n),this._handleNavInput(i,t,n)?!1:this._handleMultiSelectInput(i,t,n)?!1:this._handleInput(i,t)?!0:!1)},t.prototype._ignoreKeypressHandler=function(n,t){if($(n.target).is("textarea:focus"))return t===Bizweb.Keycodes.UP||t===Bizweb.Keycodes.DOWN||t===Bizweb.Keycodes.ENTER},t.prototype._handleNavInput=function(n,t,i){if(i.metaKey||i.altKey||i.shiftKey&&t!==Bizweb.Keycodes.TAB)return!1;switch(t){case Bizweb.Keycodes.UP:this._hoverPreviousSimilarCell(n);break;case Bizweb.Keycodes.DOWN:this._hoverNextSimilarCell(n);break;case Bizweb.Keycodes.LEFT:if(!this.cursorActive())return!1;this._hoverPrevCell(n);break;case Bizweb.Keycodes.RIGHT:if(!this.cursorActive())return!1;this._hoverNextCell(n);break;case Bizweb.Keycodes.TAB:i.shiftKey?this._hoverPrevCell(n):this._hoverNextCell(n);break;case Bizweb.Keycodes.ESCAPE:this._updateCursorCell(n);break;default:return!1}return!0},t.prototype._handleMultiSelectInput=function(n,t,i){if(!(i.metaKey||i.altKey||i.shiftKey))return!1;switch(t){case Bizweb.Keycodes.UP:return this._setHovered(this.$cursorCell),this._pushPrevSimilarCell(n),!0;case Bizweb.Keycodes.DOWN:return this._setHovered(this.$cursorCell),this._pushNextSimilarCell(n),!0}},t.prototype._handleInput=function(n,t){return this.cursorActive()&&(this.multiSelection()&&(this._updateCursorCell(n,!1),this.bindMultiEdit()),t!==Bizweb.Keycodes.SHIFT&&t!==Bizweb.Keycodes.COMMAND&&(this._selectCellInputElement(n),t===Bizweb.Keycodes.ENTER))?!1:!0},t.prototype.preventClickIfShiftClicking=function(){return this.preventClickEventOnCell?(this.preventClickEventOnCell=!1,!1):!0},t.prototype.clickHandler=function(n){var t;return t=this._evtTargetCell(n),this._selectable(t)?this.$cursorCell?this.multiSelectionClick(n,t)?!1:this.startMultiEditClick(n,t)?!0:this.startDragClick(n,t)?!1:this.matchesCursor(t)?(this._unsetHovered(this.$cursorCell),!0):this._setNewCursorClick(n,t):this._setNewCursorClick(n,t):(this.clearSelection(),!0)},t.prototype.startDragClick=function(n,t){var i,u;return i=n.offsetX||n.pageX-$(n.target).offset().left,u=n.offsetY||n.pageY-$(n.target).offset().top,this.matchesCursor(t)&&r>i&&t.height()-u<r?(this.focusCursor(),this.dragging=!0,$(this.node).on("mousemove.spreadsheet",_.debounce(this.multiselectDrag,10)),!0):void 0},t.prototype.stopDragging=function(){return this.dragging&&this.$cursorCell&&this.focusCursor(),$(this.node).off("mousemove.spreadsheet"),this.dragging=!1,!0},t.prototype.multiselectDrag=function(n){var t,i;return i=this._rowFor(this._evtTargetCell(n)),t=i.find(this._cellClassSelector(this.$cursorCell[0])),this.matchesCursor(t)&&this.clearSelection(!1),t.length?(this.clearSelection(!1),this.selectedCells=[this.$cursorCell[0]],this.clickedCellAboveCurrentCell(t,this.$cursorCell)?this.highlightUpTowards(t):this.highlightDownTowards(t)):void 0},t.prototype._setNewCursorClick=function(n,t){return this._updateCursorCell(t),n.preventDefault(),!1},t.prototype.startMultiEditClick=function(n,t){if(this.multiSelection()&&this.selected(t[0])&&!this.multiEditing)return(this._setHovered(this.$cursorCell),this._updateCursorCell(t,!1),this.bindMultiEdit(),this._unsetHovered(this.$cursorCell),!0)},t.prototype.multiSelectionClick=function(n,t){var i;return n.metaKey||n.altKey||n.shiftKey?(this.matchesCursorColumn(t)?n.shiftKey?(i=this.$cursorCell,this.clearSelection(!1),this.selectedCells=[i[0]],this.clickedCellAboveCurrentCell(t,i)?this.highlightUpTowards(t):this.highlightDownTowards(t),this._updateCursorCell(i,!1),this.preventClickEventOnCell=!0):(this._setHovered(this.$cursorCell),this._pushCell(t),this._setHovered(this.$cursorCell)):this._updateCursorCell(t),!0):!1},t.prototype.clickedCellAboveCurrentCell=function(n,t){var r,u;return r=n.closest("."+i.ROW_GROUP).index(),u=t.closest("."+i.ROW_GROUP).index(),r===u?n.closest("."+i.ROW).index()<t.closest("."+i.ROW).index():u>r},t.prototype.highlightUpTowards=function(n){for(var t=this._prevSimilarCell(this.$cursorCell),i=[];!this.selected(n[0]);)this.selectedCells.push(t[0]),this._setHovered(t),i.push(t=this._prevSimilarCell(t));return i},t.prototype.highlightDownTowards=function(n){for(var t=this._nextSimilarCell(this.$cursorCell),i=[];!this.selected(n[0]);)this.selectedCells.push(t[0]),this._setHovered(t),i.push(t=this._nextSimilarCell(t));return i},t.prototype.matchesCursorColumn=function(n){var t;return(null!=(t=this.$cursorCell)?t.length:void 0)?n.filter(this._cellClassSelector(this.$cursorCell[0])).length>0:!1},t.prototype.matchesCursor=function(n){return this.$cursorCell&&this.$cursorCell.length?n[0]===this.$cursorCell[0]:!1},t.prototype.customApplyMultiEdit=function(){var n,i,r,e,t,o,u,f;for(u=this.selectedCells,f=[],t=0,o=u.length;o>t;t++)i=u[t],this.matchesCursor($(i))||(n=$("[data-input-change]",i).first(),r=Bindings.context(n[0])[n.attr("context")],e=n.data("input-change"),f.push(r[e].apply(r,arguments)));return f},t.prototype.applyMultiEdit=function(n){var i,t,f,r,u,h,e,o,s;if(this.selectedCells&&(u=this._cellInputElements(this.$cursorCell).index(n.target),u>=0)){for(t=$(n.target),s="checkbox"===t[0].type?t[0].checked:t[0].value,e=this.selectedCells,o=[],r=0,h=e.length;h>r;r++)f=e[r],this.matchesCursor($(f))||(i=this._cellInputElements($(f)),"checkbox"===t[0].type?i[u].checked=s:$(i[u]).val(s),o.push(i.change()));return o}},t.prototype.multiSelection=function(){var n;return(null!=(n=this.selectedCells)?n.length:void 0)>1},t.prototype.selected=function(n){return $.inArray(n,this.selectedCells)>=0},t.prototype.clearSelection=function(n){return null==n&&(n=!0),this.selectedCells&&this._unsetHovered($(this.selectedCells)),this.unbindMultiEdit(),this.selectedCells=null,n&&this.stopDragging(),n?this.clearCursor():void 0},t.prototype.unbindMultiEdit=function(){if(this.$cursorCell)return(this._cellInputElements(this.$cursorCell).off(".multiedit"),this.$cursorCell.off("spreadsheet-cell:change"),this.multiEditing=!1)},t.prototype.bindMultiEdit=function(){var n;if(this.$cursorCell)return(this.multiEditing=!0,this.$cursorCell.data("custom-input")?this.$cursorCell.on("spreadsheet-cell:change",this.customApplyMultiEdit):(n=this._cellInputElements(this.$cursorCell),n.on("input.multiedit change.multiedit",this.applyMultiEdit)))},t.prototype.clearCursor=function(n){var t;return null==n&&(n=!0),null!=(t=this.$cursorCell)&&t.removeClass(i.CURSOR_CELL),n&&this._unsetHovered(this.$cursorCell),this.$cursorCell=null},t.prototype.cursorActive=function(){var n;if(null!=(n=this.$cursorCell))return n.hasClass(i.HOVER_CELL)},t.prototype.focusCursor=function(){return this._setHovered(this.$cursorCell),this.$cursorCell.focus()},t.prototype._unsetHovered=function(n){if(null!=n)return n.removeClass(i.HOVER_CELL)},t.prototype._setHovered=function(n){if(null!=n)return n.addClass(i.HOVER_CELL)},t.prototype._toggleSelectedCell=function(n,t){var i;if(null==t&&(t=!0),!this.selectedCells)return this.selectedCells=[n];if((i=$.inArray(n,this.selectedCells))<0)return this.selectedCells.push(n),this._setHovered($(n));if(t){if(this.selectedCells.splice(i,1),!this.matchesCursor($(n)))return this._unsetHovered($(n));if(this.clearCursor($(n)),this.selectedCells.length)return this.$cursorCell=$(this.selectedCells).first()}},t.prototype._updateCursorCell=function(n,t){var r;return null==t&&(t=!0),t&&this.clearSelection(),this.unbindMultiEdit(),null!=(r=this.$cursorCell)&&r.removeClass(i.CURSOR_CELL),this.$cursorCell=n,this.$cursorCell.addClass(i.CURSOR_CELL),this._toggleSelectedCell(n[0],t),this.focusCursor()},t.prototype._evtTargetCell=function(n){return $(n.target).closest("."+i.CELL)},t.prototype._cellInputElements=function(n){return n.find(":input").not("[type='hidden']")},t.prototype._keyPressTargetCell=function(n){return this.$cursorCell||this._evtTargetCell(n)},t.prototype._pushPrevSimilarCell=function(n){var t;return t=this._prevSimilarCell(n),(null!=t?t.length:void 0)&&this.selectedCells.length>1&&this.selected(t[0])&&this._toggleSelectedCell(n[0]),(null!=t?t.length:void 0)?this._updateCursorCell(t,!1):void 0},t.prototype._pushNextSimilarCell=function(n){var t;return t=this._nextSimilarCell(n),(null!=t?t.length:void 0)&&this.selectedCells.length>1&&this.selected(t[0])&&this._toggleSelectedCell(n[0]),(null!=t?t.length:void 0)?this._updateCursorCell(t,!1):void 0},t.prototype._pushCell=function(n){return this.selected(n[0])?this._toggleSelectedCell(n[0],!0):this._updateCursorCell(n,!1)},t.prototype._hoverNextSimilarCell=function(n){var t;return t=this._nextSimilarCell(n),(null!=t?t.length:void 0)?this._updateCursorCell(t):void 0},t.prototype._hoverPreviousSimilarCell=function(n){var t;return t=this._prevSimilarCell(n),(null!=t?t.length:void 0)?this._updateCursorCell(t):void 0},t.prototype._hoverPrevCell=function(n){var t;return t=this._prevCell(n),(null!=t?t.length:void 0)?this._updateCursorCell(t):void 0},t.prototype._hoverNextCell=function(n){var t;return t=this._nextCell(n),(null!=t?t.length:void 0)?this._updateCursorCell(t):void 0},t.prototype._selectCellInputElement=function(n){var i=n.find("[spreadsheet-popover-trigger]"),r,t;i.length>0&&(r=i.siblings(".next-popover"),r.length>0&&Bizweb.UIPopover["for"](r[0]).isActive()&&i.click());t=n.find(":input").not("[type='hidden']").first();this._unsetHovered(this.$cursorCell);(null!=t?t.length:void 0)?"SELECT"===t[0].tagName||"checkbox"===t[0].type?t[0].focus():t[0].select():void 0},t.prototype._prevCell=function(n){var t;return t=n.prev("."+i.CELL_SELECTABLE),t.length?t:this._lastSelectableCellOf(this._prevSelectableRowFor(n))},t.prototype._nextCell=function(n){var t;return t=n.next("."+i.CELL_SELECTABLE),t.length?t:this._firstSelectableCellOf(this._nextSelectableRowFor(n))},t.prototype._prevSimilarCell=function(n,t){var i,r;return t||(t=this._cellClassSelector(n[0])),i=this._prevRowFor(n),i.length?(r=i.find(t),r.length?r:this._prevSimilarCell(this._firstCellOf(i),t)):void 0},t.prototype._nextSimilarCell=function(n,t){var i,r;return t||(t=this._cellClassSelector(n[0])),i=this._nextRowFor(n),i.length?(r=i.find(t),r.length?r:this._nextSimilarCell(this._firstCellOf(i),t)):void 0},t.prototype._lastCellOf=function(n){if(null!=n)return n.find("."+i.CELL).last()},t.prototype._firstCellOf=function(n){if(null!=n)return n.find("."+i.CELL).first()},t.prototype._lastSelectableCellOf=function(n){if(null!=n)return n.find("."+i.CELL_SELECTABLE).last()},t.prototype._firstSelectableCellOf=function(n){if(null!=n)return n.find("."+i.CELL_SELECTABLE).first()},t.prototype._prevRowFor=function(n){var t;return t=this._prevGroupedRowFor(n),t.length?t:this._lastRowOfGroup(this._prevRowGroupFor(n))},t.prototype._nextSelectableRowFor=function(n){var t;return t=this._nextRowFor(n),t.length?t.find("."+i.CELL_SELECTABLE).length?t:this._nextSelectableRowFor(this._firstCellOf(t)):null},t.prototype._prevSelectableRowFor=function(n){var t;return t=this._prevRowFor(n),t.length?t.find("."+i.CELL_SELECTABLE).length?t:this._prevSelectableRowFor(this._lastCellOf(t)):null},t.prototype._nextRowFor=function(n){var t;return t=this._nextGroupedRowFor(n),t.length?t:this._firstRowOfGroup(this._nextRowGroupFor(n))},t.prototype._nextRowGroupFor=function(n){return $(this._rowGroupFor(n)).next()},t.prototype._prevRowGroupFor=function(n){return $(this._rowGroupFor(n)).prev()},t.prototype._prevGroupedRowFor=function(n){return $(this._rowFor(n)).prev("."+i.ROW)},t.prototype._nextGroupedRowFor=function(n){return $(this._rowFor(n)).next("."+i.ROW)},t.prototype._lastRowOfGroup=function(n){return $(n).find("."+i.ROW).last()},t.prototype._firstRowOfGroup=function(n){return $(n).find("."+i.ROW).first()},t.prototype._rowFor=function(n){return n.closest("."+i.ROW)},t.prototype._rowGroupFor=function(n){return n.closest("."+i.ROW_GROUP)},t.prototype._selectable=function(n){if(null!=n)return n.hasClass(i.CELL_SELECTABLE)},t.prototype._cellClassSelector=function(n){var t;return t=n.className.split(" "),"."+_.difference(t,[i.HOVER_CELL,i.CURSOR_CELL]).join(".")},t}()}.call(this),function(){var n,r,i,u,t,f,e,o;n="next-textarea--expanding";r="only-when-printing";i=["borderBottomWidth","borderTopWidth","borderLeftWidth","borderRightWidth","paddingTop","paddingBottom","textTransform","whiteSpace","wordBreak","wordSpacing","wordWrap","letterSpacing","lineHeight","fontFamily","fontSize","fontSizeAdjust","fontStyle","fontVariant","fontWeight","boxSizing"];u=["borderBottomWidth","borderTopWidth","paddingBottom","paddingTop"];t=null;$(document).on("ready",function(){return $(document).on("focus."+n,"."+n,f).on("input."+n,"."+n,e),$(window).on("resize."+n,_.debounce(o,50,{leading:!0}))});$(document).on("ready page:load",function(){var i;return t=function(){var t,f,r,u;for(r=document.querySelectorAll("."+n),u=[],t=0,f=r.length;f>t;t++)i=r[t],u.push(Bizweb.NextExpandingTextarea.forNode(i));return u}()});f=function(n){var t;if(null!=(t=$(n.target).data("next-expanding-textarea")))return t.onFocus()};e=function(n){var t,i;return null!=(t=$(n.target).data("next-expanding-textarea"))&&t.resize(),null!=(i=$(n.target).data("next-expanding-textarea"))?i.updatePrintArea():void 0};o=function(){var n,r,i,u;for(i=[],n=0,r=t.length;r>n;n++)u=t[n],i.push(u.resizeIfVisible());return i};Bizweb.NextExpandingTextarea=function(){function n(n){this.textArea=n;this.$textArea=$(this.textArea);this.$printArea=$('<div class="'+r+'"><\/div>');this.$printArea.insertAfter(this.$textArea);this.updatePrintArea();this.heightTester=this._newHeightTester();this.$textArea.after(this.heightTester);this.$textArea.is(":visible")&&(this._extraVerticalSpace=this._calculateVerticalSpace(),this.resize());this.$textArea.data("next-expanding-textarea",this)}return n.forNode=function(n){return $(n).data("next-expanding-textarea")||new Bizweb.NextExpandingTextarea(n)},n.prototype.resize=function(){var n;return null==this._extraVerticalSpace&&(this._extraVerticalSpace=this._calculateVerticalSpace()),this.heightTester.value=this.textArea.value||this.textArea.getAttribute("placeholder"),n=this.heightTester.scrollHeight+this._extraVerticalSpace,this.textArea.style.height=n+"px"},n.prototype.resizeIfVisible=function(){if(this.$textArea.is(":visible"))return this.resize()},n.prototype.onFocus=function(){return null!=this._extraVerticalSpace?this._extraVerticalSpace:this._extraVerticalSpace=this.calculateVerticalSpace()},n.prototype.updatePrintArea=function(){return this.$printArea.html(this.filterHTML(this.$textArea.val()))},n.prototype.filterHTML=function(n){return $("<div/>").text(n).html().replace(/\n/g,"<br>")},n.prototype._calculateVerticalSpace=function(){var n;return n=window.getComputedStyle(this.textArea,null),u.reduce(function(t,i){return t+parseInt(n[i])},0)},n.prototype._newHeightTester=function(){var n,r,o,s,u,h,e,t,f;if(n=document.createElement("textarea"),n.tabIndex="-1",n.value=this.textArea.value,f=window.getComputedStyle(this.textArea,null),t={minHeight:0,height:0,position:"absolute",minWidth:"100%",visibility:"hidden",zIndex:-1,top:0,paddingLeft:"10px",paddingRight:"10px",pointerEvents:"none"},null!=(h=f.cssText)?h.length:void 0)n.style.cssText=f.cssText;else for(r=0,o=i.length;o>r;r++)u=i[r],t[u]||(t[u]=f[u]);for(e in t)s=t[e],n.style[e]=s;return n.classList.add("js-no-dirty"),n},n}()}.call(this),function(){Bizweb.SpreadsheetColumn=function(){function n(n,t,i){this.node=n;this.bulkEditor=t;this.form=i;this.$cellNode=$(this.node).parents(".spreadsheet__cell")}return n.prototype.triggerCellChange=function(n,t){var i;return null==t&&(t={}),i={action:n},i=_.merge(i,t),this.form.$form.change(),this.$cellNode.trigger("spreadsheet-cell:change",i)},n}()}.call(this),function(){Bizweb.Number={condensed:function(n,t){if(null!=n)return n>999999999?Math.floor(n/1e8)/10+"b":n>999999?Math.floor(n/1e5)/10+"m":n>999?Math.floor(n/100)/10+"k":this.withDelimiter(this.withPrecision(n,t))},percentage:function(n,t){return null==n&&(n=0),null==t&&(t=null),n=Math.abs(n),null==t&&(t=1>n&&0!==n?1:0),this.withDelimiter(this.withPrecision(n,t),",")+"%"},withPrecision:function(n,t){return null==t?n:(+n).toFixed(t)},withDelimiter:function(n,t){var i;return null==n&&(n=""),null==t&&(t=","),i=n.toString().split("."),i[0]=i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+t),i.join(".")},parseInteger:function(n){return n=parseInt(n,10),isFinite(n)||(n=0),n},isInteger:function(n){return!isNaN(n)&&parseInt(Number(n))===n},isFraction:function(n){return Math.floor(n)!==n}}}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.InventoryOptions=function(){function t(t,i,r){this.initialInventory=t;this.inventoryManagement=i;null==r&&(r={});this.quantityFocused=n(this.quantityFocused,this);this.quantity=this.initialInventory;this.adjustment=0;this.onAdjustmentUpdated=r.onAdjustmentUpdated;this.onQuantityUpdated=r.onQuantityUpdated;this.onAdjustmentIncremented=r.onAdjustmentIncremented;this.onAdjustmentDecremented=r.onAdjustmentDecremented}return t.prototype.adjustmentUpdated=function(){return this.updateQuantityFromAdjustment(),"function"==typeof this.onAdjustmentUpdated?this.onAdjustmentUpdated():void 0},t.prototype.quantityUpdated=function(){return this.adjustment=Bizweb.Number.parseInteger(this.quantity)-this.initialInventory,"function"==typeof this.onQuantityUpdated?this.onQuantityUpdated():void 0},t.prototype.updateQuantityFromAdjustment=function(){return this.quantity=this.initialInventory+Bizweb.Number.parseInteger(this.adjustment)},t.prototype.increaseAdjustment=function(){return this.adjustment=Bizweb.Number.parseInteger(this.adjustment)+1,this.updateQuantityFromAdjustment(),"function"==typeof this.onAdjustmentIncremented&&this.onAdjustmentIncremented(),!1},t.prototype.decreaseAdjustment=function(){return this.adjustment=Bizweb.Number.parseInteger(this.adjustment)-1,this.updateQuantityFromAdjustment(),"function"==typeof this.onAdjustmentDecremented&&this.onAdjustmentDecremented(),!1},t.prototype.allowInventoryAdjustment=function(){return"bizweb"===this.inventoryManagement},t.prototype.inventoryManagementEnabled=function(){return!_.isEmpty(this.inventoryManagement)},t.prototype.quantityFocused=function(n){if(!this.allowInventoryAdjustment())return n.stopPropagation()},t}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t=function(n,t){function u(){this.constructor=n}for(var r in t)i.call(t,r)&&(n[r]=t[r]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n},i={}.hasOwnProperty;Bizweb.InventoryColumn=function(i){function r(t,i,u,f,e){this.quantityUpdated=n(this.quantityUpdated,this);this.adjustmentDecremented=n(this.adjustmentDecremented,this);this.adjustmentIncremented=n(this.adjustmentIncremented,this);this.adjustmentUpdated=n(this.adjustmentUpdated,this);r.__super__.constructor.call(this,t,i,u);this.inventoryOptions=new Bizweb.InventoryOptions(f,e,{onAdjustmentUpdated:this.adjustmentUpdated,onAdjustmentIncremented:this.adjustmentIncremented,onAdjustmentDecremented:this.adjustmentDecremented,onQuantityUpdated:this.quantityUpdated})}return t(r,i),r.prototype.updateInventory=function(n,t){switch(t.action){case"adjustment":return this.inventoryOptions.adjustment=t.adjustment,this.inventoryOptions.adjustmentUpdated();case"increment":return this.inventoryOptions.adjustment=this.inventoryOptions.adjustment+1,this.inventoryOptions.adjustmentUpdated();case"decrement":return this.inventoryOptions.adjustment=this.inventoryOptions.adjustment-1,this.inventoryOptions.adjustmentUpdated();default:return this.inventoryOptions.quantity=t.quantity,this.inventoryOptions.quantityUpdated()}},r.prototype.adjustmentUpdated=function(){return this.triggerCellChange("adjustment",{adjustment:this.inventoryOptions.adjustment})},r.prototype.adjustmentIncremented=function(){return this.triggerCellChange("increment")},r.prototype.adjustmentDecremented=function(){return this.triggerCellChange("decrement")},r.prototype.quantityUpdated=function(){return this.triggerCellChange("update",{quantity:this.inventoryOptions.quantity})},r}(Bizweb.SpreadsheetColumn)}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t=function(n,t){function u(){this.constructor=n}for(var r in t)i.call(t,r)&&(n[r]=t[r]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n},i={}.hasOwnProperty,r='<li class="next-token next-token--clickable js-tag" data-tag="{{ tag }}"><span class="next-token__label js-tag-text">{{ tag }}<\/span><\/li>',u="<li>&nbsp;<\/li>";Bizweb.TagColumn=function(i){function f(t,i,u){this.tagRemoved=n(this.tagRemoved,this);this.tagAdded=n(this.tagAdded,this);f.__super__.constructor.call(this,t,i,u);this.$_tagShortlist=$("[data-tag-shortlist]",this.node).first();this._tagTemplate=r}return t(f,i),f.prototype.toggleTag=function(n,t){var i;return i=t.tag,"addTag"===t.action?this.taggable.addTag(i):this.taggable.removeTag(i)},f.prototype.tagAdded=function(n){this.redrawTagList();this.triggerCellChange("addTag",{tag:n})},f.prototype.tagRemoved=function(n){this.redrawTagList();this.triggerCellChange("removeTag",{tag:n})},f.prototype.redrawTagList=function(){for(var t="",i=this.taggable.getTags(),f,n=0,r=i.length;r>n;n++)f=i[n],t+=this._tagTemplate.replace(/{{ tag }}/g,f);this.$_tagShortlist.html(t);this.$_tagShortlist.append(u)},f}(Bizweb.SpreadsheetColumn)}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.TagitExtension=function(){function t(t,i){this.options=null!=i?i:{};this.hideErrorMessage=n(this.hideErrorMessage,this);this.onTagExists=n(this.onTagExists,this);this.onTagExceedsMaxLength=n(this.onTagExceedsMaxLength,this);this.$node=$(t);this.$tagIt=this.$node.find("[tagit]");this.$errorTagTooltip=$(".tooltip-error",this.$node);this.placeholderText=this.options.placeholderText}return t.prototype.initTagit=function(n){return null==n&&(n={}),this.$tagIt.tagit(_.defaults(n,this.options,{caseSensitive:!1,allowDuplicates:!1,allowSpaces:!0,animate:!1,placeholderText:this.placeholderText,onTagExceedsMaxLength:this.onTagExceedsMaxLength,onTagExists:this.onTagExists}))},t.prototype.getTags=function(){return this.$tagIt.tagit("assignedTags")},t.prototype.onTagExceedsMaxLength=function(){return this.showErrorMessage(this.options.maxLengthError||"Giới hạn của tag là "+this.$tagIt.tagit("getTagMaxLength")+" ký tự.")},t.prototype.onTagExists=function(){return this.showErrorMessage(this.options.tagExistsError||"Oops, Bạn đã chọn tag này rồi.")},t.prototype.showErrorMessage=function(n){var t=$("ul.next-token-list .tagit-new",this.$errorTagTooltip.parent());this.$errorTagTooltip.css("margin-left",t.position().left);this.$errorTagTooltip.css("top",t.position().top+t.height());this.errorMessage=n;Bindings.refreshImmediately();clearTimeout(this.errorTimeout);this.errorTimeout=setTimeout(this.hideErrorMessage,5e3)},t.prototype.hideErrorMessage=function(){clearTimeout(this.errorTimeout);null!=this.errorMessage?(this.errorMessage=null,Bindings.refreshImmediately()):void 0},t.prototype.showPlaceholderText=function(){return this.getTags().length?this.$tagIt.find("input.ui-autocomplete-input").prop("placeholder",""):this.$tagIt.find("input.ui-autocomplete-input").prop("placeholder",this.placeholderText)},t}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t=function(n,t){function u(){this.constructor=n}for(var r in t)i.call(t,r)&&(n[r]=t[r]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n},i={}.hasOwnProperty;Bizweb.Taggable=function(i){function r(t,i){this.addTagOnClick=n(this.addTagOnClick,this);this.removeTag=n(this.removeTag,this);this.addTag=n(this.addTag,this);var u;this.onTagsUpdated=i.onTagsUpdated;i.onTagsUpdated=null;this.onTagAdded=i.onTagAdded;i.onTagAdded=null;this.onTagRemoved=i.onTagRemoved;i.onTagRemoved=null;r.__super__.constructor.apply(this,arguments);this.placeholderText=null!=(u=this.options.placeholderText)?u:"Vintage, cotton, summer";this.$form=$(this.options.formSelector);this.errorMessage=null;this.setupTagIt();this.$node.on("click",".previous-tags .js-tag",this.addTagOnClick);this.previousTags=_.map($(".js-addtags .js-tag",this.$node),function(n){return Bizweb.Inflection.generateAlias(n.textContent.trim())});this.checkIfEmpty()}return t(r,i),r.prototype.findFormObject=function(){var t,i,r,n;t=Bindings.context(this.$form[0]);for(i in t)if(n=t[i],n instanceof Bizweb.Form&&(null!=n&&null!=(r=n.$form)?r[0]:void 0)===this.$form[0])return n},r.prototype.setupTagIt=function(){return this._initializing=!0,this.initTagit({fieldName:this.options.fieldName,tagMaxLength:this.options.tagMaxLength,autocomplete:{source:[]},afterTagRemoved:this.afterTagRemoved.bind(this),afterTagAdded:this.afterTagAdded.bind(this)}),this._initializing=!1},r.prototype.setDirty=function(){var n;if(!this._initializing)return(this.$form.trigger("change"),null!=(n=this.findFormObject())?n.makeDirty():void 0)},r.prototype.checkIfEmpty=function(){if(this.$tagIt)return(this.showPlaceholderText(),this.getTags().length||this.$hiddenEmptyNode?this.$hiddenEmptyNode?(this.$hiddenEmptyNode.remove(),delete this.$hiddenEmptyNode):void 0:(this.$hiddenEmptyNode=$("<input type='hidden' name='"+this.options.fieldName+"' value='' />"),this.$form.append(this.$hiddenEmptyNode)))},r.prototype.addTag=function(n){return this.$tagIt.tagit("createTag",n)},r.prototype.removeTag=function(n){return this.$tagIt.tagit("removeTagByLabel",n)},r.prototype.addTagOnClick=function(n){var t;return t=$(n.currentTarget),t.hasClass("next-token--is-disabled")?void 0:(this.$tagIt.tagit("createTag",t.text().trim()),t.addClass("next-token--is-disabled"))},r.prototype.renderTag=function(n){var t;return t=$("li.js-tag",this.$node).first().clone(),t.attr("data-tag",Bizweb.Inflection.generateAlias(n)).find("span").text(n),t.removeClass("next-token--is-disabled"),t},r.prototype.addPreviousTag=function(n){var t;if(n&&-1===this.previousTags.indexOf(Bizweb.Inflection.generateAlias(n)))return t=this.renderTag(n),this.getTags().indexOf(n)>=0&&t.addClass("next-token--is-disabled"),$(".js-addtags",this.$node).append(t)},r.prototype.showAllPreviousTags=function(n){var t;return t=$.ajax({url:this.options.allTagsUrl,type:"GET",dataType:"json"}),t.done(function(t){return function(i){var r,f,u,e;for(u=i.tags,r=0,f=u.length;f>r;r++)e=u[r],t.addPreviousTag(e);return $(n.currentTarget).remove()}}(this)),t.fail(Bizweb.handleError)},r.prototype.afterTagRemoved=function(n,t){var i;if(t.tagLabel)return i=$(".previous-tags li[data-tag="+Bizweb.Inflection.generateAlias(t.tagLabel)+"]",this.$node),i.removeClass("next-token--is-disabled"),!i.length&&t.tagLabel&&this.addPreviousTag(t.tagLabel),this.hideErrorMessage(),this.checkIfEmpty(),this.setDirty(),this.fireTagRemovedCallback(t.tagLabel),this.fireTagsUpdatedCallback()},r.prototype.afterTagAdded=function(n,t){var i;if(!t.duringInitialization)return this.hideErrorMessage(),i=$(".previous-tags li[data-tag="+Bizweb.Inflection.generateAlias(t.tagLabel)+"]",this.$node),i.addClass("next-token--is-disabled"),this.checkIfEmpty(),this.setDirty(),this.fireTagAddedCallback(t.tagLabel),this.fireTagsUpdatedCallback()},r.prototype.fireTagsUpdatedCallback=function(){if("function"==typeof this.onTagsUpdated)return this.onTagsUpdated(this.getTags())},r.prototype.fireTagAddedCallback=function(n){if("function"==typeof this.onTagAdded)return this.onTagAdded(n,this.getTags())},r.prototype.fireTagRemovedCallback=function(n){if("function"==typeof this.onTagRemoved)return this.onTagRemoved(n,this.getTags())},r}(Bizweb.TagitExtension)}.call(this),function(){var n,t,i;moment.locale("en",{longDateFormat:{LT:"h:mma",L:"MM/DD/YYYY",l:"M/D/YYYY",LL:"MMMM Do YYYY",ll:"MMM D YYYY",LLL:"MMMM Do YYYY LT",lll:"MMM D YYYY LT",LLLL:"dddd, MMMM Do YYYY LT",llll:"ddd, MMM D YYYY LT"},calendar:{lastDay:"[Yesterday at] LT",sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",lastWeek:"dddd [at] LT",nextWeek:"next dddd [at] LT",sameElse:"MMM D, LT"}});t=function(n){return moment.isMoment(n)?n.format("YYYY-MM-DD HH:mm:ss"):n instanceof Date?moment(n).format("YYYY-MM-DD HH:mm:ss"):n};n=function(){function n(n){this.moment=n}return n.prototype.inShop=function(){return new n(this.moment.clone().tz(Bizweb.Time.shopTz))},n.prototype.inLocal=function(){return new n(this.moment.clone().tz(Bizweb.Time.localTz))},n.prototype.formatInShop=function(n,t){var i,r;return null==n&&(n="YYYY-MM-DD"),null==t&&(t=!1),r=this.inShop().moment,i=r.format(n),Bizweb.Time.isDifferentTimezone()&&(n.match(/h|H/)||n.match(/LT/)||n.match(/l{3,}/i))&&!t&&(i+=" "+r.format("z")),i},n.prototype.formatInLocal=function(n){return null==n&&(n="YYYY-MM-DD"),this.inLocal().moment.format(n)},n}();Bizweb.Time={shopTz:null!=(i=Bizweb.store)?i.settings.tzinfo:void 0,localTz:function(){return jstz.determine().name()}(),fromShop:function(i){return new n(moment.tz(t(i),Bizweb.Time.shopTz))},fromLocal:function(i){return new n(moment.tz(t(i),Bizweb.Time.localTz))},fromUTC:function(i){return new n(moment.tz(t(i),"UTC"))},nowLocal:function(){return this.fromLocal(new Date)},nowShop:function(){return this.fromLocal(new Date).inShop()},isDifferentTimezone:function(){var t,n,r,u,f,i,e;for(e=moment.tz.zone(Bizweb.Time.shopTz),u=moment.tz.zone(Bizweb.Time.localTz),i=e.offsets,n=t=0,r=i.length;r>t;n=++t)if(f=i[n],u.offsets[n]!==f)return!0;return!1},shopTimeToNext30MinuteIncrement:function(){var n,t;return t=this.nowShop(),n=t.moment,n.minute()<30?n.minute(30):n.minute(60),n.startOf("minute"),t},fullMonthDayFormat:"MMMM D",fullMonthDayYearFormat:"MMMM D, YYYY",shortMonthDayTimeFormat:"MMM D, LT",shortMonthDayYearTimeFormat:"MMM D, YYYY, LT",shortMonthDayYearFormat:"MMM D, YYYY"}}.call(this),function(){Bizweb.FuturePublishing=function(){function n(n,t){t==null&&(t={});n=Bizweb.Time.fromShop(n);this.setPublishedAt(n);this.onPublishedAtChanged=t.onPublishedAtChanged}return n.prototype.publishedChanged=function(n){var t;return t=n.checked?Bizweb.Time.nowShop():null,this.setPublishedAt(t)},n.prototype.dateChanged=function(){var n;if(this.date)return n=moment(this.date),n.seconds(0),this.setPublishedAt(Bizweb.Time.fromShop(n))},n.prototype.setPublishedAt=function(n){this.isFuturePublished=!1;n!=null&&n.moment.isValid()?(this.published_at=n,this.isFuturePublished=this.published_at.moment>Bizweb.Time.nowShop().moment,this.published=!this.isFuturePublished,this.publishDateString=n.formatInShop("YYYY-MM-DD hh:mma"),this.date=n.formatInShop("YYYY-MM-DD"),this.time=n.formatInShop("hh:mma",!0)):(this.published_at=null,this.isFuturePublished=!1,this.published=!1,this.publishDateString=null,this.date=null,this.time=null);"function"==typeof this.onPublishedAtChanged?this.onPublishedAtChanged(n):void 0},n}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t=function(n,t){function u(){this.constructor=n}for(var r in t)i.call(t,r)&&(n[r]=t[r]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n},i={}.hasOwnProperty;Bizweb.PublishingColumn=function(i){function r(t,i,u,f){this.publishedAtChanged=n(this.publishedAtChanged,this);r.__super__.constructor.call(this,t,i,u);this.futurePublishing=new Bizweb.FuturePublishing(f,{onPublishedAtChanged:this.publishedAtChanged})}return t(r,i),r.prototype.updatePublishedAt=function(n,t){return this.futurePublishing.setPublishedAt(t.published_at)},r.prototype.publishedAtChanged=function(n){return this.triggerCellChange("update",{published_at:n})},r}(Bizweb.SpreadsheetColumn)}.call(this),function(){null==window.TurboGraft&&(window.TurboGraft={handlers:{}});TurboGraft.tgAttribute=function(n){return"tg-"===n.slice(0,3)?"data-"+n:"data-tg-"+n};TurboGraft.getTGAttribute=function(n,t){var i;return i=TurboGraft.tgAttribute(t),n.getAttribute(i)||n.getAttribute(t)};TurboGraft.removeTGAttribute=function(n,t){var i;return i=TurboGraft.tgAttribute(t),n.removeAttribute(i),n.removeAttribute(t)};TurboGraft.hasTGAttribute=function(n,t){var i;return i=TurboGraft.tgAttribute(t),null!=n.getAttribute(i)||null!=n.getAttribute(t)};TurboGraft.querySelectorAllTGAttribute=function(n,t,i){var r;return null==i&&(i=null),r=TurboGraft.tgAttribute(t),i?n.querySelectorAll("["+r+"="+i+"], ["+t+"="+i+"]"):n.querySelectorAll("["+r+"], ["+t+"]")}}.call(this),function(){var t,i,r,n;i=function(n,t){return n.classList.contains(t)};r=function(n){return n.getAttribute("disabled")||i(n,"disabled")};n=function(n,t,i){var r,u;if(null==i&&(i=null),r=n.getAttribute("href")||n.getAttribute("action"),!r)throw new Error("Turbograft developer error: You did not provide a URL ('"+urlAttribute+"' attribute) for data-tg-remote");return TurboGraft.getTGAttribute(n,"remote-once")&&(TurboGraft.removeTGAttribute(n,"remote-once"),TurboGraft.removeTGAttribute(n,"tg-remote")),u={httpRequestType:t,httpUrl:r,fullRefresh:null!=TurboGraft.getTGAttribute(n,"full-refresh"),refreshOnSuccess:TurboGraft.getTGAttribute(n,"refresh-on-success"),refreshOnSuccessExcept:TurboGraft.getTGAttribute(n,"full-refresh-on-success-except"),refreshOnError:TurboGraft.getTGAttribute(n,"refresh-on-error"),refreshOnErrorExcept:TurboGraft.getTGAttribute(n,"full-refresh-on-error-except")},new TurboGraft.Remote(u,i,n)};TurboGraft.handlers.remoteMethodHandler=function(t){var i,u,r;r=t.clickTarget;i=TurboGraft.getTGAttribute(r,"tg-remote");i&&(t.preventDefault(),u=n(r,i),u.submit())};TurboGraft.handlers.remoteFormHandler=function(t){var r,u,i;i=t.target;r=i.getAttribute("method");TurboGraft.hasTGAttribute(i,"tg-remote")&&(t.preventDefault(),u=n(i,r,i),u.submit())};t=function(n,t,i){return null==i&&(i=!1),document.addEventListener(n,function(n){for(var u,i=n.target;i!==document&&null!=i;){if(("A"===i.nodeName||"BUTTON"===i.nodeName)&&(u=r(i),u&&n.preventDefault(),!u))return n.clickTarget=i,void t(n);i=i.parentNode}})};t("click",TurboGraft.handlers.remoteMethodHandler,!0);document.addEventListener("submit",function(n){return TurboGraft.handlers.remoteFormHandler(n)})}.call(this),function(){TurboGraft.Remote=function(){function n(n,t,i){var u,f,e,r;this.opts=n;this.initiator=t||i;this.actualRequestType="get"===(null!=(f=this.opts.httpRequestType)?f.toLowerCase():void 0)?"GET":"POST";this.useNativeEncoding=this.opts.useNativeEncoding;this.formData=this.createPayload(t);this.opts.refreshOnSuccess&&(this.refreshOnSuccess=this.opts.refreshOnSuccess.split(" "));this.opts.refreshOnSuccessExcept&&(this.refreshOnSuccessExcept=this.opts.refreshOnSuccessExcept.split(" "));this.opts.refreshOnError&&(this.refreshOnError=this.opts.refreshOnError.split(" "));this.opts.refreshOnErrorExcept&&(this.refreshOnErrorExcept=this.opts.refreshOnErrorExcept.split(" "));r=new XMLHttpRequest;"GET"===this.actualRequestType?(e=this.formData?this.opts.httpUrl+("?"+this.formData):this.opts.httpUrl,r.open(this.actualRequestType,e,!0)):r.open(this.actualRequestType,this.opts.httpUrl,!0);r.setRequestHeader("X-Requested-With","XMLHttpRequest");r.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml");this.contentType&&r.setRequestHeader("Content-Type",this.contentType);r.setRequestHeader("X-XHR-Referer",document.location.href);u=CSRFToken.get().token;u&&r.setRequestHeader("X-CSRF-Token",u);triggerEventFor("turbograft:remote:init",this.initiator,{xhr:r,initiator:this.initiator});r.addEventListener("loadstart",function(n){return function(){return triggerEventFor("turbograft:remote:start",n.initiator,{xhr:r})}}(this));r.addEventListener("error",this.onError);r.addEventListener("load",function(n){return function(t){return r.status<400?n.onSuccess(t):n.onError(t)}}(this));r.addEventListener("loadend",function(n){return function(){var t;return"function"==typeof(t=n.opts).done&&t.done(),triggerEventFor("turbograft:remote:always",n.initiator,{initiator:n.initiator,xhr:r})}}(this));this.xhr=r}return n.prototype.submit=function(){return this.xhr.send(this.formData)},n.prototype.createPayload=function(n){var t;return t=n?this.useNativeEncoding||n.querySelectorAll("[type='file'][name]").length>0?this.nativeEncodeForm(n):this.uriEncodeForm(n):"",t instanceof FormData||(this.contentType="application/x-www-form-urlencoded; charset=UTF-8",-1===t.indexOf("_method")&&this.opts.httpRequestType&&"GET"!==this.actualRequestType&&(t=this.formAppend(t,"_method",this.opts.httpRequestType))),t},n.prototype.formAppend=function(n,t,i){return n.length&&(n+="&"),n+(encodeURIComponent(t)+"="+encodeURIComponent(i))},n.prototype.uriEncodeForm=function(n){var t;return t="",this._iterateOverFormInputs(n,function(n){return function(i){return t=n.formAppend(t,i.name,i.value)}}(this)),t},n.prototype.formDataAppend=function(n,t){var u,i,f,r;if("file"===t.type)for(r=t.files,i=0,f=r.length;f>i;i++)u=r[i],n.append(t.name,u);else n.append(t.name,t.value);return n},n.prototype.nativeEncodeForm=function(n){var t;return t=new FormData,this._iterateOverFormInputs(n,function(n){return function(i){return t=n.formDataAppend(t,i)}}(this)),t},n.prototype._iterateOverFormInputs=function(n,t){var r,i,o,f,s,e,u;for(f=this._enabledInputs(n),u=[],r=0,s=f.length;s>r;r++)i=f[r],o=!i.disabled,e="checkbox"===i.type||"radio"===i.type,o&&i.name&&(e&&i.checked||!e)?u.push(t(i)):u.push(void 0);return u},n.prototype._enabledInputs=function(n){var i,t,e,r,o,u,f,h,c,l,s;if(s="input:not([type='reset']):not([type='button']):not([type='submit']):not([type='image']), select, textarea",u=Array.prototype.slice.call(n.querySelectorAll(s)),t=Array.prototype.slice.call(TurboGraft.querySelectorAllTGAttribute(n,"tg-remote-noserialize")),!t.length)return u;for(i=t,r=0,h=t.length;h>r;r++)l=t[r],i=i.concat(Array.prototype.slice.call(l.querySelectorAll(s)));for(e=[],f=0,c=u.length;c>f;f++)o=u[f],i.indexOf(o)<0&&e.push(o);return e},n.prototype.onSuccess=function(n){var i,r,t;return"function"==typeof(i=this.opts).success&&i.success(),t=n.target,triggerEventFor("turbograft:remote:success",this.initiator,{initiator:this.initiator,xhr:t}),(r=t.getResponseHeader("X-Next-Redirect"))?void Page.visit(r,{reload:!0}):TurboGraft.hasTGAttribute(this.initiator,"tg-remote-norefresh")?void 0:this.opts.fullRefresh&&this.refreshOnSuccess?Page.refresh({onlyKeys:this.refreshOnSuccess}):this.opts.fullRefresh?Page.refresh():this.refreshOnSuccess?Page.refresh({response:t,onlyKeys:this.refreshOnSuccess}):this.refreshOnSuccessExcept?Page.refresh({response:t,exceptKeys:this.refreshOnSuccessExcept}):Page.refresh({response:t})},n.prototype.onError=function(n){var i,t;return"function"==typeof(i=this.opts).fail&&i.fail(),t=n.target,triggerEventFor("turbograft:remote:fail",this.initiator,{initiator:this.initiator,xhr:t}),TurboGraft.hasTGAttribute(this.initiator,"tg-remote-norefresh")?triggerEventFor("turbograft:remote:fail:unhandled",this.initiator,{xhr:t}):this.opts.fullRefresh&&this.refreshOnError?Page.refresh({onlyKeys:this.refreshOnError}):this.opts.fullRefresh?Page.refresh():this.refreshOnError?Page.refresh({response:t,onlyKeys:this.refreshOnError}):this.refreshOnErrorExcept?Page.refresh({response:t,exceptKeys:this.refreshOnErrorExcept}):triggerEventFor("turbograft:remote:fail:unhandled",this.initiator,{xhr:t})},n}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.AviaryEditor=function(){function t(){if(this.onClose=n(this.onClose,this),this.onSave=n(this.onSave,this),this.initialize=n(this.initialize,this),window.Aviary)this.initialize();else{var t=document.createElement("script");t.src="https://dme0ih8comzn4.cloudfront.net/imaging/v1/editor.js";t.addEventListener("load",this.initialize);document.body.appendChild(t)}}return t.prototype.initialize=function(){return this.aviaryModal=$(".aviary-modal-bg"),this.featherEditor=new Aviary.Feather({apiKey:Bizweb.config.aviary_api_key,enableCORS:!0,tools:"crop,resize,orientation,redeye,blemish,saturation,brightness,contrast,drawing,text,whiten,effects",cropPresets:["16x16","32x32","50x50","100x100","160x160","240x240","480x480","600x600","1024x1024","Custom","Original"],cropPresetDefault:"32x32",appendTo:this.aviaryModal.find(".aviary-modal")[0],maxSize:1920,theme:"light",onSave:this.onSave,onClose:this.onClose,onReady:function(n){return function(){return n.aviaryModal.addClass("visible")}}(this),onError:function(n){throw n.message;}})},t.prototype.launchEditor=function(n,t,i){var u,r;return this.callback=i,u=document.createElement("div"),u.id="aviaryTempImageContainer",r=document.createElement("img"),r.id="image-"+n+"x",r.setAttribute("style","display:none"),r.onload=function(n){return function(){return n.featherEditor.launch({image:r,url:t})}}(this),t?(r.src=t,u.appendChild(r),document.body.appendChild(u)):void 0},t.prototype.onSave=function(n,t){var i,r;return r=n.substring(0,n.length-1).replace(".jpeg","_compact.jpeg"),i=$("#"+r),i.attr("src",t.replace("http://","//s3.amazonaws.com/")),i.css("max-height","160px"),i.css("max-width","160px"),this.featherEditor.close(),"function"==typeof this.callback?this.callback(t):void 0},t.prototype.onClose=function(){return $("#aviaryTempImageContainer").remove(),this.aviaryModal.removeClass("visible")},t}()}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};Bizweb.DashboardActivity=function(){function n(){this.nextPage=2;this.isLoading=!1;this.activityContainer=$(".activity-container")}return n.prototype.loadMoreActivity=function(){var n=this;this.isLoading=!0;$.ajax({url:Bizweb.routes.activityFeed+"?page="+n.nextPage,complete:function(){n.isLoading=!1},success:function(t){n.nextPage+=1;n.activityContainer.append(t)}})},n}()}.call(this)}